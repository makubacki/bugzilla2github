<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.tianocore.org/page.cgi?id=bugzilla.dtd">

<bugzilla version="5.0.4"
          urlbase="https://bugzilla.tianocore.org/"
          
          maintainer="john.mathews@intel.com"
>

    <bug>
          <bug_id>1576</bug_id>
          
          <creation_ts>2019-02-28 03:13:43 +0000</creation_ts>
          <short_desc>SMM driver hang in DEBUG exception at accessing memory beyond 4G</short_desc>
          <delta_ts>2019-03-04 22:24:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          <deadline>2019-03-08</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6574</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-02-28 03:13:43 +0000</bug_when>
    <thetext>If a SMM driver tries to access memory beyond 4G in SMM mode, it will hang in DEBUG exception like below. This only happens if both PcdCpuSmmStaticPageTable and PcdCpuSmmProfileEnable are set to FALSE. 

!!!! X64 Exception Type - 01(#DB - Debug)  CPU Apic ID - 00000000 !!!!
RIP  - 00000000BF970552, CS  - 0000000000000038, RFLAGS - 0000000000000106
RAX  - 000000000000000B, RCX - 00000000000F4240, RDX - 00000000BF8F2A18
RBX  - 00000000BF977818, RSP - 00000000BFA3C8C0, RBP - 00000000BFA3C9F0
RSI  - 0000000000000000, RDI - 00000000BF977220
R8   - 0000000000000100, R9  - 0000000000000003, R10 - 00000000BF001000
R11  - 00000000BF8F2A18, R12 - 0000000000000000, R13 - 0000000000000002
R14  - 0000000000000001, R15 - 00000000BFBFB500
DS   - 0000000000000020, ES  - 0000000000000020, FS  - 0000000000000020
GS   - 0000000000000020, SS  - 0000000000000020
CR0  - 0000000080010033, CR2 - 0000002041000000, CR3 - 00000000BFA29000
CR4  - 0000000000000668, CR8 - 0000000000000000
DR0  - 0000000000000000, DR1 - 0000000000000000, DR2 - 0000000000000000
DR3  - 0000000000000000, DR6 - 00000000FFFF4FF0, DR7 - 0000000000000400
GDTR - 00000000BFA20000 000000000000004F, LDTR - 0000000000000000
IDTR - 00000000BFA32000 00000000000001FF,   TR - 0000000000000040
FXSAVE_STATE - 00000000BFA3C520</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6575</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-02-28 03:14:18 +0000</bug_when>
    <thetext>Take the ownership to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6614</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-04 22:24:54 +0000</bug_when>
    <thetext>Reviewed@https://lists.01.org/pipermail/edk2-devel/2019-February/037368.html
Pushed@2a93cccc24cfca12c66f13a41d52fb0a82fb924e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1927</bug_id>
          
          <creation_ts>2019-06-20 02:21:42 +0000</creation_ts>
          <short_desc>Build Cache very easily miss  because of monolithic platform hash</short_desc>
          <delta_ts>2019-08-20 22:56:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1875</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8135</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-20 02:21:42 +0000</bug_when>
    <thetext>The build cache uses the platform hash to decide whether current build should directly cache miss in platform level. The platform hash cover all platform packages meta files, which include all .fdf, .dsc and .dec files. Below is a example: the platform hash file list in KabylakeRvp3 platform. You can see the platform hash list is very big and so the platform hash is very monolithic actually. Any change in the platform hash list will cause the whole platform modules cache miss and have to rebuild completely. The monolithic platform hash cause the edk2 build cache not useful in practice. We must break it down and redesign the platform hash algorithm.


k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkg.dsc
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkgPei.dsc
k:\edk2\IntelFsp2WrapperPkg\IntelFsp2WrapperPkg.dec
k:\conf\tools_def.txt
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CoreSecurityPostMemoryInclude.fdf
k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkgPcd.dsc
k:\conf\build_rule.txt
k:\edk2-platforms\Silicon\Intel\IntelSiliconPkg\IntelSiliconPkg.dec
k:\edk2\IntelFsp2Pkg\IntelFsp2Pkg.dec
k:\edk2\MdePkg\MdePkg.dec
k:\edk2\PcAtChipsetPkg\PcAtChipsetPkg.dec
k:\FSP\AmberLakeFspBinPkg\FspPcds.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CorePreMemoryInclude.fdf
k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkg.fdf
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\KabylakeSiliconPrivate.dec
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkgDxeLib.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Dsc\CorePeiLib.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Dsc\CorePeiInclude.dsc
k:\FSP\AmberLakeFspBinPkg\AmberLakeFspBinPkg.dec
k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\OpenBoardPkg.dec
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Dsc\CoreDxeLib.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CorePostMemoryInclude.fdf
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Dsc\CoreDxeInclude.dsc
k:\edk2\ShellPkg\ShellPkg.dec
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkgCommonLib.dsc
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkgDxe.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\MinPlatformPkg.dec
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Dsc\CoreCommonLib.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CoreSecurityPreMemoryInclude.fdf
k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkgBuildOption.dsc
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkg.dec
k:\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\BuildOptions
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkgBuildOption.dsc
k:\edk2\UefiCpuPkg\UefiCpuPkg.dec
k:\edk2\NetworkPkg\NetworkPkg.dec
k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkgConfig.dsc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CoreSecurityLateInclude.fdf
k:\edk2\SecurityPkg\SecurityPkg.dec
k:\edk2\NetworkPkg\NetworkLibs.dsc.inc
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CoreOsBootInclude.fdf
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\CoreUefiBootInclude.fdf
k:\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\Include\Fdf\FlashMapInclude.fdf
k:\edk2-platforms\Silicon\Intel\KabylakeSiliconPkg\SiPkgPeiLib.dsc
k:\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\PcdTokenNumber
k:\edk2\MdeModulePkg\MdeModulePkg.dec
k:\edk2-platforms\Platform\Intel\MinPlatformPkg\Include\Fdf\RuleInclude.fdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8136</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-20 02:23:52 +0000</bug_when>
    <thetext>Confirm and take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8434</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-07-12 05:47:30 +0000</bug_when>
    <thetext>Current binary cache bases on the &apos;--hash&apos; featrue which depends on the monolithic platform and package meta files （dsc, fdf, dec), and cause the cache is very easy to miss. I collected some build cache data about current module dependency files number and percentage on a server platform and Ovmf platform. Overall, Ovmf module depends on 30~35% of all the platform build files, and the server platform module depends on **~70% ** of all the platform build files which is very bad. We should find a better way to more accurately and fine-grain collect the module dependency files. 
To solve this cache miss issue, I plan to implement the build cache only base on the module makefile information which are much more fine-grain.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8903</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-08 21:10:38 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/topic/patch_0_4_build_cache/32797737?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,32797737</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9021</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-15 23:46:30 +0000</bug_when>
    <thetext>The design slides in TianoCore Design Meeting are in below link:
https://edk2.groups.io/g/devel/files/Designs/2019/0726</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9022</commentid>
    <comment_count>5</comment_count>
      <attachid>381</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-15 23:48:31 +0000</bug_when>
    <thetext>Created attachment 381
Edk2BuildCacheEnhancement-v2

The copy of https://edk2.groups.io/g/devel/files/Designs/2019/0726/Edk2BuildCacheEnhancement-v2.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9047</commentid>
    <comment_count>6</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-16 21:26:47 +0000</bug_when>
    <thetext>[PATCH v6 0/5] Build cache enhancement:
https://edk2.groups.io/g/devel/message/45734?p=,,,20,0,0,0::Created,,Build+cache+enhancement,20,2,0,32887324

[PATCH v5 0/5] Build cache enhancement:
https://edk2.groups.io/g/devel/message/45634?p=,,,20,0,0,0::Created,,Build+cache+enhancement,20,2,0,32867355

[PATCH v4 0/5] Build cache enhancement
https://edk2.groups.io/g/devel/message/45627?p=,,,20,0,0,0::Created,,Build+cache+enhancement,20,2,0,32866759

[PATCH v3 0/5] Build cache enhancement
https://edk2.groups.io/g/devel/message/45504?p=,,,20,0,0,0::Created,,Build+cache+enhancement,20,2,0,32850696

[PATCH v2 0/4] Build cache enhancement 
https://edk2.groups.io/g/devel/message/45493?p=,,,20,0,0,0::Created,,Build+cache+enhancement,20,2,0,32849280

[PATCH 0/4] Build cache enhancement 
https://edk2.groups.io/g/devel/message/45170?p=,,,20,0,0,0::Created,,Build+cache+enhancement,20,2,0,32797737


This patch set is for the 201908 stable tag

Enhance the edk2 build cache with below patches:
Patch 01/05: Improve the cache hit rate through new cache checkpoint and hash algorithm
Patch 02/05: Print more info to explain why a module build cache miss
Patch 03/05: Fix the unsafe [self.Arch][self.Name] key usage in build cache
Patch 04/05  Add the GenFds multi-thread support in build cache
Patch 05/05  Improve the file saving and copying functions reliability in build cache


You can directly try this patch set in the branch:
https://github.com/shijunjing/edk2/tree/build_cache_improve_v6_3

V6:
In the patch 5, add error handling to skip hash calculation if find module cache
already crashed

V5:
Fix the method name typo in Misc.py from EdkLogger.quite() to EdkLogger.quiet()

V4:
Change single global lock into two locks, which are cache_lock and file_lock,
for better cache performance and IO reliability in windows

V3:
Add patch 5. To improve the autogen CopyFileOnChange() and SaveFileOnChange()
functions reliability for build cache

V2:
Enhance the SaveHashChainFileToCache() function in ModuleAutoGen.py and
not need to call f.close() in the &quot;with open(xxx) as f:&quot; block. The
with block will close the file automatically

V1:
Initial patch set

Shi, Steven (5):
  BaseTools: Improve the cache hit in the edk2 build cache
  BaseTools: Print first cache missing file for build cachle
  BaseTools: Change the [Arch][Name] module key in Build cache
  BaseTools: Add GenFds multi-thread support in build cache
  BaseTools: Improve the file saving and copying reliability

 .../Source/Python/AutoGen/AutoGenWorker.py    |  27 +-
 BaseTools/Source/Python/AutoGen/CacheIR.py    |  29 +
 BaseTools/Source/Python/AutoGen/DataPipe.py   |   6 +
 BaseTools/Source/Python/AutoGen/GenC.py       |   0
 BaseTools/Source/Python/AutoGen/GenMake.py    | 233 +++---
 .../Source/Python/AutoGen/ModuleAutoGen.py    | 791 ++++++++++++++++--
 BaseTools/Source/Python/Common/GlobalData.py  |  11 +
 BaseTools/Source/Python/Common/Misc.py        |  44 +-
 BaseTools/Source/Python/build/build.py        | 182 ++--
 9 files changed, 1073 insertions(+), 250 deletions(-)
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/AutoGen/AutoGenWorker.py
 create mode 100755 BaseTools/Source/Python/AutoGen/CacheIR.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/AutoGen/DataPipe.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/AutoGen/GenC.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/AutoGen/GenMake.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/AutoGen/ModuleAutoGen.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/Common/GlobalData.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/Common/Misc.py
 mode change 100644 =&gt; 100755 BaseTools/Source/Python/build/build.py</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9099</commentid>
    <comment_count>7</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-20 22:56:42 +0000</bug_when>
    <thetext>Fixed and pushed at 0e7e7a264cd80ab71ea0f9e9da2d0617d4b539c4</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>381</attachid>
            <date>2019-08-15 23:48:31 +0000</date>
            <delta_ts>2019-08-15 23:48:31 +0000</delta_ts>
            <desc>Edk2BuildCacheEnhancement-v2</desc>
            <filename>Edk2BuildCacheEnhancement-v2.pdf</filename>
            <type>application/pdf</type>
            <size>803980</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1540</bug_id>
          
          <creation_ts>2019-02-19 21:45:43 +0000</creation_ts>
          <short_desc>Header changes don’t result in incremental rebuild</short_desc>
          <delta_ts>2019-02-22 02:55:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6414</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-02-19 21:45:43 +0000</bug_when>
    <thetext>I found the header changes cannot really trigger any rebuild. Below is my testing steps. 

1.Build Ovmf firstly:
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -t CLANG38 -a IA32 -a X64 -b DEBUG

2.Change the Base.h and ProcessorBind.h, then check the status to make sure they are modified with &quot;git status&quot;.
 
3.Then, build again to see whether the modified header file can trigger the rebuilt:
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -t CLANG38 -a IA32 -a X64 -b DEBUG

But nothing is rebuilt!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6431</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:28:17 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6504</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-22 02:55:33 +0000</bug_when>
    <thetext>fixed on f747640bf333801062b3b8837e7cfcda75ad6215</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1577</bug_id>
          
          <creation_ts>2019-02-28 03:30:52 +0000</creation_ts>
          <short_desc>System Crash occasionally in WiFi Connection Manager</short_desc>
          <delta_ts>2019-02-28 21:46:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>fan.wang</reporter>
          <assigned_to>fan.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-03-03</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6576</commentid>
    <comment_count>0</comment_count>
    <who name="">fan.wang</who>
    <bug_when>2019-02-28 03:30:52 +0000</bug_when>
    <thetext>In WiFi Connection Manager, system may crash on any page occasionally.

This is caused by duplicate FreePool operation when scan finished, the result received from WiFi device driver will be freed twice and may cause unexpected error, such as crash.

Such potential issues are also found in some other places, which should be corrected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6591</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-28 19:33:51 +0000</bug_when>
    <thetext>Fan to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6592</commentid>
    <comment_count>2</comment_count>
    <who name="">fan.wang</who>
    <bug_when>2019-02-28 21:46:56 +0000</bug_when>
    <thetext>Commit in https://github.com/tianocore/edk2/commit/a6c63ee6d5d842bb8c4663c5140ae2c8e7360cac</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1923</bug_id>
          
          <creation_ts>2019-06-19 10:56:55 +0000</creation_ts>
          <short_desc>GenFds multi-thread build fails if enable the build cache</short_desc>
          <delta_ts>2019-08-29 15:17:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8095</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-19 10:56:55 +0000</bug_when>
    <thetext>The GenFds multi-thread will build fail if enable the build cache. Below are the reproduce steps:
1. First, produce the build cache:
edk2&gt;build -p OvmfPkg\OvmfPkgIa32X64.dsc -a IA32 -a X64 -t VS2015x86 -n 5 --genfds-multi-thread --hash --binary-destination=BinCache

2. Remove the build folder:
edk2&gt;rmdir Build /s /q

3. Clean build with build cache and GenFds multi-thread enabled together:
edk2&gt;build -p OvmfPkg\OvmfPkgIa32X64.dsc -a IA32 -a X64 -t VS2015x86 -n 5 --genfds-multi-thread --hash --binary-source=BinCache

Generating PEIFV FV
###Return Value = 2
GenFv: ERROR 0001: Error opening file
  c:\steven\edk2\Build\Ovmf3264\DEBUG_VS2015x86\FV\Ffs\52C05B14-0B98-496c-BC3B-04B50211D680PeiCore\52C05B14-0B98-496c-BC3B-04B50211D680.ffs

4. If disable GenFds multi-thread, the build cache can work well:
edk2&gt;build -p OvmfPkg\OvmfPkgIa32X64.dsc -a IA32 -a X64 -t VS2015x86 -n 5 --hash --binary-source=BinCache
... ...
- Done -
Build end time: 22:56:09, Jun.19 2019
Build total time: 00:00:23</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8096</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-19 10:58:58 +0000</bug_when>
    <thetext>Confirm and assign to Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8097</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-19 10:59:27 +0000</bug_when>
    <thetext>Confirm</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9277</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:47:20 +0000</bug_when>
    <thetext>Has this been fixed at commit d01a998612422a70366b3b6b4639d5f54de053a0?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9333</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:32:27 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Has this been fixed at commit d01a998612422a70366b3b6b4639d5f54de053a0?

To clarify, the question is for Steven / Zhiju. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9353</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 21:19:14 +0000</bug_when>
    <thetext>Yes. This issue is fixed at d01a998612422a70366b3b6b4639d5f54de053a0.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1877</bug_id>
          
          <creation_ts>2019-06-04 14:43:09 +0000</creation_ts>
          <short_desc>Commit 7cea4d71a8a8 regresses CPU speed display (from SMBIOS) in MdeModulePkg/UiApp</short_desc>
          <delta_ts>2019-06-05 04:12:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1686</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7926</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-04 14:43:09 +0000</bug_when>
    <thetext>Commit 7cea4d71a8a8 was not suitable for pushing during the
edk2-stable201905 hard feature freeze; it was pushed only by mistake.
The subject line referenced EmulatorPkg, but the patch changed
MdeModulePkg/UiApp, regressing the display of the CPU speed from SMBIOS
in multiple platforms. The commit should be reverted, and developers
should take another stab at bug 1686 after edk2-stable201905 is tagged.

Discussion on the list:

[edk2-devel] [Patch V2] EmulatorPkg: don&apos;t diaplay the cpu current speed
http://mid.mail-archive.com/20190603064503.20460-1-zhiguang.liu@intel.com
https://edk2.groups.io/g/devel/message/41795</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7927</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-04 15:00:56 +0000</bug_when>
    <thetext>Patch on the list:

[PATCH for-edk2-stable201905]
Revert &quot;EmulatorPkg: don&apos;t display the cpu current speed&quot;

http://mid.mail-archive.com/20190604185843.22059-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/41886</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7933</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-05 04:12:37 +0000</bug_when>
    <thetext>Fixed in commit be689ecc93e5.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1739</bug_id>
          
          <creation_ts>2019-04-22 13:15:54 +0000</creation_ts>
          <short_desc>Ensure that PYTHONHASHSEED workaround is available in all ENV scripts.</short_desc>
          <delta_ts>2022-02-15 22:16:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7226</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-04-22 13:15:54 +0000</bug_when>
    <thetext>Seems to be missing from edksetup.bat.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7284</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 21:56:41 +0000</bug_when>
    <thetext>Bob, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18315</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-10 10:32:01 +0000</bug_when>
    <thetext>PYTHONHASHSEED is set in BaseTools\toolsetup.bat

what is the problem that is caused by PYTHONHASHSEED?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18384</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:16:55 +0000</bug_when>
    <thetext>it&apos;s been fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1914</bug_id>
          <alias>CVE-2019-14584</alias>
          <creation_ts>2019-06-13 21:12:38 +0000</creation_ts>
          <short_desc>NULL pointer dereference in AuthenticodeVerify()</short_desc>
          <delta_ts>2021-09-22 15:47:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>ericj</cc>
    
    <cc>f4bug</cc>
    
    <cc>gsuckevi</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>paul.a.lohr</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202105</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>edk2-stable202102</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8055</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-13 21:12:38 +0000</bug_when>
    <thetext>AuthenticodeVerify() calls OpenSSLs d2i_PKCS7() API to parse asn encoded signed authenticode pkcs#7 data. when this successfully returns, a type check is done by calling PKCS7_type_is_signed() and then Pkcs7-&gt;d.sign-&gt;contents-&gt;type is used. It is possible to construct an asn1 blob that successfully decodes and have d2i_PKCS7() return a valid pointer and have PKCS7_type_is_signed() also return success  but have Pkcs7-&gt;d.sign be a NULL pointer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8056</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-13 21:13:17 +0000</bug_when>
    <thetext>Take the tracker</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8057</commentid>
    <comment_count>2</comment_count>
      <attachid>358</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-13 21:14:38 +0000</bug_when>
    <thetext>Created attachment 358
v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8182</commentid>
    <comment_count>3</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-06-25 16:46:09 +0000</bug_when>
    <thetext>Patch looks good. Would suggest updating the comment to clarify why the extra step was necessary or the expectation of detached signature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8712</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 19:52:08 +0000</bug_when>
    <thetext>What use cases are affected by this bug?

Am I right to think that this deserves a CVE?

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12419</commentid>
    <comment_count>5</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-05-06 11:17:36 +0000</bug_when>
    <thetext>discussed in 4/1/20 infosec meeting

Has a patch
Alias:	CVE-2019-14584 (edit)

need to double check that fix is already out there before closing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12435</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-06 14:33:28 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #2)
&gt; Created attachment 358 [details]
&gt; v1

Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12893</commentid>
    <comment_count>7</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-06-16 13:22:07 +0000</bug_when>
    <thetext>Confirmed as a security issue. CVE was previously assigned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12896</commentid>
    <comment_count>8</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-06-16 13:26:10 +0000</bug_when>
    <thetext>Patch available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13989</commentid>
    <comment_count>9</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-10-15 09:46:30 +0000</bug_when>
    <thetext>I&apos;d like to disclose this BZ soon. Any concerns, please raise ASAP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13995</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-15 12:13:23 +0000</bug_when>
    <thetext>We had never agreed upon any particular embargo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13998</commentid>
    <comment_count>11</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2020-10-15 15:25:33 +0000</bug_when>
    <thetext>Do we need to start the CVE process or did this one already get a CVE from the Intel block?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14005</commentid>
    <comment_count>12</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-10-15 23:06:17 +0000</bug_when>
    <thetext>(In reply to Eric Johnson from comment #11)
&gt; Do we need to start the CVE process or did this one already get a CVE from
&gt; the Intel block?

There&apos;s already a CVE (CVE-2019-14584) assigned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14006</commentid>
    <comment_count>13</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-10-15 23:07:34 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #10)
&gt; We had never agreed upon any particular embargo.

Sorry I&apos;m not aware of this. So let me disclose it and submit patch review publicly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14033</commentid>
    <comment_count>14</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2020-10-19 14:51:50 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #12)

&gt; There&apos;s already a CVE (CVE-2019-14584) assigned.

Thank you.  I missed that</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14034</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-19 15:07:55 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #13)
&gt; (In reply to Laszlo Ersek from comment #10)
&gt; &gt; We had never agreed upon any particular embargo.
&gt; 
&gt; Sorry I&apos;m not aware of this. So let me disclose it and submit patch review
&gt; publicly.

Jian, when I say &quot;we never agreed upon a specific embargo period&quot;, that means we have not given a chance to downstreams to coordinate their efforts in incorporating the fix, and synchronizing their release dates. Simply publishing the patch in response to my comment amounts to *breaking* the embargo. The proper response would have been to start negotiating the embargo end date now, agree upon some time period, such as 3 months or whatever, and once *THAT* date elapses, then publish the patch on edk2-devel. The publication of the patch, and the opening up of this BZ should occur as closely as possible to downstream vendors publishing their fixed packages.

We have a published security process:

https://github.com/tianocore/tianocore.github.io/wiki/Reporting-Security-Issues

why are we not following it?

See:
- 2.4 Review the patch
- 2.5 patch good? go to step 3
- 3.1 propose embargo period
- [...]
- 4.3 open BZ to the public
- 4.4 open source the patch

You have jumped from step 2.4 (non-public patch review) to 4.3/4.4 (disclosure), skipping all of phase 3 (embargo).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14036</commentid>
    <comment_count>16</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-10-19 18:03:19 +0000</bug_when>
    <thetext>Hmm - Our process seems to be broken if we cannot establish an embargo period within a given period of time.  This issue was filed 16 months ago, and included a fix a the time of submission.  That should have resulted in a &quot;fast-track&quot; release of some sorts, instead of what has happened.

how do we get this into the upcoming November 2020 Stable Tag?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14043</commentid>
    <comment_count>17</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-10-19 22:26:29 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #15)
&gt; 
&gt; We have a published security process:
&gt; 
&gt; https://github.com/tianocore/tianocore.github.io/wiki/Reporting-Security-
&gt; Issues
&gt; 
&gt; why are we not following it?
&gt; 
&gt; See:
&gt; - 2.4 Review the patch
&gt; - 2.5 patch good? go to step 3
&gt; - 3.1 propose embargo period
&gt; - [...]
&gt; - 4.3 open BZ to the public
&gt; - 4.4 open source the patch
&gt; 
&gt; You have jumped from step 2.4 (non-public patch review) to 4.3/4.4
&gt; (disclosure), skipping all of phase 3 (embargo).

Yes, I misunderstood your comments. I don&apos;t remember why this one was skipped. Anyway, I should be responsible for it. I guess we cannot undo the disclosure, can we? How about we continue to check in the patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14048</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-20 04:25:54 +0000</bug_when>
    <thetext>(In reply to Paul Lohr from comment #16)
&gt; Hmm - Our process seems to be broken if we cannot establish an embargo
&gt; period within a given period of time.  This issue was filed 16 months ago,
&gt; and included a fix a the time of submission.  That should have resulted in a
&gt; &quot;fast-track&quot; release of some sorts, instead of what has happened.

I seem to remember (but I could easily be wrong!) that Bret suggested we use a default embargo period of 3 months, counted from the bug report (that is, counted from the date of comment#0 on the BZ). I don&apos;t know where that proposal went.

Even if we establish such a default (which would be a good idea IMO, although of course the specific length should still be fleshed out), it should still be explicitly stated on every single security BZ.

&gt; 
&gt; how do we get this into the upcoming November 2020 Stable Tag?

The patch is already on the list, pending review. (Of course you don&apos;t know this, because Jian never bothered to state the fact in a bugzilla comment, with a link to the appropriate patch email in the mailing list archive.) I expect the public review to complete soon, and the CryptoPkg maintainers to merge the patch soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14049</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-20 04:27:06 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #17)

&gt; I guess we cannot undo the disclosure, can we?

No, the cat&apos;s out of the bag.

&gt; How about we continue to check in the patch?

Sure, that&apos;s the only way forward now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14050</commentid>
    <comment_count>20</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-20 04:49:33 +0000</bug_when>
    <thetext>Patch on the list from Jian:

* [edk2-devel] [PATCH]
  CryptoPkg/BaseCryptLib: fix NULL dereference (CVE-2019-14584)

https://edk2.groups.io/g/devel/message/66309
http://mid.mail-archive.com/20201016051450.708-1-jian.j.wang@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14052</commentid>
    <comment_count>21</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-10-20 15:48:46 +0000</bug_when>
    <thetext>Thanks all.

Do we need to do a post-mortem on this?  To understand why the process wasn&apos;t followed.  3 months from comment 0 is what I had heard too.  and it would have worked really well for this submission.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14053</commentid>
    <comment_count>22</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-10-20 16:47:06 +0000</bug_when>
    <thetext>My $0.02

We can review this concern in the context of updating our existing process. Since the existing process antedates tianocore infosec becoming a CVE Naming Authority (CNA) we need to add guidelines into the process around how the infosec team handles that CVE resource pool, for example. At the same time I&apos;d like to remove some of the double-book accounting in the process, such as the reporting of code (non-spec/arch) issues to USRT, too. Those courtesy reviews served as a bridge from when USRT was the defect reporting mechanism prior to tianocore infosec creation.

Regarding process escapes, perhaps pursuit of an option discussed in the past to have new bz tags, like embargo start, etc to codify some of the steps in the state machine might help? Ideally having the ability to &apos;confirm&apos; becoming predicated on having an embargo date, but that will then expose our present gap between reporting of issue and curation of the patch.....Or maybe new bug states like &quot;in evaluation&quot;, &quot;in patch creation,&quot; &quot;in embargo&quot;....... to avoid having to parse comments for regexs, including potential omissions therein?

More radical changes like using a private github repo for edkII trees that curate fixes (as offered by the MS Mu folks) in addition or in lieu of attached patches may be a mile too far near-term for the process revisit (maybe the tianocore community could fund a private repo, too?). But some discussion or feedback on having the ability to use github issues, PR&apos;s, etc might reveal some utility for the workflow?

Going forward, I&apos;d recommend that we use the next infosec meeting, which will lead to a subsequent infosec email thread, to provide post-mortem class considerations in the process discussion. Or when the proposed process language changes land on the infosec email thread ahead of the next meeting we can go forward with the discussion on top of that thread, too.

In general, regarding the &apos;process to talk about process&apos;, I think we can discuss process on the clear-text infosec email threads (versus shrouded locales like this bz) since there&apos;s no need to reference details of undisclosed material in these more abstract process change deliberations.  And ultimately we want the policy used by infosec to be world-readable on the wiki since there shouldn&apos;t be any secrecy in the machinations. In general I&apos;m a fan of https://xenproject.org/developers/security-policy/, for example. 

If folks disagree on latter sentiments feel free to reply, too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14057</commentid>
    <comment_count>23</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-10-21 02:35:25 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #19)
&gt; (In reply to Wang, Jian J from comment #17)
&gt; 
&gt; &gt; I guess we cannot undo the disclosure, can we?
&gt; 
&gt; No, the cat&apos;s out of the bag.
&gt; 
&gt; &gt; How about we continue to check in the patch?
&gt; 
&gt; Sure, that&apos;s the only way forward now.

Thanks. The patch has pushed at 26442d11e620a9e81c019a24a4ff38441c64ba10.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14062</commentid>
    <comment_count>24</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-21 09:11:31 +0000</bug_when>
    <thetext>(In reply to Vincent Zimmer from comment #22)

&gt; have new bz tags, like embargo start, etc to codify some of the steps
&gt; in the state machine might help?

Yes, absolutely.

For an embargoed bug, the first word of the bug title should be
EMBARGOED (all caps). Additionally, we&apos;d need explicit fields like:
- CVSS: ...
- Embargoed: undecided / yes / no
- Public Date: ...

In connection to that, a long-standing configuration issue with the
TianoCore bugzilla instance should be fixed: the WebUI should display
changes to meta-data over time, in an incremental / differential view,
intermixed with the normal comments. The email trail that bugzilla
generates already contains all this information, but the webui currently
doesn&apos;t display it. If someone changes the CVSS or the Public Date or
(even, say) the bug title, then the webui should report that action as
part of the timeline, not just show the result of that action.

&gt; Ideally having the ability to &apos;confirm&apos; becoming predicated on having
&gt; an embargo date, but that will then expose our present gap between
&gt; reporting of issue and curation of the patch.....Or maybe new bug
&gt; states like &quot;in evaluation&quot;, &quot;in patch creation,&quot; &quot;in embargo&quot;.......
&gt; to avoid having to parse comments for regexs, including potential
&gt; omissions therein?

I think CONFIRMED status is valid without an embargo agreement;
CONFIRMED stands for the issue technically existing, and having at least
&quot;some&quot; impact. IN_PROGRESS is appropriate when someone has started work
on patches.

The &quot;embargoed&quot; tri-state flag, combined with the Public Date field (for
when Embargoed=Yes) seems to fully describe the embargo status.

&gt; More radical changes like using a private github repo for edkII trees
&gt; that curate fixes (as offered by the MS Mu folks) in addition or in
&gt; lieu of attached patches may be a mile too far near-term for the
&gt; process revisit (maybe the tianocore community could fund a private
&gt; repo, too?). But some discussion or feedback on having the ability to
&gt; use github issues, PR&apos;s, etc might reveal some utility for the
&gt; workflow?

I remain convinced that using normal mailing lists, with closely guarded
subscriptions, is the best tool for proposing and reviewing security
patches.

&gt; In general, regarding the &apos;process to talk about process&apos;, I think we
&gt; can discuss process on the clear-text infosec email threads

I agree.

&gt; In general I&apos;m a fan of
&gt; https://xenproject.org/developers/security-policy/, for example.

Good example, thanks. This document explains in great detail their
&quot;pre-disclosure list&quot;.

That&apos;s *exactly* what I&apos;m advocating as well, for edk2. Edk2 should have
a pre-disclosure *mailing list* where we can exchange technical details,
patches, and patch comments, in relation to embargoed vulnerabilities.

Importantly, note that the Xen document does not require encryption for
emails sent to the pre-disclosure mailing list.

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14103</commentid>
    <comment_count>25</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2020-10-27 12:32:47 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #24)
&gt; (In reply to Vincent Zimmer from comment #22)
&gt; 
&gt; &gt; have new bz tags, like embargo start, etc to codify some of the steps
&gt; &gt; in the state machine might help?
&gt; 
&gt; For an embargoed bug, the first word of the bug title should be
&gt; EMBARGOED (all caps). Additionally, we&apos;d need explicit fields like:
&gt; - CVSS: ...
&gt; - Embargoed: undecided / yes / no
&gt; - Public Date: ...

Can we add these as tags in the patch too?

CVE-ID: CVE-2019-14584
Embargo-period: 3months
Disclosure-date: 2019-06-13 21:00 EDT

So it is clear when reviewing the patch versions, developers could be more
responsible, and it is helpful to the community if &quot;the cat goes out by
misunderstanding&quot;.



If a CVE is disclosed before the embargo date, the public information has
to be updated too. As of this post the CVE still appears as:
&quot;When the candidate has been publicized, the details for this candidate will be provided.&quot;
On https://cve.mitre.org/cgi-bin/cvename.cgi?name=2019-14584</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14168</commentid>
    <comment_count>26</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-02 08:50:37 +0000</bug_when>
    <thetext>(In reply to Philippe Mathieu-Daudé from comment #25)
&gt; (In reply to Laszlo Ersek from comment #24)
&gt; &gt; (In reply to Vincent Zimmer from comment #22)
&gt; &gt; 
&gt; &gt; &gt; have new bz tags, like embargo start, etc to codify some of the steps
&gt; &gt; &gt; in the state machine might help?
&gt; &gt; 
&gt; &gt; For an embargoed bug, the first word of the bug title should be
&gt; &gt; EMBARGOED (all caps). Additionally, we&apos;d need explicit fields like:
&gt; &gt; - CVSS: ...
&gt; &gt; - Embargoed: undecided / yes / no
&gt; &gt; - Public Date: ...
&gt; 
&gt; Can we add these as tags in the patch too?
&gt; 
&gt; CVE-ID: CVE-2019-14584
&gt; Embargo-period: 3months
&gt; Disclosure-date: 2019-06-13 21:00 EDT

The CVE number is already a required part of the subject line AFAICT.

Furthermore, according to our security process:

https://github.com/tianocore/tianocore.github.io/wiki/Reporting-Security-Issues
https://raw.githubusercontent.com/jwang36/tianocore.github.io/master/security/flowchart.svg

the patch is supposed to be reviewed before the embargo period / public date are finalized (or even proposed). So the current process would require us to update the commit message of approved security patches, possibly multiple times.

&gt; So it is clear when reviewing the patch versions, developers could be more
&gt; responsible, and it is helpful to the community if &quot;the cat goes out by
&gt; misunderstanding&quot;.

I agree it&apos;s useful to know the (default) embargo period for a security ticket even while reviewing the patch (or while juggling someone&apos;s TODO list, including patch review for a particular security ticket). However, that doesn&apos;t seem to match our current flowchart (see link above).

In the present case, just the knowledge that the patch was under embargo at all (i.e., indefinitely), at the time of consideration, should have been enough to block publication.

&gt; If a CVE is disclosed before the embargo date, the public information has
&gt; to be updated too. As of this post the CVE still appears as:
&gt; &quot;When the candidate has been publicized, the details for this candidate will
&gt; be provided.&quot;
&gt; On https://cve.mitre.org/cgi-bin/cvename.cgi?name=2019-14584

I agree this looks out-of-sync with reality. However, from a bunch of CVEs I have looked at before (related or not to TianoCore), the cve.mitre.org summary almost always seems to lag behind reality. I&apos;ve seen a bunch of public upstream CVE patches where the mitre.org description only provided the above-quoted boilerplate still. Is it perhaps a more general issue (or bottleneck?) with the mitre.org ticket management?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17365</commentid>
    <comment_count>27</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:52 +0000</bug_when>
    <thetext>http://www.compilatori.com/health/covid-and-tech/	http://www.wearelondonmade.com/health/covid-and-tech/	http://www.jopspeech.com/health/covid-and-tech/	http://joerg.li/health/covid-and-tech/	http://connstr.net/health/covid-and-tech/	http://embermanchester.uk/health/covid-and-tech/	http://www.slipstone.co.uk/health/covid-and-tech/	http://www.logoarts.co.uk/health/covid-and-tech/	http://www.acpirateradio.co.uk/tech/nvidia-and-samsung/	https://waytowhatsnext.com/crypto/crypto-world/	https://www.webb-dev.co.uk/category/services/	http://www.iu-bloomington.com/computers/invisible-with-vpn/	http://www-look-4.com/travel/london/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>358</attachid>
            <date>2019-06-13 21:14:38 +0000</date>
            <delta_ts>2019-06-13 21:14:38 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-CryptoPkg-BaseCryptLib-fix-NULL-dereference.patch</filename>
            <type>text/plain</type>
            <size>2258</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1807</bug_id>
          
          <creation_ts>2019-05-14 08:41:02 +0000</creation_ts>
          <short_desc>Error LibGdtoa unresolved external symbol __fpclassifyd while build SampleCApp on Visual Studio 2017</short_desc>
          <delta_ts>2021-08-18 20:44:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>3549</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>chicken.oo</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>AppPkg</cf_package>
    
    <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7529</commentid>
    <comment_count>0</comment_count>
    <who name="">chicken.oo</who>
    <bug_when>2019-05-14 08:41:02 +0000</bug_when>
    <thetext>Building ... c:\ws\edk2\AppPkg\Applications\SampleCApp\SampleCApp.inf [X64]
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x64\cl.exe&quot; /Foc:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\OUTPUT\.\SampleCApp.obj /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Zi /Gm /Gw /X /Zc:wchar_t /D UEFI_C_SOURCE /Ic:\ws\edk2\AppPkg\Applications\SampleCApp  /Ic:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\DEBUG  /Ic:\ws\edk2\StdLib  /Ic:\ws\edk2\StdLib\Include  /Ic:\ws\edk2\StdLib\Include\X64  /Ic:\ws\edk2\MdePkg  /Ic:\ws\edk2\MdePkg\Include  /Ic:\ws\edk2\MdePkg\Include\X64  /Ic:\ws\edk2\ShellPkg  /Ic:\ws\edk2\ShellPkg\Include c:\ws\edk2\AppPkg\Applications\SampleCApp\SampleCApp.c
cl : Command line warning D9035 : option &apos;Gm&apos; has been deprecated and will be removed in a future release
SampleCApp.c
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x64\cl.exe&quot; /Foc:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\OUTPUT\.\AutoGen.obj /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Zi /Gm /Gw /X /Zc:wchar_t /D UEFI_C_SOURCE /Ic:\ws\edk2\AppPkg\Applications\SampleCApp  /Ic:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\DEBUG  /Ic:\ws\edk2\StdLib  /Ic:\ws\edk2\StdLib\Include  /Ic:\ws\edk2\StdLib\Include\X64  /Ic:\ws\edk2\MdePkg  /Ic:\ws\edk2\MdePkg\Include  /Ic:\ws\edk2\MdePkg\Include\X64  /Ic:\ws\edk2\ShellPkg  /Ic:\ws\edk2\ShellPkg\Include c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\DEBUG\AutoGen.c
cl : Command line warning D9035 : option &apos;Gm&apos; has been deprecated and will be removed in a future release
AutoGen.c
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x64\lib.exe&quot; /NOLOGO /LTCG /OUT:c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\OUTPUT\SampleCApp.lib @c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\OUTPUT\object_files.lst
        &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x64\link.exe&quot; /OUT:c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\DEBUG\SampleCApp.dll /NOLOGO /NODEFAULTLIB /IGNORE:4001 /IGNORE:4281 /OPT:REF /OPT:ICF=10 /MAP /ALIGN:32 /SECTION:.xdata,D /SECTION:.pdata,D /Machine:X64 /LTCG /DLL /ENTRY:_ModuleEntryPoint /SUBSYSTEM:EFI_BOOT_SERVICE_DRIVER /SAFESEH:NO /BASE:0 /DRIVER /DEBUG /WHOLEARCHIVE  @c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\OUTPUT\static_library_files.lst
LibGdtoa.lib(ldtoa.obj) : error LNK2001: unresolved external symbol __fpclassifyd
c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp\DEBUG\SampleCApp.dll : fatal error LNK1120: 1 unresolved externals
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x64\link.exe&quot;&apos; : return code &apos;0x460&apos;
Stop.


build.py...
 : error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\Hostx86\x86\nmake.exe /nologo tbuild [c:\ws\edk2\Build\AppPkg\DEBUG_VS2017\X64\AppPkg\Applications\SampleCApp\SampleCApp]


build.py...
 : error F002: Failed to build module
        c:\ws\edk2\AppPkg\Applications\SampleCApp\SampleCApp.inf [X64, VS2017, DEBUG]

- Failed -
Build end time: 21:26:52, May.14 2019
Build total time: 00:00:05</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7589</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:18:05 +0000</bug_when>
    <thetext>Jaben, please help to investigate. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16981</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 20:44:26 +0000</bug_when>
    <thetext>Duplicate of 3549 that has resolved VS2017 and VS2019 build issues

*** This bug has been marked as a duplicate of bug 3549 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1982</bug_id>
          
          <creation_ts>2019-07-17 02:27:08 +0000</creation_ts>
          <short_desc>Performed Microcode copy from flash on both PEI and DXE</short_desc>
          <delta_ts>2019-08-05 02:17:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>rock.cao</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>isaac.w.oram</cc>
    
    <cc>ray.ni</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8466</commentid>
    <comment_count>0</comment_count>
    <who name="">rock.cao</who>
    <bug_when>2019-07-17 02:27:08 +0000</bug_when>
    <thetext>MpInitLibInitialize in MpLib.c will be invoked on both PEI and DXE CPU code, MicrocodeDetect would be performed twice and copy Microcode from flash to memory twice as well, which consider as duplicate work to lead longer boot time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8481</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-18 21:02:18 +0000</bug_when>
    <thetext>MpInitLibInitialize() skips re-initialize CPU in DXE when it&apos;s already initialized in PEI.

Eric, can you check whether the uCode shadow/update are also skipped?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8494</commentid>
    <comment_count>2</comment_count>
    <who name="">rock.cao</who>
    <bug_when>2019-07-19 04:25:00 +0000</bug_when>
    <thetext>The other open is the current code copy whole Microcode FV into memory, need to optimize to copy the CPU matched microcode only rather than whole FV.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8582</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:24:42 +0000</bug_when>
    <thetext>Bug Triage: Please continue to work on this and discuss priority, we will keep this high for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8653</commentid>
    <comment_count>4</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-31 03:52:20 +0000</bug_when>
    <thetext>(In reply to rock.cao from comment #2)
&gt; The other open is the current code copy whole Microcode FV into memory, need
&gt; to optimize to copy the CPU matched microcode only rather than whole FV.

Driver needs to scan the microcode before knowing which microcode is needed. If not copy microcode to memory first, the performance for scanning is poor.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8782</commentid>
    <comment_count>5</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-05 02:17:03 +0000</bug_when>
    <thetext>SHA-1: 89164babecceb03047c4aec8e76c4d838d703095

* UefiCpuPkg/MpInitLib: don&apos;t shadow the microcode patch twice.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1982

MpInitLibInitialize in MpLib.c will be invoked on both PEI and DXE
CPU code, MicrocodeDetect would be performed twice and copy
Microcode from flash to memory twice as well, which consider as
duplicate work to lead longer boot time.
This patch just use microcode memory copied in PEI phase if exist.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1220</bug_id>
          
          <creation_ts>2018-09-28 23:32:57 +0000</creation_ts>
          <short_desc>Pkcs7GetCertificatesList in BaseCryptLib will cause NULL pointer dereference implicitly.</short_desc>
          <delta_ts>2018-12-24 22:33:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="PoYu">smith.orange</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>qin.long</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5157</commentid>
    <comment_count>0</comment_count>
    <who name="PoYu">smith.orange</who>
    <bug_when>2018-09-28 23:32:57 +0000</bug_when>
    <thetext>Pkcs7GetCertificatesList (CryptoPkg\Library\BaseCryptLib\Pk\CryptPkcs7Verify.c) didn&apos;t new a X509_STORE when doing X509_STORE_CTX_init:

 if (!X509_STORE_CTX_init (CertCtx, NULL, Signer, Pkcs7-&gt;d.sign-&gt;cert)) {
    goto _Error;
  }

So the field &quot;X509_STORE *ctx&quot; in X509_STORE_CTX CertCtx is NULL and the following access will result in a NULL pointer dereference:
==============================================================================
if (X509_STORE_CTX_get1_issuer (&amp;Issuer, CertCtx, Cert) == 1) {
|_
   ok = X509_STORE_CTX_get_by_subject(ctx, X509_LU_X509, xn, obj);
    |_ 
       int X509_STORE_CTX_get_by_subject(X509_STORE_CTX *vs, X509_LOOKUP_TYPE 
       type, X509_NAME *name, X509_OBJECT *ret)
      
       X509_STORE *ctx = vs-&gt;ctx;             // --&gt; ctx is NULL.
       ...
       ...
       CRYPTO_THREAD_write_lock(ctx-&gt;lock);   // --&gt; NULL pointer access here.

==============================================================================

Please consider to new an empty X509_STORE when initializing a X509_STORE_CTX in function X509_STORE_CTX_init.

Thanks,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5231</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:09:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5832</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-12 02:12:54 +0000</bug_when>
    <thetext>Take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5949</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-24 22:33:34 +0000</bug_when>
    <thetext>This issue has been fixed by openssl (#2462, push@1c705121af...) and included in the recent upgrade to 1.1.0j (a18f784cfd.., BZ#1393: https://bugzilla.tianocore.org/show_bug.cgi?id=1393). There&apos;s no need to fix it in BaseCryptLib.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1608</bug_id>
          <alias>CVE-2019-14575</alias>
          <creation_ts>2019-03-10 21:08:46 +0000</creation_ts>
          <short_desc>DxeImageVerificationHandler() fails open in case of dbx signature check</short_desc>
          <delta_ts>2021-09-22 15:47:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>dick_wilkins</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eugene</cc>
    
    <cc>f4bug</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>rschiron</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6670</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-10 21:08:46 +0000</bug_when>
    <thetext>\securitypkg\library\dxeimageverificationlib\DxeImageVerificationLib.c


Threat and Impact:
DxeImageVerificationHandler() has specific code to handle .efis that aren&apos;t signed, but should be allowed to run. To do this, it hashes the .efi image, and then compares the image against a blacklist (dbx) and a whitelist (db). A situation could occur where a hash is both in the dbx and db list. This is supposed to fail. since it&apos;s in the dbx list.

Because of the way a signature is looked up in dbx (using IsSignatureFoundInDatabase() return value) any failure (e.g. allocation failure, looking up the variable failure, ...) will be seen as signature not found in database. This logic allows for bypassing the dbx looking, meaning if an .efi image is both in the dbx and db list, it&apos;s not supposed to load, but the fail open can make it so it will load.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6677</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-10 21:30:38 +0000</bug_when>
    <thetext>+++++ czhan46 3/6/2019 7:30:03 AM

need to enforce all error handling return to deny module execution</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7903</commentid>
    <comment_count>2</comment_count>
      <attachid>356</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-03 01:11:07 +0000</bug_when>
    <thetext>Created attachment 356
v1

Patch attached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8039</commentid>
    <comment_count>3</comment_count>
      <attachid>357</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-13 17:05:39 +0000</bug_when>
    <thetext>Created attachment 357
v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8186</commentid>
    <comment_count>4</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-06-25 16:49:15 +0000</bug_when>
    <thetext>Patch v2 looks good. What’s the timeline for release?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8307</commentid>
    <comment_count>5</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2019-07-01 20:02:21 +0000</bug_when>
    <thetext>Phoenix would also like to know if this patch is ready to be rolled out to our OEM customers. Also, has the embargo time clock started running? (Is this the &quot;official&quot; patch?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8457</commentid>
    <comment_count>6</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-07-15 12:30:57 +0000</bug_when>
    <thetext>Upon integration, there&apos;s a couple of problems with this patch.

1) In IsForbiddenByDbx(), IsForbidden needs to be set to FALSE after the final for-loop, otherwise the TRUE default will reject anything that wasn&apos;t found as a hash.
2) In IsAllowedByDb(), VerifyStatus needs to be set to TRUE after IsCertHashFoundInDatabase() in the case where there was no error, but IsFound == FALSE.

These changes can be seen in the following commit in our Mu security patch repo. Currently, anyone with permission to view the TianoCore security bugs is welcome to request access to this repo. We intend to maintain it going forward as each Mu release stabilizes.

https://dev.azure.com/projectmu/Mu_Security_Private_Release/_git/mu_basecore/commit/d5b1dc4e8c1da98c2adea64ccd0208e75535b0db

If you can&apos;t view the commit, email me (bret.barkelew@microsoft.com) to request access.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8538</commentid>
    <comment_count>7</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-22 11:13:32 +0000</bug_when>
    <thetext>Bret and Dick,

Per current process, once an issue has solution (patch tested and attached), there&apos;ll be a 6-month embargo period before disclosing. I&apos;d assume the embargo starting from June.

Jian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8539</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-22 11:14:59 +0000</bug_when>
    <thetext>(In reply to Bret Barkelew from comment #6)
&gt; Upon integration, there&apos;s a couple of problems with this patch.
&gt; 
&gt; 1) In IsForbiddenByDbx(), IsForbidden needs to be set to FALSE after the
&gt; final for-loop, otherwise the TRUE default will reject anything that wasn&apos;t
&gt; found as a hash.
&gt; 2) In IsAllowedByDb(), VerifyStatus needs to be set to TRUE after
&gt; IsCertHashFoundInDatabase() in the case where there was no error, but
&gt; IsFound == FALSE.
&gt; 
&gt; These changes can be seen in the following commit in our Mu security patch
&gt; repo. Currently, anyone with permission to view the TianoCore security bugs
&gt; is welcome to request access to this repo. We intend to maintain it going
&gt; forward as each Mu release stabilizes.
&gt; 
&gt; https://dev.azure.com/projectmu/Mu_Security_Private_Release/_git/mu_basecore/
&gt; commit/d5b1dc4e8c1da98c2adea64ccd0208e75535b0db
&gt; 
&gt; If you can&apos;t view the commit, email me (bret.barkelew@microsoft.com) to
&gt; request access.

Thanks for catching the problems. I&apos;ve sent you email for the repo access. Once I confirmed them I&apos;ll upload the v3 patch here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8565</commentid>
    <comment_count>9</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-24 21:34:52 +0000</bug_when>
    <thetext>(In reply to Bret Barkelew from comment #6)
&gt; Upon integration, there&apos;s a couple of problems with this patch.
&gt; 
&gt; 1) In IsForbiddenByDbx(), IsForbidden needs to be set to FALSE after the
&gt; final for-loop, otherwise the TRUE default will reject anything that wasn&apos;t
&gt; found as a hash.

I think IsForbidden should not be set to FALSE after final for-loop. If the function can run to the final for-loop, the IsForbidden must be FALSE. If the AuthData data can pass timestamp check, the IsForbidden is set to FALSE and code logic can reach the point after for-loop. Otherwise, the code logic just jump to Done label. So there&apos;s no need to set it to FALSE after the for-loop, unless you think the CertNumber==0 is a valid situation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8566</commentid>
    <comment_count>10</comment_count>
      <attachid>368</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-25 02:16:42 +0000</bug_when>
    <thetext>Created attachment 368
v3

v3 changes:
  a. incorporate Bret&apos;s fixes
  b. fix two more issues:
     1) check CertNumber against zero in IsForbiddenByDbx()
     2) init DbxDataSize to 0 before testing the variable size in IsAllowedByDb()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8567</commentid>
    <comment_count>11</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-25 02:19:03 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #9)
&gt; (In reply to Bret Barkelew from comment #6)
&gt; &gt; Upon integration, there&apos;s a couple of problems with this patch.
&gt; &gt; 
&gt; &gt; 1) In IsForbiddenByDbx(), IsForbidden needs to be set to FALSE after the
&gt; &gt; final for-loop, otherwise the TRUE default will reject anything that wasn&apos;t
&gt; &gt; found as a hash.
&gt; 
&gt; I think IsForbidden should not be set to FALSE after final for-loop. If the
&gt; function can run to the final for-loop, the IsForbidden must be FALSE. If
&gt; the AuthData data can pass timestamp check, the IsForbidden is set to FALSE
&gt; and code logic can reach the point after for-loop. Otherwise, the code logic
&gt; just jump to Done label. So there&apos;s no need to set it to FALSE after the
&gt; for-loop, unless you think the CertNumber==0 is a valid situation.

Forget my above comment. Your change is correct. I uploaded v3 patch, which includes two more issues we found besides your changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8572</commentid>
    <comment_count>12</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-07-25 17:00:03 +0000</bug_when>
    <thetext>Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8699</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 15:57:48 +0000</bug_when>
    <thetext>Jian,

can you please assign a CVE number to this vulnerability?

And once you have the CVE ID, can you please add it to the Alias field on this bugzilla ticket?

Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8700</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 15:59:41 +0000</bug_when>
    <thetext>This issue affects all OvmfPkg platforms that are built with -D SECURE_BOOT_ENABLE.

The issue doesn&apos;t affect ArmVirtPkg platforms (as none of those support secure boot yet).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8701</commentid>
    <comment_count>15</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2019-08-01 16:04:02 +0000</bug_when>
    <thetext>Is this patch now considered &quot;the solution&quot;? And the embargo period starts from when v3 was available? That is Jul 25, 2019 thru Jan 25, 2020.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8743</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 06:26:54 +0000</bug_when>
    <thetext>*** Bug 1945 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8776</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 18:40:21 +0000</bug_when>
    <thetext>(actually I&apos;m going to remove the RHBZ downstream tracker from See Also -- not necessarily because I want to keep that information hidden (the RHBZ is private anyway), but because vendor BZ references just clutter the See Also field, they are useless to all TianoCore BZ users except the one vendor in question)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9443</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-03 07:53:43 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #10)
&gt; Created attachment 368 [details]
&gt; v3

My comments:

&gt;| diff --git a/SecurityPkg/Library/DxeImageVerificationLib/DxeImageVerificationLib.c b/SecurityPkg/Library/DxeImageVerificationLib/DxeImageVerificationLib.c
&gt;| index fe4cdccedd..de1b39166a 100644
&gt;| --- a/SecurityPkg/Library/DxeImageVerificationLib/DxeImageVerificationLib.c
&gt;| +++ b/SecurityPkg/Library/DxeImageVerificationLib/DxeImageVerificationLib.c
&gt;| @@ -821,22 +821,23 @@ AddImageExeInfo (
&gt;|    @param[in]  SignatureList     Pointer to the Signature List in forbidden database.
&gt;|    @param[in]  SignatureListSize Size of Signature List.
&gt;|    @param[out] RevocationTime    Return the time that the certificate was revoked.
&gt;| +  @param[in]  IsFound           Search result.

(1) &quot;IsFound&quot; is an output parameter, not an input parameter.

(2) Please document explicitly that the caller should only consult
&quot;IsFound&quot; in case EFI_SUCCESS is returned.

&gt;|
&gt;| -  @return TRUE   The certificate hash is found in the forbidden database.
&gt;| -  @return FALSE  The certificate hash is not found in the forbidden database.
&gt;| +  @return EFI_SUCCESS           Finished the search without any error.
&gt;| +  @return Others                Error occurred in the search of database.

(3) The EFI_SUCCESS return value should not be documented with @return;
it should be @retval.

&gt;|    //
&gt;|    // Retrieve the TBSCertificate from the X.509 Certificate.
&gt;|    //
&gt;|    if (!X509GetTBSCert (Certificate, CertSize, &amp;TBSCert, &amp;TBSCertSize)) {
&gt;| -    return FALSE;
&gt;| +    goto Done;
&gt;|    }

(4) I think the &quot;goto Done&quot; is unjustified here. It needlessly
complicates the control flow. At this point we have *certainly* not
allocated &quot;HashCtx&quot;. Therefore we should simply write &quot;return Status&quot;.
(Status is set to EFI_ABORTED at this point.)

&gt;| @@ -894,16 +896,13 @@ IsCertHashFoundInDatabase (
&gt;|      if (HashCtx == NULL) {
&gt;|        goto Done;
&gt;|      }
&gt;| -    Status = mHash[HashAlg].HashInit (HashCtx);
&gt;| -    if (!Status) {
&gt;| +    if (!mHash[HashAlg].HashInit (HashCtx)) {
&gt;|        goto Done;
&gt;|      }
&gt;| -    Status = mHash[HashAlg].HashUpdate (HashCtx, TBSCert, TBSCertSize);
&gt;| -    if (!Status) {
&gt;| +    if (!mHash[HashAlg].HashUpdate (HashCtx, TBSCert, TBSCertSize)) {
&gt;|        goto Done;
&gt;|      }
&gt;| -    Status = mHash[HashAlg].HashFinal (HashCtx, CertDigest);
&gt;| -    if (!Status) {
&gt;| +    if (!mHash[HashAlg].HashFinal (HashCtx, CertDigest)) {
&gt;|        goto Done;
&gt;|      }
&gt;|

(5) Here we have an independent (preexistent) bug. We should fix it --
in a separate patch.

Namely, we call AllocatePool() in the loop, but we don&apos;t free &quot;HashCtx&quot;
in the loop!

Therefore, right after the HashFinal() call succeeds, we should do:

  FreePool (HashCtx);
  HashCtx = NULL;

&gt;| @@ -934,12 +934,14 @@ IsCertHashFoundInDatabase (
&gt;|      DbxList  = (EFI_SIGNATURE_LIST *) ((UINT8 *) DbxList + DbxList-&gt;SignatureListSize);
&gt;|    }
&gt;|
&gt;| +  Status   = EFI_SUCCESS;
&gt;| +

(6) The extra whitespace is unwarranted for, in this case.

&gt;|  Done:
&gt;|    if (HashCtx != NULL) {
&gt;|      FreePool (HashCtx);
&gt;|    }
&gt;|
&gt;| -  return IsFound;
&gt;| +  return Status;
&gt;|  }
&gt;|
&gt;|  /**

Other than those cosmetic problems, the updates to
IsCertHashFoundInDatabase() look OK to me.

&gt;| @@ -949,17 +951,19 @@ Done:
&gt;|    @param[in]  Signature           Pointer to signature that is searched for.
&gt;|    @param[in]  CertType            Pointer to hash algrithom.
&gt;|    @param[in]  SignatureSize       Size of Signature.
&gt;| +  @param[in]  IsFound             Search result.

(7) Same as (1).

(8) Same as (2).

&gt;|
&gt;| -  @return TRUE                    Found the signature in the variable database.
&gt;| -  @return FALSE                   Not found the signature in the variable database.
&gt;| +  @return EFI_SUCCESS             Finished the search without any error.
&gt;| +  @return Others                  Error occurred in the search of database.

(9) Same as (3).


&gt;|  **/
&gt;| -BOOLEAN
&gt;| +EFI_STATUS
&gt;|  IsSignatureFoundInDatabase (
&gt;| -  IN CHAR16             *VariableName,
&gt;| -  IN UINT8              *Signature,
&gt;| -  IN EFI_GUID           *CertType,
&gt;| -  IN UINTN              SignatureSize
&gt;| +  IN  CHAR16            *VariableName,
&gt;| +  IN  UINT8             *Signature,
&gt;| +  IN  EFI_GUID          *CertType,
&gt;| +  IN  UINTN             SignatureSize,
&gt;| +  OUT BOOLEAN           *IsFound
&gt;|    )

(10) The IsSignatureFoundInDatabase() update (and the call site updates)
should be split to a separate patch, from the
IsCertHashFoundInDatabase() patch.

Larger patches are more difficult to review, and both functions can be
isolated from each other.

&gt;|  {
&gt;|    EFI_STATUS          Status;
&gt;| @@ -969,22 +973,29 @@ IsSignatureFoundInDatabase (
&gt;|    UINT8               *Data;
&gt;|    UINTN               Index;
&gt;|    UINTN               CertCount;
&gt;| -  BOOLEAN             IsFound;
&gt;|
&gt;|    //
&gt;|    // Read signature database variable.
&gt;|    //
&gt;| -  IsFound   = FALSE;
&gt;| +  *IsFound  = FALSE;
&gt;|    Data      = NULL;
&gt;|    DataSize  = 0;
&gt;|    Status    = gRT-&gt;GetVariable (VariableName, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DataSize, NULL);
&gt;|    if (Status != EFI_BUFFER_TOO_SMALL) {
&gt;| -    return FALSE;
&gt;| +    if (Status == EFI_NOT_FOUND) {
&gt;| +      //
&gt;| +      // No database, no need to search, or search has been done already.

(11) I don&apos;t understand the &quot;search has been done already&quot; part -- why
does the EFI_NOT_FOUND return code imply an earlier search?

&gt;| +      //
&gt;| +      Status = EFI_SUCCESS;
&gt;| +    } else {
&gt;| +      Status = EFI_ABORTED;
&gt;| +    }
&gt;| +    goto Done;
&gt;|    }

(12) How about the following instead:

  Status = gRT-&gt;GetVariable (...);
  ASSERT (EFI_ERROR (Status));
  if (Status != EFI_BUFFER_TOO_SMALL) {
    if (Status == EFI_NOT_FOUND) {
      //
      // No database, no need to search
      //
      Status = EFI_SUCCESS;
    }
    return Status;
  }

Due to three considerations:

- with DataSize=0 on input, gRT-&gt;GetVariable() can never succeed,

- if gRT-&gt;GetVariable() fails with an error code that is different from
  both EFI_BUFFER_TOO_SMALL and EFI_NOT_FOUND, then we don&apos;t need to
  overwrite that error code with EFI_ABORTED; we can just propagate the
  error outwards. The interface contract forbids the caller from
  consuming &quot;IsFound&quot; on any error.

- We haven&apos;t allocated anything yet; no need for complicating the
  control flow with a &quot;goto&quot;.

If you disagree, I won&apos;t insist -- the v3 code above is not wrong, it&apos;s
just a bit too hard to reason about (at least for me).

&gt;|
&gt;|    Data = (UINT8 *) AllocateZeroPool (DataSize);
&gt;|    if (Data == NULL) {
&gt;| -    return FALSE;
&gt;| +    goto Done;
&gt;|    }

(13) Again, not a bug per se, just difficult to reason about -- with the
&quot;goto&quot; here, we rely on &quot;Status&quot; being set to EFI_BUFFER_TOO_SMALL, by
gRT-&gt;GetVariable().

In addition, the &quot;goto&quot; is unnecessary in the first place; we haven&apos;t
allocated anything yet.

I think it would be cleaner to write:

  return EFI_OUT_OF_RESOURCES;

&gt;|
&gt;|    Status = gRT-&gt;GetVariable (VariableName, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DataSize, Data);
&gt;| @@ -1004,22 +1015,18 @@ IsSignatureFoundInDatabase (
&gt;|            //
&gt;|            // Find the signature in database.
&gt;|            //
&gt;| -          IsFound = TRUE;
&gt;| +          *IsFound = TRUE;
&gt;|            //
&gt;|            // Entries in UEFI_IMAGE_SECURITY_DATABASE that are used to validate image should be measured
&gt;|            //
&gt;|            if (StrCmp(VariableName, EFI_IMAGE_SECURITY_DATABASE) == 0) {
&gt;|              SecureBootHook (VariableName, &amp;gEfiImageSecurityDatabaseGuid, CertList-&gt;SignatureSize, Cert);
&gt;|            }
&gt;| -          break;
&gt;| +          goto Done;
&gt;|          }
&gt;|
&gt;|          Cert = (EFI_SIGNATURE_DATA *) ((UINT8 *) Cert + CertList-&gt;SignatureSize);
&gt;|        }
&gt;| -
&gt;| -      if (IsFound) {
&gt;| -        break;
&gt;| -      }
&gt;|      }
&gt;|

(14) While the code is not wrong, I disagee about replacing the &quot;break&quot;
statements with &quot;goto&quot;. For two reasons:

- This change is orthogonal to the bug being fixed, therefore it should
  be in a separate patch, minimally. (The same replacement could be done
  using the original &quot;IsFound&quot; BOOLEAN variable.)

- According to the edk2 C Coding Standards, &quot;goto&quot; should be used for
  error handling, at the most. (I realize that the other function,
  IsCertHashFoundInDatabase(), breaks that rule even before this patch.)

If you really value consistency with IsCertHashFoundInDatabase() over
the CCS, then at least split this change to a separate patch, please.

&gt;|      DataSize -= CertList-&gt;SignatureListSize;
&gt;| @@ -1031,7 +1038,7 @@ Done:
&gt;|      FreePool (Data);
&gt;|    }
&gt;|
&gt;| -  return IsFound;
&gt;| +  return Status;
&gt;|  }
&gt;|
&gt;|  /**
&gt;| @@ -1212,6 +1219,7 @@ IsForbiddenByDbx (
&gt;|  {
&gt;|    EFI_STATUS                Status;
&gt;|    BOOLEAN                   IsForbidden;
&gt;| +  BOOLEAN                   IsFound;
&gt;|    UINT8                     *Data;
&gt;|    UINTN                     DataSize;
&gt;|    EFI_SIGNATURE_LIST        *CertList;
&gt;| @@ -1233,7 +1241,7 @@ IsForbiddenByDbx (
&gt;|    //
&gt;|    // Variable Initialization
&gt;|    //
&gt;| -  IsForbidden       = FALSE;
&gt;| +  IsForbidden       = TRUE;
&gt;|    Data              = NULL;
&gt;|    CertList          = NULL;
&gt;|    CertData          = NULL;
&gt;| @@ -1251,16 +1259,22 @@ IsForbiddenByDbx (
&gt;|    DataSize = 0;
&gt;|    Status   = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DataSize, NULL);
&gt;|    if (Status != EFI_BUFFER_TOO_SMALL) {
&gt;| -    return IsForbidden;
&gt;| +    if (Status == EFI_NOT_FOUND) {
&gt;| +      //
&gt;| +      // Apparently not in dbx if the database doesn&apos;t exist.
&gt;| +      //
&gt;| +      IsForbidden = FALSE;
&gt;| +    }
&gt;| +    goto Done;
&gt;|    }

(15) How about the following instead:

  Status = gRT-&gt;GetVariable (...);
  ASSERT (EFI_ERROR (Status));
  if (Status != EFI_BUFFER_TOO_SMALL) {
    if (Status == EFI_NOT_FOUND) {
      //
      // Evidently not in dbx if the database doesn&apos;t exist.
      //
      IsForbidden = FALSE;
    }
    return IsForbidden;
  }

Due to the following considerations:

- With DataSize=0, GetVariable cannot succeed. Be clear about that.

- We haven&apos;t allocated anything yet, so no need to jump to the Done
  label. The goto needlessly complicates the control flow.

- According to the English wiktionary, in modern speech, &quot;apparently&quot;
  primarily means &quot;seemingly&quot;. What you mean is &quot;evidently&quot; (which is
  only an archaic meaning of the word &quot;apparently&quot;).
  &lt;https://en.wiktionary.org/wiki/apparently&gt;

Again, the code is not wrong, but it could be improved for clarity&apos;s
sake.

&gt;|    Data = (UINT8 *) AllocateZeroPool (DataSize);
&gt;|    if (Data == NULL) {
&gt;| -    return IsForbidden;
&gt;| +    goto Done;
&gt;|    }

(16) This change is unneeded, en bloc. We haven&apos;t allocated anything
yet.

&gt;|
&gt;|    Status = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DataSize, (VOID *) Data);
&gt;|    if (EFI_ERROR (Status)) {
&gt;| -    return IsForbidden;
&gt;| +    goto Done;
&gt;|    }
&gt;|
&gt;|    //
&gt;| @@ -1322,7 +1336,7 @@ IsForbiddenByDbx (
&gt;|    //       UINT8  Certn[];
&gt;|    //
&gt;|    Pkcs7GetSigners (AuthData, AuthDataSize, &amp;CertBuffer, &amp;BufferLength, &amp;TrustedCert, &amp;TrustedCertLength);
&gt;| -  if ((BufferLength == 0) || (CertBuffer == NULL)) {
&gt;| +  if ((BufferLength == 0) || (CertBuffer == NULL) || (*CertBuffer) == 0) {
&gt;|      IsForbidden = TRUE;
&gt;|      goto Done;
&gt;|    }

(17) The nullity check on (*CertBuffer) seems entirely orthogonal to the
present patch. I can&apos;t tell off-hand if this change is valid and/or
necessary, but minimally, it should be split to a separate patch.


&gt;| @@ -1340,12 +1354,13 @@ IsForbiddenByDbx (
&gt;|      //
&gt;|      CertPtr = CertPtr + sizeof (UINT32) + CertSize;
&gt;|
&gt;| -    if (IsCertHashFoundInDatabase (Cert, CertSize, (EFI_SIGNATURE_LIST *)Data, DataSize, &amp;RevocationTime)) {
&gt;| +    Status = IsCertHashFoundInDatabase (Cert, CertSize, (EFI_SIGNATURE_LIST *)Data, DataSize, &amp;RevocationTime, &amp;IsFound);
&gt;| +    if (EFI_ERROR (Status) || IsFound) {
&gt;|        //
&gt;|        // Check the timestamp signature and signing time to determine if the image can be trusted.
&gt;|        //
&gt;|        IsForbidden = TRUE;
&gt;| -      if (PassTimestampCheck (AuthData, AuthDataSize, &amp;RevocationTime)) {
&gt;| +      if (IsFound &amp;&amp; PassTimestampCheck (AuthData, AuthDataSize, &amp;RevocationTime)) {
&gt;|          IsForbidden = FALSE;
&gt;|          //
&gt;|          // Pass DBT check. Continue to check other certs in image signer&apos;s cert list against DBX, DBT

(18) The change is incorrect. We may have reached that location due to:

(a) IsCertHashFoundInDatabase() failing, or

(b) IsCertHashFoundInDatabase() succeeding, and setting &quot;IsFound&quot; to
true.

In case (a), we must not consume &quot;IsFound&quot;. Therefore, the condition
should be written as:

  (!EFI_ERROR (Status) &amp;&amp;
   PassTimestampCheck (AuthData, AuthDataSize, &amp;RevocationTime))


&gt;| @@ -1355,9 +1370,10 @@ IsForbiddenByDbx (
&gt;|        DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is signed but signature failed the timestamp check.\n&quot;));
&gt;|        goto Done;
&gt;|      }
&gt;| -
&gt;|    }
&gt;|

(19) The above whitespace change is spurious, please undo it.

&gt;| +  IsForbidden = FALSE;
&gt;| +
&gt;|  Done:
&gt;|    if (Data != NULL) {
&gt;|      FreePool (Data);
&gt;| @@ -1388,6 +1404,7 @@ IsAllowedByDb (
&gt;|  {
&gt;|    EFI_STATUS                Status;
&gt;|    BOOLEAN                   VerifyStatus;
&gt;| +  BOOLEAN                   IsFound;
&gt;|    EFI_SIGNATURE_LIST        *CertList;
&gt;|    EFI_SIGNATURE_DATA        *CertData;
&gt;|    UINTN                     DataSize;
&gt;| @@ -1449,11 +1466,20 @@ IsAllowedByDb (
&gt;|                             mImageDigestSize
&gt;|                             );
&gt;|            if (VerifyStatus) {
&gt;| +            VerifyStatus = FALSE;
&gt;| +
&gt;|              //
&gt;|              // Here We still need to check if this RootCert&apos;s Hash is revoked
&gt;|              //
&gt;| +            DbxDataSize = 0;
&gt;|              Status   = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DbxDataSize, NULL);
&gt;| -            if (Status == EFI_BUFFER_TOO_SMALL) {
&gt;| +            if (Status != EFI_BUFFER_TOO_SMALL) {
&gt;| +              if (Status == EFI_NOT_FOUND) {
&gt;| +                //
&gt;| +                // Apparently not in dbx if the database doesn&apos;t exist.
&gt;| +                //
&gt;| +                VerifyStatus = TRUE;
&gt;| +              }
&gt;|                goto Done;
&gt;|              }

(20) I&apos;d again propose the pattern from (12) and (15).

&gt;|              DbxData = (UINT8 *) AllocateZeroPool (DbxDataSize);
&gt;| @@ -1466,7 +1492,8 @@ IsAllowedByDb (
&gt;|                goto Done;
&gt;|              }
&gt;|
&gt;| -            if (IsCertHashFoundInDatabase (RootCert, RootCertSize, (EFI_SIGNATURE_LIST *)DbxData, DbxDataSize, &amp;RevocationTime)) {
&gt;| +            Status = IsCertHashFoundInDatabase (RootCert, RootCertSize, (EFI_SIGNATURE_LIST *)DbxData, DbxDataSize, &amp;RevocationTime, &amp;IsFound);
&gt;| +            if (!EFI_ERROR (Status) &amp;&amp; IsFound) {
&gt;|                //
&gt;|                // Check the timestamp signature and signing time to determine if the RootCert can be trusted.
&gt;|                //
&gt;| @@ -1474,6 +1501,8 @@ IsAllowedByDb (
&gt;|                if (!VerifyStatus) {
&gt;|                  DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is signed and signature is accepted by DB, but its root cert failed the timestamp check.\n&quot;));
&gt;|                }
&gt;| +            } else if (!EFI_ERROR (Status) &amp;&amp; !IsFound) {
&gt;| +              VerifyStatus = TRUE;
&gt;|              }
&gt;|
&gt;|              goto Done;

(21) The branching is too complex. After IsCertHashFoundInDatabase()
returns, you can check &quot;Status&quot; in itself. For example:

  Status = IsCertHashFoundInDatabase
             RootCert,
             RootCertSize,
             (EFI_SIGNATURE_LIST *)DbxData,
             DbxDataSize,
             &amp;RevocationTime,
             &amp;IsFound
             );
  if (EFI_ERROR (Status)) {
    goto Done;
  }

  if (!IsFound) {
    VerifyStatus = TRUE;
    goto Done;
  }

  VerifyStatus = PassTimestampCheck (
                   AuthData,
                   AuthDataSize,
                   &amp;RevocationTime
                   );
  if (!VerifyStatus) {
    DEBUG ((...));
  }
  goto Done;

&gt;| @@ -1580,6 +1609,7 @@ DxeImageVerificationHandler (
&gt;|    EFI_IMAGE_DATA_DIRECTORY             *SecDataDir;
&gt;|    UINT32                               OffSet;
&gt;|    CHAR16                               *NameStr;
&gt;| +  BOOLEAN                              IsFound;
&gt;|
&gt;|    SignatureList     = NULL;
&gt;|    SignatureListSize = 0;
&gt;| @@ -1732,15 +1762,32 @@ DxeImageVerificationHandler (
&gt;|        goto Done;
&gt;|      }
&gt;|
&gt;| -    if (IsSignatureFoundInDatabase (EFI_IMAGE_SECURITY_DATABASE1, mImageDigest, &amp;mCertType, mImageDigestSize)) {
&gt;| +    IsFound = TRUE;

(22) This assignment is not necessary, and its presence is confusing.
Please remove it.

&gt;| +    Status = IsSignatureFoundInDatabase (
&gt;| +               EFI_IMAGE_SECURITY_DATABASE1,
&gt;| +               mImageDigest,
&gt;| +               &amp;mCertType,
&gt;| +               mImageDigestSize,
&gt;| +               &amp;IsFound
&gt;| +               );
&gt;| +    if (EFI_ERROR (Status) || IsFound) {
&gt;|        //
&gt;|        // Image Hash is in forbidden database (DBX).
&gt;|        //
&gt;|        DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is not signed and %s hash of image is forbidden by DBX.\n&quot;, mHashTypeStr));
&gt;| +      Status = EFI_ACCESS_DENIED;
&gt;|        goto Done;
&gt;|      }
&gt;|
&gt;| -    if (IsSignatureFoundInDatabase (EFI_IMAGE_SECURITY_DATABASE, mImageDigest, &amp;mCertType, mImageDigestSize)) {
&gt;| +    IsFound = FALSE;

(23) Same as (22).

&gt;| +    Status = IsSignatureFoundInDatabase (
&gt;| +               EFI_IMAGE_SECURITY_DATABASE,
&gt;| +               mImageDigest,
&gt;| +               &amp;mCertType,
&gt;| +               mImageDigestSize,
&gt;| +               &amp;IsFound
&gt;| +               );
&gt;| +    if (!EFI_ERROR (Status) &amp;&amp; IsFound) {
&gt;|        //
&gt;|        // Image Hash is in allowed database (DB).
&gt;|        //
&gt;| @@ -1751,6 +1798,7 @@ DxeImageVerificationHandler (
&gt;|      // Image Hash is not found in both forbidden and allowed database.
&gt;|      //
&gt;|      DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is not signed and %s hash of image is not found in DB/DBX.\n&quot;, mHashTypeStr));
&gt;| +    Status = EFI_ACCESS_DENIED;
&gt;|      goto Done;
&gt;|    }
&gt;|
&gt;| @@ -1828,16 +1876,33 @@ DxeImageVerificationHandler (
&gt;|      //
&gt;|      // Check the image&apos;s hash value.
&gt;|      //
&gt;| -    if (IsSignatureFoundInDatabase (EFI_IMAGE_SECURITY_DATABASE1, mImageDigest, &amp;mCertType, mImageDigestSize)) {
&gt;| +    IsFound = TRUE;

(24) Same as (22).

&gt;| +    Status = IsSignatureFoundInDatabase (
&gt;| +               EFI_IMAGE_SECURITY_DATABASE1,
&gt;| +               mImageDigest,
&gt;| +               &amp;mCertType,
&gt;| +               mImageDigestSize,
&gt;| +               &amp;IsFound
&gt;| +               );
&gt;| +    if (EFI_ERROR (Status) || IsFound) {
&gt;|        Action = EFI_IMAGE_EXECUTION_AUTH_SIG_FOUND;
&gt;|        DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is signed but %s hash of image is found in DBX.\n&quot;, mHashTypeStr));
&gt;|        VerifyStatus = EFI_ACCESS_DENIED;
&gt;|        break;
&gt;|      } else if (EFI_ERROR (VerifyStatus)) {
&gt;| -      if (IsSignatureFoundInDatabase (EFI_IMAGE_SECURITY_DATABASE, mImageDigest, &amp;mCertType, mImageDigestSize)) {
&gt;| +      IsFound = FALSE;

(25) Same as (22).

&gt;| +      Status = IsSignatureFoundInDatabase (
&gt;| +                 EFI_IMAGE_SECURITY_DATABASE,
&gt;| +                 mImageDigest,
&gt;| +                 &amp;mCertType,
&gt;| +                 mImageDigestSize,
&gt;| +                 &amp;IsFound
&gt;| +                 );
&gt;| +      if (!EFI_ERROR (Status) &amp;&amp; IsFound) {
&gt;|          VerifyStatus = EFI_SUCCESS;
&gt;|        } else {
&gt;|          DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is signed but signature is not allowed by DB and %s hash of image is not found in DB/DBX.\n&quot;, mHashTypeStr));
&gt;| +        Status = EFI_ACCESS_DENIED;

(26) Why is the last assignment needed?

Before the patch, the value of &quot;Status&quot;, near the DEBUG macro
invocation, is guaranteed to be EFI_SUCCESS. See the HashPeImageByType()
invocation higher up:

    Status = HashPeImageByType (AuthData, AuthDataSize);
    if (EFI_ERROR (Status)) {
      continue;
    }

If the original behavior is a bug, then it should be fixed in a separate
patch.

--*--

For v4, I propose the following patch series structure:

- 1/8: Plug the leak described in comment (5).

- 2/8: Code flow update as described in comment (14) -- although it
       would be better to drop that change altogether!

- 3/8: (*CertBuffer) nullity check as described in comment (17)

- 4/8: If the assignment described in comment (26) is necessary, then
       dedicate a patch to it.

- 5/8: IsCertHashFoundInDatabase() updates, including call site updates
       in IsForbiddenByDbx() and IsAllowedByDb().

       Please address comments (1), (2), (3), (4), (6), (18) and (21).

- 6/8: Remaining updates to IsForbiddenByDbx().

       Please address comments (15), (16), and (19).

- 7/8: Remaining updates to IsAllowedByDb().

       Please address comment (20).

- 8/8: IsSignatureFoundInDatabase() updates, including call site updates
       in DxeImageVerificationHandler().

       Please address comments (7), (8), (9), (11), (12), (13), (22),
       (23), (24) and (25).

Thanks
Laszlo

&gt;|        }
&gt;|      }
&gt;|    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9444</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-03 08:06:23 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #18)

&gt; &gt;| @@ -1449,11 +1466,20 @@ IsAllowedByDb (
&gt; &gt;|                             mImageDigestSize
&gt; &gt;|                             );
&gt; &gt;|            if (VerifyStatus) {
&gt; &gt;| +            VerifyStatus = FALSE;
&gt; &gt;| +
&gt; &gt;|              //
&gt; &gt;|              // Here We still need to check if this RootCert&apos;s Hash is revoked
&gt; &gt;|              //
&gt; &gt;| +            DbxDataSize = 0;
&gt; &gt;|              Status   = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DbxDataSize, NULL);
&gt; &gt;| -            if (Status == EFI_BUFFER_TOO_SMALL) {
&gt; &gt;| +            if (Status != EFI_BUFFER_TOO_SMALL) {
&gt; &gt;| +              if (Status == EFI_NOT_FOUND) {
&gt; &gt;| +                //
&gt; &gt;| +                // Apparently not in dbx if the database doesn&apos;t exist.
&gt; &gt;| +                //
&gt; &gt;| +                VerifyStatus = TRUE;
&gt; &gt;| +              }
&gt; &gt;|                goto Done;
&gt; &gt;|              }
&gt; 
&gt; (20) I&apos;d again propose the pattern from (12) and (15).

Meaning two things:
- &quot;apparently&quot; vs. &quot;evidently&quot;,
- and the ASSERT().

The &quot;goto&quot; is justified in this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9603</commentid>
    <comment_count>20</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-11 04:46:42 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #18 &amp; #19)
Thank you very much for the very thorough review. I agree most of the comments. I&apos;ll give separate response later. v4 is being prepared and will bed uploaded soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9626</commentid>
    <comment_count>21</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-11 16:30:34 +0000</bug_when>
    <thetext>Thanks, Jian! Please take your time. I will probably be slow to review v4; my plate has been way too full lately. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9634</commentid>
    <comment_count>22</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-12 00:00:04 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #19)
About the ASSERT(), there&apos;re more similar cases in the same file. Do you think we need to add it to them all? But, on a second thought, I don&apos;t see any benefit from it. It seems no chances that GetVariable() will return EFI_SUCCESS in the case of variable buffer with zero size.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9638</commentid>
    <comment_count>23</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-12 03:11:28 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #19)
&gt;|              DbxData = (UINT8 *) AllocateZeroPool (DbxDataSize);
&gt;| @@ -1466,7 +1492,8 @@ IsAllowedByDb (
&gt;|                goto Done;
&gt;|              }
&gt;|
&gt;| -            if (IsCertHashFoundInDatabase (RootCert, RootCertSize, (EFI_SIGNATURE_LIST *)DbxData, DbxDataSize, &amp;RevocationTime)) {
&gt;| +            Status = IsCertHashFoundInDatabase (RootCert, RootCertSize, (EFI_SIGNATURE_LIST *)DbxData, DbxDataSize, &amp;RevocationTime, &amp;IsFound);
&gt;| +            if (!EFI_ERROR (Status) &amp;&amp; IsFound) {
&gt;|                //
&gt;|                // Check the timestamp signature and signing time to determine if the RootCert can be trusted.
&gt;|                //
&gt;| @@ -1474,6 +1501,8 @@ IsAllowedByDb (
&gt;|                if (!VerifyStatus) {
&gt;|                  DEBUG ((DEBUG_INFO, &quot;DxeImageVerificationLib: Image is signed and signature is accepted by DB, but its root cert failed the timestamp check.\n&quot;));
&gt;|                }
&gt;| +            } else if (!EFI_ERROR (Status) &amp;&amp; !IsFound) {
&gt;| +              VerifyStatus = TRUE;
&gt;|              }
&gt;|
&gt;|              goto Done;

Similar to (5), there&apos;s another memory leak here in multiple cert case. DbxData should be freed if it&apos;s not NULL before allocation. But I think we could move GetVariable related code to be out of while-loop, because the code is just retrieving the same variable and there&apos;s no need to read it again and again. But I&apos;m not sure if there&apos;s chance that it&apos;ll be updated elsewhere while being retrieved here. Possible?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9640</commentid>
    <comment_count>24</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-12 03:13:57 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #23)
Sorry I quoted wrong code in last comment. See below

&gt;| @@ -1449,11 +1466,20 @@ IsAllowedByDb (
&gt;|                             mImageDigestSize
&gt;|                             );
&gt;|            if (VerifyStatus) {
&gt;| +            VerifyStatus = FALSE;
&gt;| +
&gt;|              //
&gt;|              // Here We still need to check if this RootCert&apos;s Hash is revoked
&gt;|              //
&gt;| +            DbxDataSize = 0;
&gt;|              Status   = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DbxDataSize, NULL);
&gt;| -            if (Status == EFI_BUFFER_TOO_SMALL) {
&gt;| +            if (Status != EFI_BUFFER_TOO_SMALL) {
&gt;| +              if (Status == EFI_NOT_FOUND) {
&gt;| +                //
&gt;| +                // Apparently not in dbx if the database doesn&apos;t exist.
&gt;| +                //
&gt;| +                VerifyStatus = TRUE;
&gt;| +              }
&gt;|                goto Done;
&gt;|              }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9642</commentid>
    <comment_count>25</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-12 12:22:18 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #22)
&gt; (In reply to Laszlo Ersek from comment #19)
&gt; About the ASSERT(), there&apos;re more similar cases in the same file. Do you
&gt; think we need to add it to them all? But, on a second thought, I don&apos;t see
&gt; any benefit from it. It seems no chances that GetVariable() will return
&gt; EFI_SUCCESS in the case of variable buffer with zero size.

My thinking was that the code deserved a comment -- it would really help my understanding at least if a comment stated explicitly that GetVariable() was bound to fail at that point (due to size=0).

And then, an ASSERT() is always better than a comment. :) It has zero cost in RELEASE builds, and provides extra safety in DEBUG/NOOPT builds.

Up to you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9643</commentid>
    <comment_count>26</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-12 12:52:29 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #23)

&gt; Similar to (5), there&apos;s another memory leak here in multiple cert
&gt; case. DbxData should be freed if it&apos;s not NULL before allocation. But
&gt; I think we could move GetVariable related code to be out of
&gt; while-loop, because the code is just retrieving the same variable and
&gt; there&apos;s no need to read it again and again. But I&apos;m not sure if
&gt; there&apos;s chance that it&apos;ll be updated elsewhere while being retrieved
&gt; here. Possible?

Believe it or not :), I spent at least half an hour on that question!

So, it&apos;s a bit tricky. Note that, once we enter the &quot;VerifyStatus&quot;
block, we *always* jump to the &quot;Done&quot; label after one iteration. Please
see the &quot;goto&quot; statement that is at the very end of the block that is
conditional on &quot;VerifyStatus&quot;.

That is, there is no way to leak &quot;DbxData&quot;, because:

- &quot;VerifyStatus&quot; is FALSE, and we don&apos;t allocate &quot;DbxData&quot; at all, or
- &quot;VerifyStatus&quot; is TRUE, we allocate &quot;DbxData&quot;, but then we *alway*
  jump out of the loop (to the &quot;Done&quot; label).

My thoughts then turned to a more difficult question: was it indeed the
right thing to immediately terminate the loop (with success or failure)
once &quot;VerifyStatus&quot; is set to TRUE?

I mean sure, if the DBX check does *not* fire, then we&apos;re all good.

But in case the DBX check fires -- meaning that the current certificate,
selected from DB, accepts the executable, but the certificate is
blacklisted --, should we perhaps continue scanning DB for *another*
certificate that also accepts the binary, but is not rejected by DBX?

The UEFI spec answers this question, apparently. In &quot;32.5.3.3
Authorization Process&quot; in UEFI-2.8, we have

&gt; 3. The security database db must either contain an entry with a hash
&gt;    value of the image (with a supported hash type), or it must contain
&gt;    an entry with a certificate against which an entry in the image&apos;s
&gt;    certificate table can be verified. In either case verification must
&gt;    not succeed if the security database dbx contains any record with:
&gt;
&gt;    [...]
&gt;
&gt;    B. Any entry with SignatureListType of EFI_CERT_X509_SHA256,
&gt;       EFI_CERT_X509_SHA384, or EFI_CERT_X509_SHA512, with any
&gt;       SignatureData which reflects the To-Be-Signed hash included in
&gt;       any certificate in the signing chain of the signature being
&gt;       verified.
&gt;
&gt;    [...]

&quot;Any certificate in the signing chain of the signature being verified&quot;
seems to include &quot;current RootCert&quot;. Therefore the &quot;goto Done&quot; at the
end of the block appears justified to me.

And so DbxData cannot be leaked.

(

It&apos;s also interesting to look at IsAllowedByDb() historically.

- The &quot;goto Done&quot; statemenet originates from commit 0c18794ea428 (&quot;Add
  security package to repository.&quot;, 2011-09-02). At that time, the
  function was still called VerifyCertPkcsSignedData(), and it only
  searched for a match in DB -- it didn&apos;t consider the DBX blacklist.

- Then in commit 27c93c06c0a8 (&quot;Correct the DBX and Certificate Hash
  Checking.&quot;, 2015-02-04), the blacklist check was added. It extended
  the IsAllowedByDb() function with the current logic -- importantly, it
  *did not continue* the loop if the DBX check flipped VerifyStatus back
  to FALSE! Even if the DBX check set VerifyStatus to FALSE, the commit
  would allow the loop to terminate, like before, just because we found
  an entry in DB that accepted the binary.

  And based on the UEFI spec, I think it was intentional.

)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9644</commentid>
    <comment_count>27</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-12 13:00:48 +0000</bug_when>
    <thetext>(I mean I had spent half an hour, dedicated to DbxData, when originally writing comment 18. That comment was going to be incredibly long anyway, and I determined DbxData was not possible to leak, plus the loop termination on DBX match looked intentional as well, so I decided to simply not comment on any of that. :) )</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9663</commentid>
    <comment_count>28</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-14 04:40:31 +0000</bug_when>
    <thetext>For ASSERT(), I got your point. It&apos;s ok for me if it&apos;s for comments purpose. So let&apos;s keep it.

For DbxData, you&apos;re right. I neglected the &quot;goto Done&quot; part.

Thanks again for the great comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676</commentid>
    <comment_count>29</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-09-16 17:59:44 +0000</bug_when>
    <thetext>While we&apos;re discussing leaks. We&apos;ve identified one in IsAllowedByDb(), in the primary &quot;for&quot; loop, DbxData is allocated and not freed before the end of the loop. The final allocation is freed at the end of the function, but any intermediate allocations are leaked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677</commentid>
    <comment_count>30</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-09-16 18:05:53 +0000</bug_when>
    <thetext>*OR* I could add a comment before reading all the updates where Laszlo diligently described why DbxData can&apos;t be leaked.

I would encourage a comment about why the leak is impossible. I would also love to see this code refactored in a way that this behavior is more apparent.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9679</commentid>
    <comment_count>31</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-16 21:55:22 +0000</bug_when>
    <thetext>(In reply to Bret Barkelew from comment #30)
&gt; *OR* I could add a comment before reading all the updates where Laszlo
&gt; diligently described why DbxData can&apos;t be leaked.
&gt; 
&gt; I would encourage a comment about why the leak is impossible. I would also
&gt; love to see this code refactored in a way that this behavior is more
&gt; apparent.

I think we can move those code (get dbx variable) to be outside of the while-loop. If no objection, I&apos;ll put change in the patch (1) in v4 series.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9699</commentid>
    <comment_count>32</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-17 05:53:21 +0000</bug_when>
    <thetext>The code movement sounds good to me, thank you. I also agree that the final &quot;goto Done&quot; (i.e. &quot;VerifyStatus==TRUE&quot; being final) deserves a comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9743</commentid>
    <comment_count>33</comment_count>
      <attachid>401</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-20 02:11:33 +0000</bug_when>
    <thetext>Created attachment 401
v4

v4 is uploaded. Please note that the logic in IsAllowedByDb() is also refined a little bit besides moving the GetVariable out of while-loop and adding comments.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9744</commentid>
    <comment_count>34</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-20 02:14:21 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #33)
&gt; Created attachment 401 [details]
&gt; v4
&gt; 
&gt; v4 is uploaded. Please note that the logic in IsAllowedByDb() is also
&gt; refined a little bit besides moving the GetVariable out of while-loop and
&gt; adding comments.

Patch 2/8 and 4/8 mentioned are not included because I agree to drop those changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9745</commentid>
    <comment_count>35</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-20 05:32:50 +0000</bug_when>
    <thetext>Thanks, Jian. I&apos;ve queued this update for review. It will take a while; my backlog is crazy. :(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9807</commentid>
    <comment_count>36</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-25 05:26:35 +0000</bug_when>
    <thetext>Jian,

I&apos;m very sorry, I must have missed your specific remark in comment 31 about *squashing* the movement of the dbx variable fetch into patch#1. In comment 32, I meant to agree to the code movement in general, and to a code comment on &quot;goto Done&quot;, in v4 -- but I certainly didn&apos;t mean to agree to doing that in patch#1, specifically.

Patch#1 -- fixing the leak in IsCertHashFoundInDatabase() -- is completely unrelated to the code movement. We *absolutely* need to separate the code movement to a stand-alone patch. In IsCertHashFoundInDatabase(), we fix a leak. In IsAllowedByDb(), we move around code to improve the readability of the function, but we do not change the behavior.

Again, the fault is with me, because you did announce your intent; I apologize for missing your intent. (It clearly happened because I&apos;ve been continuously overloaded for weeks or months now.) I should have spoken up earlier.

I have some more comments on v4 1/6, specifically in relation to EFI_BUFFER_TOO_SMALL.

- Inverting the EFI_BUFFER_TOO_SMALL condition at the top of the function (related to &quot;db&quot;) is helpful. It does not change behavior (there is no bug), but it simplifies the code flow, and it allows us to un-nest the rest of the function by one indentation level. Obviously, this patch should stand on its own.

- The EFI_BUFFER_TOO_SMALL change, related to &quot;dbx&quot;, is justified; it is a bugfix. It belongs in its own separate patch, together with the DbxDataSize=0 assignment.

So we need to split v4 1/6 into *at least* four patches:
- fixing the leak in IsCertHashFoundInDatabase(), like I requested in comment 18,

- the db:EFI_BUFFER_TOO_SMALL refactoring / un-indentation for IsAllowedByDb(),

- the dbx fetching fix (DbxDataSize=0 assignment, and EFI_BUFFER_TOO_SMALL check); *in-place*

- moving the dbx fetching out of the loop,

- (possibly commenting on &quot;goto Done&quot; for improving readability).

In its current form, v4 1/6 is practically un-reviewable to me.

--*--

I request that you please start minimalizing patches (*any* patches you write) as much as you can, as a *primary* goal. I shouldn&apos;t have to request this every single time I review a patch; I&apos;m asking for this as a *general* development method, a general attitude towards code changes. All patches should be as minimal as we can possibly make them.

Edk2 contributors really have to optimize the patches for the review process, and not for the programming (authoring) process.

- There is just one author, there are multiple reviewers.

- Writing code is easier than reading code. The author translates ideas to code, the reviewers need to translate code to ideas. The second is a lot more difficult.

If given a choice between twenty small patches and six messy patches, I&apos;ll take the former *any day*. I can stop and resume reviewing a  series at a patch boundary at any time. So if you break the patch set into twenty small patches, I&apos;ll have an easy time reviewing any given patch in the series, and I&apos;ll have twenty possible review suspension points, where I can go away and come back. If you give me 6 messy patches, I&apos;ll have to spend half a day *deciphering* each, and it destroys my mood and productivity.

Simplicity is the *most important* factor in software engineering. Every patch author must *actively* look for patch minimization opportunities, as a standing imperative, and vigorously exploit those opportunities.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9808</commentid>
    <comment_count>37</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-25 05:43:33 +0000</bug_when>
    <thetext>For patch v4 2/6 (SecurityPkg/DxeImageVerificationLib: Add nullity check for CertBuffer):

I have now looked into this in more detail than in bullet (17).

The patch is valid, but the commit message is wrong.

The condition that we intend to catch here is whether the &quot;CertNumber&quot; field (of type UINT8) at the start of the output &quot;CertStack&quot; is zero.

Namely, after ensuring that BufferLength is positive, and CertBuffer is not NULL, the expression (*CertBuffer) indeed gives us the embedded &quot;CertNumber&quot; field. Therefore the commit message should say, &quot;catch if CertStack.CertNumber is zero&quot;.

However: this change is unnecessary! (Note that in bullet (17), I wrote that I couldn&apos;t tell whether this change was necessary.) Now I claim that this change is unnecessary.

Namely, just below we have:

  CertNumber = (UINT8) (*CertBuffer);
  CertPtr    = CertBuffer + 1;
  for (Index = 0; Index &lt; CertNumber; Index++) {

If CertNumber is 0, then the loop body is never entered, and we end up at the &quot;Done&quot; label.

So I think this change (patch v4 2/6) can be dropped altogether.

(Side comment: this is a good example why *small* patches are important. Now that in v4 this change is isolated to its own patch, I could investigate it separately from everything else, and arrive at a conclusion.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9809</commentid>
    <comment_count>38</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-25 05:53:37 +0000</bug_when>
    <thetext>Let me revise that: patch v4 2/6 has no effect on the control flow, with (*CertBuffer) == 0, but it changes the return value of the function.

So I was partly wrong; the patch is not superfluous.

However, the commit message is still wrong. The right message would be something like:

&quot;&quot;&quot;
SecurityPkg/DxeImageVerificationLib: reject CertStack.CertNumber==0 per DBX

In case the signers&apos; certificate stack, retrieved from the PE/COFF image&apos;s Authenticode blob, has zero elements (= there are zero signer certificates), then we should consider the image forbidden by DBX, not accepted by DBX.
&quot;&quot;&quot;

With this commit message update, for v4 2/6:

Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9810</commentid>
    <comment_count>39</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-25 05:56:46 +0000</bug_when>
    <thetext>(Meta comment: if my insistence on &quot;atomic&quot; patches is perceived as counter-productive, I&apos;m OK to withdraw from the review on this BZ. I certainly don&apos;t intend to slow down or block progress, if other reviewers on the infosec group would like to provide R-b&apos;s. Thanks.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9813</commentid>
    <comment_count>40</comment_count>
      <attachid>411</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-25 08:03:29 +0000</bug_when>
    <thetext>Created attachment 411
proposed restructuring of v4 patches 3/6 and 4/6

For patches v4 3/6 and v4 4/6:

I think we could further improve the scope of these patches.

* In patch v4 3/6 (&quot;SecurityPkg/DxeImageVerificationLib: Differentiate
  error and search result in IsCertHashFoundInDatabase&quot;), there is no
  need to flip the default value of IsForbidden to TRUE just yet, in
  IsForbiddenByDbx(). This patch is about updating the
  IsCertHashFoundInDatabase() function, and its call sites. By flipping
  the default value of IsForbidden to TRUE, in IsForbiddenByDbx(), we
  temporarily regress the EFI_NOT_FOUND interpretation for dbx. And then
  the next patch has to fix that up.

  So I would move the initial &quot;IsForbidden = TRUE&quot;, and the final
  &quot;IsForbidden = FALSE&quot;, to patch v4 4/6, for function
  IsForbiddenByDbx(). The commit message on patch v4 4/6 would have to
  be rewritten accordingly. (It would basically be the 2nd paragraph of
  v3 4/6:

      All intermediate results inside this function will be checked and
      returned immediately upon any failure or error, like
      out-of-resource, hash calculation error or certificate retrieval
      failure.

  )

* Furthermore, the leak fix from patch v4 4/6 should stand alone. (The
  code in question as also part of v3 -- please see it just under my
  bullet (16) in comment 18.)

Basically I&apos;m suggesting to replace the following two patches:

- v4 3/6 SecurityPkg/DxeImageVerificationLib: Differentiate error and
         search result in IsCertHashFoundInDatabase

- v4 4/6 SecurityPkg/DxeImageVerificationLib: Add logic to handle
         non-existence of dbx in IsForbiddenByDbx

With the following three patches:

- SecurityPkg/DxeImageVerificationLib: Differentiate error and search
  result in IsCertHashFoundInDatabase

  [updated]

- SecurityPkg/DxeImageVerificationLib: tighten default result of
  IsForbiddenByDbx()

  [new patch]

- SecurityPkg/DxeImageVerificationLib: plug Data leak in
  IsForbiddenByDbx()

  [new patch]

The end result is exactly the same, but the patch scopes would improve,
in my opinion.

Please see my proposal attached.

If you disagree, I&apos;m willing to give R-b for v4 3/6 and v4 4/6.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9830</commentid>
    <comment_count>41</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-26 06:08:00 +0000</bug_when>
    <thetext>I&apos;ve tried to look at patch v4 5/6
(&quot;SecurityPkg/DxeImageVerificationLib: Add logic to handle non-existence
of dbx in IsAllowedByDb&quot;).

It is difficult to make comments on this patch. The main problem is that
patch v4 1/6 regresses IsAllowedByDb(), for the case when DBX does not
exist.

Consider:

(a) After v4 patch#1 is applied, if DBX does not exist, IsAllowedByDb()
returns FALSE.

&gt;|   VerifyStatus      = FALSE;
&gt;|
&gt;|   [...]
&gt;|
&gt;|   DbxDataSize = 0
&gt;|   Status      = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DbxDataSize, NULL);
&gt;|   if (Status != EFI_BUFFER_TOO_SMALL) {
&gt;|     goto Done;
&gt;|   }

(b) However, at current edk2 master (c70fef962e80) -- that is, without
applying any patches from this BZ -- , we have the following code in
IsAllowedByDb():

&gt;|           if (VerifyStatus) {
&gt;|             //
&gt;|             // Here We still need to check if this RootCert&apos;s Hash is revoked
&gt;|             //
&gt;|             Status   = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DbxDataSize, NULL);
&gt;|             if (Status == EFI_BUFFER_TOO_SMALL) {
&gt;|               goto Done;
&gt;|             }
&gt;|             DbxData = (UINT8 *) AllocateZeroPool (DbxDataSize);
&gt;|             if (DbxData == NULL) {
&gt;|               goto Done;
&gt;|             }
&gt;|
&gt;|             Status = gRT-&gt;GetVariable (EFI_IMAGE_SECURITY_DATABASE1, &amp;gEfiImageSecurityDatabaseGuid, NULL, &amp;DbxDataSize, (VOID *) DbxData);
&gt;|             if (EFI_ERROR (Status)) {
&gt;|               goto Done;
&gt;|             }

When entering this block, the value in &quot;DbxDataSize&quot; is indeterminate
(due to a separate bug, discussed earlier). However, for the &quot;DBX does
not exist&quot; case, it actually doesn&apos;t matter.

VariableServiceGetVariable()
[MdeModulePkg/Universal/Variable/RuntimeDxe/Variable.c] calls
FindVariable() *first* -- which can return EFI_NOT_FOUND --, and does
the following only *second*, in accordance with the UEFI spec:

&gt;|   if (*DataSize &gt;= VarDataSize) {
&gt;|     if (Data == NULL) {
&gt;|       Status = EFI_INVALID_PARAMETER;
&gt;|       goto Done;
&gt;|     }

Which means that, if DBX does not exist, the first GetVariable()
invocation quoted under (b) will return EFI_NOT_FOUND, regardless of the
indeterminate value in DbxDataSize.

The EFI_BUFFER_TOO_SMALL check is wrong right after (discussed
elsewhere). Thus, we reach AllocateZeroPool().

Assume that AllocateZeroPool() fails (due to the indeterminate
DbxDataSize being impossible to allocate). Then we jump to Done, with
VerifyStatus=TRUE. This happens to be a *correct* result for the
function!

Assume that AllocateZeroPool() succeeds. Then we reach the last
GetVariable() call, for DBX. This will again fail with EFI_NOT_FOUND. We
jump to Done, with VerifyStatus=TRUE. This is again a *correct* result
for the function!

Therefore, despite all its flaws, IsAllowedByDb() at current master
(c70fef962e80) handles the total absence of DBX *correctly*.

And patch v4 1/6 breaks that, and then patch v4 5/6 restores it
separately. That&apos;s not a correct approach; if possible, we should not
break the &quot;DBX absent&quot; case for IsAllowedByDb() even temporarily.

I made some observations on v4 1/6 in comment#36 already. As I
mentioned, the DBX fetching changes in that patch must be broken out to
several smaller patches. And now I&apos;m adding: while at it, make sure that
the &quot;DBX absent&quot; return value for IsAllowedByDb() is never regressed,
relative to master.

With that in mind, patch v4 5/6 -- which depends on v4 1/6 -- will
either fall away completely, or it will have to be reworked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9831</commentid>
    <comment_count>42</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-26 06:56:25 +0000</bug_when>
    <thetext>Re: patch v4 6/6 (&quot;SecurityPkg/DxeImageVerificationLib: Differentiate error and search result in IsSignatureFoundInDatabase&quot;):

Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9969</commentid>
    <comment_count>43</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-09 04:26:28 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #36)
Totally agree. I&apos;ll split the patches at suggested. Thanks for the very good advice.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9970</commentid>
    <comment_count>44</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-09 04:30:40 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #37)
&gt; For patch v4 2/6 (SecurityPkg/DxeImageVerificationLib: Add nullity check for
&gt; CertBuffer):
&gt; 
Good catch. Let&apos;s drop patch#2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9971</commentid>
    <comment_count>45</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-09 04:34:57 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #38)
&gt; Let me revise that: patch v4 2/6 has no effect on the control flow, with
&gt; (*CertBuffer) == 0, but it changes the return value of the function.
&gt; 

Right. I almost forgot why :(, and wrote a wrong commit message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9972</commentid>
    <comment_count>46</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-09 04:38:59 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #39)
&gt; (Meta comment: if my insistence on &quot;atomic&quot; patches is perceived as
&gt; counter-productive, I&apos;m OK to withdraw from the review on this BZ. I
&gt; certainly don&apos;t intend to slow down or block progress, if other reviewers on
&gt; the infosec group would like to provide R-b&apos;s. Thanks.)

I don&apos;t think it&apos;ll block anything. You did a very good review works. I really appreciate that. Forgive my slow response. I&apos;m really occupied by many other things.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9973</commentid>
    <comment_count>47</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-09 04:40:42 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #40)
&gt; Created attachment 411 [details]
&gt; proposed restructuring of v4 patches 3/6 and 4/6
&gt; 
&gt; For patches v4 3/6 and v4 4/6:
&gt; 

Totally agree.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9974</commentid>
    <comment_count>48</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-09 05:07:21 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #41)
&gt; I&apos;ve tried to look at patch v4 5/6
&gt; (&quot;SecurityPkg/DxeImageVerificationLib: Add logic to handle non-existence
&gt; of dbx in IsAllowedByDb&quot;).
&gt; 

It&apos;s brain burning comment:). I read it several times. But I still don&apos;t follow.  Forgive my numbness. I agree your analysis of DBX non-existence situation. But if DBX exists and DbxDataSize happens to be a small enough integer, the first gRT-&gt;GetVariable() do return EFI_BUFFER_TOO_SMALL. The original code did a &apos;==&apos; comparing and jump to &apos;Done&apos; if true. Isn&apos;t it still bug here?

            if (Status == EFI_BUFFER_TOO_SMALL) {
              goto Done;
            }

Do you mean we just need to fix above one but no need to init DbxDataSize?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9978</commentid>
    <comment_count>49</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-09 17:22:35 +0000</bug_when>
    <thetext>Jian,

in comment 41, I focused only on the &quot;DBX absent&quot; case.

I did not consider any &quot;DBX present, and [insert other circumstances]&quot; situation.

My point was that, if DBX is absent, then patch#1 regresses the return value of IsAllowedByDb(), and then patch#5 restores the behavior.

Generally, when we work towards fixing a bug (or a set of bugs), we avoid introducing new ones, even temporarily (that is, even mid-series).

Such transitory bugs do not play nice with bisection. A person could be bisecting an independent issue, and the temporary breakage of IsAllowedByDb(), when DBX is absent, could prevent them from testing (interpreting) the symptom they were actually looking for, in the bisection. Put differently, such transitory bugs may leave a person with untestable commit ranges during a bisection.

So my request was that we please write patches that never break things, only refactor code (without changing behavior), or improve behavior.

Now I&apos;m fully aware that this is sometimes very difficult to do with small surgical steps, if at all possible :(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9991</commentid>
    <comment_count>50</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-10 01:54:06 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #49)
Understood. I think refactor will always cause bisection in this special case. Maybe we should not do it. But, from another point of view, I think there&apos;s also false-negative issue here. In original code, any error in fetching dbx will not alter the result of VerifyStatus (which is TRUE). Only timestamp check failure will change it to FALSE.

It means dbx timestamp check can be bypassed for other errors (like out-of-resource) even if it&apos;s expired. Similar to the issue in IsSignatureFoundInDatabase reported in tracker, any error in checking dbx should be taken as checking failure (not-allowed). I think we should also fix it here.

If you agree it&apos;s a false-negative issue in IsAllowedByDb(), I think it&apos;s OK to move the code fetching dbx to be outside the while-loop, because it&apos;s ok to return FALSE upon any error in fetching dbx. 

Otherwise, refactor this part of code will always cause bisection, because at that point (in refactored code) db has not been checked and we can only return FALSE upon errors (returning TRUE is a worse choice), which is different from original code logic.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9992</commentid>
    <comment_count>51</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-10 04:13:24 +0000</bug_when>
    <thetext>In the end, I agree with you. It&apos;s more important to fix the &quot;incorrectly accepted&quot; situation than to keep the &quot;correctly accepted&quot; situation intact at every stage.

It looks like we cannot avoid a temporary &quot;incorrectly rejected&quot; behavior, midway into the series (when DBX is absent). But given the circumstances, I think it&apos;s tolerable, temporarily. Being too strict is not optimal, but if we have to choose either/or, it&apos;s better than being too lax. Please go ahead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9993</commentid>
    <comment_count>52</comment_count>
      <attachid>418</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-10-10 04:31:46 +0000</bug_when>
    <thetext>Created attachment 418
v5

Thanks, Laszlo. I uploaded v5 patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10023</commentid>
    <comment_count>53</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-15 03:52:39 +0000</bug_when>
    <thetext>Jian, please don&apos;t wait for my feedback on v5 -- please ask the owning package maintainers to review, and/or other reviewers from the infosec team. As I wrote elsewhere, I&apos;m ramping down my triage &amp; review activities in infosec. Thank you, and my apologies.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10819</commentid>
    <comment_count>54</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-09 11:55:04 +0000</bug_when>
    <thetext>*** Bug 2450 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11072</commentid>
    <comment_count>55</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:20:49 +0000</bug_when>
    <thetext>2/5/2020 infosec meeting - per starting time of embargo in june 19 and fact that we have patches + cve, move to un-embargo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11110</commentid>
    <comment_count>56</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-05 15:09:05 +0000</bug_when>
    <thetext>Jian, please post the patches to the mailing list immediately, for maintainer review. This is a 0day that has been opened now, without patches being ready for immediate merging into upstream master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11111</commentid>
    <comment_count>57</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-05 15:21:17 +0000</bug_when>
    <thetext>In other words, we do *not* have patches, for upstream edk2. We would have patches for upstream edk2, and therefore for open source downstreams of edk2, if those patches were now ready for immediate posting to edk2-devel *and merging* into edk2. But prior review in this BZ had never reached that point. When I burned out and stepped away from the infosec team (comment 53), noone else joined this review, not even SecurityPkg maintainers. So, we do not have approved (ready-to-go) upstream patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11123</commentid>
    <comment_count>58</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-02-06 09:24:27 +0000</bug_when>
    <thetext>Patches posted https://edk2.groups.io/g/devel/message/53866
Branch: https://github.com/jwang36/edk2/tree/fix-bz1608-bypass-blacklist-check-via-signature</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11262</commentid>
    <comment_count>59</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-14 09:31:13 +0000</bug_when>
    <thetext>* Jian posted:
[edk2-devel] [PATCH v2 00/10] Fix false negative issue in DxeImageVerificationHandler

* Mailing list archive links:
http://mid.mail-archive.com/20200214072745.1570-1-jian.j.wang@intel.com
https://edk2.groups.io/g/devel/message/54416

* Topic branch:
https://github.com/jwang36/edk2/tree/fix-bz1608-bypass-blacklist-check-via-signature-v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11302</commentid>
    <comment_count>60</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-02-19 09:21:58 +0000</bug_when>
    <thetext>Pushed fbb9607223...c230c002ac</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17359</commentid>
    <comment_count>61</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:02 +0000</bug_when>
    <thetext>http://www.compilatori.com/category/tech/	http://www.wearelondonmade.com/category/tech/	http://www.jopspeech.com/category/tech/	http://joerg.li/category/tech/	http://connstr.net/category/tech/	http://embermanchester.uk/category/tech/	http://www.slipstone.co.uk/category/tech/	http://www.logoarts.co.uk/category/tech/	http://www.acpirateradio.co.uk/category/tech/	https://waytowhatsnext.com/category/property/	https://www.webb-dev.co.uk/category/property/	http://www.iu-bloomington.com/category/property/	http://www-look-4.com/category/tech/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>356</attachid>
            <date>2019-06-03 01:11:07 +0000</date>
            <delta_ts>2019-09-20 02:11:33 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-SecurityPkg-DxeImageVerificationLib-fix-false-negati.patch</filename>
            <type>text/plain</type>
            <size>15538</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>357</attachid>
            <date>2019-06-13 17:05:39 +0000</date>
            <delta_ts>2019-09-20 02:11:33 +0000</delta_ts>
            <desc>v2</desc>
            <filename>0001-SecurityPkg-DxeImageVerificationLib-fix-false-negati.patch</filename>
            <type>text/plain</type>
            <size>15538</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>368</attachid>
            <date>2019-07-25 02:16:42 +0000</date>
            <delta_ts>2019-09-20 02:11:33 +0000</delta_ts>
            <desc>v3</desc>
            <filename>0001-SecurityPkg-DxeImageVerificationLib-fix-false-negati.patch</filename>
            <type>text/plain</type>
            <size>16321</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>401</attachid>
            <date>2019-09-20 02:11:33 +0000</date>
            <delta_ts>2019-09-20 02:11:33 +0000</delta_ts>
            <desc>v4</desc>
            <filename>v4.zip</filename>
            <type>application/zip</type>
            <size>11393</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>411</attachid>
            <date>2019-09-25 08:03:29 +0000</date>
            <delta_ts>2019-09-25 08:03:29 +0000</delta_ts>
            <desc>proposed restructuring of v4 patches 3/6 and 4/6</desc>
            <filename>proposed_restructuring_of_v4_patches_3_and_4.zip</filename>
            <type>application/zip</type>
            <size>4926</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>418</attachid>
            <date>2019-10-10 04:31:46 +0000</date>
            <delta_ts>2019-10-10 04:31:46 +0000</delta_ts>
            <desc>v5</desc>
            <filename>v5.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>13985</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1610</bug_id>
          
          <creation_ts>2019-03-10 21:26:36 +0000</creation_ts>
          <short_desc>Ip4AccpetFrame crash</short_desc>
          <delta_ts>2020-02-23 04:01:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2550</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6675</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-10 21:26:36 +0000</bug_when>
    <thetext>A runtime fuzz testing environment was setup to test the UEFI platforms network stack. This environment uses QEMU and the OvmfPkg and SourceLevelDebugPkg packages, along with the Socket examples from AppPkg to exercise various parts of the UEFI network stack. A dumb fuzzing approach is being used, leveraging the ISIC (IP Stack Integrity Checker) tool found at http://isic.sourceforge.net/ to send anomalous network traffic to the UEFI target.

Bug is sending a packet that contains a length field of 0 will reach Ip4AccpetFrame and hit an ASSERT because the packet length of 0 causes NetbufGetByte to return a nullptr. We should check if incoming packets have a valid length field.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6676</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-10 21:27:57 +0000</bug_when>
    <thetext>+++++ sfu5 3/5/2019 6:15:34 PM

IP4 driver (perhaps in Ip4OnFrameReceivedDpc) must check the data length against the minimum IP4 header length, before access the header field.

We did fix the zero packet size problem in network stack drivers before, but it apparently didn&apos;t cover all the code path like this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8185</commentid>
    <comment_count>2</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-06-25 16:48:53 +0000</bug_when>
    <thetext>What is the behavior with ASSERTs disabled? Corruption?

Is there a proposed fix?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8704</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 17:14:50 +0000</bug_when>
    <thetext>I agree with the question -- when built for DEBUG/NOOPT, this seems to be a DoS only, but when built for RELEASE, it could be more sinister.

At commit 3d34b5f32692, from &quot;NetworkPkg/Ip4Dxe/Ip4Input.c&quot;, function Ip4AccpetFrame() -- it seems like Head=NULL is passed to Ip4PreProcessPacket() if ASSERT()s are disabled. Ip4PreProcessPacket() is complex enough that I hope a NetworkPkg maintainer can assess the problem...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8705</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 17:19:03 +0000</bug_when>
    <thetext>Statement about the ArmVirtPkg and OvmfPkg platforms: when they are built for the NOOPT or DEBUG targets, the symptom is only a DoS (failed ASSERT()). I don&apos;t think that would be worthy of an embargo (or even security bug). When built for RELEASE -- it could be worse, I can&apos;t tell off-hand.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9051</commentid>
    <comment_count>5</comment_count>
      <attachid>382</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-18 23:09:58 +0000</bug_when>
    <thetext>Created attachment 382
v1

7.6 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:H/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9052</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-18 23:14:05 +0000</bug_when>
    <thetext>We got 7.6 point of assessment. I think it&apos;d be better to embargo. BTW, I apologize that the fix was ready in last stable tag but not attached in the BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9793</commentid>
    <comment_count>7</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:26:45 +0000</bug_when>
    <thetext>CVE-2019-14559 (share with BZ2031)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11092</commentid>
    <comment_count>8</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 13:05:32 +0000</bug_when>
    <thetext>infosec 2/5/2020 - given the co-pending item is open and the patch has been available for sufficient duration, unembargo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11305</commentid>
    <comment_count>9</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-02-19 10:44:30 +0000</bug_when>
    <thetext>Pushed at 578bcdc2605e3438b9cbdac4e68339f90f5bf8af</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11403</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 04:01:30 +0000</bug_when>
    <thetext>- [edk2-devel] [PATCH v1]
  MdeModulePkg/Ip4Dxe: Check the received package length (CVE-2019-14559).

  https://edk2.groups.io/g/devel/message/54536
  msgid: &lt;20200217073541.13920-1-Jiaxin.wu@intel.com&gt;

- [edk2-devel] [PATCH v2]
  NetworkPkg/Ip4Dxe: Check the received package length (CVE-2019-14559).

  https://edk2.groups.io/g/devel/message/54562
  msgid: &lt;20200217213309.13104-1-Jiaxin.wu@intel.com&gt;

- [edk2-devel] [PATCH v3]
  NetworkPkg/Ip4Dxe: Check the received package length (CVE-2019-14559).

  https://edk2.groups.io/g/devel/message/54569
  msgid: &lt;20200218055203.14732-1-Jiaxin.wu@intel.com&gt;

(v3 was pushed as 578bcdc2605e.)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>382</attachid>
            <date>2019-08-18 23:09:58 +0000</date>
            <delta_ts>2019-08-18 23:09:58 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-MdeModulePkg-Ip4Dxe-Check-the-received-package-lengt.patch</filename>
            <type>text/plain</type>
            <size>3763</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1611</bug_id>
          <alias>CVE-2019-14558</alias>
          <creation_ts>2019-03-10 21:36:06 +0000</creation_ts>
          <short_desc>Password stored in HII database is not cleared after memory free</short_desc>
          <delta_ts>2020-02-16 20:51:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6678</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-10 21:36:06 +0000</bug_when>
    <thetext>In current edk2 setup UI and HII database implementation, the password will be stored in database along with other normal string. For example, in MdeModulePkg\Universal\SetupBrowserDxe\Setup.c, function LoadFormConfig(),

if ((Question-&gt;Operand == EFI_IFR_STRING_OP) || (Question-&gt;Operand == EFI_IFR_PASSWORD_OP)) {
HiiSetString (FormSet-&gt;HiiHandle, Question-&gt;HiiValue.Value.string, (CHAR16*)Question-&gt;BufferValue, NULL);
}

Another example is in MdeModulePkg\Universal\DisplayEngineDxe\ProcessOptions.c, function PasswordProcess(),

if (StrCmp (StringPtr, TempString) == 0) {
gUserInput-&gt;InputValue.Buffer = AllocateCopyPool (Question-&gt;CurrentValue.BufferLen, StringPtr);
gUserInput-&gt;InputValue.BufferLen = Question-&gt;CurrentValue.BufferLen;
gUserInput-&gt;InputValue.Type = Question-&gt;CurrentValue.Type;
gUserInput-&gt;InputValue.Value.string = HiiSetString(gFormData-&gt;HiiHandle, gUserInput-&gt;InputValue.Value.string, StringPtr, NULL);

The HiiDatabase driver will store a copy of password in its own buffer. The user can use HiiSetString() with a empty string to clear the password if it&apos;s not used any more. But the problem is that HiiDatabase driver doesn&apos;t clear old buffer (with password) during memory freeing. (MdeModulePkg\Universal\HiiDatabaseDxe\String.c, SetStringWorker())

  CopyMem (BlockPtr, StringPackage-&gt;StringBlock, OldBlockSize);

  FreePool (StringPackage-&gt;StringBlock);
  StringPackage-&gt;StringBlock = Block;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6679</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-10 21:38:11 +0000</bug_when>
    <thetext>Assigned to Dandan to provide a mitigation solution</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6721</commentid>
    <comment_count>2</comment_count>
      <attachid>274</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-03-14 21:38:30 +0000</bug_when>
    <thetext>Created attachment 274
Attach patch to the issue in HiiDatabase

zero memory before free</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6722</commentid>
    <comment_count>3</comment_count>
      <attachid>275</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-03-14 21:39:05 +0000</bug_when>
    <thetext>Created attachment 275
Fix the issue in</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6723</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-03-14 21:41:17 +0000</bug_when>
    <thetext>(In reply to dandanbi from comment #3)
&gt; Created attachment 275 [details]
&gt; Fix the issue in DisplayEngine</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7818</commentid>
    <comment_count>5</comment_count>
      <attachid>353</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-28 01:18:11 +0000</bug_when>
    <thetext>Created attachment 353
V2 patch to zero password memory in DisplayEngine

V2 patch to zero password memory in DisplayEngine</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7819</commentid>
    <comment_count>6</comment_count>
      <attachid>354</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-28 01:18:55 +0000</bug_when>
    <thetext>Created attachment 354
V2 patch to zero password memory in HiiDatabase

V2 patch to zero password memory in HiiDatabase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8038</commentid>
    <comment_count>7</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-13 17:02:18 +0000</bug_when>
    <thetext>The patch is ready. How about set embargo today (Jun.13)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8706</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 17:27:14 +0000</bug_when>
    <thetext>(1) What kind of attack do we imagine? The OS or a 3rd party module scraping boot services data type memory, for recovering the password?

At commit 3d34b5f32692:

(2) It seems like the open source edk2 tree doesn&apos;t contain code that dynamically generates EFI_IFR_PASSWORD_OP, for populating a form. Do you agree?

(3) Searching VFR files for the &quot;password&quot; keyword (case-insensitively), only the following two files appear affected:

NetworkPkg/WifiConnectionManagerDxe/WifiConnectionManagerDxe.vfr
SecurityPkg/HddPassword/HddPassword.vfr

Do you agree?

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8707</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 17:29:45 +0000</bug_when>
    <thetext>OvmfPkg and ArmVirtPkg platforms look unaffected, due to (a) not generating EFI_IFR_PASSWORD_OP dynamically, and (b) not including any drivers with EFI_IFR_PASSWORD_OP in their static HII packages (such as NetworkPkg/WifiConnectionManagerDxe, SecurityPkg/HddPassword).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9428</commentid>
    <comment_count>10</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-02 09:49:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #8)
&gt; (1) What kind of attack do we imagine? The OS or a 3rd party module scraping
&gt; boot services data type memory, for recovering the password?

The attack may like what you said.

&gt; 
&gt; At commit 3d34b5f32692:
&gt; 
&gt; (2) It seems like the open source edk2 tree doesn&apos;t contain code that
&gt; dynamically generates EFI_IFR_PASSWORD_OP, for populating a form. Do you
&gt; agree?

Yes, you are right.
&gt; 
&gt; (3) Searching VFR files for the &quot;password&quot; keyword (case-insensitively),
&gt; only the following two files appear affected:
&gt; 
&gt; NetworkPkg/WifiConnectionManagerDxe/WifiConnectionManagerDxe.vfr
&gt; SecurityPkg/HddPassword/HddPassword.vfr
&gt; 
&gt; Do you agree?
In fact, only the WifiConnectionManagerDxe.vfr has the &quot;password&quot; opcode.
&gt; 
&gt; Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11090</commentid>
    <comment_count>11</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:59:40 +0000</bug_when>
    <thetext>infosec 2/5/2020 - embargo expired. have cve and patch.  open up</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11237</commentid>
    <comment_count>12</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2020-02-12 22:43:12 +0000</bug_when>
    <thetext>Will send out the patch to community</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11265</commentid>
    <comment_count>13</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-02-16 20:51:06 +0000</bug_when>
    <thetext>Pushed at f1d78c489a39971b5aac5d2fc8a39bfa925c3c5d. Close the tracker.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>274</attachid>
            <date>2019-03-14 21:38:30 +0000</date>
            <delta_ts>2019-03-14 21:38:30 +0000</delta_ts>
            <desc>Attach patch to the issue in HiiDatabase</desc>
            <filename>0001-MdeModulePkg-String.c-ZeroMemory-before-free.patch</filename>
            <type>application/octet-stream</type>
            <size>1642</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>275</attachid>
            <date>2019-03-14 21:39:05 +0000</date>
            <delta_ts>2019-03-14 21:39:05 +0000</delta_ts>
            <desc>Fix the issue in</desc>
            <filename>0002-MdeModulePkg-DisplayEngineDxe-ZeroMemory-before-free.patch</filename>
            <type>application/octet-stream</type>
            <size>2048</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>353</attachid>
            <date>2019-05-28 01:18:11 +0000</date>
            <delta_ts>2019-05-28 01:18:11 +0000</delta_ts>
            <desc>V2 patch to zero password memory in DisplayEngine</desc>
            <filename>V2-MdeModulePkg-DisplayEngineDxe-ZeroMem-before-free.patch</filename>
            <type>application/octet-stream</type>
            <size>2044</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>354</attachid>
            <date>2019-05-28 01:18:55 +0000</date>
            <delta_ts>2019-05-28 01:18:55 +0000</delta_ts>
            <desc>V2 patch to zero password memory in HiiDatabase</desc>
            <filename>V2-MdeModulePkg-String.c-ZeroMemory-before-free.patch</filename>
            <type>application/octet-stream</type>
            <size>3754</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1946</bug_id>
          
          <creation_ts>2019-06-28 02:46:05 +0000</creation_ts>
          <short_desc>Change PiSmmCpu driver to enable 5-level paging when CPU supports it</short_desc>
          <delta_ts>2021-04-14 05:07:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3300</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8271</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-06-28 02:46:05 +0000</bug_when>
    <thetext>5-level paging is introduced by &quot;https://software.intel.com/en-us/download/5-level-paging-and-5-level-ept-white-paper&quot;.
This bugzilla records the effort to change SMM CPU driver to support 5-level paging.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8301</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-01 08:51:30 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH 0/3] Enable 5 level paging when CPU supports
http://mid.mail-archive.com/20190628064700.549472-1-ray.ni@intel.com
https://edk2.groups.io/g/devel/message/42976</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8944</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:35:59 +0000</bug_when>
    <thetext>This is a feature change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9264</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-08-27 00:52:37 +0000</bug_when>
    <thetext>pushed @ 4e78c7bebb2..c630f69df01</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1024</bug_id>
          
          <creation_ts>2018-07-17 08:26:16 +0000</creation_ts>
          <short_desc>GenerateCapsule: the CertType in the dump info is incorrect</short_desc>
          <delta_ts>2018-08-09 13:45:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4299</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:26:16 +0000</bug_when>
    <thetext>from dump-info:

EFI_FIRMWARE_IMAGE_AUTHENTICATION.AuthInfo.CertType             = 9DD2AF4A-DF68-
EE49-8AA9-347D375665A7

the guid value should be: 4aafd29d-68df-49ee-8aa9-347d375665a7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4334</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:26:44 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4458</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:12:26 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4545</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:45:54 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/4619b183f71c1a7c966927060e99aa1f887f605e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1241</bug_id>
          
          <creation_ts>2018-10-11 09:11:26 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Support FSP Dispatch mode</short_desc>
          <delta_ts>2018-12-17 18:35:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>knifeeight22</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5223</commentid>
    <comment_count>0</comment_count>
    <who name="">knifeeight22</who>
    <bug_when>2018-10-11 09:11:26 +0000</bug_when>
    <thetext>FSP will support both API and DISPATCH mode and require one field from Global Data Structure to tell which mode is selected by boot loader. Use one reserved byte for FSP API mode indicator - FspApiModeEnabled and maintain backward compatibility:
1. If platform FSP supports DISPATCH mode, it must initialize this new field.
2. If platform FSP does not support DISPATCH mode (old model), this new field has not effect/not used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5227</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:04:32 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5308</commentid>
    <comment_count>2</comment_count>
    <who name="">knifeeight22</who>
    <bug_when>2018-10-17 21:28:41 +0000</bug_when>
    <thetext>    Add support for both API (original mode) and DISPATCH mode:
    1. Add FspApiModeEnabled field from reserved byte of Global
       Data Structure to tell which mode is selected by boot
       loader. If boot loader invoking FSP-M API this field
       will be initialized to 1, otherwise platform FSP should
       set this field to 0 when initializing Global Data
       Structure for DISPATCH mode.
    2. gFspApiModePpiGuid will be instaled when FSP running in API
       mode and modules only for API mode should have this in depex.
    3. If it is DISPATCH mode, FSP will return to PEI dispatcher,
       not directly return to boot loader.
    4. DISPATCH mode supports DXE NotifyPhase drivers so FSP
       will not wait for PEI NotifyPhase callbacks, instead it
       will install gFspReadyForNotifyPhasePpiGuid PPI for
       platform to complete late initialization before transferring
       to DXE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5328</commentid>
    <comment_count>3</comment_count>
    <who name="">knifeeight22</who>
    <bug_when>2018-10-19 03:05:39 +0000</bug_when>
    <thetext>Fix submitted by a2e61f341d26a78751b2f19b5004c6bbfc8b4fa9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1166</bug_id>
          
          <creation_ts>2018-09-10 23:33:01 +0000</creation_ts>
          <short_desc>VS2012 build failure in cpumppei\cpupaging.c</short_desc>
          <delta_ts>2018-09-25 22:25:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4905</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-09-10 23:33:01 +0000</bug_when>
    <thetext>failure log as below:

..\..\ueficpupkg\cpumppei\cpupaging.c(576) : error C2220: warning treated as error - no &apos;executable&apos; file generated
..\..\ueficpupkg\cpumppei\cpupaging.c(576) : warning C4701: potentially uninitialized local variable &apos;StackBase&apos; used</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5022</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 00:53:19 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5100</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-25 22:25:00 +0000</bug_when>
    <thetext>Pushed at 2939283f2df3b8a0871e9bc7b2dd3718146318f4
Review threads at https://lists.01.org/pipermail/edk2-devel/2018-September/029807.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1113</bug_id>
          
          <creation_ts>2018-08-23 11:20:21 +0000</creation_ts>
          <short_desc>Harden the Usb mass storage driver to prevent system hang by wrong hardware info</short_desc>
          <delta_ts>2018-10-24 00:14:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4686</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-08-23 11:20:21 +0000</bug_when>
    <thetext>The usb mass storage driver read the device BlockSize capacity value directly from the usb hardware. The driver assume the BlockSize value cannot be 1 byte. But if a device deliberately report the block size as 1, which could happen in a broken or malicious usb device, the usb mass driver will deed loop forever when read or write the device.

In edk2\MdeModulePkg\Bus\Usb\UsbMassStorageDxe\UsbMassBoot.c, the four access functions(UsbBootReadBlocks, UsbBootWriteBlocks, UsbBootReadBlocks16, UsbBootWriteBlocks16) use the below same logic to split the total blocks into smaller pieces:

line 822:
  BlockSize = UsbMass-&gt;BlockIoMedia.BlockSize;
  CountMax = (UINT16)(USB_BOOT_MAX_CARRY_SIZE / BlockSize);
  ...
  while (TotalBlock &gt; 0) {
line 832:
    Count     = (UINT16)((TotalBlock &lt; CountMax) ? TotalBlock : CountMax);
    ...
line 865:
    TotalBlock -= Count;
  }

The UsbMass-&gt;BlockIoMedia.BlockSize value in line 822 is directly read from usb device in UsbBootReadCapacity() and if it happen to be 1, then the BlockSize == 1, and the next line 823 CountMax == (UINT16)USB_BOOT_MAX_CARRY_SIZE, which is the (UINT16)0x10000. Unfortunately, the line 823 code use force cast to convert the 32bit value to 16bit value, and cause (UINT16)0x10000 = 0x0, so the CountMax == 0.
OK, then line 832 become Count = (UINT16)((TotalBlock &lt; 0) ? TotalBlock : 0), which cause Count == 0.
Since Count is 0, the line 865 become TotalBlock -= 0, which keep the TotalBlock unchanged, and the while (TotalBlock &gt; 0) condition will always hold which means dead loop.

This issue is caught by Uefi LibFuzzer(ULibfuzzer).

We&apos;d better not trust device reported configures if it can cause the system boot hang.

Fix this issue is simple, and below is a reference. Just use 32bits for CountMax  and avoid force cast convert its value.
diff --git a/MdeModulePkg/Bus/Usb/UsbMassStorageDxe/UsbMassBoot.c b/MdeModulePkg/Bus/Usb/UsbMassStorageDxe/UsbMassBoot.c
index 8cd1d51cab..645817d2f2 100755
--- a/MdeModulePkg/Bus/Usb/UsbMassStorageDxe/UsbMassBoot.c
+++ b/MdeModulePkg/Bus/Usb/UsbMassStorageDxe/UsbMassBoot.c
@@ -814,14 +814,13 @@ UsbBootReadBlocks (
   USB_BOOT_READ10_CMD       ReadCmd;
   EFI_STATUS                Status;
   UINT16                    Count;
-  UINT16                    CountMax;
+  UINT32                    CountMax;
   UINT32                    BlockSize;
   UINT32                    ByteSize;
   UINT32                    Timeout;
 
   BlockSize = UsbMass-&gt;BlockIoMedia.BlockSize;
-  CountMax = (UINT16)(USB_BOOT_MAX_CARRY_SIZE / BlockSize);
+  CountMax = USB_BOOT_MAX_CARRY_SIZE / BlockSize;
   Status    = EFI_SUCCESS;
 
   while (TotalBlock &gt; 0) {
@@ -893,14 +892,13 @@ UsbBootWriteBlocks (
   USB_BOOT_WRITE10_CMD  WriteCmd;
   EFI_STATUS            Status;
   UINT16                Count;
-  UINT16                CountMax;
+  UINT32                CountMax;
   UINT32                BlockSize;
   UINT32                ByteSize;
   UINT32                Timeout;
 
   BlockSize = UsbMass-&gt;BlockIoMedia.BlockSize;
-  CountMax = (UINT16)(USB_BOOT_MAX_CARRY_SIZE / BlockSize);
+  CountMax = USB_BOOT_MAX_CARRY_SIZE / BlockSize;
   Status    = EFI_SUCCESS;
 
   while (TotalBlock &gt; 0) {
@@ -972,14 +970,13 @@ UsbBootReadBlocks16 (
   UINT8                     ReadCmd[16];
   EFI_STATUS                Status;
   UINT16                    Count;
-  UINT16                    CountMax;
+  UINT32                    CountMax;
   UINT32                    BlockSize;
   UINT32                    ByteSize;
   UINT32                    Timeout;
 
   BlockSize = UsbMass-&gt;BlockIoMedia.BlockSize;
-  CountMax = (UINT16)(USB_BOOT_MAX_CARRY_SIZE / BlockSize);
+  CountMax = USB_BOOT_MAX_CARRY_SIZE / BlockSize;
   Status    = EFI_SUCCESS;
 
   while (TotalBlock &gt; 0) {
@@ -1049,14 +1046,13 @@ UsbBootWriteBlocks16 (
   UINT8                 WriteCmd[16];
   EFI_STATUS            Status;
   UINT16                Count;
-  UINT16                CountMax;
+  UINT32                CountMax;
   UINT32                BlockSize;
   UINT32                ByteSize;
   UINT32                Timeout;
 
   BlockSize = UsbMass-&gt;BlockIoMedia.BlockSize;
-  CountMax = (UINT16)(USB_BOOT_MAX_CARRY_SIZE / BlockSize);
+  CountMax = USB_BOOT_MAX_CARRY_SIZE / BlockSize;
   Status    = EFI_SUCCESS;
 
   while (TotalBlock &gt; 0) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4691</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:08:36 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5372</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-24 00:14:30 +0000</bug_when>
    <thetext>fixed in e59db6a7,4f8b2f9d,a58a421c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1025</bug_id>
          
          <creation_ts>2018-07-17 08:36:55 +0000</creation_ts>
          <short_desc>GenerateCapsule:--dump-info co-work with -o option, the output file is not correct</short_desc>
          <delta_ts>2018-08-09 13:45:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4300</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:36:55 +0000</bug_when>
    <thetext>use below command to dump the capsule file&apos;s info, I found the capsule info is dumped into command line window, but not generate into the output.txt file, and it is so strange that the output.txt file&apos;s content is same with the file that I used to do encode operation.

GenerateCapsule  --dump-info test2.cap -o output.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4335</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:27:43 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4450</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-28 03:09:50 +0000</bug_when>
    <thetext>-o or --output is not supported with --dump-info.

--dump-info only displays information to the standard output.  

If the --dump-info information needs to be captured, then the standard output
can be redirected to a file.

    GenerateCapsule --dump-info test2.cap &gt; dumpinfo.txt

The real issue is that use of --dump-info and -o options together should 
generate an error message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4459</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:12:43 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4544</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:45:12 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/f33d5d68abc02727dc828c1079e72ab65e1d63af</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1536</bug_id>
          
          <creation_ts>2019-02-19 08:28:46 +0000</creation_ts>
          <short_desc>[BDS] Some issues with new API EfiBootManagerGetNextFullDevicePath</short_desc>
          <delta_ts>2019-02-25 00:11:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="ChenChen">chen.a.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6401</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-19 08:28:46 +0000</bug_when>
    <thetext>I just found at the end of January a new API EfiBootManagerGetNextFullDevicePath() was added. There are two issues with this new API:
1. Missing EFIAPI for the new API in the header file and C file.
2. The function name is not proper. &quot;*GetNextFullDevicePath&quot; is confusing. I recommend to change to &quot;*GetNextLoadOptionDevicePath&quot;.

I suggest we fix the above before code freeze of Q1 stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6402</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-19 08:30:05 +0000</bug_when>
    <thetext>assign to Chen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6517</commentid>
    <comment_count>2</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-02-25 00:11:53 +0000</bug_when>
    <thetext>edk2: 68a4e15e149771f36ba58b3adcef9b2981a4eda6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1042</bug_id>
          
          <creation_ts>2018-07-24 23:59:59 +0000</creation_ts>
          <short_desc>BaseTools: BinToPcd: When use python 27 to run BinToPCD, it will raise an error but it is successful when use python 36.</short_desc>
          <delta_ts>2018-08-01 18:31:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sun Yanyan">yanyan.sun</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4380</commentid>
    <comment_count>0</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-07-24 23:59:59 +0000</bug_when>
    <thetext>When use python 27(python27.13 or python2.7.15) to run BinToPCD, it will raise an error.
python BinToPcd.py -i C:\Users\yanyansu\Desktop\CustomSigningPrivateKey.bin
Traceback (most recent call last):
  File &quot;BinToPcd.py&quot;, line 126, in &lt;module&gt;
    PcdValue, PcdSize = ByteArray (Buffer, args.Xdr)
  File &quot;BinToPcd.py&quot;, line 72, in ByteArray
    return &apos;{&apos; + (&apos;, &apos;.join ([&apos;0x{Byte:02X}&apos;.format (Byte = Item) for Item in Buffer])) + &apos;}&apos;, len (Buffer)
ValueError: Unknown format code &apos;X&apos; for object of type &apos;str&apos;

But when use python 36 to run BinToPCD, it is successful. 
C:\Python36\python.exe BinToPcd.py -i C:\Users\yanyansu\Desktop\CustomSigningPrivateKey.bin
{0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x42, 0x45, 0x47, 0x49, 0x4E, 0x20, 0x52, 0x53, 0x41, 0x20, 0x50, 0x52, 0x49, 0x56, 0x41, 0x54, 0x45, 0x20, 0x4B, 0x45, 0x59, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x0A, 0x4D, 0x49, 0x49, 0x45, 0x70, 0x41, 0x49, 0x42, 0x41, 0x41, 0x4B, 0x43, 0x41, 0x51, 0x45, 0x41, 0x79, 0x78, 0x2B, 0x46, 0x71, ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4381</commentid>
    <comment_count>1</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-07-25 00:01:48 +0000</bug_when>
    <thetext>From liming&apos;s information, now BP1520 use python 27, BinToPCD support python 27 and python36.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4404</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-25 21:05:40 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4470</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-31 12:29:36 +0000</bug_when>
    <thetext>Path email for review

https://lists.01.org/pipermail/edk2-devel/2018-July/027779.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4475</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-01 18:31:51 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2/commit/76c09700edc67686b29662e81a3ca7d947594ce5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1262</bug_id>
          
          <creation_ts>2018-10-18 03:25:13 +0000</creation_ts>
          <short_desc>AsciiStrToUnicodeStr/AsciiStrToUnicodeStrS convert EASCII to Unicode incorrectly</short_desc>
          <delta_ts>2018-10-22 20:46:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bin.Lain">bin_601</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5316</commentid>
    <comment_count>0</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2018-10-18 03:25:13 +0000</bug_when>
    <thetext>AsciiStrToUnicodeStr directly converts a CHAR8 character to CHAR16. 
If the character is bigger than 0x7F, it will convert the value to a negative number. 
It should convert it to UINT8 firstly. 

ex: 0xC9 =&gt; 0xFFC9

Original: 
    *(Destination++) = (CHAR16)*(Source++);


Modified: 
    *(Destination++) = (CHAR16)(UINT8)*(Source++);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5320</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-18 20:03:30 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5348</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-22 20:46:37 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/0dab57708de64284ac83f0632daba4d9e1cb1135</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1584</bug_id>
          
          <creation_ts>2019-03-03 22:05:52 +0000</creation_ts>
          <short_desc>CpuFeaturePei/Dxe may skip programming package level MSR</short_desc>
          <delta_ts>2020-03-04 00:08:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6607</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-03 22:05:52 +0000</bug_when>
    <thetext>Today&apos;s feature initialization logic assumes that Core#0 always exists. When initializing package level MSR, the feature initialization function only updates the register table when the CpuPhysicalLocation.Core == 0.
But it&apos;s possible that physical core #0 is disabled in the real CPU, when that happens, the package level MSR programming is skipped.

There are two options to solve this:
1. Each feature initialization logic writes the package level MSR programming operation to the table for the current package and set a flag for this specific package. The flag can store in ConfigData.
2. Feature initialization core extends REGISTER_CPU_FEATURE_INFORMATION structure to contain CPU logical location so that each feature initialzation logic can write the package level MSR programming operation to the table for logic core #0.

Option 1 doesn&apos;t impact the design. But we need to evaluate how it&apos;s difficult for feature initialization logic to change.
We need to evaluate which option to go.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6856</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:25:19 +0000</bug_when>
    <thetext>Eric will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8629</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-29 21:28:12 +0000</bug_when>
    <thetext>Ray is fixing this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11515</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-03-04 00:08:58 +0000</bug_when>
    <thetext>Fixed @ 534fcb84decdd613cc35309f24e7b792b1928809</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1114</bug_id>
          
          <creation_ts>2018-08-23 16:36:17 +0000</creation_ts>
          <short_desc>Allocate pool used in debug path</short_desc>
          <delta_ts>2019-02-19 03:31:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=606</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4687</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-08-23 16:36:17 +0000</bug_when>
    <thetext>When using a DebugLib that routes debug messages through ReportStatusCode, the Report Status Code libraries should NOT use AllocatePool unless the extended data doesn&apos;t fit in a static buffer.  Calling AllocatePool which may call DEBUG will cause interesting, but undesirable effects.  DEBUG messages are of a known maximum length, so a static buffer slightly larger that this will prevent AllocatePool from being called for a DEBUG message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4690</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:07:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner. Mike will some more details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4700</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-24 05:20:53 +0000</bug_when>
    <thetext>The DebugLib instances based on status code reporting seem to be

IntelFrameworkModulePkg/Library/PeiDxeDebugLibReportStatusCode
MdeModulePkg/Library/PeiDxeDebugLibReportStatusCode</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4702</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-08-24 12:32:55 +0000</bug_when>
    <thetext>This is related to bugzilla 606.  Here is additional information:

If a DebugPrint calls allocate pool in any way, then a DebugPrint in AllocatePage will cause a recursive problem.  Either a stack fault, or a Lock ASSERT.

While this is easily seen with HeapGuard enabled due to HeapGuard calling AllocatePages for every AllocatePool (for enabled pool types, at least), it can happen in the current code if the poll bucket is exceeded.

Using PeiDxeDebugLibReportStatusCode to have Debug Prints follow ReportStatusCodeEx, we see that debug messages are truncated to fit in the library local buffer:
Guid\StatusCodeDataTypeDebug.h:#define EFI_STATUS_CODE_DATA_MAX_SIZE 200
UINT64          Buffer[(EFI_STATUS_CODE_DATA_MAX_SIZE / sizeof (UINT64)) + 1];

ReportStatusCodeEx implementations vary depending on the library used, but seem to use a buffer that is #define MAX_EXTENDED_DATA_SIZE  0x200 bytes.  The 200 byte debug buffer fits easily in the 0x200 size ReportStatusCodeEx buffer.

Runtime – If after ExitBootServices, will use a local buffer, otherwise AllocatePool

Dxe – if not HighLevel, allocate Pool, otherwise use local buffer.

My suggestion is to always prefer the local buffer if the extended data fits, and only use allocate pool when the data doesn&apos;t fit and is allowed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4904</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-10 21:51:17 +0000</bug_when>
    <thetext>We could not reproduce the recursive issues described in the BZs as our core AllocatePool has lock code below(https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Core/Dxe/Mem/Pool.c#L248) in CoreInternalAllocatePool() that can avoid AllocatePool reentrancy.
  //
  // Acquire the memory lock and make the allocation
  //
  Status = CoreAcquireLockOrFail (&amp;gMemoryLock);
  if (EFI_ERROR (Status)) {
    return EFI_OUT_OF_RESOURCES;
  }

If we can have code and steps to reproduce the issue, that will be good for us to know the root cause and may update ReportStatusCodeEx()  to avoid reentrancy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6278</commentid>
    <comment_count>5</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-02 04:05:34 +0000</bug_when>
    <thetext>Through following Information in https://bugzilla.tianocore.org/show_bug.cgi?id=606,we can know that MS use itself AllocatePool func and then meet the recursive issue, Edk2 AllocatePool function doesn&apos;t have this issue.

Brought from BZ606：
&quot;We could not reproduce the recursive issues described in the BZs as our core AllocatePool has lock code below(https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Core/Dxe/Mem/Pool.c#L248) in CoreInternalAllocatePool() that can avoid AllocatePool reentrancy.
  //
  // Acquire the memory lock and make the allocation
  //
  Status = CoreAcquireLockOrFail (&amp;gMemoryLock);
  if (EFI_ERROR (Status)) {
    return EFI_OUT_OF_RESOURCES;
  }

The root cause of BZ606 is there is no lock to avoid reentrancy in SpecialPool_AllocatePool(https://github.com/Microsoft/MS_UEFI/blob/share/EFI_Special_Pool/MdeModulePkg/Library/EfiSpecialPoolLib/SpecialPoolLib.c#L74), then the ASSERT_EFI_ERROR at https://github.com/Microsoft/MS_UEFI/blob/share/EFI_Special_Pool/MdeModulePkg/Library/EfiSpecialPoolLib/SpecialPoolLib.c#L99 will trigger lock ASSERT in AllocatePages, then recursive will happen.&quot;


I think whether EDK2 code can reproduce this issue,  we still can enhance ReportStatusCodeLib to avoid using ALoocatePool if possible. I will work on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6360</commentid>
    <comment_count>6</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-13 21:47:58 +0000</bug_when>
    <thetext>Git email patch is at:
https://lists.01.org/pipermail/edk2-devel/2019-February/036660.html

This patch is also available at:
https://github.com/dandanbi/edk2/commit/e5c432b2d5083c0bbadbf773d460a9c22d36b267</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6381</commentid>
    <comment_count>7</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-18 00:04:35 +0000</bug_when>
    <thetext>V3 is at:
https://lists.01.org/pipermail/edk2-devel/2019-February/036790.html

https://github.com/dandanbi/edk2/commit/1dcdfdd01ddb0f34028dfb4a4d9b7d3afeb8b6fd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6388</commentid>
    <comment_count>8</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-18 19:40:05 +0000</bug_when>
    <thetext>V4 is archived at:
https://lists.01.org/pipermail/edk2-devel/2019-February/036848.html

V4 patch is also available at:
https://github.com/dandanbi/edk2/commit/653992325c9fec9a5b994444dd0d3229f83b525e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6391</commentid>
    <comment_count>9</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-19 03:31:59 +0000</bug_when>
    <thetext>fix it in 
https://github.com/tianocore/edk2/commit/c22f52c5e79b9782648576efb8382bb04da60b5b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1520</bug_id>
          
          <creation_ts>2019-02-11 19:42:32 +0000</creation_ts>
          <short_desc>BaseTools supports to the driver combination.</short_desc>
          <delta_ts>2022-03-01 22:03:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="unassigned">unassigned</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6321</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-11 19:42:32 +0000</bug_when>
    <thetext>To save the image size without the compression, more than one drivers can be combined into single one. When more than one drivers are combined, their depex will be AND together. Below is the example to combine BootManagerPolicyDxe into DriverHealthManagerDxe. 
  MdeModulePkg/Universal/DriverHealthManagerDxe/DriverHealthManagerDxe.inf {
    &lt;LibraryClasses&gt;
    NULL|MdeModulePkg/Universal/BootManagerPolicyDxe/BootManagerPolicyDxe.inf
  }

Here is POC patch https://github.com/tianocore/edk2-staging/commit/016886ef8ce457b72af4676f33cdd45e00001383.

Besides this patch, BaseTools also needs to check the module type and make sure all module type are same. Otherwise, BaseTools will report the error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6322</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-11 19:43:40 +0000</bug_when>
    <thetext>Assign it to owner to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6338</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-12 04:19:48 +0000</bug_when>
    <thetext>The latest posting that I remember for this topic is:

[edk2] [PATCH v2 staging][BaseToolsOpt 0/4] Enable multiple driver combination
https://lists.01.org/pipermail/edk2-devel/2017-June/011592.html
http://mid.mail-archive.com/1497519972-11796-1-git-send-email-liming.gao@intel.com

The patch series back then referenced no bugzilla ticket; I&apos;m adding the reference now, from the BZ side, for historical accuracy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9310</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:18:02 +0000</bug_when>
    <thetext>Has this been fixed in commit 838bc257bae3 (&quot;BaseTools:BaseTools supports to the driver combination.&quot;, 2019-02-20)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9345</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:42:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Has this been fixed in commit 838bc257bae3 (&quot;BaseTools:BaseTools supports to
&gt; the driver combination.&quot;, 2019-02-20)?

To clarify, the question is directed at Zhiju. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9366</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-27 22:29:31 +0000</bug_when>
    <thetext>The change has been reverted 3a4698202cf5ca81d4401bdc6c0974400064f333. 

Now, the change is in https://github.com/tianocore/edk2-staging/commits/BaseToolsOpt.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9395</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-29 07:59:28 +0000</bug_when>
    <thetext>Thanks -- so this is being worked on in the staging repository. Setting the status to IN_PROGRESS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12690</commentid>
    <comment_count>7</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-05-25 01:14:45 +0000</bug_when>
    <thetext>change owner to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18313</commentid>
    <comment_count>8</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-09 22:44:43 +0000</bug_when>
    <thetext>assign back to unassigned@tianocore.org to discuss if this bug is still valid in the bug scrub meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18492</commentid>
    <comment_count>9</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-03-01 22:03:19 +0000</bug_when>
    <thetext>Current target is to place the POC in edk2 staging. This step has been done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1026</bug_id>
          
          <creation_ts>2018-07-17 08:53:02 +0000</creation_ts>
          <short_desc>GenerateCapsule: when --fw-version or --lsv value exceed its max value, the error message is not clear</short_desc>
          <delta_ts>2018-08-09 13:43:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4301</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:53:02 +0000</bug_when>
    <thetext>when use the GenerateCapsule tool with  --fw-version option, and the value exceed its max value, it report following error, but the error message is not clear.

--lsv option with the value exceed the max value, it also have this issue.


GenerateCapsule: error: can not encode FMP Payload Header</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4303</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 09:02:37 +0000</bug_when>
    <thetext>--hardware-instance option with the value exceed the max value, it also have this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4336</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:27:58 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4456</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:11:36 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4541</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:43:36 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/6ed4651cb560caba91a989550734206f01ffd7d1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1679</bug_id>
          
          <creation_ts>2019-04-02 06:08:09 +0000</creation_ts>
          <short_desc>CpuCommonFeaturesLib Aesni.c Remove CPU generations check</short_desc>
          <delta_ts>2019-05-18 02:31:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6977</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-04-02 06:08:09 +0000</bug_when>
    <thetext>In AesniSupport(), please confirm whether the CPU generations check could be removed or not since the check to CpuInfo-&gt;CpuIdVersionInfoEcx.Bits.AESNI should be enough.
  if (CpuInfo-&gt;CpuIdVersionInfoEcx.Bits.AESNI == 1) {
    if (IS_SANDY_BRIDGE_PROCESSOR (CpuInfo-&gt;DisplayFamily, CpuInfo-&gt;DisplayModel) ||
        IS_SILVERMONT_PROCESSOR (CpuInfo-&gt;DisplayFamily, CpuInfo-&gt;DisplayModel) ||
        IS_XEON_5600_PROCESSOR (CpuInfo-&gt;DisplayFamily, CpuInfo-&gt;DisplayModel) ||
        IS_XEON_E7_PROCESSOR (CpuInfo-&gt;DisplayFamily, CpuInfo-&gt;DisplayModel) ||
        IS_XEON_PHI_PROCESSOR (CpuInfo-&gt;DisplayFamily, CpuInfo-&gt;DisplayModel)) {
      MsrFeatureConfig = (MSR_SANDY_BRIDGE_FEATURE_CONFIG_REGISTER *) ConfigData;
      ASSERT (MsrFeatureConfig != NULL);
      MsrFeatureConfig[ProcessorNumber].Uint64 = AsmReadMsr64 (MSR_SANDY_BRIDGE_FEATURE_CONFIG);
    }
    return TRUE;
  }

After the CPU generations check is removed, the code can be used by all CPU generations that support CpuInfo-&gt;CpuIdVersionInfoEcx.Bits.AESNI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7202</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:29:28 +0000</bug_when>
    <thetext>Ray will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7695</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-18 02:04:46 +0000</bug_when>
    <thetext>The discussion is at https://edk2.groups.io/g/devel/topic/31639184#40975.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7696</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-18 02:05:53 +0000</bug_when>
    <thetext>Fix at https://github.com/tianocore/edk2/commit/41ac2076a7c6c6d7dc6a1f66f7e2c6c0bb4572cb.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7697</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-18 02:31:49 +0000</bug_when>
    <thetext>Patch has been pushed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1696</bug_id>
          
          <creation_ts>2019-04-10 22:57:10 +0000</creation_ts>
          <short_desc>Nmake may report AutoGen.h file can&apos;t be found on Windows OS</short_desc>
          <delta_ts>2019-04-21 22:11:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7072</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-10 22:57:10 +0000</bug_when>
    <thetext>This is the known issue in Python on Windows OS. The file is not immediate to save into disk. Then, nmake call Makefile, and will report AutoGen.h can&apos;t be found, and stop the build. I meet with this random issue in some windows OS. But, it can&apos;t always be reproduced. The below blog lists some way to avoid this issue. Please enhance BaseTools to handle it. 

https://blog.gocept.com/2013/07/15/reliable-file-updates-with-python/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7073</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-10 22:57:33 +0000</bug_when>
    <thetext>Assign it to Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7217</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-21 22:11:41 +0000</bug_when>
    <thetext>Fix in edk2 0b836855fb4df66f7ca035a7b67a064c0088ed69.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1815</bug_id>
          
          <creation_ts>2019-05-15 12:15:44 +0000</creation_ts>
          <short_desc>outdated mailing list address in BaseTools error messages</short_desc>
          <delta_ts>2019-05-21 22:23:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7563</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-15 12:15:44 +0000</bug_when>
    <thetext>As of commit a11d371ef660, the edk2 source tree contains four instances of the outdated mailing list address &quot;edk2-devel@lists.01.org&quot;. All four instances are in BaseTools:

BaseTools/Source/Python/GenFds/GenFds.py
BaseTools/Source/Python/Trim/Trim.py
BaseTools/Source/Python/UPT/Logger/StringTable.py
BaseTools/Source/Python/build/build.py

I suggest factoring these out to a new constant, and then setting the constant to &quot;devel@edk2.groups.io&quot;.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7569</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-15 20:29:15 +0000</bug_when>
    <thetext>Zhiju will fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7737</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-21 22:23:21 +0000</bug_when>
    <thetext>Fixed it in c1387446edbb05a11e2646e4184585d58d47a7d6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1735</bug_id>
          
          <creation_ts>2019-04-21 22:28:22 +0000</creation_ts>
          <short_desc>Remove unused BaseTools\Source\Python\UPT\Dll</short_desc>
          <delta_ts>2019-05-07 22:19:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7218</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-21 22:28:22 +0000</bug_when>
    <thetext>BaseTools runs from python source. It doesn&apos;t depend on dll any more. So, DLL can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7219</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-21 22:28:58 +0000</bug_when>
    <thetext>Please fix it for next stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7416</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-07 22:19:23 +0000</bug_when>
    <thetext>fixed at 26e2b295ec7a8d9866b8b4d2086fd5aa1aa1dc09</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1641</bug_id>
          
          <creation_ts>2019-03-21 02:05:55 +0000</creation_ts>
          <short_desc>Trim will trig exception when the input asl file is UTF8 format</short_desc>
          <delta_ts>2019-04-01 02:14:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          <deadline>2019-05-01</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6810</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-21 02:05:55 +0000</bug_when>
    <thetext>The command trim --asl-file -o test.i UTF8.asl will trig the exception. Trim tool should report error message for unsupported UTF8 file instead of the exception.


  File &quot;C:\Edk2\BaseTools\Source\Python\Trim\Trim.py&quot;, line 361, in DoInclude
    for Line in F:
  File &quot;C:\Python36\lib\encodings\cp1252.py&quot;, line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: &apos;charmap&apos; codec can&apos;t decode byte 0x9d in position 4184: character maps to &lt;undefined&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6812</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-21 02:06:40 +0000</bug_when>
    <thetext>Zhiju will look this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6934</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-03-27 23:14:46 +0000</bug_when>
    <thetext>There&apos;s a problem with the encoding of the file, it&apos;s only in python3, and I&apos;m going to change the way it&apos;s opened to support reading this file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6952</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-01 02:14:12 +0000</bug_when>
    <thetext>fix it on edk2 trunk: 58742d79457e71fba75d72e79050ba43915e3ed6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1115</bug_id>
          
          <creation_ts>2018-08-23 16:44:57 +0000</creation_ts>
          <short_desc>Setup Browser has off by 2 buffer overflows</short_desc>
          <delta_ts>2018-09-04 07:31:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4688</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-08-23 16:44:57 +0000</bug_when>
    <thetext>Captured by HeapGuard exceptions.

In Presentation.c (2007):

-   BackUpBuffer = AllocateCopyPool(Statement-&gt;StorageWidth + sizeof(CHAR16), Statement-&gt;BufferValue);

+        BackUpBuffer = AllocateCopyPool(Statement-&gt;StorageWidth /* + sizeof(CHAR16) MSCHANGE */, Statement-&gt;BufferValue);

Not sure why sizeof(CHAR16) was added to the copy, as the original allocate does not have the + sizeof(CHAR16).

Same problem at Presentation.c (2133):

-     CopyMem (Statement-&gt;BufferValue, BackUpBuffer, Statement-&gt;StorageWidth + sizeof(CHAR16));

+     CopyMem (Statement-&gt;BufferValue, BackUpBuffer, Statement-&gt;StorageWidth /* MSCHANGE + sizeof(CHAR16) */);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4689</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:03:53 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4841</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-09-04 07:31:30 +0000</bug_when>
    <thetext>Fix at https://github.com/tianocore/edk2/commit/04722cfa309104d815257a2705db5ee7024dc9bf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1027</bug_id>
          
          <creation_ts>2018-07-17 08:57:35 +0000</creation_ts>
          <short_desc>GenerateCapsule: --debug option doesn&apos;t print out debug info</short_desc>
          <delta_ts>2018-07-27 15:02:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4302</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:57:35 +0000</bug_when>
    <thetext>there is no debug info print out when use GenerateCapsule tool with --debug 0 option, besides, --debug 0 and --debug 9 seems no difference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4337</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:28:14 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4447</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-27 15:02:53 +0000</bug_when>
    <thetext>The tool is behaving as expected.

There is no additional output at this time when --debug option is used.

This option is included to be consistent with other EDK II tools and to reserve the --debug option so debug messages may be added as needed in the future.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1317</bug_id>
          
          <creation_ts>2018-11-08 12:41:19 +0000</creation_ts>
          <short_desc>TianoCompress doesn&apos;t decompress some image</short_desc>
          <delta_ts>2018-11-13 19:32:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=686</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5550</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-08 12:41:19 +0000</bug_when>
    <thetext>First, I use TianoCompress tool to compress one image with UEFI compression. Then, I use TianoCompress tool to decode the compressed image. TianoCompress tool will hang. This is a regression issue caused by 041d89bc0f0119df37a5fce1d0f16495ff905089. In Decode() function, once mOutBuf is fully filled, Decode() should return. Current logic misses the checker of mOutBuf after while() loop. This issue also exists in MdePkg BaseUefiDecompressLib and IntelFrameworkModulePkg BaseUefiTianoCustomDecompressLib.

Below is the command. 
TianoCompress -e --uefi -o test.compress UiApp.efi
TianoCompress -d --uefi -o test.org test.compress</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5551</commentid>
    <comment_count>1</comment_count>
      <attachid>232</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-08 12:42:18 +0000</bug_when>
    <thetext>Created attachment 232
UiApp.efi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5553</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-09 02:58:05 +0000</bug_when>
    <thetext>assign to Liming to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5555</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-09 06:38:43 +0000</bug_when>
    <thetext>Associated patch series from Liming:

[edk2] [Patch 0/3] Fix UEFI and Tiano Decompression logic issue
https://lists.01.org/pipermail/edk2-devel/2018-November/032200.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5565</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-12 05:55:20 +0000</bug_when>
    <thetext>Commit range 114a75ad8694..ade71c52a49d.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5575</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-13 19:32:34 +0000</bug_when>
    <thetext>BaseTools TianoCompress, MdePkg BaseUefiDecompressLib and IntelFrameworkModulePkg BaseUefiTianoCustomDecompressLib have the same function logic. So, I fix them together. The problem is that some compressed image by UEFI compression algorithm can&apos;t be decompressed. Compare to the original code logic, I find this missing check. The fix is to add back and make sure the same functionality.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>232</attachid>
            <date>2018-11-08 12:42:18 +0000</date>
            <delta_ts>2018-11-08 12:42:18 +0000</delta_ts>
            <desc>UiApp.efi</desc>
            <filename>UiApp.efi</filename>
            <type>application/octet-stream</type>
            <size>139264</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1560</bug_id>
          
          <creation_ts>2019-02-24 22:44:25 +0000</creation_ts>
          <short_desc>Remove IPF code in MdePkg</short_desc>
          <delta_ts>2019-05-06 08:22:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6516</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-24 22:44:25 +0000</bug_when>
    <thetext>Previous commit (3cb0a311cb7e747d7be5c5076d0fff76ad256d2b)
* MdePkg: Removing ipf which is no longer supported from edk2.

didn&apos;t clean all IPF contents.

For example, 
PalLib.h
SalLib.h
ExtendedSalLib.h
SalSystemTable.h
Pal.h

The three libraries header files can be removed with no doubt.
I agree that SalSystemTable.h and Pal.h are there to align with UEFI spec or other industry standard spec, but there are many industry standard specs there, we always follow the rule &quot;define when using&quot;.
I prefer to also remove the SalSystemTable.h and Pal.h.

Furthermore, PeCoffLoaderEx.c can be removed as well because the three functions listed in the C file was to let IPF provide special processing to PE, since the IPF version was already removed, the Ia32/x64 NULL version can be removed as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6861</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:30:20 +0000</bug_when>
    <thetext>shenglei to work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6921</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-03-26 22:55:02 +0000</bug_when>
    <thetext>SalSystemTable.h is still used by UefiShellDebug1CommandsLib. So I think it should be kept for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6924</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-27 03:50:16 +0000</bug_when>
    <thetext>Please also remove below header files. After remove them, please also update MdePkg\MdePkg.dec. 

MdePkg\Include\IndustryStandard\Sal.h
MdePkg\Include\Protocol\McaInitPmi.h
MdePkg\Include\Guid\Mps.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6925</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-27 08:23:37 +0000</bug_when>
    <thetext>(In reply to shenglei.zhang from comment #2)
&gt; SalSystemTable.h is still used by UefiShellDebug1CommandsLib. So I think it
&gt; should be kept for now.

Could you please investigate why Shell is using this header file. It can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7269</commentid>
    <comment_count>5</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-04-26 04:23:39 +0000</bug_when>
    <thetext>As is we investigated, Mps.h might not be removed. It is described in Mps.h that MPS only was included to support Itanium-based platform power on, but we did&apos;t find sufficient information to prove this. So to be safe, we currently reserve Mps.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7278</commentid>
    <comment_count>6</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-04-27 21:32:55 +0000</bug_when>
    <thetext>MPS is not for IPF.
However, MPS is a very legacy stuff.

Can we consider removing it with CSM cleanup task?

I don&apos;t think any modern OS will use MPS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7280</commentid>
    <comment_count>7</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-04-27 21:46:51 +0000</bug_when>
    <thetext>I think MdePkg\Include\IndustryStandard\LegacyBiosMpTable.h can be removed in CSM clean up task as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7379</commentid>
    <comment_count>8</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-05-06 08:22:27 +0000</bug_when>
    <thetext>Fixed at:
a8a8b408b7debef3a7d37d515e4dec73e02b08e8
f4c874c45dbce725398ca5f17c68423c3a32edc4
5a1ca93a1fa14ef4d76f93548d77b0322fbb809b
4e1daa60f5372c22a11503961061ffa569eaf873</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1697</bug_id>
          
          <creation_ts>2019-04-11 06:46:11 +0000</creation_ts>
          <short_desc>Remove NetworkPkg/IpSecDxe</short_desc>
          <delta_ts>2019-05-21 17:18:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to>fan.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7082</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-04-11 06:46:11 +0000</bug_when>
    <thetext>Propose to remove the NetworkPkg/IpSecDxe.

Very few bugs or questions (actually zero as I know) were reported regarding the IpSec driver for 4 to 5 years, which means either nobody is actually use this driver, or it&apos;s really good enough and don&apos;t need any maintenance (I don&apos;t believe this).

Anyway, I plan to remove this driver from EDK2, anyone who want to use it could fetch it from edk2-stable201903 stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7196</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:18:55 +0000</bug_when>
    <thetext>Waiting for community response on RFC.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7287</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 22:00:13 +0000</bug_when>
    <thetext>Already added into Q2 plan.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7327</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-04-28 20:44:59 +0000</bug_when>
    <thetext>Committed to edk2 d55d9d0664366efe731db461e14c6fc380fca776</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7729</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-21 17:18:13 +0000</bug_when>
    <thetext>(In reply to sfu5 from comment #3)
&gt; Committed to edk2 d55d9d0664366efe731db461e14c6fc380fca776

Closing this BZ as &quot;fixed&quot;, therefore.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1481</bug_id>
          
          <creation_ts>2019-01-21 09:55:42 +0000</creation_ts>
          <short_desc>[MtrrLib] might wrongly set cache setting to UC for memory below 1MB</short_desc>
          <delta_ts>2019-02-19 04:13:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ming.shao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6160</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-21 09:55:42 +0000</bug_when>
    <thetext>MtrrLib contains a bug:
 when the original cache setting is WB for [0xF_0000, 0xF_8000) and,
 a new request to set [0xF_0000, 0xF_4000) to WP,
 the cache setting for [0xF_4000, 0xF_8000) is reset to UC.

It&apos;s a regression bug introduced by Ray&apos;s MTRR library new algorithm.
The stress test didn&apos;t find such failure because we thought the logic to set cache type for fixed MTRR was simple enough to be bug free, most of the testing effort was put in testing the variable MTRR setting logic.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6161</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-21 09:56:36 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6393</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-19 04:13:02 +0000</bug_when>
    <thetext>fixed @ 13a47cf9251b11d07e25027dc13d3f4a0f5c17ed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1616</bug_id>
          
          <creation_ts>2019-03-13 03:11:04 +0000</creation_ts>
          <short_desc>Remove framework pkgs dependency from Coreboot*Pkgs</short_desc>
          <delta_ts>2019-06-11 05:04:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CorebootModulePkg</cf_package>
    
    <cf_package>CorebootPayloadPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6699</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-13 03:11:04 +0000</bug_when>
    <thetext>Since the IntelFrameworkPkg and IntelFrameworkModulePkg will be removed from edk2 repo, Coreboot*Pkgs should not depend on these two framework pkgs.

For now I found:
  gEfiIntelFrameworkModulePkgTokenSpaceGuid.PcdLogoFile
  gEfiIntelFrameworkModulePkgTokenSpaceGuid.PcdShellFile

The two PCDs reference should be removed. One solution would be Coreboot*Pkg create its own PCDs.
The other option to look at is whether these PCDs are really necessary.

PcdShellFile IMO may be replaced by gUefiShellFileGuid defined in ShellPkg.dec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6700</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-13 03:12:48 +0000</bug_when>
    <thetext>I am not sure if there are more deps.
Suggest trying to remove the two framework pkgs when building to verify the deps are all cleaned.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7205</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:40:25 +0000</bug_when>
    <thetext>Package owner help on it. thanks.
we prefer to the package owner to fix the bug ASAP because the remove framework pkgs  already in Q2 release plan. 
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7397</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:53:06 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7979</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-06-11 05:04:22 +0000</bug_when>
    <thetext>Coreboot*Pkgs were removed from edk2 repo.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1116</bug_id>
          
          <creation_ts>2018-08-24 11:58:42 +0000</creation_ts>
          <short_desc>Inconsistent Pcd&apos;s when enabling Nx related functionality</short_desc>
          <delta_ts>2018-09-25 22:26:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4701</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-08-24 11:58:42 +0000</bug_when>
    <thetext>When testeing Heapguard functionality on x64, it was noticed that just setting PcdDxeNxMemoryProtectionPolicy to non zero doesn&apos;t set MSR_IA32_EFER.NXE, but setting PcdSetNxForStack does enable MSR_IA32_EFER.NXE.  It seems that the two functions should be independently enableable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4771</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-30 20:05:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4861</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-05 10:37:32 +0000</bug_when>
    <thetext>Yes, currently MSR_IA32_EFER.NXE is only enabled for the sake of PcdSetNxForStack. And I agree that PcdDxeNxMemoryProtectionPolicy should be enabled independently. The only concern is that the stack memory is allocated as type of EfiBootServicesData, which is also covered by PcdDxeNxMemoryProtectionPolicy. So the question becomes: do we allow or how to handle following setting combination?

  PcdSetNxForStack = FALSE
  PcdDxeNxMemoryProtectionPolicy = 0x0010 (EfiBootServicesData bit is set)

My opinion is, similar to the conflict check of PcdCpuSmmStaticPageTable and PcdHeapGuardPropertyMask (PiSmmCpuDxeSmm), we may simply add conflict check for above two PCDs (ASSERT if above combination is set).

Any other suggestions?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4899</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-10 03:45:38 +0000</bug_when>
    <thetext>After internal discussion, we got agreement to use PcdDxeNxMemoryProtectionPolicy to cover setting of PcdSetNxForStack. That means PcdSetNxForStack will be removed from all code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4908</commentid>
    <comment_count>4</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2018-09-11 05:02:47 +0000</bug_when>
    <thetext>Internal discussion?? I was deeply involved in developing PcdDxeNxMemoryProtectionPolicy, and so I would have appreciated being involved in this discussion as well.

Stack protection should be a separate bit in PcdDxeNxMemoryProtectionPolicy if PcdSetNxForStack is removed, given that protecting the stack is more important than protecting all EfiBootServicesData regions (some of which may require execute permissions for backward compatibility)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4909</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-11 06:48:23 +0000</bug_when>
    <thetext>Ard, really sorry for that. I don&apos;t know the history here.

I think a separate bit in PcdCpuSmmStaticPageTable has the same issue as a separate PCD (PcdSetNxForStack), that is, how to handle following situation

    a) Disable NX for stack, and
    b) Enable NX for EfiBootServiceData

Since the stack memory is type of EfiBootServiceData, b) will in fact override the a). This will also confuse developer. Do you have any idea?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4910</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-11 11:37:40 +0000</bug_when>
    <thetext>Jian, PcdCpuSmmStaticPageTable is a BOOLEAN (a feature flag, more
precisely), not a bitmask. But, I think that&apos;s just a typo. (The PCD that
you most likely meant eludes me at the moment as well.)

Anyway, Ard&apos;s got a point here. Just because one PCD implies another, the
reverse is not necessarily true.

For example, in OVMF, we set PcdSetNxForStack to TRUE originally, but then
we had to make it conditional, due to old GRUB variants breaking with a
non-executable stack. (Please refer to commit d20b06a3afdf, &quot;OvmfPkg:
disable no-exec DXE stack by default&quot;, 2015-09-15). Therefore we now default
to FALSE, and let the user set it to TRUE on the QEMU command line.

In addition, we intentionally inherit a zero PcdDxeNxMemoryProtectionPolicy
from &quot;MdeModulePkg.dec&quot;.

Both of the above configurations satisfy the requirement

  ((PcdGet64 (PcdDxeNxMemoryProtectionPolicy) &amp;
    (1 &lt;&lt; EfiBootServicesData)) == 0 ||
   PcdGetBool (PcdSetNxForStack))

i.e. the requirement that &quot;NX for BS data&quot; imply &quot;NX for stack&quot;.

If you remove the standalone knob for PcdSetNxForStack, then the default
behavior of OVMF will continue to work, however the command line option, for
setting PcdSetNxForStack *only*, will break.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4911</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-11 11:56:47 +0000</bug_when>
    <thetext>Discussion on the list:
[edk2] [PATCH 0/5] expire the use of PcdSetNxForStack
https://lists.01.org/pipermail/edk2-devel/2018-September/029530.html
http://mid.mail-archive.com/20180911051636.4888-1-jian.j.wang@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4913</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-11 20:11:24 +0000</bug_when>
    <thetext>It&apos;s a typo. You&apos;re right what I want to say is PcdDxeNxMemoryProtectionPolicy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4954</commentid>
    <comment_count>9</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-13 05:21:03 +0000</bug_when>
    <thetext>I found that PcdImageProtectionPolicy needs also to enable NXE, which has similar issue to PcdSetNxForStack. I&apos;ll fix it as well if no objection. Here&apos;s the summary of the solution so far:

a. Keep PcdSetNxForStack as is
b. Enable MSR_IA32_EFER.NXE if any of PcdSetNxForStack, PcdDxeNxMemoryProtectionPolicy and PcdImageProtectionPolicy is enabled for at least one type of memory (if applicable).
c. ASSERT following setting combinations:
   c.1 PcdSetNxForStack==FALSE &amp;&amp; (PcdDxeNxMemoryProtectionPolicy &amp; (1 &lt;&lt; EfiBootServicesData)) != 0
   c.2 PcdImageProtectionPolicy==0 &amp;&amp; (PcdDxeNxMemoryProtectionPolicy &amp; (1 &lt;&lt; EfiRuntimeServicesData)) != 0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4955</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-13 05:35:37 +0000</bug_when>
    <thetext>Looks good to me, thank you.

In (c.2), perhaps you can check for more bits in PcdDxeNxMemoryProtectionPolicy than just EfiRuntimeServicesData (I&apos;m unsure). The DEC file says on PcdImageProtectionPolicy, &quot;[...] the data section becomes non-executable&quot;.

If a platform disables that, but requests (1 &lt;&lt; EfiBootServicesData) in PcdDxeNxMemoryProtectionPolicy, then that might be another inconsistency, I assume. For example, a static array in a DXE or UEFI driver (i.e., not runtime driver) would live in boot services data type memory, it would be made NX via PcdDxeNxMemoryProtectionPolicy (I think?) and that would conflict with PcdImageProtectionPolicy==0.

(Trying to reason just based on the DEC file docs.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4956</commentid>
    <comment_count>11</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-13 07:14:18 +0000</bug_when>
    <thetext>Good catch. According to MdeModulePkg\Core\Dxe\Image\Image.c, EfiLoaderData and EfiBootServicesData could be also data section memory. So the solution becomes:

a. Keep PcdSetNxForStack as is
b. Enable MSR_IA32_EFER.NXE if any of PcdSetNxForStack, PcdDxeNxMemoryProtectionPolicy and PcdImageProtectionPolicy is enabled for at least one type of memory (if applicable).
c. ASSERT following setting combinations:
   c.1 PcdSetNxForStack==FALSE &amp;&amp; (PcdDxeNxMemoryProtectionPolicy &amp; (1 &lt;&lt; EfiBootServicesData)) != 0
   c.2 PcdImageProtectionPolicy==0 &amp;&amp; (PcdDxeNxMemoryProtectionPolicy &amp; (1 &lt;&lt; EfiRuntimeServicesData)) != 0
   c.3 PcdImageProtectionPolicy==0 &amp;&amp; (PcdDxeNxMemoryProtectionPolicy &amp; (1 &lt;&lt; EfiBootServicesData)) != 0
   c.4 PcdImageProtectionPolicy==0 &amp;&amp; (PcdDxeNxMemoryProtectionPolicy &amp; (1 &lt;&lt; EfiLoaderData)) != 0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5101</commentid>
    <comment_count>12</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-25 22:26:54 +0000</bug_when>
    <thetext>Pushed at 5267926134d17e86672b84fd57b438f05ffa68e1
Reviewed at
  https://lists.01.org/pipermail/edk2-devel/2018-September/029530.html
  https://lists.01.org/pipermail/edk2-devel/2018-September/029674.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1522</bug_id>
          
          <creation_ts>2019-02-11 23:42:16 +0000</creation_ts>
          <short_desc>ECC fails to run after python3 migration.</short_desc>
          <delta_ts>2019-02-19 07:52:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6325</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-11 23:42:16 +0000</bug_when>
    <thetext>Checking function layout function body ...
Checking function layout local variables ...
Traceback (most recent call last):
  File &quot;E:\bin\Python37\lib\runpy.py&quot;, line 193, in _run_module_as_main
    &quot;__main__&quot;, mod_spec)
  File &quot;E:\bin\Python37\lib\runpy.py&quot;, line 85, in _run_code
    exec(code, run_globals)
  File &quot;E:\work\edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 416, in &lt;module&gt;
    Ecc = Ecc()
  File &quot;E:\work\edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 103, in __init__
    self.Check()
  File &quot;E:\work\edk2\BaseTools\Source\Python\Ecc\EccMain.py&quot;, line 253, in Check
    EccCheck.Check()
  File &quot;E:\work\edk2\BaseTools\Source\Python\Ecc\Check.py&quot;, line 43, in Check
    self.FunctionLayoutCheck()
  File &quot;E:\work\edk2\BaseTools\Source\Python\Ecc\Check.py&quot;, line 273, in FunctionLayoutCheck
    self.FunctionLayoutCheckDeprecated()
  File &quot;E:\work\edk2\BaseTools\Source\Python\Ecc\Check.py&quot;, line 277, in FunctionLayoutCheckDeprecated
    if EccGlobalData.gConfig.CFunctionLayoutCheckNoDeprecated == &apos;1&apos; or EccGlobalData.gConfig.CFunctionLayoutCheckAll == &apos;1&apos; or EccGlobalData.gConfig.CheckAll == &apos;1&apos;:
AttributeError: &apos;Configuration&apos; object has no attribute &apos;CFunctionLayoutCheckNoDeprecated&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6349</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-13 03:43:51 +0000</bug_when>
    <thetext>Assign to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6398</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-19 07:52:45 +0000</bug_when>
    <thetext>Fixed on 7b6a8c9cf2a0c270565108e1bf4e79cc6468fb6f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1028</bug_id>
          
          <creation_ts>2018-07-17 09:37:37 +0000</creation_ts>
          <short_desc>GenerateCapsule: use a capsule file that be signed, but without Payload header to dump, the dump-info is not correct</short_desc>
          <delta_ts>2018-08-09 13:42:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4304</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 09:37:37 +0000</bug_when>
    <thetext>I use a signed capsule file that without the Payload header to dump, the dump info log have &quot;No EFI_FIRMWARE_IMAGE_AUTHENTICATION&quot; info, but actually the capsule file is a signed capsule file.

The capsule file is generated by current BaseTools, not by the GenerateCapsule. so in the capsule it doesn&apos;t have the payload header, but it is signed by PKCS7 tool.

--dump-info log:

xxxxxx
xxxxxx
xxxxxx
sizeof (Payload)                                                    = 010B125D
sizeof (VendorCodeBytes)                                            = 00000000
--------
No EFI_FIRMWARE_IMAGE_AUTHENTICATION
--------
No FMP_PAYLOAD_HEADER
========</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4338</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:28:31 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4465</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:14:44 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4540</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:42:56 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/de652b14a78b4767ff460999b6728d7ccc50b057</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1875</bug_id>
          
          <creation_ts>2019-06-04 08:16:53 +0000</creation_ts>
          <short_desc>BaseTools: Enable multiple-thread autogen</short_desc>
          <delta_ts>2019-09-30 15:40:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2216</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1804</blocked>
    
    <blocked>1927</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7921</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-06-04 08:16:53 +0000</bug_when>
    <thetext>Autogen phase cost about 30% time of the whole build. 
The AutoGen phase can be split into 2 parts:
1. Process the global and platform scope information. 
2. Apply the global information to each module, and generate module&apos;s autogen.h, autogen.c, makefile and etc.

For the part 2, If build tool handle modules in multiple thread, it will shorten the AutoGen phase time. And finally shorten the whole build time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7922</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-06-04 08:17:20 +0000</bug_when>
    <thetext>Take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8108</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-19 12:06:50 +0000</bug_when>
    <thetext>Bug Triage: Set to confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8540</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-22 11:39:00 +0000</bug_when>
    <thetext>v1 series from Bob:

[edk2-devel] [Patch 0/9] Enable multiple process AutoGen 
http://mid.mail-archive.com/20190718061423.30612-1-bob.c.feng@intel.com
https://edk2.groups.io/g/devel/message/43907</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8552</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-23 15:38:57 +0000</bug_when>
    <thetext>[edk2-devel] [Patch 0/9 V2] Enable multiple process AutoGen
http://mid.mail-archive.com/20190722085100.20552-1-bob.c.feng@intel.com
https://edk2.groups.io/g/devel/message/44123

[edk2-devel] [Patch 00/10 V3] Enable multiple process AutoGen
http://mid.mail-archive.com/20190723035818.21112-1-bob.c.feng@intel.com
https://edk2.groups.io/g/devel/message/44199</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8817</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-07 03:28:47 +0000</bug_when>
    <thetext>[edk2-devel] [Patch 00/10 V8] Enable multiple process AutoGen

https://edk2.groups.io/g/devel/message/44970</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8914</commentid>
    <comment_count>6</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-08-09 11:32:02 +0000</bug_when>
    <thetext>fixed at SHA-1: 1a624dd7cf0db5783b27e18e6c790178d14a1e6a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8945</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:36:44 +0000</bug_when>
    <thetext>This is a feature change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9888</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-30 15:40:06 +0000</bug_when>
    <thetext>A regression introduced by this feature has been fixed in bug 2216.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1561</bug_id>
          
          <creation_ts>2019-02-25 14:39:27 +0000</creation_ts>
          <short_desc>BaseTools build hard codes ./SecMain for &apos;run&apos; target</short_desc>
          <delta_ts>2019-05-21 21:21:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6524</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-02-25 14:39:27 +0000</bug_when>
    <thetext>When a target of &apos;run&apos; is passed into build.py, BaseTools unconditionally attempts to execute the application called &apos;./SecMain&apos; in the build output directory.

        # run
        if Target == &apos;run&apos;:
            RunDir = os.path.normpath(os.path.join(AutoGenObject.BuildDir, GlobalData.gGlobalDefines[&apos;ARCH&apos;]))
            Command = &apos;.\SecMain&apos;
            os.chdir(RunDir)
            LaunchCommand(Command, RunDir)
            return True

This behavior applies to the Nt32Pkg which is being replaced with features in the EmulatorPkg.

POSTBULD actions for a specific platform can look at the target value (if specified) and decide if the firmware image can be executed or not.

The EmulatorPkg and OvmfPkg can be updated with a POSTBUILD python script to run the firmware image if the &apos;run&apos; target is specified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6860</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:29:19 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7520</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-13 23:41:28 +0000</bug_when>
    <thetext>The patch is under review https://edk2.groups.io/g/devel/topic/31574316#40415

Per the question from Liming, I prefer to continue this patch after Nt32Pkg is removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7521</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-13 23:45:31 +0000</bug_when>
    <thetext>From Ray Ni, Nt32Pkg will be removed in Q2&apos;19.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7557</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-15 07:43:23 +0000</bug_when>
    <thetext>I don&apos;t think this issue report applies to OvmfPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7736</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-21 21:21:32 +0000</bug_when>
    <thetext>Fixed at 9ca1f1446a5ad6b108044739a50e9275758e772c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1719</bug_id>
          
          <creation_ts>2019-04-15 21:34:15 +0000</creation_ts>
          <short_desc>Quark: Remove IntelFrameworkPkg/IntelFrameworkModulePkg dependencies</short_desc>
          <delta_ts>2019-07-03 02:17:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>QuarkPlatformPkg</cf_package>
    
    <cf_package>QuarkSocPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7135</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-04-15 21:34:15 +0000</bug_when>
    <thetext>There are two dependencies:
1. Quark platform is using IntelFrameworkModulePkg/Universal/Acpi/AcpiS3SaveDxe.
   We need to move the S3 PEI memory reservation to platform code.
2. Quark platform is using 8254/8259 drivers.
   We need to change to use HpetTimer driver</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7193</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:14:57 +0000</bug_when>
    <thetext>Mike will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7396</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:52:55 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8361</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-03 02:17:25 +0000</bug_when>
    <thetext>resloved in dcce9cbd48e07fcd11f7ef34cad48faf7bb61e6e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1029</bug_id>
          
          <creation_ts>2018-07-17 09:46:14 +0000</creation_ts>
          <short_desc>GenerateCapsule: Update help of --fw-version/--lsv that this is Required for encode operations.</short_desc>
          <delta_ts>2018-08-09 13:42:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4305</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 09:46:14 +0000</bug_when>
    <thetext>after discussion, the --fw-version and --lsv are Required for encode operations. so please help to update the help message like the --guid, add the info &quot;Required for encode operations&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4320</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-18 21:16:10 +0000</bug_when>
    <thetext>from bug 1015, no signing capsule it won&apos;t have the payload header, so for no signing capsule, the --fw-version/--lsv are not required. seems we no need to update the help now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4339</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:28:46 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4451</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-28 03:15:52 +0000</bug_when>
    <thetext>I can update help text that these options are required for encode
operations where the payload is signed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4460</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:13:05 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4539</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:42:05 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/ff307fba9857145875839fdca33c95236e238153</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1046</bug_id>
          
          <creation_ts>2018-07-25 04:26:19 +0000</creation_ts>
          <short_desc>GenerateCapsule: When encode by signtool, some cases report traceback error</short_desc>
          <delta_ts>2018-08-09 13:39:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4387</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-25 04:26:19 +0000</bug_when>
    <thetext>use an empty pfx file to do encode operation by  GenerateCapsule tool, it report below traceback error:

  SignTool Error: An unexpected internal error has occurred.

GenerateCapsule: error: can not sign payload
Traceback (most recent call last):
  File &quot;C:\edk2\BaseTools\Source\Python\Capsule\GenerateCapsule.py&quot;, line 376, in &lt;module&gt;
    args.SignToolPfxFile
  File &quot;C:\edk2\BaseTools\Source\Python\Capsule\GenerateCapsule.py&quot;, line 87, in SignPayloadSignTool
    raise ValueError (&apos;GenerateCapsule: error: signtool failed.&apos;)
ValueError: GenerateCapsule: error: signtool failed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4394</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-25 04:48:37 +0000</bug_when>
    <thetext>some more cases:
1. do encode operation, use --pfx-file option, but user specify --signing-tool-path to openssl tool directory, it also report similar traceback.

2. do encode operation, use --pfx-file option, but the signtool is not exist, it also report similar traceback.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4405</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-25 21:06:23 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4462</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:13:39 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4536</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:39:09 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/e49eee4c51a6cb8b2f35735e375c211c41d9f6cb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1783</bug_id>
          
          <creation_ts>2019-05-07 23:37:58 +0000</creation_ts>
          <short_desc>Issue in SecurityPkg AuthVariableLib to remove the variable at certdb</short_desc>
          <delta_ts>2019-05-15 21:23:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7424</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-07 23:37:58 +0000</bug_when>
    <thetext>If the variable is not found at  mAuthVarLibContextIn-&gt;FindVariable(), AuthVariableInfo.Attributes will be 0.

Then BIOS tries to remove the variable at certdbv in DeleteCertsFromDb().
As this result, a program context cannot exit from do/while loop in CleanCertsFromDb().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7443</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-08 22:24:20 +0000</bug_when>
    <thetext>Zhichao will look it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7450</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-08 22:51:52 +0000</bug_when>
    <thetext>certdb, not certdbv</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7573</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-05-15 21:23:21 +0000</bug_when>
    <thetext>fixed at
e90ea9470a88661946d8489c3a31640eab096a9a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1682</bug_id>
          
          <creation_ts>2019-04-03 18:16:33 +0000</creation_ts>
          <short_desc>provide MACROs to disable SHA1 and MD5 support</short_desc>
          <delta_ts>2020-08-31 20:58:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vincent Zimmer">vincent.zimmer</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          <deadline>2020-06-25</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6993</commentid>
    <comment_count>0</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-04-03 18:16:33 +0000</bug_when>
    <thetext>https://thehackernews.com/2017/02/sha1-collision-attack.html mentions the possibility of SHA1 collision attacks.

The UEFI Specification mentions 
&quot;Note: SHA-1 and MD5 are included for backwards compatibility. New driver implementations are encouraged to consider stronger algorithms.&quot; so having EDKII implementations of UEFI that elide support for SHA1 should be permissible.

From an ecosystem perspective, MS has mentioned online that &quot;Starting in March 2018, packages signed using a SHA-1 digest algorithm and certificate chain will no longer be accepted&quot; so the ecosystem is moving forward to elide support.

There can be a separate PCD for UEFI Secure Boot and one for TCG TPM measured boot since for the latter https://www.trustedcomputinggroup.org/wp-content/uploads/SHA1-Impact_V2.0.pdf provides some guidance on SHA1 for that use case.

It would be preferable to have the SHA1 support off as a default in order to have the upstream in its most secure state, with the option for a platform developer to re-enable if business considerations dictate support for older OS loaders, pre-OS applications and option ROMs/UEFI drivers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7201</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:27:56 +0000</bug_when>
    <thetext>Security package owner help on it. And this into Q2 plan first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11555</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-03-05 03:06:51 +0000</bug_when>
    <thetext>ETA: 2020-05-08</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12970</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-06-29 22:16:56 +0000</bug_when>
    <thetext>Using MACROs instead of the PCD to disable the SHA1 &amp; MD5. And it is already fixed at acfd55579542de64418cd4fb1c5560524a79d61f..0f01cec52f4794777feb067e4fa0bfcedfdc124e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1466</bug_id>
          
          <creation_ts>2019-01-16 11:09:57 +0000</creation_ts>
          <short_desc>BaseTools should support empty value for DynamicHii type PCD in DSC</short_desc>
          <delta_ts>2019-03-03 21:13:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          <deadline>2019-01-31</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6105</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-16 11:09:57 +0000</bug_when>
    <thetext>DEC file defines PCD default value and PCD supported type. DSC can configure PCD type and value. If the value is same to default value in DEC file, DSC can only configure PCD type and leave empty for value. This usage supports all type PCD except for DynamicHii type. So, DynamicHii PCD should support this usage. Below is one example in DSC.

[PcdsDynamicHii.common.DEFAULT]
PcdPkgTokenSpaceGuid.PcdCName|L&quot;VarName&quot;|gVarGuid|0x00||NV,BS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6106</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-16 11:10:37 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6129</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-17 09:00:39 +0000</bug_when>
    <thetext>Besides, DSC spec is also required to be updated to support this usage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6204</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-25 09:22:49 +0000</bug_when>
    <thetext>Code fixed on SHA-1: cce9d763580a955d294a5e3696cbe07a03965e2b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6605</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-03 21:13:32 +0000</bug_when>
    <thetext>Commit spec changes on d86efcc3e922b1ee50d913e46146256ee40c681c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1699</bug_id>
          
          <creation_ts>2019-04-11 09:17:09 +0000</creation_ts>
          <short_desc>AppPkg: Coverity scan flags multiple issues in edk2-stable201903</short_desc>
          <delta_ts>2020-05-05 19:11:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>pjones</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7085</commentid>
    <comment_count>0</comment_count>
      <attachid>287</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-11 09:17:09 +0000</bug_when>
    <thetext>Created attachment 287
archive of Coverity reports for this package, categorized by issue type

This is a Coverity defect report against edk2-stable201903, detected by
Coverity in edk2 modules while they were built as parts of OVMF. This
issue is being filed as a security BZ so that the maintainers of this
package can evaluate whether any of the issues flagged by coverity have
security impact.

If none of the issues have security impact, please simply re-classify
this BZ as a normal bug report.

If there is at least one issue with security impact, then please filter
those out of the logs in the attachment, and create a new (public) BZ
for this same package, with just the normal issues. This way normal
bugfixing can proceed while the security problems are under embargo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7853</commentid>
    <comment_count>1</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-05-29 12:44:05 +0000</bug_when>
    <thetext>5/29/19 tiano infosec bug scrub feedback - request submitter to do initial analysis of exploitability, including CVSS proposal</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7904</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-03 07:05:05 +0000</bug_when>
    <thetext>Sorry, I can&apos;t do that. All the time I could dedicate to this issue sufficed only for splitting the reports into edk2 packages and report types, and for filing the BZs. I filed this BZ not because I&apos;d unconditionally like to see the reports fixed, but for enabling the package maintainer(s) to learn about the reports. I defer to the package maintainer(s) 100% on the future fate of this BZ. Thanks.

(I did handle the reports that affected OvmfPkg; please see bug 1710.)

Either way, I think this BZ is not relevant for the edk2 codebase proper any longer, as AppPkg has been split to a different repository, under bug 1734.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10669</commentid>
    <comment_count>3</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-12-11 11:52:37 +0000</bug_when>
    <thetext>jian to work w/ respective maintainers on disposition</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11098</commentid>
    <comment_count>4</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 13:12:35 +0000</bug_when>
    <thetext>infosec meeting 2/5/2020 - for classes of issues found by public tool, move to the open to finish characterization, assignment, and potential fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12390</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:11:13 +0000</bug_when>
    <thetext>AppPkg has been removed from edk2 (see bug 1734), closing as WONTFIX.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>287</attachid>
            <date>2019-04-11 09:17:09 +0000</date>
            <delta_ts>2019-04-11 09:17:09 +0000</delta_ts>
            <desc>archive of Coverity reports for this package, categorized by issue type</desc>
            <filename>AppPkg.zip</filename>
            <type>application/octet-stream</type>
            <size>16389</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1594</bug_id>
          
          <creation_ts>2019-03-05 16:36:57 +0000</creation_ts>
          <short_desc>Remove .S assembly code for IA32 and X64 arch</short_desc>
          <delta_ts>2019-04-03 01:40:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6621</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-05 16:36:57 +0000</bug_when>
    <thetext>.nasm file has been added for X86 arch. .S assembly code is not required any more. MdePkg and UefiCpuPkg .S files can be removed totally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6622</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-05 16:38:48 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6794</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:55:08 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6985</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-04-03 01:40:14 +0000</bug_when>
    <thetext>Fixed at:
475a4317c0371e433f6b8599ac54d32e1ba20fc8
~
57b6844503e7fee83f084fd2704ef3e1d1085ddb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1287</bug_id>
          
          <creation_ts>2018-10-30 00:17:33 +0000</creation_ts>
          <short_desc>doesn&apos;t like L&quot;\\&quot; in dec file</short_desc>
          <delta_ts>2018-10-31 22:31:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>stlvnub</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5426</commentid>
    <comment_count>0</comment_count>
    <who name="">stlvnub</who>
    <bug_when>2018-10-30 00:17:33 +0000</bug_when>
    <thetext>with the latest tools I get this error. when compiling a project.

error 3000: Invalid PCD Datum information given
	gEfiOzmosisPkgTokenSpaceGuid.PcdBootLogFolderPath|L&quot;\\Logs\\&quot;|VOID*|12 (&lt;TokenSpaceGuidCName&gt;.&lt;PcdCName&gt;|&lt;DefaultValue&gt;|&lt;DatumType&gt;|&lt;Token&gt;)

If I build with 25000 toolchain, no errors.
if I take out the &quot;\\&quot;s it also builds

Something has changed between 25000 and current which breaks my build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5433</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-30 04:03:40 +0000</bug_when>
    <thetext>assign to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5438</commentid>
    <comment_count>2</comment_count>
    <who name="">stlvnub</who>
    <bug_when>2018-10-30 16:11:04 +0000</bug_when>
    <thetext>I don&apos;t know what revision the bug appears, I chose r25000 randomly</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5448</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-31 22:29:50 +0000</bug_when>
    <thetext>patch email: https://lists.01.org/pipermail/edk2-devel/2018-October/031702.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5449</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-31 22:31:47 +0000</bug_when>
    <thetext>push the fix into edk2 master.
https://github.com/tianocore/edk2/commit/d3d97b378fe4d0bfbcbdb296d06bcf1d09165480#diff-dfe6f1bb45386e2196a9f3a01980b850</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1720</bug_id>
          
          <creation_ts>2019-04-15 21:50:29 +0000</creation_ts>
          <short_desc>Remove framework pkgs dependency from BeagleBoardPkg and EmbeddedPkg</short_desc>
          <delta_ts>2019-07-03 01:43:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BeagleBoardPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7136</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-04-15 21:50:29 +0000</bug_when>
    <thetext>BeagleBoardPkg references below framework pkgs contents today:

  ReportStatusCodeLib|IntelFrameworkModulePkg/Library/DxeReportStatusCodeLibFramework/DxeReportStatusCodeLib.inf

  gEfiIntelFrameworkModulePkgTokenSpaceGuid.PcdShellFile|{ 0x83, 0xA5, 0x04, 0x7C, 0x3E, 0x9E, 0x1C, 0x4F, 0xAD, 0x65, 0xE0, 0x52, 0x68, 0xD0, 0xB4, 0xD1 }

They need to be cleaned before framework pkgs are removed in Q2 2019.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7137</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-04-15 21:55:00 +0000</bug_when>
    <thetext>EmbeddedPkg contains similar framework pkgs deps:
  ReportStatusCodeLib|IntelFrameworkModulePkg/Library/DxeReportStatusCodeLibFramework/DxeReportStatusCodeLib.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7192</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:14:28 +0000</bug_when>
    <thetext>Ray, please separate this bug into two. And we can assign it to the package owner to follow up, we prefer to the package owner to fix the bug ASAP because the remove framework pkgs  already in Q2 release plan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7207</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-04-18 21:12:00 +0000</bug_when>
    <thetext>The owners of the two packages are the same people: Leif and Ard.
That&apos;s why I grouped the two together:)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7220</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-21 22:31:14 +0000</bug_when>
    <thetext>Ard, could you help on it ? 

remove framework pkgs already in Q2 release plan.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7395</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:52:40 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7524</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-05-14 03:35:43 +0000</bug_when>
    <thetext>Patches for EmbeddedPkg part have been proposed at:

https://edk2.groups.io/g/devel/message/40579
https://edk2.groups.io/g/devel/message/40580
https://edk2.groups.io/g/devel/message/40581</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7525</commentid>
    <comment_count>7</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-05-14 03:37:42 +0000</bug_when>
    <thetext>Patches for BeagleBoardPkg (already moved to edk2-platforms repo) part have been proposed at:

https://edk2.groups.io/g/devel/message/40548
https://edk2.groups.io/g/devel/message/40549</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7551</commentid>
    <comment_count>8</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-05-15 04:33:47 +0000</bug_when>
    <thetext>EmbeddedPkg part has been resolved via commits:

https://github.com/tianocore/edk2/commit/f0b8166505d2dc98e33d5c12e4fe0ee57af6c9d9
https://github.com/tianocore/edk2/commit/32f345eba7193b067248b97ba02eba14237e3537</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8344</commentid>
    <comment_count>9</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:43:30 +0000</bug_when>
    <thetext>BeagleBoardPkg part has been resolved via commits:

https://github.com/tianocore/edk2-platforms/commit/a0612124d08722c49ad0cd9ded03297341376e85
https://github.com/tianocore/edk2-platforms/commit/94269ed186111ee41ab8a0f6380eb150d738f420</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1191</bug_id>
          
          <creation_ts>2018-09-19 11:22:59 +0000</creation_ts>
          <short_desc>PiSmmCpuDxe issue on SmiHandler execution</short_desc>
          <delta_ts>2018-09-24 20:32:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5019</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-19 11:22:59 +0000</bug_when>
    <thetext>In PiSmmCpuDxe, SmiEntry will be copied to the specific address and run. So, SmiEntry code must depend on the absolute address instead of the relative address. But, XCODE linker generates PIC code with the relative address in SmiEntry code. To support XCODE, SmiEntry code needs to convert the relative address to the absolute address in boot time. Current logic adds PiSmmCpuSmiEntryFixupAddress() to fix up the address to be the absolute address. This function is called in the driver entry point at the early phase. But, this function doesn&apos;t convert all relative addresses to the absolute address. SmiHandler uses the tricky way to jmp the original location and run the function with the relative address. Recently, Jiewen raises new requirement that SmiHandler should run in the copied address, can&apos;t run in the common address. This logic needs to be updated. 

Here is the discussion https://lists.01.org/pipermail/edk2-devel/2018-September/029617.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5020</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-19 11:23:47 +0000</bug_when>
    <thetext>Update PiSmmCpuDxe driver to follow new requirement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5070</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-24 20:32:16 +0000</bug_when>
    <thetext>Fix it in edk2 a364928195e911c2650fcae6bd34cfd501df1f57</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1303</bug_id>
          
          <creation_ts>2018-11-06 23:00:25 +0000</creation_ts>
          <short_desc>XCODE Ovmf Boot to shell fail</short_desc>
          <delta_ts>2018-11-07 20:59:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5513</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-06 23:00:25 +0000</bug_when>
    <thetext>It is caused by 17634d026f968c404b039a8d8431b6389dd396ea MdePkg/SynchronizationLib: fix Interlocked[De|In]crement return value. Roll back SynchronizationLib to the previous version. System can boot OK. 

Line #6 uses EAX and it overwrites EAX set in line #3.

_InternalSyncIncrement:
       0:       55      pushl   %ebp
       1:       89 e5   movl    %esp, %ebp
       3:       8b 45 08        movl    8(%ebp), %eax
       6:       b8 01 00 00 00  movl    $1, %eax
       b:       f0      lock
       c:       0f c1 00        xaddl   %eax, _InternalSyncIncrement(%eax)
       f:       40      incl    %eax
      10:       5d      popl    %ebp
      11:       c3      retl

  __asm__ __volatile__ (
    &quot;movl    $1, %%eax  \n\t&quot;
    &quot;lock               \n\t&quot;
    &quot;xadd    %%eax, %1  \n\t&quot;
    &quot;inc     %%eax      \n\t&quot;
    : &quot;=a&quot; (Result),          // %0
      &quot;+m&quot; (*Value)           // %1
    :                         // no inputs that aren&apos;t also outputs
    : &quot;memory&quot;,
      &quot;cc&quot;
    );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5514</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-06 23:01:08 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5533</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-07 20:59:58 +0000</bug_when>
    <thetext>fixed in e6459b9e6c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1030</bug_id>
          
          <creation_ts>2018-07-17 23:25:40 +0000</creation_ts>
          <short_desc>GenerateCapsule: Enhance to not generate capsule file when PopulateSystemTable flag is set</short_desc>
          <delta_ts>2018-08-09 13:41:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4312</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 23:25:40 +0000</bug_when>
    <thetext>From UEFI spec 22.2.3 Firmware Processing of the Capsule Identified by
EFI_FIRMWARE_MANAGEMENT_CAPSULE_ID_GUID

&quot;Capsule is recognized by EFI_CAPSULE_HEADER member CapsuleGuid equal to
EFI_FIRMWARE_MANAGEMENT_CAPSULE_ID_GUID.
CAPSULE_FLAGS_POPULATE_SYSTEM_TABLE flag must be 0.&quot;

current when I use the GenerateCapsule tool to generate a capsule file with all three flags PersistAcrossReset,InitiateReset,PopulateSystemTable, then use this generated capsule file to do capsule update, it directly report error by CapsuleApp tool because of CAPSULE_FLAGS_POPULATE_SYSTEM_TABLE flag must be 0.

so how about we enhance the GenerateCapsule  tool to not generate a capsule file that set PopulateSystemTable flags since even this capsule file can be generate success but it can&apos;t to do capsule update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4340</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:29:02 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4448</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-27 15:23:21 +0000</bug_when>
    <thetext>I agree since this tool can only generate a a UEFI Capsule of type
EFI_FIRMWARE_MANAGEMENT_CAPSULE_ID_GUID that the 
CAPSULE_FLAGS_POPULATE_SYSTEM_TABLE should not be allowed to be
set.

I will remove the PopulateSystemTable value from the --capflag option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4457</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:11:58 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4538</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:41:19 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/2779c222c80533677e0cb54cc19d0287d280647f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1447</bug_id>
          
          <creation_ts>2019-01-10 19:59:10 +0000</creation_ts>
          <short_desc>gEfiIp6ServiceBindingProtocolGuid not uninstalled on error path of Driver Binding Start</short_desc>
          <delta_ts>2019-02-11 19:31:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6051</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-01-10 19:59:10 +0000</bug_when>
    <thetext>Comparing the Driver Binding Start of Ip6Dxe with Ip4Dxe shows IpV4 properly uninstalling the protocol GUID.  This causes a fault later on if the error path is taken during Driver Binding Start as the memory for the protocol has been freed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6139</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:24:22 +0000</bug_when>
    <thetext>bug scrub: assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6183</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-01-23 13:53:54 +0000</bug_when>
    <thetext>See PR https://github.com/Microsoft/mu_basecore/pull/14</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6190</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-01-24 03:06:43 +0000</bug_when>
    <thetext>Agree it&apos;s bug in Ip6Dxe driver, will provide the patch to fix the issue.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6191</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-01-24 03:24:03 +0000</bug_when>
    <thetext>We should also uninstall gEfiIp6ConfigProtocolGuid/gEfiIp4Config2ProtocolGuid.

  gBS-&gt;UninstallMultipleProtocolInterfaces (
         ControllerHandle,
         &amp;gEfiIp4ServiceBindingProtocolGuid,
         &amp;IpSb-&gt;ServiceBinding
         &amp;gEfiIp4Config2ProtocolGuid,
         Ip4Cfg2
         NULL
         );

  gBS-&gt;UninstallMultipleProtocolInterfaces (
         ControllerHandle,
         &amp;gEfiIp6ServiceBindingProtocolGuid,
         &amp;IpSb-&gt;ServiceBinding,
         &amp;gEfiIp6ConfigProtocolGuid,
         Ip6Cfg,
         NULL
         );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6320</commentid>
    <comment_count>5</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-02-11 19:31:59 +0000</bug_when>
    <thetext>Commit version:
https://github.com/tianocore/edk2/commit/463d994f9c43bcfc522ed5153bfbff654fba14c5
https://github.com/tianocore/edk2/commit/2d6639321986653a2a604dc7fb02b76bb21c8373</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1721</bug_id>
          
          <creation_ts>2019-04-15 21:58:05 +0000</creation_ts>
          <short_desc>Remove framework pkgs dependency from EmulatorPkg</short_desc>
          <delta_ts>2019-05-09 23:07:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhiguang.liu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7138</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-04-15 21:58:05 +0000</bug_when>
    <thetext>EmulatorPkg depends on contents in framework pkgs as below:
  IntelFrameworkModulePkg/Universal/StatusCode/Pei/StatusCodePei.inf
  IntelFrameworkModulePkg/Bus/Pci/IdeBusDxe/IdeBusDxe.inf

The deps need to be removed before framework pkgs are removed in Q2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7191</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:09:27 +0000</bug_when>
    <thetext>Ray to help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7335</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-04-29 02:37:32 +0000</bug_when>
    <thetext>take this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7394</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:52:23 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7484</commentid>
    <comment_count>4</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-09 23:07:46 +0000</bug_when>
    <thetext>bug fixed
https://github.com/tianocore/edk2/commit/21d5bf86b2238e78f92e403843e9cb7869cd28e7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1505</bug_id>
          
          <creation_ts>2019-02-01 03:54:57 +0000</creation_ts>
          <short_desc>[Pci] System may hang when devices behind PPB contain option ROM but don&apos;t require 32bit MMIO</short_desc>
          <delta_ts>2019-02-18 06:11:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6264</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-01 03:54:57 +0000</bug_when>
    <thetext>When a device under PPB contains option ROM but doesn&apos;t require 32bit
MMIO, ProgrameUpstreamBridgeForRom() cannot correctly restore the
PPB MEM32 RANGE BAR. It causes the 32bit MMIO conflict which may
cause system hangs in boot.

The root cause is when ProgrameUpstreamBridgeForRom() calls
ProgramPpbApperture() to restore the PPB MEM32 RANGE BAR, the
ProgramPpbApperture() skips to program the BAR when the resource
length is 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6265</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-01 03:57:29 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6385</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-18 06:11:21 +0000</bug_when>
    <thetext>Fixed (presumably) in commit 0fa92d5839cd (&quot;MdeModulePkg/PciBus: Fix a bug PPB MEM32 BAR isn&apos;t restored sometimes&quot;, 2019-02-14).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1525</bug_id>
          
          <creation_ts>2019-02-12 07:15:17 +0000</creation_ts>
          <short_desc>Update FmpDxe to support service drivers that manage more than one device at a time</short_desc>
          <delta_ts>2019-08-27 18:00:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tomas Pilar">tpilar</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-06-10</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6339</commentid>
    <comment_count>0</comment_count>
    <who name="Tomas Pilar">tpilar</who>
    <bug_when>2019-02-12 07:15:17 +0000</bug_when>
    <thetext>Currently, FmpDxe is written to only support drivers managing a single device.

The FmpDeviceLib that FmpDxe consumes does not provide API to select which device is being handled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6492</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:21:52 +0000</bug_when>
    <thetext>Assign to Mike. try to catch Q2&apos;19 release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6543</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-02-26 22:16:18 +0000</bug_when>
    <thetext>The proposal is to add 3 new functions to FmpDeviceLib that are required to support multiple controllers:

typedef
EFI_STATUS
(EFIAPI *FMP_DEVICE_LIB_REGISTER_FMP_UNINSTALLER)(
  IN  EFI_HANDLE      Handle
  );

EFI_STATUS
EFIAPI
RegisterFmpUninstaller (
  IN FMP_DEVICE_LIB_REGISTER_FMP_UNINSTALLER  FmpUninstaller
  );

EFI_STATUS
EFIAPI
FmpDeviceSetContext (
  IN EFI_HANDLE  Handle,
  OUT VOID       **Context
  );

EFI_STATUS
EFIAPI
FmpDeviceGetHardwareInstance (
  OUT UINT64  *HardwareInstance
  );

RegisterFmpUninstaller() is a peer to RegisterFmpInstaller() so a driver can be unloaded or support the Driver Binding Stop() function to uninstall the FMP protocols from a handle.

FmpDeviceSetContext() is use to set a context for all the other APIs in the FmpDeviceLib.  The FmpDxe module knows when an operation is being performed on a specific controller and can set this context before calling and of the device specific functions in the FmpDeviceLib.

FmpDeviceGetHardwareInstance() is required so each controller managed by an FMP driver can have its own HardwareInstance value.  This should be a unique value that can be collected from each controller that is managed (e.g. a serial number).  For devices that do not have a unique id, a unique value that is consistent between boot should be generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6570</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-02-27 22:04:02 +0000</bug_when>
    <thetext>edk2-staging branch with proposed changes and OVMF example
using E1000 PCI NICs.

https://github.com/tianocore/edk2-staging/tree/Bug_1525_FmpDevicePkg_MultipleControllers</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6690</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-03-11 17:15:11 +0000</bug_when>
    <thetext>EsrtFmpDxe - If all the LastAttemptStatus are LAST_ATTEMPT_STATUS_SUCCESS, then LastAttemptVersion should be the smallest of the LastAttemptVersion values.  If any of the LastAttemptStatus is not LAST_ATTEMPT_STATUS_SUCCESS then LastAttemptVersion should be the LastAttemptStatus of the first entry that is not 
LAST_ATTEMPT_STATUS_SUCCESS.  Right now, if there is a non success entry and more entries follow the non success entry, LastAttemptVersion is set to the smallest of the ones that follow the non success entry.  Instead, once LastAttemptStatus is locked in on a non-success entry, the LastAttemptStatus must also be locked in from the same entry.
 
EsrtFmpDxe - The check for more than one instance of the same GUID/HardwareInstance is not being done at the right point.  It is being done as 
EFI_FIRMWARE_IMAGE_DESCRIPTORs are being merged into an ESRT Table Entry.  This means a case will be missed if there are 3 EFI_FIRMWARE_IMAGE_DESCRIPTORs with the first and 3rd one being having the same GUID/HardwareInstance.  Instead, this check should be performed across all EFI_FIRMWARE_IMAGE_DESCRIPTORs in the entire handle database.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7163</commentid>
    <comment_count>5</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-04-17 10:58:16 +0000</bug_when>
    <thetext>The 1st issue mentioned by Michael Kinney on 2019-03-11 has been fixed with commit e278d26188fabd22ff72ce450ec9b6e0e9227d1f

Update the ESRT entry with the last attempt status and last attempt
version. If all FMP instances are SUCCESS, then last attempt status is SUCCESS and set last attempt version to the smallest value from all FMP instances.
When the LastAttemptStatus value is failure, the LastAttemptVersion is locked
meanwhile and should not be updated subsequently.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7750</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-22 17:57:47 +0000</bug_when>
    <thetext>The 2nd issue is fixed with the following commit:

https://github.com/tianocore/edk2-staging/commit/8458b7b9dda62cda854fdbc71885cde522e7ecb3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7751</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-22 18:05:20 +0000</bug_when>
    <thetext>The FmpDxe module is only tracking state information in UEFI Variables for a single controller.  This means the state information in UEFI Variables represents the most recently updates controller when an FmpDxe module is managing multiple controllers.  In order to merge the state of all controllers into a single ESRT entry, the state information must be tracked per controller.

The recommendation is to append the HardwareInstance value as a 16 character hex string to the UEFI Variable Names, so unique UEFI Variable can be used to store state information for each controller.  In order to maintain compatibility with exiting uses of the FmpDevicePkg, if the HardwareInstance value is 0, then the 16 character hex string is not appended to the UEFI Variable Name.

The use of 4 UEFI Variables to store 4 32-bit values is not a very efficient use of the UEFI Variable store.  It would be more efficient if these 4 32-bit values were stored in a single UEFI Variable per managed controller.  This is a straight forward change, but has compatibility issues with existing uses of the FmpDevicePkg.  In order to maintain compatibility, if the 4 separate UEFI Variables are detected, then they are converted to the single merged variable and the old variables are deleted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7752</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-22 18:08:40 +0000</bug_when>
    <thetext>The OVMF example for the E1000 adapter generates a 64-bit HardwareInstance value from the device path of the E1000 adapter.  This produces a unique value for different slots, but would generate the same value if a different adapter is installed into the same slot.  In order to reduce the duplicate hardware instance values, the PCI Vendor/Device IDs can be included in the generation of the 64-bit hardware instance value.

The recommendation is to compute a 32-bit CRC from the Vendor/Device IDs and use that as the upper 32-bits of the hardware instance, and continue to populate the lower 32-bits of the hardware instance with the 32-bit CRC of the device path.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7754</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-22 23:03:20 +0000</bug_when>
    <thetext>An add-in card such as a PCI adapter does not know the platform they might be used on, so the FmpDxe drivers for an add-in card can not use a platform specific 
CapsuleUpdatePolicyLib.  The CapsuleUpdatePolicyLibNull instance could be used, but that skips all power/thermal/system checks.

Instead, a protocol interface should be made available to add-in cards to perform these system checks.  The platform can provide a module that produces this protocol for add-in cards to use.

The proposed protocol is:

#define EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL_GUID \
  { \
    0x487784c5, 0x6299, 0x4ba6, { 0xb0, 0x96, 0x5c, 0xc5, 0x27, 0x7c, 0xf7, 0x57 } \
  }

struct _EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL {
  EDKII_CAPSULE_UPDATE_POLICY_CHECK_SYSTEM_POWER                          CheckSystemPower;
  EDKII_CAPSULE_UPDATE_POLICY_CHECK_SYSTEM_THERMAL                        CheckSystemThermal;
  EDKII_CAPSULE_UPDATE_POLICY_CHECK_SYSTEM_ENVIRONMENT                    CheckSystemEnvironment;
  EDKII_CAPSULE_UPDATE_POLICY_IS_LOWEST_SUPPORTED_VERSION_CHECK_REQUIRED  IsLowestSupportedVersionCheckRequired;
  EDKII_CAPSULE_UPDATE_POLICY_IS_FMP_DEVICE_AT_LOCK_EVENT_REQUIRED        IsLockFmpDeviceAtLockEventGuidRequired;
};

extern EFI_GUID gEdkiiCapuleUpdatePolicyProtocolGuid;

typedef
EFI_STATUS
(EFIAPI * EDKII_CAPSULE_UPDATE_POLICY_CHECK_SYSTEM_POWER) (
  IN  EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL  *This,
  OUT BOOLEAN                               *Good
  );

typedef
EFI_STATUS
(EFIAPI * EDKII_CAPSULE_UPDATE_POLICY_CHECK_SYSTEM_THERMAL) (
  IN  EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL  *This,
  OUT BOOLEAN                               *Good
  );

typedef
EFI_STATUS
(EFIAPI * EDKII_CAPSULE_UPDATE_POLICY_CHECK_SYSTEM_ENVIRONMENT) (
  IN  EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL  *This,
  OUT BOOLEAN                               *Good
  );

typedef
BOOLEAN
(EFIAPI * EDKII_CAPSULE_UPDATE_POLICY_IS_LOWEST_SUPPORTED_VERSION_CHECK_REQUIRED) (
  IN  EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL  *This
  );

typedef
BOOLEAN
(EFIAPI * EDKII_CAPSULE_UPDATE_POLICY_IS_FMP_DEVICE_AT_LOCK_EVENT_REQUIRED) (
  IN  EDKII_CAPSULE_UPDATE_POLICY_PROTOCOL  *This
  );


A generic module can produce this protocol from a platform specific instance of the
CapsuleUpdatePolicyLib.  This module can be added to FmpDevicePkg.  In addition, a
generic implementation of the CapsuleUpdatePolicyLib can be provided that calls the
services of this new protocol.  Since the protocol is produces and consumed by 
modules/libs in FmpDevicePkg, the new protocol can be a private interface to the
FmpDevicePkg.  The following shows the new content in the FmpDevicePkg.

FmpDevicePkg
    CapsuleUpdatePolicyDxe
    Library
        CapsuleUpdatePoilicyLibOnProtocol
    PrivateInclude
        Protocol
            CapsuleUpdatePolicy.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7777</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-24 00:56:57 +0000</bug_when>
    <thetext>This change has missed the deadline. Please give new deadline date or remove deadline.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7783</commentid>
    <comment_count>11</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-24 12:27:43 +0000</bug_when>
    <thetext>Updated deadline to early June.

This change will not be integrated into edk2/master until after the edk2-stable201905 stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7784</commentid>
    <comment_count>12</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-24 12:32:59 +0000</bug_when>
    <thetext>The DEBUG messages from the FmpDxe module do not provide any information on the specific firmware device the debug message applies.  If a platform has multiple devices that support firmware update, then these DEBUG() messages are difficult to interpret.

The recommendation is to add the image name from mImageIdName which is set to the string from PcdFmpDeviceImageIdName.  As long as PcdFmpDeviceImageIdName is set to a unique string, the DEBUG() messages from FmpDxe provide context for the message.

An example DEBUG() statement that includes the ImageIdName:

  DEBUG ((DEBUG_INFO, &quot;FmpDxe(%s): Lock GUID: %g\n&quot;, mImageIdName, mLockGuid));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7785</commentid>
    <comment_count>13</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-24 12:41:58 +0000</bug_when>
    <thetext>The FmpDxe module uses gEfiCallerIdGuid as the GUID for UEFI Variables
it managed.  gEfiCallerIdGuid is also used as the ESRT GUID in some cases.

If an FMP implementation needs to change the ESRT GUID, it is important 
that the UEFI Variable context is preserved.  It is complex to change
the GUID used for UEFI Variables.  The recommendation is to always use
gEfiCallerIdGuid for UEFI Variables and provide an easy method for the
ESRT GUID to be updated.

The recommended solution is to introduce a new PCD called PcdFmpDeviceImageTypeIdGuid based on the following commit.

https://github.com/microsoft/mu_tiano_plus/commit/a2c7da88d3a73dbe9b6b75952d6866179c905f28#diff-025d4889f6d3a482b49638a25e432d6d

The priority for setting the ImageTypeIdGuid which is also the ESRT GUID is:
1) FmpDeviceLib FmpDeviceGetImageTypeIdGuidPtr() service
2) PcdFmpDeviceImageTypeIdGuid
3) gEfiCallerIdGuid

If FmpDeviceGetImageTypeIdGuidPtr() returns a valid GUID value, then this GUID value is used.

If FmpDeviceGetImageTypeIdGuidPtr() does not return a valid GUID value, then PcdFmpDeviceImageTypeIdGuid is checked.  If this PCD is a valid GUID value, then this PCD value is used.

If neither FmpDeviceGetImageTypeIdGuidPtr() nor PcdFmpDeviceImageTypeIdGuid have a valid GUID value, then gEfiCallerIdGuid is used.  This provides backwards compatibility with the current FmpDxe behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7786</commentid>
    <comment_count>14</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-24 12:46:57 +0000</bug_when>
    <thetext>One primary use case for an FmpDxe driver that manages more than one device is a PCI adapter.  Some PCI adapters have limited PCI option ROM storage, so the size overhead of carrying a full FmpDxe implementation may be too high.

One solution is to provide a minimal FmpDxe module in the PCI Option ROM with just enough functionality to produce an ESRT entry for firmware device.  This minimum functionality can be provided from GetImageInfo() service.  The full version of the FmpDxe module that can update the firmware storage device can be provided as an embedded driver in the UEFI Capsule.

In order to support build both the min and full versions of FmpDxe from the same sources, the recommendation is to introduce a PCD Feature Flag PcdFmpDeviceStorageAccessEnable.

If this PCD is TRUE, then the Firmware Management Protocol supports access to the firmware storage device.  This is the default setting. If FALSE, then Firmware Management Protocol services that access the firmware storage device return EFI_UNSUPPORTED except GetImageInfo().  Setting this value to FALSE produces
the smallest possible FmpDxe driver that still advertises the updatable firmware component in the ESRT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7825</commentid>
    <comment_count>15</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-28 12:34:27 +0000</bug_when>
    <thetext>New branch for review that addresses all issues to date.

https://github.com/tianocore/edk2-staging/tree/Bug_1525_FmpDevicePkg_MultipleControllers_V2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8947</commentid>
    <comment_count>16</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:38:23 +0000</bug_when>
    <thetext>This is a feature change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8978</commentid>
    <comment_count>17</comment_count>
    <who name="Tomas Pilar">tpilar</who>
    <bug_when>2019-08-13 10:06:29 +0000</bug_when>
    <thetext>I&apos;ve used the new branch fairly successfully so far. When can we expect the branch to be merged into master?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9077</commentid>
    <comment_count>18</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-19 22:11:15 +0000</bug_when>
    <thetext>Tomas, thank you for the confirmation. The new feature on the branch has been merged to edk2/master on 8/15. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9079</commentid>
    <comment_count>19</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-19 22:19:43 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2-staging/tree/Bug_1525_FmpDevicePkg_MultipleControllers_V2

The new feature on this branch has been merged to edk2/master.
FmpDevicePkg: from 91c230578ca40bd0389f2799fcf01d36d54f91a1 to a5944b6a13e227da23daa0ab59b5d6f4b06bb49b

MdeModulePkg: e314132feaac3f62a27f1a4ffaae8f5c1fba3140

I would like to close this BZ ticket by end of this week if no objection is received.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9282</commentid>
    <comment_count>20</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:00:48 +0000</bug_when>
    <thetext>Fixed in:

&gt;| 1 91c230578ca4 FmpDevicePkg: Add UEFI_DRIVER support
&gt;| 2 8d01f2f4d618 FmpDevicePkg: Add APIs to FmpDeviceLib
&gt;| 3 1f06aa24c294 FmpDEvicePkg/FmpDeviceLibNull: Implement new APIs

and

&gt;| 1 4f0544b144b9 FmpDevicePkg/FmpDxe: Use new FmpDeviceLib APIs
&gt;| 2 67c1e5ee6eaf FmpDevicePkg/FmpDxe: Different variable for each FMP Descriptor
&gt;| 3 c40f7cc7fd75 FmpDevicePkg: Add Capsule Update Policy Protocol
&gt;| 4 e0961677d1b2 FmpDevicePkg/FmpDxe: Improve all DEBUG() messages
&gt;| 5 278c3d48a753 FmpDevicePkg/FmpDxe: Add PcdFmpDeviceImageTypeIdGuid
&gt;| 6 11d354945c20 FmpDevicePkg/FmpDxe: Add PcdFmpDeviceStorageAccessEnable
&gt;| 7 a5944b6a13e2 FmpDevicePkg/FmpDxe: Remove use of CatSprint()

Closing per comment 19.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1048</bug_id>
          
          <creation_ts>2018-07-25 04:31:02 +0000</creation_ts>
          <short_desc>GenerateCapsule: use an empty file to do decode, it report traceback error</short_desc>
          <delta_ts>2018-08-09 13:38:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4389</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-25 04:31:02 +0000</bug_when>
    <thetext>when we do decode operation, we use an empty file (it exist), it report below error.


GenerateCapsule: error: can not decode capsule
Traceback (most recent call last):
  File &quot;C:\edk2\BaseTools\Source\Python\Capsule\GenerateCapsule.py&quot;, line 426, in &lt;module&gt;
    Result = UefiCapsuleHeader.Decode (Buffer)
  File &quot;C:\edk2\BaseTools\Source\Python\Common\Uefi\Capsule\UefiCapsuleHeader.py&quot;, line 93, in Decode
    raise ValueError
ValueError</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4406</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-25 21:06:39 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4463</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:14:07 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4535</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:38:41 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/e49eee4c51a6cb8b2f35735e375c211c41d9f6cb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1448</bug_id>
          
          <creation_ts>2019-01-10 20:02:19 +0000</creation_ts>
          <short_desc>IpV6 NV data out of date causes Driver Binding Start to fail</short_desc>
          <delta_ts>2019-02-18 19:33:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6052</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-01-10 20:02:19 +0000</bug_when>
    <thetext>On a system with UEFI from &lt; 2012 upgrading to UEFI Current, the stale IpV6 NV data causes the DriverBindingStart operation to immediately flag the data read as bogus and return EFI_INVALID_ARG. This causes the Driver Binding Start to fail due to BZ 1447.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6053</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-01-10 21:19:07 +0000</bug_when>
    <thetext>EFI_INVALID_PARAMETER</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6138</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:23:21 +0000</bug_when>
    <thetext>bug scrub: assign to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6146</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 20:13:40 +0000</bug_when>
    <thetext>bug scrub: set the deadline same with BZ 1447.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6192</commentid>
    <comment_count>4</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-01-24 03:33:03 +0000</bug_when>
    <thetext>Can you provide the steps to reproduce the issue? where detect the data is bogus?

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6208</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2019-01-25 13:04:30 +0000</bug_when>
    <thetext>The older system has the following (partially decoded for easier reading) Ip6Config Variable content:

3f1d7fbe  01f6 0400 40006700 08000000 01000000
                    3c005000 04000000 02000000
                    38007400 04000000 03000000
                    38007000 00000000 04000000
                    01000000 00000000 02155dff fe16 3b00

This shows an invalid entry for type Ip6ConfigDataTypeManualAddress with a 0 length.

The relatively new code added by SHA-1: bee7fe0ef950e2966cbdcd753be326f8a3c782f3

* NetworkPkg/Ip6Dxe: Support SetData interface to clear specific configuration

now checks for a 0 DataSize, and causes the DriverBinding start to fail.

There is still an issue of how the DataSize was set to 0 in the first place.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6226</commentid>
    <comment_count>6</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-01-29 02:17:03 +0000</bug_when>
    <thetext>(In reply to Michael Turner from comment #5)
&gt; The older system has the following (partially decoded for easier reading)
&gt; Ip6Config Variable content:
&gt; 
&gt; 3f1d7fbe  01f6 0400 40006700 08000000 01000000
&gt;                     3c005000 04000000 02000000
&gt;                     38007400 04000000 03000000
&gt;                     38007000 00000000 04000000
&gt;                     01000000 00000000 02155dff fe16 3b00
&gt; 
&gt; This shows an invalid entry for type Ip6ConfigDataTypeManualAddress with a 0
&gt; length.
&gt; 
&gt; The relatively new code added by SHA-1:
&gt; bee7fe0ef950e2966cbdcd753be326f8a3c782f3
&gt; 
&gt; * NetworkPkg/Ip6Dxe: Support SetData interface to clear specific
&gt; configuration
&gt; 
&gt; now checks for a 0 DataSize, and causes the DriverBinding start to fail.
&gt; 
&gt; There is still an issue of how the DataSize was set to 0 in the first place.

Thanks the report. No matter what reason casued the invalid Data, we should start Ipv6 driver. In such a case, we will clean the invalid data and continue to start IP6 driver.

The patch will be sent out soon.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6387</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-02-18 19:33:06 +0000</bug_when>
    <thetext>Commit version:
https://github.com/tianocore/edk2/commit/a169a04fd2cd529527f21575131ba3379ab72df8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1741</bug_id>
          
          <creation_ts>2019-04-22 23:48:37 +0000</creation_ts>
          <short_desc>ECC reports 4 errors in NetworkPkg</short_desc>
          <delta_ts>2019-05-04 22:22:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to name="xueshengfeng">shengfengx.xue</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7232</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-22 23:48:37 +0000</bug_when>
    <thetext>ECC reports 4 errors in NetworkPkg. 
Error Code: 1010
Error Message: UNI file that is associated by INF or DEC file need define the prompt and help information.
File: C:\ECC\Edk2R9\NetworkPkg\NetworkPkg.uni
LineNo: 1
Other Error Message: 
1. STR_gEfiNetworkPkgTokenSpaceGuid_PcdIPv4PXESupport_PROMPT is missing in the NetworkPkg.uni file.
2. STR_gEfiNetworkPkgTokenSpaceGuid_PcdIPv4PXESupport_HELP is missing in the NetworkPkg.uni file.
3. STR_gEfiNetworkPkgTokenSpaceGuid_PcdIPv6PXESupport_PROMPT is missing in the NetworkPkg.uni file.
4. STR_gEfiNetworkPkgTokenSpaceGuid_PcdIPv6PXESupport_HELP is missing in the NetworkPkg.uni file.

SHA-1: b29e6365c37f60c1e3757bc1fde448102e98854c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7291</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 22:04:12 +0000</bug_when>
    <thetext>shengfeng, could you help to fix this regression issue ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7312</commentid>
    <comment_count>2</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-28 00:01:08 +0000</bug_when>
    <thetext>(In reply to Yonghong Zhu from comment #1)
&gt; shengfeng, could you help to fix this regression issue ?

i will check it soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7359</commentid>
    <comment_count>3</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-30 03:34:27 +0000</bug_when>
    <thetext>Already committed

SHA-1: 679906d9bd4189f2575efed2a46d23ad7027f4cf

* NetworkPkg: Add missing string token in NetworkPkg.uni

UNI file that is associated by INF or DEC file need define the prompt and help information in NetworkPkg.uni</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7368</commentid>
    <comment_count>4</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-05-04 22:22:36 +0000</bug_when>
    <thetext>Run pass with edk2:fbb0ec7ea4c0d1e9e397fe898fb7d69de0779084</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1648</bug_id>
          
          <creation_ts>2019-03-21 20:40:13 +0000</creation_ts>
          <short_desc>BaseTools: Fix private includes when module scope FILE_GUID override is used</short_desc>
          <delta_ts>2019-05-21 01:16:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6865</commentid>
    <comment_count>0</comment_count>
      <attachid>280</attachid>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-03-21 20:40:13 +0000</bug_when>
    <thetext>Created attachment 280
proposed patch

When a module in a DSC file uses a FILE_GUID override in the
module scoped &lt;Defines&gt; section, a copy of the modified INF file
is placed in the Conf/.cache directory.  The check for private
includes uses the INF path to determine if the module is allowed
to use the private includes.  Since the INF path in this case is
not in any package, this check always fails, and no private
include paths are possible.

The fix is to keep both the OriginalPath and the new Path in
the PathClass object, and always use the OriginalPath to see if
the module INF is in the package with private includes.

Example DEC:
===========
[Includes]
  Include

[Includes.Common.Private]
  PrivateInclude

[LibraryClasses.Common.Private]
  ##  @libraryclass  Provides services to retrieve values from a capsule&apos;s FMP
  #                  Payload Header.  The structure is not included in the
  #                  library class.  Instead, services are provided to retrieve
  #                  information from the FMP Payload Header.  If information is
  #                  added to the FMP Payload Header, then new services may be
  #                  added to this library class to retrieve the new information.
  FmpPayloadHeaderLib|PrivateInclude/Library/FmpPayloadHeaderLib.h


Example DSC:
============
  FmpDevicePkg/FmpDxe/FmpDxe.inf {
    &lt;Defines&gt;
      #
      # FILE_GUID is used as ESRT GUID
      #
      FILE_GUID = $(SYSTEM_FMP_ESRT_GUID)
  }

This example breaks build with compiler error that the file 
FmpPayloadHeaderLib.h is not found because FmpDevicePkg/PrivateInclude
is not one of the include paths in the generated makefile.



I have attached a patch with a proposed fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6866</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:44:55 +0000</bug_when>
    <thetext>Bob help to check the patch. need to check the regression, and add test for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7714</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-21 01:16:12 +0000</bug_when>
    <thetext>fixed at 66b845ae06f1e48c693158ee0b8b4f610d5ada4a</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>280</attachid>
            <date>2019-03-21 20:40:13 +0000</date>
            <delta_ts>2019-03-21 20:40:13 +0000</delta_ts>
            <desc>proposed patch</desc>
            <filename>0001-BaseTools-Fix-private-includes-for-FILE_GUID-overrid.patch</filename>
            <type>text/plain</type>
            <size>2594</size>
            <attacher name="Michael Kinney">michael.d.kinney</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1765</bug_id>
          
          <creation_ts>2019-04-29 11:49:05 +0000</creation_ts>
          <short_desc>BaseTools doesn&apos;t support correct RAW FFS FILE generation</short_desc>
          <delta_ts>2019-06-18 01:25:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7339</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-29 11:49:05 +0000</bug_when>
    <thetext>RAW FFS File Rule like below. It has no section for its data. For RAW FFS File, directly call GenFfs tool to generate FFS file. 

Ffs Rule:
[Rule.Common.USER_DEFINED.MicroCode]
  FILE RAW = $(NAMED_GUID) {
    $(INF_OUTPUT)/$(MODULE_NAME).bin
  }

GenFfs command:
GenFfs -t EFI_FV_FILETYPE_RAW -g 1FAE4D78-CB33-4F73-8881-A1EA8F5EDFEF -o 1.ffs -i xxx.bin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7340</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-29 11:50:14 +0000</bug_when>
    <thetext>Zhiju will follow up it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7640</commentid>
    <comment_count>2</comment_count>
      <attachid>333</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:12:39 +0000</bug_when>
    <thetext>Created attachment 333
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7645</commentid>
    <comment_count>3</comment_count>
      <attachid>333</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:13:22 +0000</bug_when>
    <thetext>Comment on attachment 333
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7646</commentid>
    <comment_count>4</comment_count>
      <attachid>333</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:13:29 +0000</bug_when>
    <thetext>Comment on attachment 333
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7668</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 15:45:36 +0000</bug_when>
    <thetext>change it back to Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8085</commentid>
    <comment_count>6</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-06-18 01:25:04 +0000</bug_when>
    <thetext>fixed in 04797875d1d53e53e31eca4fa01bc3cf6929f39c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>333</attachid>
            <date>2019-05-17 13:12:39 +0000</date>
            <delta_ts>2019-05-17 13:13:29 +0000</delta_ts>
            <desc>data</desc>
            <filename>file_1765.txt</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1543</bug_id>
          
          <creation_ts>2019-02-20 00:53:59 +0000</creation_ts>
          <short_desc>Cpuid application handles leaf 0x1F wrongly</short_desc>
          <delta_ts>2019-07-01 23:15:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6434</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-20 00:53:59 +0000</bug_when>
    <thetext>CPUID leaf 0xB and 0x1F both produce the CPU topology.
But Cpuid application handles leaf 0x1F differently from what is done to handle leaf 0xB.
The same algorithm should be used for both 0xB and 0x1F leaf function.
The only difference (my understanding, haven&apos;t tried in real CPU) is leaf 0xB only reports up to Core level, while leaf 0x1F can report up to Die level.

We could follow SDM pseudo code to write a general routine to handle 0xB and 0x1F properly.

By the way, SDM pseudo code breaks the topology enumeration when ECX[08:15] equals to 0.
Today&apos;s 0xB handling logic breaks the loop when uses EAX[00:04] equals to 0.
I suggest we also update the existing 0xB handling logic to follow SDM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6489</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:14:11 +0000</bug_when>
    <thetext>Assign to Eric.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8314</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-01 23:15:32 +0000</bug_when>
    <thetext>fixed @ 516e33972f0a55045dc1ca44ae682bbc9b921580 and 
079141ebe7f1bf5f85a0c7f1c43f77c44844b1bd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1449</bug_id>
          
          <creation_ts>2019-01-10 21:36:12 +0000</creation_ts>
          <short_desc>Module Override Ability in DSC</short_desc>
          <delta_ts>2019-05-07 06:33:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6054</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-10 21:36:12 +0000</bug_when>
    <thetext>Within MinPlatformPkg on edk2-platforms we share a standardized set of &quot;minimal&quot; modules that serve as a consistent enabling baseline across platforms. This set of modules is provided to MinPlatformPkg users via DSC and FDF include files (e.g. CorePeiInclude.dsc, CoreDxeInclude.dsc, etc.).

(Libraries are also included but not an issue due to existing mechanisms for LibraryClass override)

The EDK II DSC File Specification defines scoping structures to override options in the DSC file. For example, a non-default library class may be specified in a &lt;LibraryClasses&gt; sub-element of the INF file path.

Currently two files may not have the same FILE_GUID in a platform DSC. This means if a platform wishes to override portions of a module included from a MinPlatformPkg DSC include file it must employ a series of steps with adverse effects (see other_options_considered).

This request is for the build tools to recognize that when two given files have the same GUID a specific definition should be used (perhaps last discovered). This does not imply current behavior is impacted. For example, an indicator may be introduced such that the INF file path block acts as an &quot;override&quot; rather than an &quot;appendage&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6068</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-13 22:18:59 +0000</bug_when>
    <thetext>Done at 5bc96263ea2bfecb07deea81c68a6c3e226ebda1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1898</bug_id>
          
          <creation_ts>2019-06-11 04:57:24 +0000</creation_ts>
          <short_desc>Remove deprecate APIs in BaseCryptLib</short_desc>
          <delta_ts>2020-05-27 04:30:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>nobody</cc>
    
    <cc>roger.feng</cc>
    
    <cc>sean.brogan</cc>
          <deadline>2020-05-08</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7976</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-11 04:57:24 +0000</bug_when>
    <thetext>Here is the deprecate APIs in BaseCryptLib:
AesGetContextSize, AesInit, AesEcbEncrypt, AesEcbDecrypt, AesCbcEncrypt, AesCbcDecrypt (CryptAes.c)

Md5GetContextSize, Md5Init, Md5Duplicate, Md5Update, Md5Final, Md5HashAll (CryptMd5.c)

Md4GetContextSize, Md4Init, Md4Duplicate, Md4Update, Md4Final, Md4HashAll (CryptMd4.c)

HmacMd5GetContextSize, HmacMd5New, HmacMd5Free, HmacMd5Init, HmacMd5Duplicate, HmacMd5Update, HmacMd5Final (CryptHmacMd4.c)

TdesGetContextSize, TdesInit, TdesEcbEncrypt, TdesEcbDecrypt, TdesCbcEncrypt, TdesCbcDecrypt (CryptTdes.c)

Arc4GetContextSize, Arc4Init, Arc4Encrypt, Arc4Decrypt, Arc4Reset (CryptArc4.c)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7977</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-11 04:58:18 +0000</bug_when>
    <thetext>take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8001</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-11 23:09:53 +0000</bug_when>
    <thetext>(In reply to Zhichao Gao from comment #0)
&gt; Here is the deprecate APIs in BaseCryptLib:
&gt; AesGetContextSize, AesInit, AesEcbEncrypt, AesEcbDecrypt, AesCbcEncrypt,
&gt; AesCbcDecrypt (CryptAes.c)
&gt; 
&gt; Md5GetContextSize, Md5Init, Md5Duplicate, Md5Update, Md5Final, Md5HashAll
&gt; (CryptMd5.c)
&gt; 
&gt; Md4GetContextSize, Md4Init, Md4Duplicate, Md4Update, Md4Final, Md4HashAll
&gt; (CryptMd4.c)
&gt; 
&gt; HmacMd5GetContextSize, HmacMd5New, HmacMd5Free, HmacMd5Init,
&gt; HmacMd5Duplicate, HmacMd5Update, HmacMd5Final (CryptHmacMd4.c)
&gt; 
&gt; TdesGetContextSize, TdesInit, TdesEcbEncrypt, TdesEcbDecrypt,
&gt; TdesCbcEncrypt, TdesCbcDecrypt (CryptTdes.c)
&gt; 
&gt; Arc4GetContextSize, Arc4Init, Arc4Encrypt, Arc4Decrypt, Arc4Reset
&gt; (CryptArc4.c)

Typo:
CryptHmacMd4.c -&gt; CryptHmacMd5.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11512</commentid>
    <comment_count>3</comment_count>
    <who name="Roger Feng">roger.feng</who>
    <bug_when>2020-03-03 21:25:43 +0000</bug_when>
    <thetext>Promote the importance to High per the request from Crypto subteam review feedback (SCS6-454). An ETA is expected for IPAS and crypto team to track the compliance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11556</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-03-05 03:07:19 +0000</bug_when>
    <thetext>ETA: 2020-05-08</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12527</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-05-19 12:27:02 +0000</bug_when>
    <thetext>Retire below deprecated functions:
MD4, ARC4, TDES, AES ECB MODE, HMAC MD5, HMAC SHA1.

fixed at aaa90aacaf317e43678115c5d008964590dc4060..84ce1f1bdc775464dd4abf767e2268949afc705f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1367</bug_id>
          
          <creation_ts>2018-11-30 09:13:17 +0000</creation_ts>
          <short_desc>BaseTools can&apos;t parse the error message from XCODE compiler when enable StrucutrePcd</short_desc>
          <delta_ts>2019-01-05 08:48:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5723</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-30 09:13:17 +0000</bug_when>
    <thetext>When the structure PCD is enabled, BaseTools will generate PcdValueInit.c and compile it. If this file is compiled with the error, BaseTools will parse the error. But now, BaseTools doesn&apos;t handle XCODE error message. Below is XCODE error message. 

Build/PlatformPkg/DEBUG_XCODE5/PcdValueInit/PcdValueInit.c:18:14: error:
      comparison of 0 &gt; unsigned expression is always false
      [-Werror,-Wtautological-compare]
  *Size = (0 &gt; *Size ? 0 : *Size); // The Pcd maxsize is 0
           ~ ^ ~~~~~
Build/PlatformPkg/DEBUG_XCODE5/PcdValueInit/PcdValueInit.c:72:14: error:
      comparison of 0 &gt; unsigned expression is always false
      [-Werror,-Wtautological-compare]
  *Size = (0 &gt; *Size ? 0 : *Size); // The Pcd maxsize is 0
           ~ ^ ~~~~~
2 errors generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5724</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-30 09:14:09 +0000</bug_when>
    <thetext>Assign it to Bob to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5992</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-05 08:48:54 +0000</bug_when>
    <thetext>fixed at 672601cfcc6f9905dd5fe8cdd7949cfb7f91fed1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1390</bug_id>
          
          <creation_ts>2018-12-10 19:51:02 +0000</creation_ts>
          <short_desc>BaseTools C Array doesn&apos;t work as the expectation</short_desc>
          <delta_ts>2018-12-17 21:49:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5817</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-10 19:51:02 +0000</bug_when>
    <thetext>1. gEfiNt32PkgTokenSpaceGuid.PcdMacAddress is defined as structure array with the array number. It can&apos;t pass build. 
2. gEfiNt32PkgTokenSpaceGuid.PcdMacAddress is defined as structure array without the array number. There is no initial value generation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5818</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-10 19:51:31 +0000</bug_when>
    <thetext>Assign it to tool owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5819</commentid>
    <comment_count>2</comment_count>
      <attachid>235</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-10 19:52:16 +0000</bug_when>
    <thetext>Created attachment 235
TestCase1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5820</commentid>
    <comment_count>3</comment_count>
      <attachid>236</attachid>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-10 19:52:43 +0000</bug_when>
    <thetext>Created attachment 236
TesCase2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5903</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-17 21:49:01 +0000</bug_when>
    <thetext>Fixed at 4c6e6f9f75a7b86d7760f5409a24b3c20759ccb9</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>235</attachid>
            <date>2018-12-10 19:52:16 +0000</date>
            <delta_ts>2018-12-10 19:52:16 +0000</delta_ts>
            <desc>TestCase1</desc>
            <filename>0001-TestCase-of-C-Array-usage.patch</filename>
            <type>application/octet-stream</type>
            <size>2688</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>236</attachid>
            <date>2018-12-10 19:52:43 +0000</date>
            <delta_ts>2018-12-10 19:52:43 +0000</delta_ts>
            <desc>TesCase2</desc>
            <filename>0001-TestCase-2-of-C-Array-usage.patch</filename>
            <type>application/octet-stream</type>
            <size>2713</size>
            <attacher name="nobody">nobody</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1410</bug_id>
          
          <creation_ts>2018-12-17 23:27:06 +0000</creation_ts>
          <short_desc>BaseTools should not generate C structure array initial value if the value is not specified with CODE style</short_desc>
          <delta_ts>2019-01-06 19:54:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5910</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-17 23:27:06 +0000</bug_when>
    <thetext>https://bugzilla.tianocore.org/show_bug.cgi?id=1292 supports C structure array initial value when PCD value is specified with CODE style. If PCD value is not specified with CODE style, PCD value can&apos;t be specified in C structure array, because C structure array value needs to align with the structure layout.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5911</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-17 23:27:45 +0000</bug_when>
    <thetext>Assign it to BaseTools owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5995</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-06 19:54:00 +0000</bug_when>
    <thetext>fixed at 672601cfcc6f9905dd5fe8cdd7949cfb7f91fed1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1846</bug_id>
          
          <creation_ts>2019-05-27 20:47:37 +0000</creation_ts>
          <short_desc>Add GenBiosId tool into edk2-platform Platform\Intel\Tools directory</short_desc>
          <delta_ts>2019-06-30 21:00:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7806</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 20:47:37 +0000</bug_when>
    <thetext>GenBiosId tool is used to generate BIOS ID binary and identify the board/build information. Patch https://edk2.groups.io/g/devel/topic/patch_3_3_edk2_platform/31804583?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,40,31804583 introduces BiosLib to parse BIOS ID binary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7807</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 20:48:07 +0000</bug_when>
    <thetext>Shenglei will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7826</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-28 12:46:53 +0000</bug_when>
    <thetext>Can this tool be implemented in Python and use the python struct module to handle C data structures?

This technique was used for python modules that generate/parse UEFI Capsules.  Here are a couple examples files that do encode/decode/dumpinfo operations on C structures defined in the UEFI Specification.

https://github.com/tianocore/edk2/blob/master/BaseTools/Source/Python/Common/Uefi/Capsule/UefiCapsuleHeader.py

https://github.com/tianocore/edk2/blob/master/BaseTools/Source/Python/Common/Uefi/Capsule/FmpCapsuleHeader.py</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8127</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-20 01:16:16 +0000</bug_when>
    <thetext>Based on the proposal in https://edk2.groups.io/g/devel/message/42546, GenBiosId will be moved to edk2-platform Platform\Intel\Tools directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8287</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-06-30 21:00:25 +0000</bug_when>
    <thetext>Fixed at edk2-platform:
171002793844b804652b15f229cf8c9cfe955369</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1050</bug_id>
          
          <creation_ts>2018-07-25 04:35:28 +0000</creation_ts>
          <short_desc>GenerateCapsule: encode by Openssl tool, but some of the cert file&apos;s content is incorrect, it report traceback error</short_desc>
          <delta_ts>2018-08-09 13:38:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4391</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-25 04:35:28 +0000</bug_when>
    <thetext>example:  --signer-private-cert file content is incorrect

it report below error:

Loading &apos;screen&apos; into random state - done
unable to load certificate
1148:error:0906D06C:PEM routines:PEM_read_bio:no start line:.\crypto\pem\pem_lib.c:703:Expecting: TRUSTED CERTIFICATE

GenerateCapsule: error: can not sign payload
Traceback (most recent call last):
  File &quot;C:\edk2\BaseTools\Source\Python\Capsule\GenerateCapsule.py&quot;, line 384, in &lt;module&gt;
    args.OpenSslTrustedPublicCertFile
  File &quot;C:\edk2\BaseTools\Source\Python\Capsule\GenerateCapsule.py&quot;, line 130, in SignPayloadOpenSsl
    raise ValueError (&apos;GenerateCapsule: error: openssl failed.&apos;)
ValueError: GenerateCapsule: error: openssl failed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4396</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-25 04:56:58 +0000</bug_when>
    <thetext>some more cases:
1. All the cert files are correct, but the --signing-tool-path specify to signtool, not openssl tool.

2. All the cert files are correct, but the openssl tool is not exist.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4407</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-25 21:06:56 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4464</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:14:24 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4534</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:38:16 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/e49eee4c51a6cb8b2f35735e375c211c41d9f6cb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1450</bug_id>
          
          <creation_ts>2019-01-11 10:24:17 +0000</creation_ts>
          <short_desc>build tool crashes when --genfds-multi-thread is used</short_desc>
          <delta_ts>2019-08-27 18:56:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6058</commentid>
    <comment_count>0</comment_count>
      <attachid>244</attachid>
    <who name="Felix">felixp</who>
    <bug_when>2019-01-11 10:24:17 +0000</bug_when>
    <thetext>Created attachment 244
Patches.zip

I faced the following three issues when I was trying to use 
--genfds-multi-thread switch in my project.

NOTE: All the patches attached here are implemented on top of commit a653a525515

1. build tool crashes with the exception.
Here is the call stack and exception message:
-- Call stack --
Main [BaseTools/Source/Python/build/build.py]
  MyBuild.Launch() [BaseTools/Source/Python/build/build.py]
    self._MultiThreadBuildPlatform() [BaseTools/Source/Python/build/build.py]
	  CmdListDict = self._GenFfsCmd() [BaseTools/Source/Python/build/build.py]
	    GenFfsDict = GenFds.GenFfsMakefile(&apos;&apos;, GlobalData.gFdfParser, self, self.ArchList, GlobalData) [BaseTools/Source/Python/build/build.py]
          GenFdsGlobalVariable.SetEnv(FdfParserObject, WorkSpace, ArchList, GlobalData) [BaseTools/Source/Python/GenFds/GenFds.py]
            GenFdsGlobalVariable.FvDir = os.path.join(GenFdsGlobalVariable.OutputDirDict[ArchList[0]], DataType.TAB_FV_DIRECTORY) [BaseTools/Source/Python/GenFds/GenFdsGlobalVariable.py]
--
Exception message: &apos;IndexError: tuple index out of range&apos;
--
The problem happens because ArchList is an empty tuple.
The arch list is coming from MyBuild.ArchList (refer to self.ArchList in the GenFds.GenFfsMakefile call above).
Based on my analysis, MyBuild.ArchList is initialized with the list of project architectures in the following two cases:
a) When supported architecture(s) is(are) specified in the build tool command line
b) When supported architecture(s) is(are) specified in target.txt
None of the cases apply to my project, in which list of supported architectures is determined by parsing project DSC file.
As a result, MyBuild.ArchList is empty, which causes an exception.

I was able to resolve the issue with the attached Patch1.

2. Build process fails with the following GenFfs file error:
-
GenFfs: ERROR 2000: Invalid parameter
  Fv File type EFI_FV_FILETYPE_SECURITY_CORE must have one and only one Pe or Te section, but 2 Pe/Te section are input
-
The error happens because makefile produced by the build tool generates two TE sections.
Here is the FDF rule I&apos;m using for the SEC module:
[Rule.Common.SEC]
  FILE SEC = $(NAMED_GUID) RELOCS_STRIPPED {
    TE TE Align = 8 |.efi
    RAW      RAW  Optional   Align = 16      |.bin
  }

NOTE: When &apos;--genfds-multi-thread&apos; option is not used the same project builds fine.
NOTE: The error above is not limited to the SEC module. It also happens for PEI Core and all PEI modules
that use similar FDF rule with TE section.

Based on my analysis, the make file script for duplicated TE sections originates from
GenFdsGlobalVariable.GetModuleCodaTargetList. In addition to adding to TargetList all the
files directly derived from the build rules, the function also adds files produced by the copy command.
This leads to duplicated files in in the TargetList.
Build rule for .dll files in build_rule.txt contains copy command. As a result TargetList constructed by
GetModuleCodaTargetList includes both $(DEBUG_DIR)(+)$(MODULE_NAME).efi and $(BIN_DIR)(+)$(MODULE_NAME_GUID).efi.
The produced TargetList is used by EfiSection.GenSection to create TE section for each .efi file in the list
(search for &quot;if SectionType == BINARY_FILE_TYPE_TE&quot; in EfiSection.GenSection).

Here is the call sequence that leads to GetModuleCodaTargetList:
--
Main, build.py
  Launch, build.py
    _MultiThreadBuildPlatform, build.py
      _GenFfsCmd, build.py
        GenFfsMakefile, GenFds.py
          GenFd, Fd.py
            AddToBuffer, Region.py
              AddToBuffer, Fv.py
                GenFfs, FfsInfStatement.py
                  __GenComplexFileSection__, FfsInfStatement.py
                    GenSection, EfiSection.py
                      GetFileList, Section.py
                        GetFinalTargetSuffixMap, FfsInfStatement.py
                          GetModuleCodaTargetList, GenFdsGlobalVariable.py
--
I was able to workaround the issue with the attached Patch2 
(do not add files derived from copy command into TargetList)

3. build tool crashes with the exception towards the end of the build process.
Here is the call stack and exception message:
-- Call stack --
Main [BaseTools/Source/Python/build/build.py]
  MyBuild.Launch() [BaseTools/Source/Python/build/build.py]
    self.CreateGuidedSectionToolsFile() [BaseTools/Source/Python/build/build.py]
      self._InitWorker(Workspace, MetaFile, Target, Toolchain, Arch, *args, **kwargs) [BaseTools/Source/Python/AutoGen/AutoGen.py]
        Fdf.ParseFile() [BaseTools/Source/Python/AutoGen/AutoGen.py]
          self.Preprocess() [BaseTools/Source/Python/GenFds/FdfParser.py]
            self.PreprocessIncludeFile() [BaseTools/Source/Python/GenFds/FdfParser.py]
                PlatformDir = GenFdsGlobalVariable.ActivePlatform.Dir [BaseTools/Source/Python/GenFds/FdfParser.py]
--
Exception message: AttributeError: &apos;DscBuildData&apos; object has no attribute &apos;Dir&apos;
--	
I noticed that GenFdsGlobalVariable.ActivePlatform
may contain objects of two different types.
When GenFds is launched using GenFdsApi (main in older revisions) GenFdsGlobalVariable.ActivePlatform
is initialized with the PathClass instance:
  GenFdsGlobalVariable.ActivePlatform = PathClass(NormPath(ActivePlatform))

When GenFdsGlobalVariable.SetEnv is called, GenFdsGlobalVariable.ActivePlatform
is initialized with the DscBuildData instance:
  GenFdsGlobalVariable.ActivePlatform = GlobalData.gActivePlatform
(GlobalData.gActivePlatform is an object of type DscBuildData, which has no Dir attribute)

I was able to workaround the issue with the attached Patch3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6080</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-14 19:27:42 +0000</bug_when>
    <thetext>Assign it to BaseTools Owners.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6117</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-16 20:38:04 +0000</bug_when>
    <thetext>Assign it to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6272</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-01 20:30:35 +0000</bug_when>
    <thetext>Hi Felix,  

Would you please send the patches to edk2 community for review?

Thanks,
Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6342</commentid>
    <comment_count>4</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2019-02-12 13:29:57 +0000</bug_when>
    <thetext>Hi Bob,

OK. I&apos;ll send the patches to the list.
I have not done it originally because I was not sure if they are true fixes or just workarounds, but I guess mailing list review process should clear out my concerns.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6948</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-29 07:15:07 +0000</bug_when>
    <thetext>Hi Felix,

I sent patch for review.
https://lists.01.org/pipermail/edk2-devel/2019-March/038341.html

This patch fixed the issue 1# and 3#. 

I did not reproduce issue 2#, would you send out the patch for the 2#?

Thanks,
Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9304</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:56:06 +0000</bug_when>
    <thetext>Fixed in commit b1e27d175abb (&quot;BaseTools: Fixed issue in MultiThread Genfds function&quot;, 2019-04-10).</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>244</attachid>
            <date>2019-01-11 10:24:17 +0000</date>
            <delta_ts>2019-01-11 10:24:17 +0000</delta_ts>
            <desc>Patches.zip</desc>
            <filename>Patches.zip</filename>
            <type>application/zip</type>
            <size>1253</size>
            <attacher name="Felix">felixp</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1470</bug_id>
          
          <creation_ts>2019-01-16 20:18:40 +0000</creation_ts>
          <short_desc>Enable GPT support for recovery feature</short_desc>
          <delta_ts>2019-01-31 01:18:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="chao">chao.b.zhang</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>chen.a.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FatPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6116</commentid>
    <comment_count>0</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2019-01-16 20:18:40 +0000</bug_when>
    <thetext>Recovery image could come form storage with GPT partitions.  Therefore GPT partition support is required</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6132</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:05:47 +0000</bug_when>
    <thetext>bug scrub: assign to Chao to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6248</commentid>
    <comment_count>2</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-01-31 01:18:32 +0000</bug_when>
    <thetext>Commit-id: 0d18f5db32267450b44f5d4b2fdc8627e30de007 in edk2 branch.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1603</bug_id>
          
          <creation_ts>2019-03-08 12:14:20 +0000</creation_ts>
          <short_desc>Add new tool chain for LLVM/CLANG9</short_desc>
          <delta_ts>2019-10-24 06:01:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6660</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-08 12:14:20 +0000</bug_when>
    <thetext>LLVM/CLANG 8.0 will be released soon (https://prereleases.llvm.org/8.0.0/). New tool chain for LLVM/CLANG is requested to be added.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6661</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-08 12:15:45 +0000</bug_when>
    <thetext>Assign it to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6790</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:52:17 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6800</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-20 23:04:59 +0000</bug_when>
    <thetext>LLVM/CLANG8 formal release http://releases.llvm.org/download.html#8.0.0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7372</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-05 02:04:41 +0000</bug_when>
    <thetext>New CLANG tool chain can use the release LLVM/CLANG tool chain. To compare with CLANG38 tool chain, new tool chain will use LLD as linker instead of LD. And, the plan is to add two new CLANG tool chain. They both depend on LLVM/LLD linker. 
1. CLANG8ELF generates ELF image, and converted to PE image with DWARF debug symbols. 
2. CLANG8PE directly generates PE image with PDB debug symbols.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7775</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-24 00:55:39 +0000</bug_when>
    <thetext>This feature can&apos;t catch 201905 stable tag. Defer it to next stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8396</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-10 09:49:43 +0000</bug_when>
    <thetext>CLANG8ELF is ready in https://github.com/tianocore/edk2-staging/tree/llvm8

CLANG8PE is under work in https://github.com/lgao4/edk2/tree/Clang. There are still some issues to pass build in NetworkPkg IA32 arch, and boot issue in X64 OVMF. We are still working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9098</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-20 22:49:54 +0000</bug_when>
    <thetext>Continue to work with LLVM project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9498</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-08 20:40:34 +0000</bug_when>
    <thetext>CLANG9PE tool chain is ready on https://github.com/lgao4/edk2/tree/llvm9. It depends on LLVM 9 release. Now, LLVM9 RC3 is ready https://prereleases.llvm.org/9.0.0/#rc3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9853</commentid>
    <comment_count>9</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 20:55:50 +0000</bug_when>
    <thetext>The formal patch has been sent in edk2 community for review. 

Code: https://github.com/lgao4/edk2/tree/CLANG9
Wiki: https://github.com/lgao4/edk2/wiki/CLANG9-Tools-Chain</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10205</commentid>
    <comment_count>10</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-23 21:43:43 +0000</bug_when>
    <thetext>push  d95de082da01f4a4cb3ebf87e15972a12d0f8d53..703232b8e8889e908771b64e22b5ed94e403aa0a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10208</commentid>
    <comment_count>11</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-10-24 02:43:28 +0000</bug_when>
    <thetext>Wiki page: https://github.com/tianocore/tianocore.github.io/wiki/CLANG9-Tools-Chain</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10212</commentid>
    <comment_count>12</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-10-24 06:01:51 +0000</bug_when>
    <thetext>Liming, could you also add the MacOS verbose build and run steps in the wiki?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1088</bug_id>
          
          <creation_ts>2018-08-14 21:29:46 +0000</creation_ts>
          <short_desc>Support &quot;fake Capsule header&quot; in gRT-&gt;QueryCapsuleCpapbilities() with DxeCapsuleLibFmp library instance</short_desc>
          <delta_ts>2019-02-11 00:00:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4579</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-08-14 21:29:46 +0000</bug_when>
    <thetext>In UEFI Spec. QueryCapsuleCpapbilities() section, there is a description about “fake header” as below: 
“If the caller needs to query for generic capsule capability a fake EFI_CAPSULE_HEADER can be constructed where CapsuleImageSize is equal to HeaderSize that is equal to sizeof (EFI_CAPSULE_HEADER).”
In DxeCapsuleLibFmp, it looks like below check in ValidateFmpCapsule() will reject a fake header which contains FmpCapsuleGuid and has 0x1C in both CapsuleImageSize and HeaderSize:
  if (CapsuleHeader-&gt;HeaderSize &gt;= CapsuleHeader-&gt;CapsuleImageSize) {
    DEBUG((DEBUG_ERROR, &quot;HeaderSize(0x%x) &gt;= CapsuleImageSize(0x%x)\n&quot;, CapsuleHeader-&gt;HeaderSize, CapsuleHeader-&gt;CapsuleImageSize));
    return EFI_INVALID_PARAMETER;
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4612</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-16 20:12:21 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5849</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-12-13 00:21:48 +0000</bug_when>
    <thetext>Change Assignee to Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6314</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-11 00:00:26 +0000</bug_when>
    <thetext>Fix at edk2 8a1a7774d23297891bd4efc2e9bceebdcff1679a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1411</bug_id>
          
          <creation_ts>2018-12-18 21:49:11 +0000</creation_ts>
          <short_desc>CpuFeaturesPei driver boot failure</short_desc>
          <delta_ts>2019-07-03 01:21:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5912</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-12-18 21:49:11 +0000</bug_when>
    <thetext>When enable CpuFeaturesPei driver in one reference platform, system boot failure with below console error log:

[NEW] FeatureName: Microcode 2 Load
[NEW] FeatureName: Turbo Mode
Processor Info: Package: 1, MaxCore : 4, MaxThread: 2
Package: 0, Valid Core : 4
ASSERT [CpuFeaturesPei] d:\Edk2\MdePkg\Library\PeiServicesTablePointerLibIdt\PeiServicesTablePointer.c(48): PAeiSerSvices a= rA(AA(AveSoSSid urrAgrreSee\esSsEspgggrbg\\\er\EEEsadbsbbbgrTrr\raaaaaSsbsIssTrTTTdaaaaaSaIIIsIbddddTltttteaaIaa)bbd:bblltllt)a=))):b::: l v===)= : ((( (((*= ((void *) 0)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5913</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-12-18 21:50:08 +0000</bug_when>
    <thetext>Confirmed this is an true issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8336</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-03 01:21:07 +0000</bug_when>
    <thetext>SHA-1: 7217b8796d2727db76cd6684ba706c3b643b1d62

* UefiCpuPkg/RegisterCpuFeaturesLib: Avoid AP calls PeiService.

V3:
   Define union to specify the ppi or protocol.

V2:
1. Initialize CpuFeaturesData-&gt;MpService in CpuInitDataInitialize
   and make this function been called at the begin of the
   initialization.
2. let all other functions use CpuFeaturesData-&gt;MpService install
   of locate the protocol itself.

V1:
GetProcessorIndex function calls GetMpPpi to get the MP Ppi.
Ap will calls GetProcessorIndex function which final let AP calls
PeiService.

This patch avoid GetProcessorIndex call PeiService.

BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1411

Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1847</bug_id>
          
          <creation_ts>2019-05-27 21:32:32 +0000</creation_ts>
          <short_desc>Add FMMT tool into edk2 BaseTools</short_desc>
          <delta_ts>2022-05-06 01:05:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Chen Yuwei">yuwei.chen</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fengyunhua</cc>
    
    <cc>paul.a.lohr</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7808</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 21:32:32 +0000</bug_when>
    <thetext>Now, FMMT is published in https://firmware.intel.com/develop#accordions_develop-page-node-17 Intel UEFI tools and utilities. To better maintain it, I propose to add it into Edk2 BaseTools directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7809</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 21:33:05 +0000</bug_when>
    <thetext>Shenglei will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8126</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-20 01:15:47 +0000</bug_when>
    <thetext>Based on the proposal in https://edk2.groups.io/g/devel/message/42546, FMMT will be moved to edk2-platform Platform\Intel\Tools directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8291</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-01 00:22:00 +0000</bug_when>
    <thetext>Base on TianoCore design meeting discussion, https://edk2.groups.io/g/announce/message/49, FMMT is added into Edk2 BaseTools, and ask help to verify their build in ARM Linux.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9285</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:11:04 +0000</bug_when>
    <thetext>There was an attempt to solve this in commit 080981d72dcb (&quot;BaseTools/FMMT: Add a tool FMMT&quot;, 2019-07-04), but that got later reverted in commit b9479a7f7b1c (&quot;Revert &quot;BaseTools/FMMT: Add a tool FMMT&quot;&quot;, 2019-07-11). So this bug is staying open for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9367</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-27 22:31:04 +0000</bug_when>
    <thetext>Now, it is added in https://github.com/tianocore/edk2-staging/commits/FceFmmt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9396</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-29 08:00:05 +0000</bug_when>
    <thetext>setting status to IN_PROGRESS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12360</commentid>
    <comment_count>7</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-04-30 15:58:17 +0000</bug_when>
    <thetext>do we have an ETA on getting this into the open source?  It has been open nearly a year now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12406</commentid>
    <comment_count>8</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-05-05 22:54:26 +0000</bug_when>
    <thetext>It has been in open source edk2-staging repo. Now, there are some gaps in the coding style and the duplicated functions. The effort is required to clean up FMMT tools and make sure it be added into edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12437</commentid>
    <comment_count>9</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-05-06 18:44:30 +0000</bug_when>
    <thetext>Ok.  but it has been submitted for about a year now.  Do we have an estimate when this task will be completed?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17861</commentid>
    <comment_count>10</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-11-29 09:40:52 +0000</bug_when>
    <thetext>Christine takes this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17863</commentid>
    <comment_count>11</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2021-11-29 22:06:43 +0000</bug_when>
    <thetext>The FMMT python tool has been developed.

The FMMT python tool is used for firmware files operation, which has
the Fv/FFs-based &apos;View&apos;&amp;&apos;Add&apos;&amp;&apos;Delete&apos;&amp;&apos;Replace&apos; operation function:

1.Parse a FD(Firmware Device) / FV(Firmware Volume) / FFS(Firmware Files)
2.Add a new FFS into a FV file (both included in a FD file or not)
3.Replace an FFS in a FV file with a new FFS file
4.Delete an FFS in a FV file (both included in a FD file or not)
5.Extract the FFS from a FV file (both included in a FD file or not)

Currently the FMMT C tool is saved in edk2-staging repo, but its
quality and coding style can&apos;t meet the Edk2 quality, which is hard to
maintain (Hard/Duplicate Code; Regression bugs; Restrict usage).

The new Python version keeps same functions with origin C version. It
has higher quality and better coding style, and it is much easier to
extend new functions and to maintain.

PR Link: https://github.com/tianocore/edk2-basetools/pull/11
RFC Link: https://edk2.groups.io/g/devel/message/82877
Staging Link: https://github.com/tianocore/edk2-staging/tree/PyFMMT</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18047</commentid>
    <comment_count>12</comment_count>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2021-12-24 02:32:38 +0000</bug_when>
    <thetext>I have tried Patch V6, found replace operation no effect, I used a different PcdDxe.ffs to replace PcdDxe in OVMF.fd, the Out4.bin not changed compare with OVMF.fd

fmmt -r  d:\code\edk2\Build\OvmfIa32\DEBUG_VS2015x86\FV\OVMF.fd PcdDxe PcdDxe.ffs Out4.bin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18048</commentid>
    <comment_count>13</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2021-12-24 02:53:10 +0000</bug_when>
    <thetext>The PcdDxe.ffs has already in Ovmf.fd file, the replace function replaced same content with the origin one, thus there has no changes.

If the PcdDxe.ffs content is not same as the ffs content in Ovmf.fd, please provide the ffs file, and I will test it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18049</commentid>
    <comment_count>14</comment_count>
      <attachid>907</attachid>
    <who name="yunhua feng">fengyunhua</who>
    <bug_when>2021-12-24 03:14:34 +0000</bug_when>
    <thetext>Created attachment 907
PcdDxe.ffs

attached the PcdDxe.ffs</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18565</commentid>
    <comment_count>15</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2022-03-07 11:48:13 +0000</bug_when>
    <thetext>Hello - how are we doing on this?  It seems to have stalled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18596</commentid>
    <comment_count>16</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2022-03-10 19:25:37 +0000</bug_when>
    <thetext>The test work has entered the final stage. After the test is completed, the FMMT python version will be pushed to Edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18941</commentid>
    <comment_count>17</comment_count>
    <who name="Chen Yuwei">yuwei.chen</who>
    <bug_when>2022-05-06 01:05:28 +0000</bug_when>
    <thetext>FMMT python tool has been merged into edk2 master branch.
https://github.com/tianocore/edk2/commit/a64b944942d828fe98e4843929662aad7f47bcca</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>907</attachid>
            <date>2021-12-24 03:14:34 +0000</date>
            <delta_ts>2021-12-24 03:14:34 +0000</delta_ts>
            <desc>PcdDxe.ffs</desc>
            <filename>PcdDxe.ffs</filename>
            <type>application/octet-stream</type>
            <size>24458</size>
            <attacher name="yunhua feng">fengyunhua</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1125</bug_id>
          
          <creation_ts>2018-08-28 21:26:49 +0000</creation_ts>
          <short_desc>Add 32bit subnet mask support to IP4 PXE boot</short_desc>
          <delta_ts>2018-09-02 21:02:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="sfu5">siyuan.fu</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4727</commentid>
    <comment_count>0</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-08-28 21:26:49 +0000</bug_when>
    <thetext>The DHCP server may assign an IP address with 32bit subnetmask (255.255.255.255) to the PXE client in some specific network environment (e.g. PPP enabled network).
The current edk2 IP4 stack will reject any IP address configuration with /32 subnet mask, then PXE boot will fail. This ticket is request to add /32 subnet mask in PXE boot process.
This feature is supported in some legacy BIOS implenetations, but not officially standardized (e.g. through RFC).

An example of the DHCP server configuration file will be
        subnet 10.255.254.3 netmask 255.255.255.255 {
                host server68 {
                        hardware ethernet xxxx;
                        fixed-address 10.255.254.3;
                        option domain-name-servers 8.8.8.8;
                        next-server 10.255.254.129;
                        option static-routes 10.255.254.1 10.255.254.1;
                        option routers 10.255.254.1;
                        option subnet-mask 255.255.255.255;

                        if option arch = 00:07 {
                                filename &quot;syslinux.efi&quot;;
                        } else {
                                filename &quot;pxelinux.0&quot;;
                        }
                }
        } # End subnet</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4728</commentid>
    <comment_count>1</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-08-28 21:28:51 +0000</bug_when>
    <thetext>Below changes need to be applied to edk2 IP4 stack to enable this feature:

1. Update IP4 protocol and IP4Config2 protocol to accept /32 station IP address, and gateway address which is outside subnet.
2. Add below routing logic to IP4 driver:
     If gateway is outside the subnet, do ARP on destination IP address to check if it’s on-link, and get dest MAC address. 
     If got ARP reply, the dest IP is on-link, send packet to dest MAC directly.
     If ARP timeout, the dest IP is not on-link, do ARP to query gateway’s MAC address, then send packet to gateway’s MAC.
3. Other code to support the new usage, like shell ping, ifconfig command.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4769</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-30 20:03:50 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4801</commentid>
    <comment_count>3</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2018-09-02 21:02:42 +0000</bug_when>
    <thetext>edk2: 12ae56cf28d6a435f39a7c9c3a97185baf76f005, b8bcaafb39e8860a1fb672d75bb6f7bbdceb28bd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1958</bug_id>
          
          <creation_ts>2019-07-03 01:32:19 +0000</creation_ts>
          <short_desc>Build cache cannot generate the offset file for hii/vfr module</short_desc>
          <delta_ts>2019-09-05 00:16:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8339</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-07-03 01:32:19 +0000</bug_when>
    <thetext>Current build cache cannot generate the offset file for hii/vfr module

Reproduce steps on OVMF:
1. Generate the build cache and save the build folder as Build1:
$ source edksetup.sh
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -a IA32 -a X64 -t GCC5 -b NOOPT --hash --binary-destination=BinCache
$ mv Build/ Build1
2. Consume the build cache and save the build folder as Build2:
$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -a IA32 -a X64 -t GCC5 -b NOOPT --hash --binary-source=BinCache
$ mv Build Build2

Compare the hii/vfr module ffs folder, e.g. UiApp as below, in the Build1 and Build2, you will find the *.offset, *.raw, *.raw.txt, *.map files are missing.

Build1\Ovmf3264\NOOPT_GCC5\FV\Ffs\462CAA21-7614-4503-836E-8AB6F4662331UiApp
Build2\Ovmf3264\NOOPT_GCC5\FV\Ffs\462CAA21-7614-4503-836E-8AB6F4662331UiApp

UiApp.offset
UiAppOffset.raw
UiAppOffset.raw.txt
462CAA21-7614-4503-836E-8AB6F4662331.map</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8341</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-07-03 01:34:23 +0000</bug_when>
    <thetext>Confirm and assign to</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8342</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-07-03 01:35:58 +0000</bug_when>
    <thetext>assign to Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9467</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-09-05 00:16:17 +0000</bug_when>
    <thetext>fixed at 40db176d9d4f214e590488ba836f42382cc02cb4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1233</bug_id>
          
          <creation_ts>2018-10-09 01:44:05 +0000</creation_ts>
          <short_desc>[SdMmcPciHcDxe] Allow host controllers with spec. version higher than 3.0 recognizable by the driver</short_desc>
          <delta_ts>2018-10-12 03:50:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5193</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-09 01:44:05 +0000</bug_when>
    <thetext>The current implementation (based on SD Host Controller Simplified Specification (Ver3.00)) of the SdMmc host controller driver can only recognize controllers with spec version equals to one of the below values:
00h - SD Host Controller Specification Version 1.00
01h - SD Host Controller Specification Version 2.00
02h - SD Host Controller Specification Version 3.00

According to the latest SD Host Controller Simplified Specification (Ver4.20), 3 more versions are added:
03h - SD Host Controller Specification Version 4.00
04h - SD Host Controller Specification Version 4.10
05h - SD Host Controller Specification Version 4.20

Also, the current implementation of the SdMmc host controller use this controller spec version information to decide:
A. Set SDCLK Frequency Select and Internal Clock Enable fields in Clock Control register;
B. Set 1.8V signaling support

Since those settings remain similarly in newer version (&gt;Ver3.00) of the SD Host Controller Simplified Specification, we can loosen current driver&apos;s restrict on spec version of the controller.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5230</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:08:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5244</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-12 03:50:28 +0000</bug_when>
    <thetext>Resolved by Jeff Brasen &lt;jbrasen@nvidia.com&gt; via commits:

https://github.com/tianocore/edk2/commit/bdf038ccff13b2a9d1146598029aa2d6824c4c05
https://github.com/tianocore/edk2/commit/bbce001515bbfcad24c216b1c9c25057e8c461e9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1666</bug_id>
          
          <creation_ts>2019-03-27 09:29:06 +0000</creation_ts>
          <short_desc>Remove ICC tool chain from tools_def.txt</short_desc>
          <delta_ts>2019-04-23 22:47:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6926</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-27 09:29:06 +0000</bug_when>
    <thetext>There is no Intel compiler test. Suggest to remove ICC tool chain from tools_def.txt. After this update, INTEL tool family is not used. So, MdePkg library can be updated to remove it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6927</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-27 09:29:56 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7247</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-04-23 22:47:40 +0000</bug_when>
    <thetext>Fixed at:
e7ee4e0da1532c7326446e3ed61c6b93a0964b0a
5b7255e3d909e61528df4133082d0a4160d43700
36082dffd48da4d0475ed9b71f92fdd561304e8e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1688</bug_id>
          
          <creation_ts>2019-04-09 03:43:06 +0000</creation_ts>
          <short_desc>Add additional build option to treat Dynamic Pcd as DynamicEx Pcd</short_desc>
          <delta_ts>2021-07-14 09:16:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7036</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-09 03:43:06 +0000</bug_when>
    <thetext>DynamicEx Pcd supports binary module build well. It&apos;s helpful to add a new build option for build tool to convert all Dynamic Pcd to DynamicEx Pcd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7037</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-09 03:43:49 +0000</bug_when>
    <thetext>Bob is working on this feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7081</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-11 04:42:51 +0000</bug_when>
    <thetext>Dsc spec also need to update to add a new reserved key word PCD_DYNAMIC_AS_DYNAMICEX under defines section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16605</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2021-07-11 23:00:03 +0000</bug_when>
    <thetext>Under review https://edk2.groups.io/g/devel/message/76176</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16637</commentid>
    <comment_count>4</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-07-14 09:16:22 +0000</bug_when>
    <thetext>This one has been fixed at 40a9066439cbab235933525810f46f03806c6ef1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1068</bug_id>
          
          <creation_ts>2018-07-30 02:58:29 +0000</creation_ts>
          <short_desc>ECC tool crash because &apos;NoneType&apos; object</short_desc>
          <delta_ts>2018-11-05 02:45:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4467</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-07-30 02:58:29 +0000</bug_when>
    <thetext>ECC depends on antlr V3.0.1. It can be downloaded from http://www.antlr3.org/download/Python/
After download it, use python setup.py install to install it. 

But after commit b6f6b636b038e780c87892b17835bb6d043523b8, ecc can&apos;t run. 

ecc -c BaseTools\Source\Python\Ecc\config.ini -t FatPkg\EnhancedFatDxe

Loading ECC configuration ... done
Traceback (most recent call last):
  File &quot;C:\Python27\lib\runpy.py&quot;, line 174, in _run_module_as_main
    &quot;__main__&quot;, fname, loader, pkg_name)
  File &quot;C:\Python27\lib\runpy.py&quot;, line 72, in _run_code
    exec code in run_globals
  File &quot;D:\AllPkg\Edk2\BaseTools\Source\Python\Ecc\Ecc.py&quot;, line 443, in &lt;module&gt;
    Ecc = Ecc()
  File &quot;D:\AllPkg\Edk2\BaseTools\Source\Python\Ecc\Ecc.py&quot;, line 118, in __init__
    EccGlobalData.gDb.InitDatabase(self.IsInit)
  File &quot;D:\AllPkg\Edk2\BaseTools\Source\Python\Ecc\Database.py&quot;, line 96, in InitDatabase
    self.TblInf = ModuleTable(self.Cur)
  File &quot;D:\AllPkg\Edk2\BaseTools\Source\Python\Ecc\MetaFileWorkspace\MetaFileTable.py&quot;, line 71, in __init__
    MetaFileTable.__init__(self, Cursor, &apos;&apos;, MODEL_FILE_INF, &quot;Inf&quot;, False)
  File &quot;D:\AllPkg\Edk2\BaseTools\Source\Python\Ecc\MetaFileWorkspace\MetaFileTable.py&quot;, line 32, in __init__
    self.TblFile = EccGlobalData.gDb.TblFile
AttributeError: &apos;NoneType&apos; object has no attribute &apos;TblFile&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4476</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-08-01 21:05:34 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5494</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:45:58 +0000</bug_when>
    <thetext>it already be resolved .</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1604</bug_id>
          
          <creation_ts>2019-03-08 12:17:37 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkPkg</short_desc>
          <delta_ts>2019-07-03 01:52:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1496</dependson>
    
    <dependson>1843</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6662</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-08 12:17:37 +0000</bug_when>
    <thetext>IntelFrameworPkg is not required. It can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6663</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-08 12:18:09 +0000</bug_when>
    <thetext>Ray will drive to remove it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6792</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:54:47 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7398</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:53:26 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8359</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:52:53 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/87fc0601fa9a98d5f86a81fc20d2cc8ef936e064</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1089</bug_id>
          
          <creation_ts>2018-08-15 13:30:37 +0000</creation_ts>
          <short_desc>[OpenSSL] Update version to upcoming 1.1.1</short_desc>
          <delta_ts>2019-06-20 01:46:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1926</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1845</dependson>
          <blocked>1781</blocked>
    
    <blocked>1821</blocked>
    
    <blocked>1861</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="P J P">prasad</reporter>
          <assigned_to name="Xiaoyu Lu">xiaoyux.lu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jbuchert+tianocore</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>qin.long</cc>
    
    <cc>ting.ye</cc>
    
    <cc>xiaoyux.lu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-10</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4587</commentid>
    <comment_count>0</comment_count>
    <who name="P J P">prasad</who>
    <bug_when>2018-08-15 13:30:37 +0000</bug_when>
    <thetext>OpenSSL 1.1.1 Beta 6 (pre release 8) is available from https://www.openssl.org/
Upcoming 1.1.1 release will be included in Fedora soon.

This bug is to ensure that edk2 builds &amp; works with the new OpenSSL release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4611</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-16 20:10:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4989</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-17 06:22:54 +0000</bug_when>
    <thetext>OpenSSL 1.1.1 (LTS) was released on 11-Sep-2018.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4991</commentid>
    <comment_count>3</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2018-09-17 12:49:43 +0000</bug_when>
    <thetext>Thanks for reminder. 
Working on the 1.1.1 enabling &amp; evaluations ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5833</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-12 02:14:01 +0000</bug_when>
    <thetext>Take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6642</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-07 12:07:05 +0000</bug_when>
    <thetext>Hi Jian,

can you give me a time frame for advancing upstream edk2 to OpenSSL-1.1.1?

Does it perhaps require API level changes in the UEFI spec too (due to OpenSSL-1.1.1 implementing TLSv1.3)?

Thanks!
Laszlo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6647</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-08 01:53:24 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)

It will catch the next stable tag (Q2). Since current TlsLib can be built against openssl-1.1.1 without any change (we&apos;ve completed the initial porting for just build), we tend to keep TlsLib api as-is for backward compatibility but just update the implementation of it to meet Tls1.3 requirement. If we need to change existing api prototype for the sake of new feature of Tls1.3, normally a new library class will be introduced. This part is still under discussion. Any suggestion is welcomed. (Jian)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6655</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-08 04:07:41 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #6)
&gt; It will catch the next stable tag (Q2).

Thank you, this is helpful.

&gt; Since current TlsLib can be built against openssl-1.1.1 without any
&gt; change (we&apos;ve completed the initial porting for just build), we tend
&gt; to keep TlsLib api as-is for backward compatibility but just update
&gt; the implementation of it to meet Tls1.3 requirement.

That sounds great. My initial goal is not to utilize new features from
OpenSSL-1.1.1, but simply to build edk2 against OpenSSL-1.1.1.

Do you think it would be possible to post *just* an OpenSSL update, soon
after edk2-stable201903? Possibly with small TlsLib updates, as
required?

Again, my goal is simply to consume OpenSSL-1.1.1, through the current
library classes.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6657</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-08 07:31:09 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #7)
&gt; 
&gt; Do you think it would be possible to post *just* an OpenSSL update, soon
&gt; after edk2-stable201903? Possibly with small TlsLib updates, as
&gt; required?
&gt; 
&gt; Again, my goal is simply to consume OpenSSL-1.1.1, through the current
&gt; library classes.
&gt; 

I&apos;m afraid it cannot be *soon* because of the effort needed, especially the test effort. We just let the code pass build and we don&apos;t know whether it works or not. If you still want to try, I can post the work we&apos;ve done so far in my fork (there&apos;re reckless code just for build).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6658</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-08 08:29:09 +0000</bug_when>
    <thetext>Hi Jian,

(In reply to Wang, Jian J from comment #8)
&gt; (In reply to Laszlo Ersek from comment #7)
&gt; &gt; 
&gt; &gt; Do you think it would be possible to post *just* an OpenSSL update, soon
&gt; &gt; after edk2-stable201903? Possibly with small TlsLib updates, as
&gt; &gt; required?
&gt; &gt; 
&gt; &gt; Again, my goal is simply to consume OpenSSL-1.1.1, through the current
&gt; &gt; library classes.
&gt; &gt; 
&gt; 
&gt; I&apos;m afraid it cannot be *soon* because of the effort needed, especially the
&gt; test effort.

Understood. It makes sense.

&gt; We just let the code pass build and we don&apos;t know whether it
&gt; works or not. If you still want to try, I can post the work we&apos;ve done so
&gt; far in my fork (there&apos;re reckless code just for build).

Thanks, my plate is full, I&apos;m not looking for more things to do. :) I now understand the situation, and I agree that regression testing is important. Let&apos;s re-raise this topic later, then.

Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6789</commentid>
    <comment_count>10</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:51:59 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6946</commentid>
    <comment_count>11</comment_count>
      <attachid>283</attachid>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-03-29 02:31:35 +0000</bug_when>
    <thetext>Created attachment 283
git format patch files and test code

I made two patches for this.
0001-CryptoPkg-update-openssl-to-1.1.1b.patch
0002-CryptoPkg-Add-SM3-wrapper-function.patch

Cryptest.zip is in order to test these patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6976</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-02 05:24:50 +0000</bug_when>
    <thetext>(In reply to xiaoyu from comment #11)
&gt; Created attachment 283 [details]
&gt; git format patch files and test code
&gt; 
&gt; I made two patches for this.
&gt; 0001-CryptoPkg-update-openssl-to-1.1.1b.patch
&gt; 0002-CryptoPkg-Add-SM3-wrapper-function.patch
&gt; 
&gt; Cryptest.zip is in order to test these patches.

(1) This BZ is currently assigned to Jian -- is that still correct? If not, please update the Assignee field.

(2) Reviewing patches as BZ attachments, and in BZ comments, is unwieldy. Please submit the patches to the edk2-devel mailing list, if you would like to receive comments at this point, even if you don&apos;t consider the patches &quot;final&quot; at this point -- just use the [RFC] subject-prefix, rather than [PATCH].

(3) I looked very-very briefly at patch#1. Please split it into multiple patches, one per module (BaseCryptLib, IntrinsicLib, OpensslLib, ...).

Preferably, the series should build at every step, against OpenSSL_1_1_0j too -- if that is possible at all --, and then the OpenSSL git submodule reference should be bumped to &quot;OpenSSL_1_1_1b&quot;, as the final step in the series.

(4) I think it would be useful to add the crypttest module to upstream edk2 as well. In my opinion, AppPkg could be a good home for it. Other reviewers may have better suggestions though (perhaps a separate repository even); I suggest discussing that on the list as well.

&quot;Cryptest.inf&quot; says at the top, in a comment: &quot;based on OpenSSL-1.0.2j&quot;. That implies that the test utility has existed since at least edk2 commit dab62c5ec8a8 (&quot;CryptoPkg/OpensslLib: Upgrade OpenSSL version to 1.0.2j&quot;, 2016-09-30). But this is the first time I hear about it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7015</commentid>
    <comment_count>13</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-04-07 23:13:20 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #12)
(1) I&apos;ll transfer this tracker to Xiaoyu.
(2) Yes. Xiaoyu is new on the open source development. I&apos;ll guide him on how to send patch in mailling list.
(3) see (2)
(4) There&apos;s a edk2-test repo (https://github.com/tianocore/edk2-test) for this purpose. There&apos;s a team planning it but no idea how long it will take.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7471</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-09 08:53:45 +0000</bug_when>
    <thetext>v1 series:
[edk2-devel] [PATCH 0/3] CryptoPkg: Upgrade OpenSSL to 1_1_1b
https://edk2.groups.io/g/devel/message/39750
Message-ID: &lt;1556525727-14875-1-git-send-email-xiaoyux.lu@intel.com&gt;

v2 series:
[edk2-devel] [PATCH v2 1/6] CryptoPkg/OpensslLib: Modify process_files.pl
                            for upgrading OpenSSL
https://edk2.groups.io/g/devel/message/40266
Message-ID: &lt;1557379429-7527-1-git-send-email-xiaoyux.lu@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7583</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-16 12:36:54 +0000</bug_when>
    <thetext>v3 series:
[edk2-devel] [PATCH v3 0/6] CryptoPkg: Upgrade OpenSSL to 1.1.1b
http://mid.mail-archive.com/1557753912-30122-1-git-send-email-xiaoyux.lu@intel.com
https://edk2.groups.io/g/devel/message/40500

v4 series:
[edk2-devel] [PATCH v4 0/7] CryptoPkg: Upgrade OpenSSL to 1.1.1b
http://mid.mail-archive.com/1557993298-22205-1-git-send-email-xiaoyux.lu@intel.com
https://edk2.groups.io/g/devel/message/40761</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7860</commentid>
    <comment_count>16</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-05-29 23:47:48 +0000</bug_when>
    <thetext>v5 series:
[PATCH v5 0/9] Crypto: Upgrade OpenSSL to 1.1.1b 
https://edk2.groups.io/g/devel/message/41587

Task BZ1781(https://bugzilla.tianocore.org/show_bug.cgi?id=1781) use SM3 algorithm from BaseCryptLib. But BaseCryptLib hasn&apos;t wrap SM3 algorithm from OpenSSL in v5 series.

So what should I do? 

(1): wrap OpenSSL SM3 algorithm to BaseCryptLib and send series v6.
(2): file a new BZ about wrap OpenSSL SM3 algorithm and send a patch separately.

I prefer (2).

What are your opinions?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7861</commentid>
    <comment_count>17</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-29 23:52:08 +0000</bug_when>
    <thetext>(In reply to Xiaoyu Lu from comment #16)
Please file a new BZ and separate patches for SM3. This one is just for openssl upgrading.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7908</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-03 07:41:26 +0000</bug_when>
    <thetext>Based on &lt;http://mid.mail-archive.com/D827630B58408649ACB04F44C51000362590E91F@SHSMSX107.ccr.corp.intel.com&gt;, this issue has been fixed in commit range 371e7001e8d5..acfb90911840.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7911</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-03 13:04:24 +0000</bug_when>
    <thetext>Fixup on top, for CLANG35:

f03859ea6c8f (&quot;CryptoPkg CLANG35: add -std=c99 to dodge OpenSSL C atomics issue&quot;, 2019-06-03)</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>283</attachid>
            <date>2019-03-29 02:31:35 +0000</date>
            <delta_ts>2019-03-29 02:31:35 +0000</delta_ts>
            <desc>git format patch files and test code</desc>
            <filename>update_openssl_to_1_1_1b.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>62954</size>
            <attacher name="Xiaoyu Lu">xiaoyux.lu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1392</bug_id>
          
          <creation_ts>2018-12-11 19:45:58 +0000</creation_ts>
          <short_desc>Wiki Array and C code style initialization in Structure PCD</short_desc>
          <delta_ts>2019-03-21 15:42:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5827</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-11 19:45:58 +0000</bug_when>
    <thetext>BaseTools supports Array and C code style initialization in Structure PCD. Wiki page is required for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5828</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-11 19:46:24 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6829</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-21 05:50:29 +0000</bug_when>
    <thetext>Done. Wiki page is added

https://github.com/tianocore/tianocore.github.io/wiki/Structure-Array-PCD</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6830</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-21 05:51:05 +0000</bug_when>
    <thetext>Wiki page is added.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6842</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-21 15:42:43 +0000</bug_when>
    <thetext>This is awesome, thank you.

Can you perhaps add another hint to the wiki article, about getting the size of the structure / array PCD, in bytes? This would be particularly interesting for dynamic PCDs, because those can be overwritten when the firmware executes. Thanks!</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1292</bug_id>
          
          <creation_ts>2018-11-01 22:18:23 +0000</creation_ts>
          <short_desc>BaseTools: Support Array and C code style initialization in Structure PCD</short_desc>
          <delta_ts>2018-12-06 21:54:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5452</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-01 22:18:23 +0000</bug_when>
    <thetext>To match C structure usage, BaseTools needs to add two supports. 
1. Support structure ARRAY as Structure PCD type.
   For example: gStructuredPcdPkgTokenSpaceGuid.PcdTest|{0x0}|TEST[10]|0x00010080
2. Support C CODE style value initialization in DEC/DSC.
   For example:
gStructuredPcdPkgTokenSpaceGuid.PcdTest|{CODE({
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
  {0, {0, 0, 0, 0,  0, 0, 0}},
})}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5453</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-01 22:19:16 +0000</bug_when>
    <thetext>Assign it to BaseTools owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5787</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-06 21:54:36 +0000</bug_when>
    <thetext>Fixed at edk2 master SHA-1: 72a1d77694d51914c0dd6aa97dbfa58634b0a4a5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1200</bug_id>
          
          <creation_ts>2018-09-24 20:34:57 +0000</creation_ts>
          <short_desc>RegularExpressionDxe: Update Oniguruma to 6.9.0</short_desc>
          <delta_ts>2023-11-07 07:03:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=4592</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5071</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-24 20:34:57 +0000</bug_when>
    <thetext>Oniguruma https://github.com/kkos/oniguruma. Its latest version is v6.9.0. This request updates RegularExpressionDxe with the latest version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5072</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-24 20:35:35 +0000</bug_when>
    <thetext>Assign it to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5077</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-24 20:58:54 +0000</bug_when>
    <thetext>Fix it in edk2 b602265d559b2f2ade4d09ba55652c23922c141f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1509</bug_id>
          
          <creation_ts>2019-02-02 02:17:55 +0000</creation_ts>
          <short_desc>BaseTool build failure in Ubuntu18 after support python3</short_desc>
          <delta_ts>2019-03-01 03:01:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6277</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-02 02:17:55 +0000</bug_when>
    <thetext>when build basetool in Ubuntu18, meet following error:

Traceback (most recent call last):
 File &quot;RunTests.py&quot;, line 36, in &lt;module&gt;
    allTests = GetAllTestsSuite()
   File &quot;RunTests.py&quot;, line 33, in GetAllTestsSuite
     return unittest.TestSuite([GetCTestSuite(), GetPythonTestSuite()])
   File &quot;RunTests.py&quot;, line 30, in GetPythonTestSuite
     return PythonToolsTests.TheTestSuite()
   File &quot;/work/Edk2/BaseTools/Tests/PythonToolsTests.py&quot;, line 27, in TheTestSuite
     import CheckUnicodeSourceFiles
   File &quot;/work/Edk2/BaseTools/Tests/CheckUnicodeSourceFiles.py&quot;, line 26, in &lt;module&gt;
     import AutoGen.UniClassObject as BtUni
   File &quot;/work/Edk2/BaseTools/Source/Python/AutoGen/UniClassObject.py&quot;, line 21, in &lt;module&gt;
     import distutils.util
 ModuleNotFoundError: No module named &apos;distutils.util&apos;
 make[1]: *** [test] Error 1
 make: *** [Tests] Error 2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6350</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-13 03:44:40 +0000</bug_when>
    <thetext>Assign to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6374</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-15 10:39:58 +0000</bug_when>
    <thetext>Base on discussion https://lists.01.org/pipermail/edk2-devel/2019-February/036754.html, I update wiki to mention python3-distutils is required. 

Also suggest to update edksetup.sh to check it first. If it is not installed, then report error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6375</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-15 18:04:46 +0000</bug_when>
    <thetext>Hi Liming,

different Linux distributions may provide the distutils Python module in differently named packages. In fact, not all Linux distributions use the same packaging systems. For example, Ubuntu and Debian use the DEB package format and related utilities (dpkg, apt, ...); OpenSUSE and Fedora use the RPM package format and related utilities (such as rpm, yum/dnf (in case of Fedora) and zypper (in case of OpenSUSE)).

I think it&apos;s valuable to catch the missing distutils Python module as early as possible; however, the check should not refer to any particular package. It should be a Python code snippet instead that tries to consume or locate the distutils module, and prints a graceful error in case of failure.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6378</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-17 08:13:27 +0000</bug_when>
    <thetext>Good suggestion. BaseTools\Tests\RunTests.py may be a good place to add such checker.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6601</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-01 03:01:01 +0000</bug_when>
    <thetext>fixed on 407f5a0571d186bbfa0ac2e46ce63f4701063b86</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1849</bug_id>
          
          <creation_ts>2019-05-27 21:37:10 +0000</creation_ts>
          <short_desc>Add FitGen tool into edk2-platform Silicon\Intel\Tools</short_desc>
          <delta_ts>2019-06-30 20:58:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7812</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 21:37:10 +0000</bug_when>
    <thetext>FitGen tool is used to generate firmware interface table. This table is defined in public specification 
https://www.intel.com/content/www/us/en/products/docs/firmware-interface-table/fit-bios-specification.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7813</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 21:37:31 +0000</bug_when>
    <thetext>Shenglei will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8080</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-17 02:59:00 +0000</bug_when>
    <thetext>This tool also depends on public TXT/ACM doc https://www.intel.com/content/dam/www/public/us/en/documents/guides/intel-txt-software-development-guide.pdf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8129</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-20 01:18:25 +0000</bug_when>
    <thetext>Based on the proposal in https://edk2.groups.io/g/devel/message/42546, FitGen will be added to edk2-platform Silicon\Intel\Tools directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8286</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-06-30 20:58:57 +0000</bug_when>
    <thetext>Fixed at edk2-platform/master:
17bbe5b38c7757568b9aafa3dbe4e14b9c5d886a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1789</bug_id>
          
          <creation_ts>2019-05-08 22:39:31 +0000</creation_ts>
          <short_desc>BaseTools: Read size is not checked and it may cause dead loop</short_desc>
          <delta_ts>2019-05-12 21:20:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>zhiguang.liu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7445</commentid>
    <comment_count>0</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-08 22:39:31 +0000</bug_when>
    <thetext>VolInfo Code:
  do {
    fread (&amp;BlockMap, sizeof (EFI_FV_BLOCK_MAP_ENTRY), 1, InputFile); &lt;-- Read size is not checked
    BytesRead += sizeof (EFI_FV_BLOCK_MAP_ENTRY); &lt;-- BytesRead does not equal bytes actually read by fread() . Similar logic is also present elsewhere in this file. 

    if (BlockMap.NumBlocks != 0) {
      printf (&quot;Number of Blocks:      0x%08X\n&quot;, (unsigned) BlockMap.NumBlocks);
      printf (&quot;Block Length:          0x%08X\n&quot;, (unsigned) BlockMap.Length);
      Size += BlockMap.NumBlocks * BlockMap.Length;
    }

  } while (!(BlockMap.NumBlocks == 0 &amp;&amp; BlockMap.Length == 0));

   [The code is hung before reaching this point]
  if (BytesRead != VolumeHeader.HeaderLength) {
    printf (&quot;ERROR: Header length not consistent with Block Maps!\n&quot;);
    return EFI_ABORTED;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7448</commentid>
    <comment_count>1</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-08 22:40:54 +0000</bug_when>
    <thetext>I will work on it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7451</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-08 22:58:35 +0000</bug_when>
    <thetext>Zhiguang will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7496</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-12 21:20:26 +0000</bug_when>
    <thetext>bug fixed
https://github.com/tianocore/edk2/commit/ae3c247dbc943d707e5007f12f5a5862b4e97781</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1605</bug_id>
          
          <creation_ts>2019-03-08 12:19:47 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg</short_desc>
          <delta_ts>2019-07-03 01:52:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1842</dependson>
    
    <dependson>1843</dependson>
          <blocked>1844</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6664</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-08 12:19:47 +0000</bug_when>
    <thetext>Remove this package entirely.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6665</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-08 12:20:17 +0000</bug_when>
    <thetext>Ray will drive to remove this package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6793</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:54:58 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7393</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:52:09 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8358</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:52:38 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1201</bug_id>
          
          <creation_ts>2018-09-24 20:39:02 +0000</creation_ts>
          <short_desc>Update Brotli to the latest version 1.0.5</short_desc>
          <delta_ts>2018-10-09 21:51:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5073</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-24 20:39:02 +0000</bug_when>
    <thetext>Here https://github.com/google/brotli. Its latest version is 1.0.5. This requests to update Brotli compression to the latest version 1.0.5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5074</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-24 20:39:27 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5205</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-09 21:51:41 +0000</bug_when>
    <thetext>The final version is 1.0.6 to be synced. Fix it in edk2 at dd4f667e70a3d0f8dcb09bc9ea3287187c8024f6..2730470f9d3bbaed51a04a11bfc1bf21670fa49e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1020</bug_id>
          
          <creation_ts>2018-07-17 05:50:28 +0000</creation_ts>
          <short_desc>uCode checksum validation logic for extended table is wrong.</short_desc>
          <delta_ts>2019-03-01 01:10:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="ChenChen">chen.a.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4295</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-07-17 05:50:28 +0000</bug_when>
    <thetext>Per IA32 SDM, the Checksum in CPU_MICROCODE_EXTENDED_TABLE is:

Used by utility software to decompose a microcode update into
multiple microcode updates where each of the new updates is
constructed without the optional Extended Processor Signature
Table.
To calculate the Checksum, substitute the Primary Processor
Signature entry and the Processor Flags entry with the
corresponding Extended Patch entry. Delete the Extended Processor
Signature Table entries. The Checksum is correct when the
summation of all DWORDs that comprise the created Extended
Processor Patch results in 00000000H.

But today&apos;s implementation assumes the Checksum is just for the CPU_MICROCODE_EXTENDED_TABLE structure itself. It&apos;s incorrect.
The failure wasn&apos;t observed maybe because uCode doesn&apos;t contain the extended table. If it contains, the uCode will be treated as invalid uCode and won&apos;t be applied to the target CPU.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4355</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:14:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5662</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-21 02:51:29 +0000</bug_when>
    <thetext>assign to Shenglei.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6263</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-01 03:53:03 +0000</bug_when>
    <thetext>Make it a high bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6367</commentid>
    <comment_count>4</comment_count>
      <attachid>254</attachid>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-14 21:49:43 +0000</bug_when>
    <thetext>Created attachment 254
A possible fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6368</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-14 21:50:15 +0000</bug_when>
    <thetext>Assign to Chen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6382</commentid>
    <comment_count>6</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-02-18 02:18:54 +0000</bug_when>
    <thetext>The IntelSiliconPkg\Feature\Capsule\MicrocodeUpdateDxe driver has the same issue.

I will fix these two packages.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6518</commentid>
    <comment_count>7</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-02-25 00:12:23 +0000</bug_when>
    <thetext>edk2: 5170327b7144e19c088df0c474adbbe7b5869b08</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6600</commentid>
    <comment_count>8</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-03-01 01:10:38 +0000</bug_when>
    <thetext>A regression BUG was caused by fixing this tracker.

The regression BUG already fix by c3947b54235c93e4f41d6d56b1f5296a9f8021d5 commit in edk2 branch.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>254</attachid>
            <date>2019-02-14 21:49:43 +0000</date>
            <delta_ts>2019-02-14 21:49:43 +0000</delta_ts>
            <desc>A possible fix</desc>
            <filename>Microcode.c</filename>
            <type>text/plain</type>
            <size>10561</size>
            <attacher name="Ray Ni">ray.ni</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1850</bug_id>
          
          <creation_ts>2019-05-27 21:49:54 +0000</creation_ts>
          <short_desc>Add new script to detect unused items in package dec file</short_desc>
          <delta_ts>2019-08-29 15:16:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7815</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 21:49:54 +0000</bug_when>
    <thetext>This script is used to detect unreferenced PCD and GUID/Protocols/PPIs in the specified Package DEC file. This script will be added into BaseTools\Scripts directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7816</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-27 21:50:20 +0000</bug_when>
    <thetext>Zhiju will work on this script.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7835</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-05-28 22:11:15 +0000</bug_when>
    <thetext>Zhiju will work on this script.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9288</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:15:24 +0000</bug_when>
    <thetext>Has this been fixed at commit 401507c786b4 (&quot;BaseTools:Add DetectNotUsedItem.py to Edk2\BaseTools\Scripts&quot;, 2019-06-25)?

Take care of your BZ tickets please!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9338</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:36:34 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; Has this been fixed at commit 401507c786b4 (&quot;BaseTools:Add
&gt; DetectNotUsedItem.py to Edk2\BaseTools\Scripts&quot;, 2019-06-25)?

To be clear, this question is for Zhiju.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9369</commentid>
    <comment_count>5</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-27 23:11:28 +0000</bug_when>
    <thetext>fixed in 401507c786b4b8bc208c0c34ebdad047173e37ea</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1218</bug_id>
          
          <creation_ts>2018-09-28 21:05:29 +0000</creation_ts>
          <short_desc>GCC48/GCC49 build failure in mdemodulepkg\universal\regularexpressiondxe</short_desc>
          <delta_ts>2018-10-16 10:46:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5153</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-09-28 21:05:29 +0000</bug_when>
    <thetext>GCC49 failure log:

edk2\MdeModulePkg\Universal\RegularExpressionDxe\Oniguruma\regparse.c: In function &apos;parse_callout_of_name.constprop&apos;:
edk2\MdeModulePkg\Universal\RegularExpressionDxe\Oniguruma\regparse.c:6861:11: error: &apos;tag_end&apos; may be used uninitialized in this function [-Werror=maybe-uninitialized]
     if (! is_allowed_callout_tag_name(enc, tag_start, tag_end))
  

GCC49 log:
MdeModulePkg/Universal/RegularExpressionDxe/Oniguruma/regcomp.c: In function â€˜compile_length_treeâ€™:
MdeModulePkg/Universal/RegularExpressionDxe/Oniguruma/regcomp.c:1516:7: error: â€˜lenâ€™ may be used uninitialized in this function [-Werror=maybe-uninitialized]
   int len;
       ^         ^</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5233</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:11:46 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5286</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-16 10:46:28 +0000</bug_when>
    <thetext>Fix it at edk2 4ee787cc1b158566145d23be941aa2abb5c29c7c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1652</bug_id>
          
          <creation_ts>2019-03-22 11:21:20 +0000</creation_ts>
          <short_desc>HII DB lock may be leaked on error return</short_desc>
          <delta_ts>2019-04-24 21:13:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>regression</keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6892</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-22 11:21:20 +0000</bug_when>
    <thetext>Commit 979b7d802c31 (&quot;MdeModulePkg/HiiDB: Make sure database update behaviors are atomic&quot;, 2018-10-26) for bug 1235 added various

  EfiAcquireLock (&amp;mHiiDatabaseLock);

calls to &quot;MdeModulePkg/Universal/HiiDatabaseDxe&quot;, taking care that the lock be released on all error paths.

Commit ffe5f7a6b4e9 (&quot;MdeModulePkg/HiiDatabase: Fix potential integer overflow (CVE-2018-12181)&quot;, 2019-03-08) for bug 1135 added some new error paths, but it missed releasing the same lock on those paths. Therefore the new error paths can leak the lock.

This applies to the HiiNewImage() and HiiSetImage() functions.

The issue has been identified through unrelated code review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7206</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:45:26 +0000</bug_when>
    <thetext>Dandan will help on it. it is a regression issue, and into Q2 plan first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7262</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-04-24 21:13:53 +0000</bug_when>
    <thetext>Fixed this issue in edk2 via https://github.com/tianocore/edk2/commit/ab7e02a4f86a8fe2afa2dcf88c404bcf210f9e62</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1330</bug_id>
          
          <creation_ts>2018-11-15 16:18:33 +0000</creation_ts>
          <short_desc>PcdDynamic gets an invalid token</short_desc>
          <delta_ts>2018-11-21 21:46:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Turner">Michael.Turner</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5602</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Turner">Michael.Turner</who>
    <bug_when>2018-11-15 16:18:33 +0000</bug_when>
    <thetext>I have a small UEFI_APPLICATION.  Added these lines of code to the Application.c (in the correct places, obviously):

   #include &lt;Library/PcdLib.h&gt;
    EFI_GUID        *MickeyMouse;
    MickeyMouse = PcdGetPtr(PcdMickeyMouseGuid);

Application.inf added PcdLib and the Pcd reference

   PcdLib

[Pcd]
  gDfciPkgTokenSpaceGuid.PcdMickeyMouseGuid

I added the following to my DEC file:

[PcdsDynamic]
  gDfciPkgTokenSpaceGuid.PcdMickeyMouseGuid |{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}|VOID*|0x20000101

Added DfciPkg/Application/DfciApply/DfciApply.inf to the PlatformBuild.dsc.

Got this:
DEBUG\AutoGen.h:#define _PCD_TOKEN_PcdMickeyMouseGuid  0U
DEBUG\AutoGen.h:#define _PCD_GET_MODE_PTR_PcdMickeyMouseGuid  LibPcdGetPtr(_PCD_TOKEN_PcdMickeyMouseGuid)


This seems like a solid fail as 0 is never allowed as a Token.  The build should break if I didn’t specify something correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5608</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-15 21:22:52 +0000</bug_when>
    <thetext>assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5675</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-11-21 21:46:06 +0000</bug_when>
    <thetext>Fixed on
SHA-1: 3d3416e892ac32c871031c65351afca11a715306</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1091</bug_id>
          
          <creation_ts>2018-08-16 08:43:17 +0000</creation_ts>
          <short_desc>merge StuffRsb.inc copies into one</short_desc>
          <delta_ts>2019-01-01 20:51:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1085</dependson>
    
    <dependson>1093</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4601</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-16 08:43:17 +0000</bug_when>
    <thetext>The following series:

  [PATCH v2 0/2] UefiCpuPkg: Add RSB stuffing before RSM instruction
  https://lists.01.org/pipermail/edk2-devel/2018-August/028622.html

adds four instances of the same file:

  UefiCpuPkg/Library/SmmCpuFeaturesLib/Ia32/StuffRsb.inc
  UefiCpuPkg/Library/SmmCpuFeaturesLib/X64/StuffRsb.inc
  UefiCpuPkg/PiSmmCpuDxeSmm/Ia32/StuffRsb.inc
  UefiCpuPkg/PiSmmCpuDxeSmm/X64/StuffRsb.inc

due to a BaseTools limitation (see bug 1085). Once that bug is fixed, we should unify the above INC files under the following pathname:

  UefiCpuPkg/Include/StuffRsb.inc

(Hao, I&apos;m assigning this to you at once, if that&apos;s OK with you. Thanks!)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4609</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-16 20:09:23 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4614</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-08-16 20:48:03 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #0)
&gt; The following series:
&gt; 
&gt;   [PATCH v2 0/2] UefiCpuPkg: Add RSB stuffing before RSM instruction
&gt;   https://lists.01.org/pipermail/edk2-devel/2018-August/028622.html
&gt; 
&gt; adds four instances of the same file:
&gt; 
&gt;   UefiCpuPkg/Library/SmmCpuFeaturesLib/Ia32/StuffRsb.inc
&gt;   UefiCpuPkg/Library/SmmCpuFeaturesLib/X64/StuffRsb.inc
&gt;   UefiCpuPkg/PiSmmCpuDxeSmm/Ia32/StuffRsb.inc
&gt;   UefiCpuPkg/PiSmmCpuDxeSmm/X64/StuffRsb.inc
&gt; 
&gt; due to a BaseTools limitation (see bug 1085). Once that bug is fixed, we
&gt; should unify the above INC files under the following pathname:
&gt; 
&gt;   UefiCpuPkg/Include/StuffRsb.inc
&gt; 
&gt; (Hao, I&apos;m assigning this to you at once, if that&apos;s OK with you. Thanks!)

Yes, I will merge those duplicated StuffRsb.inc after BZ 1085 is done.
Thanks for creating this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5961</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-12-26 16:36:33 +0000</bug_when>
    <thetext>Patch on list:
[edk2] [PATCH v1] UefiCpuPkg: Merge StuffRsb.inc files into one in UefiCpuPkg/Include
https://lists.01.org/pipermail/edk2-devel/2018-December/034355.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5968</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-01-01 20:51:30 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/ada4a003f9e42c27ce6c6cdad74157b8ec4c13ec</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1394</bug_id>
          
          <creation_ts>2018-12-12 10:03:54 +0000</creation_ts>
          <short_desc>[PCI] System may get hang when there is no option rom</short_desc>
          <delta_ts>2018-12-16 20:36:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5838</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-12 10:03:54 +0000</bug_when>
    <thetext>the root cause is due to the below commit:
SHA-1: 0176af142ef632c82f37cd3616f0184241f4fcbb

* MdeModulePkg/PciBus: Shadow option ROM after BARs are programmed

When there is no option roms, the MEM32 alignment requirement is set to 0xFFFFFFFF_FFFFFFFF incorrectly which results the MEM32 resource cannot be allocated from Host bridge side. System may hang due to the resource issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5839</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-12 10:11:36 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5896</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-16 20:36:46 +0000</bug_when>
    <thetext>fixed in 736c436e5.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1109</bug_id>
          
          <creation_ts>2018-08-22 22:51:02 +0000</creation_ts>
          <short_desc>[Pci] Restrict one VGA per HostBridge not Segment</short_desc>
          <delta_ts>2018-10-10 22:15:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4677</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-22 22:51:02 +0000</bug_when>
    <thetext>Today&apos;s restriction of VGA device is to have only one VGA device
enabled per PCI segment. It&apos;s not correct because several segments
may share one IO / MMIO address space.
We should restrict to have one VGA per Host Bridge because each
Host Bridge has its only IO / MMIO address space.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4692</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:09:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4703</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-26 21:40:42 +0000</bug_when>
    <thetext>pushed @ 06da1e310bcea971073a8dabc5c3d35bc190847c,983f5abb9a0d6cf9cfb5e16d671f15e5dc7510d8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5211</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-10 22:15:04 +0000</bug_when>
    <thetext>pushed to UDK2018 cee681c177a7b421b6c0c8f50d0bcfc43c5ea593, 10318063ba2ce7b78d5d649d3af1be11c5b1b635</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1021</bug_id>
          
          <creation_ts>2018-07-17 08:04:20 +0000</creation_ts>
          <short_desc>GenerateCapsule: No error report when capoemflag exceed its max value</short_desc>
          <delta_ts>2018-08-09 13:44:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4296</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:04:20 +0000</bug_when>
    <thetext>from the help message, the capsule OEM flag is an integer value between 0x0000 and 0xFFFF, but now if I use a value that exceed the max value 0xFFFF, eg: 0xFFFF1, the GenerateCapsule tool doesn&apos;t report error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4341</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:29:21 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4454</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:10:19 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4543</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:44:29 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/6ed4651cb560caba91a989550734206f01ffd7d1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1773</bug_id>
          
          <creation_ts>2019-05-06 01:17:27 +0000</creation_ts>
          <short_desc>Build break if C file suffixes of named .C Under certain circumstances.</short_desc>
          <delta_ts>2019-05-16 21:06:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7377</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-06 01:17:27 +0000</bug_when>
    <thetext>After edk2 commit 05217d210e,Some platforms will build fail.
Look at buildlog. There is an .C file, but the code doesn&apos;t support it
Build break if C file suffixes of named .C instead of.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7388</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 00:58:38 +0000</bug_when>
    <thetext>the regression issue of bug 1672. 1672 was in edk2-stable201905 plan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7606</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-16 21:06:23 +0000</bug_when>
    <thetext>https://bugzilla.tianocore.org/show_bug.cgi?id=1790

The &quot;.C&quot; suffix implies the C++ language. (Minimally for gcc.)
C++ is not a supported language in edk2. We don&apos;t need any BaseTools support for &quot;.C&quot;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1236</bug_id>
          
          <creation_ts>2018-10-11 03:47:01 +0000</creation_ts>
          <short_desc>[dmem]should not by default dump 512 bytes starting from SystemTable (gST)</short_desc>
          <delta_ts>2018-10-24 00:57:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5217</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-11 03:47:01 +0000</bug_when>
    <thetext>The unconditionally 512 bytes dump causes read beyond the memory allocated for the system table. In a heap guard enabled system, &quot;dmem&quot; causes page fault exception when reading beyond sizeof (EFI_SYSTEM_TABLE).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5235</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:40:08 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5374</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-24 00:57:35 +0000</bug_when>
    <thetext>fixed @ f1a7d73a6880471</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1549</bug_id>
          
          <creation_ts>2019-02-20 19:14:23 +0000</creation_ts>
          <short_desc>Introduce DebugPpi to save the image size with the debug message</short_desc>
          <delta_ts>2019-05-20 01:41:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6465</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-20 19:14:23 +0000</bug_when>
    <thetext>DebugPpi is used to produce DebugLib APIs. Then, another new DebugLib library instance can base on DebugPpi to produce DebugLib. The driver that links new DebugLib library can save the image size.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6469</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-20 20:26:48 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6470</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-20 20:35:10 +0000</bug_when>
    <thetext>Code has been pushed into https://github.com/lgao4/edk2/commit/edf68d7ec682dca9bc183fcededbe8edda0c65af..https://github.com/lgao4/edk2/commit/ffe8dcfc62e25cf92c6fe0483adf28f4e84d2c42</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6471</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-20 20:59:20 +0000</bug_when>
    <thetext>Code has been pushed into https://github.com/lgao4/edk2/commit/edf68d7ec682dca9bc183fcededbe8edda0c65af
..
https://github.com/lgao4/edk2/commit/ffe8dcfc62e25cf92c6fe0483adf28f4e84d2c42</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6777</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-20 20:45:50 +0000</bug_when>
    <thetext>Zhichao is working on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6980</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-02 20:13:04 +0000</bug_when>
    <thetext>Finished at:
https://github.com/tianocore/edk2/commit/52e22c60eab7292dfc85ffe4ebc7d3653e78c071
https://github.com/tianocore/edk2/commit/2bc82244638aa24b63598183b9c5972a8c03ff9e
https://github.com/tianocore/edk2/commit/66f50a4b0d49ebef713ffdc59d60f193cffcfa01
https://github.com/tianocore/edk2/commit/a8ac75b8eeb8935d59d53dcdff9057daeed7b614</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7254</commentid>
    <comment_count>6</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-24 04:36:15 +0000</bug_when>
    <thetext>We add a PEIM DebugServicePei and library instance PeiDebugLibDebugPpi to save the PEIMs&apos; size.
Here is the usage:
1. add the PEIM DebugServicePei to platform dsc and fdf file and indicate its DebugLib instance to the original PEI version through &lt;LibraryClasses&gt; in the dsc file
2. Indicate the PcdPeim&apos;s DebugLib instance to the same one with DebugServicePei because of depex
3. change the PEI comman DebugLib instance to PeiDebugLibDebugPpi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7301</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:31:40 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7704</commentid>
    <comment_count>8</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-05-20 01:41:03 +0000</bug_when>
    <thetext>Update the useage:
Using OvmfPkgX64 as an example
1. Add the PEIM PeiDebugLibDebugPpi to the platform dsc and fdf file and indicate the debuglib instance in [LibraryClasses.Common.PEIM]
dsc file:
[Components]
...
  MdeModulePkg/Universal/DebugServicePei/DebugServicePei.inf {
    &lt;LibraryClasses&gt;
!ifdef $(DEBUG_ON_SERIAL_PORT)
      DebugLib|MdePkg/Library/BaseDebugLibSerialPort/BaseDebugLibSerialPort.inf
!else
      DebugLib|OvmfPkg/Library/PlatformDebugLibIoPort/PlatformDebugLibIoPort.inf
!endif
  }
...

fdf file: put the driver in the same fv with PeiMain.inf
[FV.PEIFV]
...
INF  MdeModulePkg/Universal/DebugServicePei/DebugServicePei.inf
INF  MdeModulePkg/Core/Pei/PeiMain.inf
...

2. Indicate the PcdPeim&apos;s DebugLib instance to the same one with DebugServicePei in the dsc file
[Components]
...
  MdeModulePkg/Universal/PCD/Pei/Pcd.inf  {
    &lt;LibraryClasses&gt;
      PcdLib|MdePkg/Library/BasePcdLibNull/BasePcdLibNull.inf
!ifdef $(DEBUG_ON_SERIAL_PORT)
      DebugLib|MdePkg/Library/BaseDebugLibSerialPort/BaseDebugLibSerialPort.inf
!else
      DebugLib|OvmfPkg/Library/PlatformDebugLibIoPort/PlatformDebugLibIoPort.inf
!endif
  }
...

3. Replace the DebugLib instance with PeiDebugLibDebugPpi in the [LibraryClasses.Common.PEIM] in the dsc file

[LibraryClasses.Common.PEIM]
...
  DebugLib|MdeModulePkg/Library/PeiDebugLibDebugPpi/PeiDebugLibDebugPpi.inf
...</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1256</bug_id>
          
          <creation_ts>2018-10-16 04:06:50 +0000</creation_ts>
          <short_desc>BaseTools: use Pcd in the expression, with --pcd option it report build failure</short_desc>
          <delta_ts>2018-10-17 21:39:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yanyan.sun</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5283</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-16 04:06:50 +0000</bug_when>
    <thetext>Case:

in the DSC:
[PcdsFixedAtBuild.common]
 gUefiOvmfPkgTokenSpaceGuid.TestFixedPcd|0xFFEAA000

[PcdsDynamicExDefault.common.DEFAULT]
!if gUefiOvmfPkgTokenSpaceGuid.PcdFlag == TRUE gUefiOvmfPkgTokenSpaceGuid.PcdTest|gUefiOvmfPkgTokenSpaceGuid.TestFixedPcd
!endif


Then build with --pcd gUefiOvmfPkgTokenSpaceGuid.PcdFlag=TRUE, it report failure, but if we build without this --pcd option, it could build success.

we found when the --pcd is enabled, the fixedatbuild pcds are not be collected into expression to calculate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5305</commentid>
    <comment_count>1</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-10-17 21:17:53 +0000</bug_when>
    <thetext>assign to Yonghong. 
QA need to check if have this case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5309</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-17 21:39:09 +0000</bug_when>
    <thetext>fixed in SHA-1: 53c64f4286ba86788e350a82a3798e1a7abf5ef7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1181</bug_id>
          
          <creation_ts>2018-09-16 22:46:27 +0000</creation_ts>
          <short_desc>BaseTools needs to check whether FV image is valid</short_desc>
          <delta_ts>2018-10-15 03:13:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yanyan.sun</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4986</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-16 22:46:27 +0000</bug_when>
    <thetext>Edk2\BaseTools\Source\Python\GenFds\Fv.py line 199, check FvImage exist, then consume its data. But, FvImage may be corrupt. I suggest to do basic check in FvImage with header size and signature. 

            if os.path.isfile(FvOutputFile):
                FvFileObj = open(FvOutputFile, &apos;rb&apos;)
                GenFdsGlobalVariable.VerboseLogger(&quot;\nGenerate %s FV Successfully&quot; % self.UiFvName)
                GenFdsGlobalVariable.SharpCounter = 0

                Buffer.write(FvFileObj.read())
                FvFileObj.seek(0)
                # PI FvHeader is 0x48 byte
                FvHeaderBuffer = FvFileObj.read(0x48)
                # FV alignment position.
                FvAlignmentValue = 1 &lt;&lt; (ord(FvHeaderBuffer[0x2E]) &amp; 0x1F)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5117</commentid>
    <comment_count>1</comment_count>
    <who name="Sun Yanyan">yanyan.sun</who>
    <bug_when>2018-09-26 21:28:16 +0000</bug_when>
    <thetext>From Yonghong: assign to Yonghong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5258</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-14 22:59:25 +0000</bug_when>
    <thetext>fixed in SHA-1: 0e982cf03dd5023b90def60c3656e5e18135ebac</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5267</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-15 03:13:31 +0000</bug_when>
    <thetext>If FV header is invalid, Build tool will regenerate this FV image if this FV image is in the FV output directory.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1729</bug_id>
          
          <creation_ts>2019-04-18 03:53:43 +0000</creation_ts>
          <short_desc>Build fails on some build machine after the commit 05217d210e8da37b47d0be58ec363f7af2fa1c18</short_desc>
          <delta_ts>2019-05-09 03:57:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7174</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-18 03:53:43 +0000</bug_when>
    <thetext>On some build environment, build fails but on the other build machines, build success. 
This is the regression issue introduced by commit 05217d210e8da37b47d0be58ec363f7af2fa1c18


build -a IA32 -a X64 -p UefiPayloadPkg\UefiPayloadPkgIa32X64.dsc -b DEBUG -t VS2015x86
Build environment: Windows-10-10.0.16299
Build start time: 11:48:12, Apr.17 2019

WORKSPACE        = w:\edk2
EDK_TOOLS_PATH   = w:\edk2\basetools
EDK_TOOLS_BIN    = w:\edk2\basetools\bin\win32
CONF_PATH        = w:\edk2\conf
PYTHON_COMMAND   = C:\Python27\python.exe


Architecture(s)  = X64 IA32
Build target     = DEBUG
Toolchain        = VS2015x86

Active Platform          = w:\edk2\UefiPayloadPkg\UefiPayloadPkgIa32X64.dsc
Flash Image Definition   = w:\edk2\UefiPayloadPkg\UefiPayloadPkg.fdf

Processing meta-data ... done!
Building ... w:\edk2\MdeModulePkg\Library\LzmaCustomDecompressLib\LzmaCustomDecompressLib.inf [X64]
Building ... w:\edk2\UefiCpuPkg\Library\CpuExceptionHandlerLib\DxeCpuExceptionHandlerLib.inf [X64]
Building ... w:\edk2\MdeModulePkg\Library\DebugAgentLibNull\DebugAgentLibNull.inf [X64]
Building ... w:\edk2\MdePkg\Library\DxeServicesLib\DxeServicesLib.inf [X64]
Building ... w:\edk2\MdeModulePkg\Library\DxeReportStatusCodeLib\DxeReportStatusCodeLib.inf [X64]
Building ... w:\edk2\MdePkg\Library\BasePeCoffLib\BasePeCoffLib.inf [X64]
Building ... w:\edk2\MdePkg\Library\BasePerformanceLibNull\BasePerformanceLibNull.inf [X64]
Building ... w:\edk2\MdePkg\Library\BaseUefiDecompressLib\BaseUefiDecompressLib.inf [X64]
Building ... w:\edk2\MdePkg\Library\BaseCacheMaintenanceLib\BaseCacheMaintenanceLib.inf [X64]
Building ... w:\edk2\MdePkg\Library\DxeExtractGuidedSectionLib\DxeExtractGuidedSectionLib.inf [X64]
N       MAKE : warning U4004: too many rules for target &apos;w:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\DxeServicesLib\DxeServicesLib\OUTPUT\DxeServicesLib.obj&apos;
&quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\x86_amd64\cl.exe&quot; /Fow:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\DxeServicesLib\DxeServicesLib\OUTPUT\X64\ /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Z7 /Gw /MP -D DISABLE_NEW_DEPRECATED_INTERFACES /Iw:\edk2\MdePkg\Library\DxeServicesLib\X64  /Iw:\edk2\MdePkg\Library\DxeServicesLib  /Iw:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\DxeServicesLib\DxeServicesLib\DEBUG  /Iw:\edk2\MdePkg  /Iw:\edk2\MdePkg\Include  /Iw:\edk2\MdePkg\Include\X64 w:\edk2\MdePkg\Library\DxeServicesLib\X64\Allocate.c
Building ... w:\edk2\MdePkg\Library\BasePeCoffGetEntryPointLib\BasePeCoffGetEntryPointLib.inf [X64]
Building ... w:\edk2\MdePkg\Library\BaseSynchronizationLib\BaseSynchronizationLib.inf [X64]
Allocate.c
Building ... w:\edk2\UefiCpuPkg\Library\BaseXApicX2ApicLib\BaseXApicX2ApicLib.inf [X64]
Building ... w:\edk2\MdePkg\Library\UefiLib\UefiLib.inf [X64]
        &quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\x86_amd64\lib.exe&quot; /NOLOGO /LTCG /OUT:w:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\DxeServicesLib\DxeServicesLib\OUTPUT\DxeServicesLib.lib @w:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\DxeServicesLib\DxeServicesLib\OUTPUT\object_files.lst
Building ... w:\edk2\MdePkg\Library\BasePeCoffExtraActionLibNull\BasePeCoffExtraActionLibNull.inf [X64]
NMAKE : warning U4004: too many rules for target &apos;w:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\BaseSynchronizationLib\BaseSynchronizationLib\OUTPUT\Ia32\InternalGetSpinLockProperties.obj&apos;
        &quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\x86_amd64\cl.exe&quot; /Fow:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\BaseSynchronizationLib\BaseSynchronizationLib\OUTPUT\X64\ /nologo /c /WX /GS- /W4 /Gs32768 /D UNICODE /O1b2s /GL /Gy /FIAutoGen.h /EHs-c- /GR- /GF /Z7 /Gw /MP -D DISABLE_NEW_DEPRECATED_INTERFACES /Iw:\edk2\MdePkg\Library\BaseSynchronizationLib\X64  /Iw:\edk2\MdePkg\Library\BaseSynchronizationLib\Ia32  /Iw:\edk2\MdePkg\Library\BaseSynchronizationLib  /Iw:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\BaseSynchronizationLib\BaseSynchronizationLib\DEBUG  /Iw:\edk2\MdePkg  /Iw:\edk2\MdePkg\Include  /Iw:\edk2\MdePkg\Include\X64 w:\edk2\MdePkg\Library\BaseSynchronizationLib\X64\InterlockedCompareExchange64.c w:\edk2\MdePkg\Library\BaseSynchronizationLib\X64\InterlockedCompareExchange32.c w:\edk2\MdePkg\Library\BaseSynchronizationLib\X64\InterlockedCompareExchange16.c
LINK : fatal error LNK1181: cannot open input file &apos;w:/edk2/Build/UefiPayloadPkgX64/DEBUG_VS2015x86/X64/MdePkg/Library/DxeServicesLib/DxeServicesLib/OUTPUT/DxeServicesLib.obj&apos;
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\x86_amd64\lib.exe&quot;&apos; : return code &apos;0x49d&apos;
Stop.
Building ... w:\edk2\UefiPayloadPkg\Library\AcpiTimerLib\AcpiTimerLib.inf [X64]


build.py...
: error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\nmake.exe /nologo tbuild [w:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\DxeServicesLib\DxeServicesLib]


build.py...
: error 7000: Failed to execute command
        C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\nmake.exe /nologo tbuild [w:\edk2\Build\UefiPayloadPkgX64\DEBUG_VS2015x86\X64\MdePkg\Library\BaseSynchronizationLib\BaseSynchronizationLib]


build.py...
: error F002: Failed to build module
        w:\edk2\MdePkg\Library\DxeServicesLib\DxeServicesLib.inf [X64, VS2015x86, DEBUG]

- Failed -
Build end time: 11:48:17, Apr.17 2019
Build total time: 00:00:05</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7175</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-18 03:54:42 +0000</bug_when>
    <thetext>Assign Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7469</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-09 03:57:20 +0000</bug_when>
    <thetext>fixed at 35c2af00d8c349f3e0feca0c430034818e64020c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1022</bug_id>
          
          <creation_ts>2018-07-17 08:09:20 +0000</creation_ts>
          <short_desc>GenerateCapsule:MonotonicCount value exceed its max value, then report Traceback error</short_desc>
          <delta_ts>2018-08-09 13:44:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4297</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:09:20 +0000</bug_when>
    <thetext>use 0xffffffffffffffff1 (it exceed the max value) as the value of --monotonic-count, it report below traceback info.

GenerateCapsule: error: can not sign payload
Traceback (most recent call last):
  File &quot;xxxx\BaseTools\Source\Python\Caps
ule\GenerateCapsule.py&quot;, line 380, in &lt;module&gt;
    Result + struct.pack (&apos;&lt;Q&apos;, args.MonotonicCount),
struct.error: integer out of range for &apos;Q&apos; format code</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4332</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:26:06 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4455</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:10:39 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4542</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:44:05 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/6ed4651cb560caba91a989550734206f01ffd7d1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1749</bug_id>
          
          <creation_ts>2019-04-25 22:21:54 +0000</creation_ts>
          <short_desc>The order of file Guid.xref will change after increment build</short_desc>
          <delta_ts>2019-04-30 22:59:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7264</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-25 22:21:54 +0000</bug_when>
    <thetext>The order of file Guid.xref will change after increment build.

Add content to dsc
[PcdsPatchableInModule.common]
  gEfiMdeModulePkgTokenSpaceGuid.test1|FALSE
   

Compare the 2 times build result, we found that the order of file Guid.xref change, but we expect the order remain unchanged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7283</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 21:53:28 +0000</bug_when>
    <thetext>Bob, please help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7365</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-30 22:59:42 +0000</bug_when>
    <thetext>fixed at 273190e189755d652de886b653d2c14bfceeb3ed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1237</bug_id>
          
          <creation_ts>2018-10-11 03:52:54 +0000</creation_ts>
          <short_desc>Occasional #GP occurred if PEI stack guard is enbabled</short_desc>
          <delta_ts>2018-10-18 01:24:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5218</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-10-11 03:52:54 +0000</bug_when>
    <thetext>The #GP occurred at writing TR register in ArchSetupExceptionStack(). From dumped GDT table, it looks like that the task descriptor pointed TR has invalid fields.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5229</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:06:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5310</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-10-18 01:24:06 +0000</bug_when>
    <thetext>Push at: eae7b476c2151141a43cc89d9629c47757f024f1.
Reviewed at: https://lists.01.org/pipermail/edk2-devel/2018-October/030986.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1023</bug_id>
          
          <creation_ts>2018-07-17 08:19:43 +0000</creation_ts>
          <short_desc>GenerateCapsule: decode capsule file report following verification failure</short_desc>
          <delta_ts>2018-07-28 02:17:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4298</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-17 08:19:43 +0000</bug_when>
    <thetext>I use the Openssl tool, and the cert files that in BaseTools\Source\Python\Pkcs7Sign, use GenerateCapsule can generate signed capsule file success, then use the same openssl tool and the same cert file to decode the just generated file, it report below failure. while in fact the file is decoded, and I compared the decode operation&apos;s output file and encode&apos;s input file, they are same.


Verification failure
7700:error:21075075:PKCS7 routines:PKCS7_verify:certificate verify error:.\crypt
o\pkcs7\pk7_smime.c:342:Verify error:certificate has expired

GenerateCapsule: warning: can not verify payload.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4333</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 23:26:30 +0000</bug_when>
    <thetext>assign to Mike</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4449</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-28 02:17:15 +0000</bug_when>
    <thetext>The is not a bug in GenerateCapsule and the OpenSSL tools are behaving
as expected.

The issue is that the test key in BaseTools\Source\Python\Pkcs7Sign has 
expired, so use of that test key will fail some OpenSSL operations.

In order to test the decode operation using OpenSSL, a new key must be
generated and used.  Instructions to generate a new key using OpenSSL
tools can be found at:

https://github.com/tianocore/tianocore.github.io/wiki/Capsule-Based-System-Firmware-Update-Generate-Keys</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1435</bug_id>
          
          <creation_ts>2019-01-07 09:21:04 +0000</creation_ts>
          <short_desc>BaseTools StructurePcd doesn&apos;t generate the correct line number in PcdValueInit.c</short_desc>
          <delta_ts>2019-02-01 21:33:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          <deadline>2019-01-31</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6002</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-07 09:21:04 +0000</bug_when>
    <thetext>For each value assignment, BaseTools should generate the comment with the original line number in Dec/Dsc instead of -1. 

// Value in Dsc for Sku: DEFAULT, DefaultStore STANDARD
void Assign_gEfiStructuredPcdPkgTokenSpaceGuid_PcdMyEfiVar_DEFAULT_STANDARD_Value(MY_EFI_VARSTORE_DATA *Pcd){
  UINT32  FieldSize;
  CHAR8   *Value;
// SkuName: DEFAULT,  DefaultStoreName: STANDARD 
  Value     = &quot;\x00&quot;; // From DSC Default Value {0x0}
  memcpy (Pcd, Value, 1);
  Pcd-&gt;Field8 = 18; // From OvmfPkg\OvmfPkgIa32X64.dsc Line -1 Value 0x12
  Pcd-&gt;Field16 = 1; // From OvmfPkg\OvmfPkgIa32X64.dsc Line -1 Value 0x1
  Pcd-&gt;SubmittedCallback = 18; // From OvmfPkg\OvmfPkgIa32X64.dsc Line -1 Value 0x12
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6003</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-07 09:22:16 +0000</bug_when>
    <thetext>Assign it to BaseTool owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6273</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-01 21:33:44 +0000</bug_when>
    <thetext>Fixed on edk2 master 4a6b179f4f369c49702a4baee9c32b18551cdcfd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1240</bug_id>
          
          <creation_ts>2018-10-11 04:37:47 +0000</creation_ts>
          <short_desc>Add Use-After-Free detection functionality in memory management in dxe core</short_desc>
          <delta_ts>2018-10-25 22:40:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5221</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-10-11 04:37:47 +0000</bug_when>
    <thetext>This is security enhancement requirement enforced to edk2 code base.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5234</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:39:51 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5396</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-10-25 22:40:40 +0000</bug_when>
    <thetext>Push @ 63ebde8ef6d4ff497d054ccc010904ecd4441198
Review @ https://lists.01.org/pipermail/edk2-devel/2018-October/031366.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1693</bug_id>
          
          <creation_ts>2019-04-10 02:59:06 +0000</creation_ts>
          <short_desc>Update edksetup.bat to support the different VS tool chain setup</short_desc>
          <delta_ts>2019-07-02 03:24:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>High</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7059</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-10 02:59:06 +0000</bug_when>
    <thetext>edksetup.bat finds the highest version VS, then setup VS environment. But, the highest version VS may not work together with older version VS. I suggest to update edksetup.bat with the additional option to setup the different VS environment, such as edksetup.bat VS2015 to setup VS2015 environment. If VS2015 is not installed, then report error. If no option is specified, edksetup.bat will keep current behavior to find the highest version VS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7060</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-10 02:59:44 +0000</bug_when>
    <thetext>Assign Dandan to work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8318</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-07-02 03:24:23 +0000</bug_when>
    <thetext>Fixed via https://github.com/tianocore/edk2/commit/6759212fa69d5d266c2854ea6de44bfd3f7e370b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1060</bug_id>
          
          <creation_ts>2018-07-26 02:43:31 +0000</creation_ts>
          <short_desc>Performance measurements with PerformancePkg on all platforms</short_desc>
          <delta_ts>2018-08-03 13:31:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>prabinca4u</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>PerformancePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4410</commentid>
    <comment_count>0</comment_count>
    <who name="">prabinca4u</who>
    <bug_when>2018-07-26 02:43:31 +0000</bug_when>
    <thetext>Hi Team,

I&apos;m new to UEFI and EDK background. I have done some performance profiling (CPU execution time measurements) using check points methods PerformancePkg in the EDK2 (created one dxe driver and added PERF_START and PERF_END as check points).

I have achieved it in POC level. It giving output of time taken by the execution of my dxe driver, when running DP.efi (PerformancePkg provides) applications.

But the problem is, PerformancePkg is not giving the response (Its get hang on UEFI shell) for all platforms (Desktop and Laptops). Its giving proper response for some platforms only. 

I have tried to dig more to sort out this platform dependency, didn&apos;t found any details. It will be helpful if any one can point out why its not working in some platforms.


Thanks In Advance</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4417</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:47:23 +0000</bug_when>
    <thetext>Hi prabinca4u,

from the description, seems it is not a bug, but for consultation. I prefer you send mail to edk2-devel@lists.01.org to discussion this question. And I know in the latest edk2 master, the PerformancePkg had been retired.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4502</commentid>
    <comment_count>2</comment_count>
    <who name="">prabinca4u</who>
    <bug_when>2018-08-03 02:23:57 +0000</bug_when>
    <thetext>Hi Zhu,
Thanks for the reply, I will check with edk2-devel@lists.01.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4508</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-03 13:31:42 +0000</bug_when>
    <thetext>on-list discussion:
&quot;Performancepkg in edk2&quot;

Closing this BZ.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1977</bug_id>
          
          <creation_ts>2019-07-12 23:43:00 +0000</creation_ts>
          <short_desc>build returns exit code 0 when Postbuild process fails</short_desc>
          <delta_ts>2021-05-28 03:49:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>garrett.kirkendall</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8448</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-07-12 23:43:00 +0000</bug_when>
    <thetext>It appears that &apos;build&apos; returns exit code 0 (i.e. success) when the Postbuild process fails. For example, trying to build a release Minnowboard firmware (under FreeBSD with bash 5.0.7, but I don&apos;t see any reason it should be different with Linux) with edk2 master commit 43622317c67f031f9b2e33c3320f2c89484bd506 and edk2-platforms master commit 0aed7db0962eb948bed4b248528ce8956873cbf6 :

./Build_IFWI.sh /m /X64 MNW2 Release
...
- Postbuild Start -

TARGET is RELEASE
...
Write binary output file /home/bcran/workspace/Build/Vlv2TbltDevicePkg/Capsules//TestCert/MinnowMaxRelease.cap
Success
cp: MinnowMaxRelease.cap: No such file or directory



build.py...
 : error F008: Postbuild process is not success!


- Failed -
Build end time: 21:31:38, Jul.12 2019
Build total time: 00:00:02

build returned 0

-------------------- The EDKII BIOS build has successfully completed. --------------------




The postbuild script is invoked from Platform/Intel/Vlv2TbltDevicePkg/PlatformCapsuleGcc.dsc :

POSTBUILD = Vlv2TbltDevicePkg/Feature/Capsule/GenerateCapsule/GenCapsuleAll.sh

This is going to become a big problem with CI is implemented, without a reliable way to determine if builds are failing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8588</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:36:07 +0000</bug_when>
    <thetext>Bug Triage: We need to be sure we are returning an error code here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16044</commentid>
    <comment_count>2</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-12 13:26:41 +0000</bug_when>
    <thetext>Any chance of getting a fix this is almost 2 years old now.  Looks like the try needs to set ReturnCode to something.  What value?  I&apos;ll propose a patch.




    if ReturnCode == 0:
        try:
            MyBuild.LaunchPostbuild()
            Conclusion = &quot;Done&quot;
        except:
            Conclusion = &quot;Failed&quot;

need to set ReturnCode to some value after setting Conclusion = &quot;Failed&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16065</commentid>
    <comment_count>3</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-14 10:49:45 +0000</bug_when>
    <thetext>Proposed solution here:

https://github.com/gkirkendall-amd/edk2/tree/build_postbuild_return_status

Set ReturnCode to POSTBUILD_ERROR when POSTBUILD section fails.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16173</commentid>
    <comment_count>4</comment_count>
    <who name="Garrett Kirkendall">garrett.kirkendall</who>
    <bug_when>2021-05-26 08:28:47 +0000</bug_when>
    <thetext>Resolved with commit 04ae17218deec25c6f488609c5e2ca9c419d2c4b

I believe this issue can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16203</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2021-05-28 03:49:37 +0000</bug_when>
    <thetext>it has been merged.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1418</bug_id>
          
          <creation_ts>2018-12-20 04:52:18 +0000</creation_ts>
          <short_desc>multiple targets no longer get built correctly</short_desc>
          <delta_ts>2018-12-25 21:00:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5927</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2018-12-20 04:52:18 +0000</bug_when>
    <thetext>When building a platform that includes a FD definition for multiple targets at the same time (e.g., -b RELEASE -b DEBUG), only the first one will be built completely, and the second one does not generate a FD image at all.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5930</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:04:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5956</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-25 21:00:52 +0000</bug_when>
    <thetext>Fixed on SHA-1: abc4c3386a50cb97c30ec108f0cb85aef769c267</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1871</bug_id>
          
          <creation_ts>2019-06-03 13:50:58 +0000</creation_ts>
          <short_desc>OpensslLib should use proper entropy sources, not the timestamp counter</short_desc>
          <delta_ts>2020-11-05 20:17:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2143</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>erik.c.bjorge</cc>
    
    <cc>gaoliming</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>macarl</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>stephano</cc>
    
    <cc>xiaoyux.lu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7912</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-06-03 13:50:58 +0000</bug_when>
    <thetext>The rand_pool interface that was implemented as part of the OpensslLib upgrade to upstream version 1.1.1b is entirely based on the timestamp counter (on x86) or the performance counter (on other architectures)

Systems with architected RNG instructions should use those, not the timestamp counter. Systems without such instructions that do provide an implementation of EFI_RNG_PROTOCOL should at least be able to opt into a version of the library that uses that, at least for components that execute in DXE context (such as the TLS code we use for HTTPS boot)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7913</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-03 14:02:30 +0000</bug_when>
    <thetext>FYI. There&apos;s a discussion before (https://edk2.groups.io/g/devel/message/40590).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8107</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-19 12:06:02 +0000</bug_when>
    <thetext>Assign to Crypto maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8258</commentid>
    <comment_count>3</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:42:50 +0000</bug_when>
    <thetext>Jian, please continue to follow up it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8266</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-27 22:44:38 +0000</bug_when>
    <thetext>According to the discussion (https://edk2.groups.io/g/devel/message/40590), there&apos;re concerns in rng instructions. EFI_RNG_PROTOCOL can only be used in DXE phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8267</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-06-27 22:50:05 +0000</bug_when>
    <thetext>I suggest not to do anything until we get agreement on RNG instructions and EFI_RNG_PROTOCOL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8408</commentid>
    <comment_count>6</comment_count>
    <who name="Erik Bjorge">erik.c.bjorge</who>
    <bug_when>2019-07-11 12:59:01 +0000</bug_when>
    <thetext>Would it be reasonable to use a seed with mix of TSC and rdrand?  Using the TSC and then padding the rest of the seed with rdrand values.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8409</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-11 14:40:47 +0000</bug_when>
    <thetext>I guess if the mixing were sufficiently high quality (not just a concatenation of bits), a mixture from the TSC and RDRAND could work.

... Well If the seed is considered input to further mixing, then I guess normal concatenation can work too (localized changes in the seed will still lead to violent changes in the mixed output).

This is a difficult discussion for me because I can&apos;t really make constructive comments. I can&apos;t say much more than &quot;TSC in itself seems poor&quot; and &quot;RDRAND has negative literature&quot;. Sorry about that. :(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678</commentid>
    <comment_count>8</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-09-16 20:27:01 +0000</bug_when>
    <thetext>Comments from a duplicate bug:
This should really be a platform decision, which is even acknowledged in comments in the code. It&apos;s currently being made in a non-extensible way deep within a library that most platforms consume blindly – especially since the library interface is so complicated to begin with.

The abstractions that are hinted at are never actually provided. The GetRandomNoise64FromPlatform() function that’s referred to does not exist as an implementation or an interface. Also, the naming is misleading because what it’s actually looking for is not entropy/noise, but usable random.

The commit was originally made (as far as I can tell) without consulting the security group.

This is definitely one of those interfaces where we would prefer to see a “placeholder” NULL library that ASSERTS() and maybe even generates a build warning, and if a platform really wants to use the timer they can switch to a Timer implementation that can live alongside OpensslLib. Otherwise, they have an easy way to override the random.

Further, this seems to be largely covered under the RngLib interface. We don’t understand why this existing interface wasn’t leveraged or why there are competing definitions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10319</commentid>
    <comment_count>9</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-04 20:31:58 +0000</bug_when>
    <thetext>Any updates or progress on this bug.  

We have made the change to use RngLib and would propose the current RNG/NOISE functions are removed and replaced with this change. 

https://github.com/microsoft/mu_tiano_plus/commit/46d1613f91aae7860fcbd37bf2863880115d0c02

and a RNG library instance that uses the Dxe RNG protocol. 

https://github.com/microsoft/mu_basecore/commit/ad051b380f3e89c2b0b1decc8bf425d06e355921

This has three benefits.

1. Dependency reduction: Removes the need for a platform specific timer library.  We publish a single binary used on numerous platforms for crypto and the introduced timer lib dependency caused issues because we could not fulfill our platform needs with one library instance.  

2. Code maintenance: Removing this additional code and leveraging an existing library within Edk2 means less code to maintain.  

3. Platform defined quality: A platform can choose which instance to use and the implications of that instance.  

Thanks
Sean</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10339</commentid>
    <comment_count>10</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-06 09:16:59 +0000</bug_when>
    <thetext>Sean,

I agree to use RngLib to replace the current random generator. Let me summarize the changes to make:

  1) Use RngLib interface to generate random entropy in rand_pool
  2) Remove dependency on TimerLib in OpensslLib
  3) Add a new version of RngLib implemented by TimerLib
  4) Add a new version of RngLib implemented by EFI_RNG_PROTOCOL
  5) Add a NULL version of RngLib for build purpose

Let me know if anything is missing and if I can merge RngDxeLib from Mu project into edk2 for above item 4) to save a bit of my effort.

Thanks,
Jian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10342</commentid>
    <comment_count>11</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-11-06 12:49:37 +0000</bug_when>
    <thetext>Jian,

That sounds like everything. I think we&apos;re fine with you copying the Mu implementation. That&apos;s what it&apos;s there for. ;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10343</commentid>
    <comment_count>12</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-11-06 12:49:49 +0000</bug_when>
    <thetext>Jian,

That sounds like everything. I think we&apos;re fine with you copying the Mu implementation. That&apos;s what it&apos;s there for. ;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10344</commentid>
    <comment_count>13</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-06 13:14:56 +0000</bug_when>
    <thetext>Yes.  We would actually prefer you use our implementation unless you have proposed changes.  

Out of curiosity why is #3 needed.  Rng based on a timer seems like a poor implementation choice.  Do you have a requirement to support this?  Hardware limited platform?  I would suggest not implementing this as part of edk2.  A limited platform could implement their own this does not need to be part of edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10345</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-06 15:29:48 +0000</bug_when>
    <thetext>Can someone please remind me why the OpenSSL lib instance that is built into the variable SMM driver needs *any* randomness at all?

Basically, here&apos;s what I could accept for OVMF:

- an BaseRngLibNull instance that blows up whenever called,

- an DxeRngLibRngProtocol instance that consumes EFI_RNG_PROTOCOL,

- BaseRngLibNull linked into SMM drivers that *seem* to need randomness (due to inflexibly designed edk2 library interfaces), but don&apos;t actually consume randomness,

- DxeRngLibRngProtocol linked into DXE / UEFI drivers that need actual randomness (TLS),

- zero consumption of TSC / TimerLib, *or* RDRAND, in the whole platform, for randomness&apos; sake.

If the variable SMM driver actually ends up making a call to the BaseRngLibNull instance, and therefore trips an assert, then we have a design bug in either BaseCryptLib or OpenSSL. It should be possible to use OpenSSL for signature validation and certificate chain validation without depending on *any* randomness at all. If OpenSSL does not permit this at the moment, then we need to work on OpenSSL first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10346</commentid>
    <comment_count>15</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-11-06 16:53:27 +0000</bug_when>
    <thetext>Agreed with Laszlo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10358</commentid>
    <comment_count>16</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-06 23:50:34 +0000</bug_when>
    <thetext>Sean &amp; Bret,

Thanks. The reason I want to keep the TSC version is to avoid any potential build/boot issue for some old platforms (just in case). We can remove it if we find out eventually that there&apos;s really no consumer of it.

Laszlo,

SMM variable doesn&apos;t need randomness currently. But it will need it soon. I&apos;m working on a feature for Windows 2020 boot requirement, which needs to encrypt variable data. I think we need a SMM version of EFI_RNG_PROTOCOL for it. But I won&apos;t do it this time.

Thanks,
Jian</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10359</commentid>
    <comment_count>17</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-11-07 02:02:56 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #16)
&gt; Sean &amp; Bret,
&gt; 
&gt; Thanks. The reason I want to keep the TSC version is to avoid any potential
&gt; build/boot issue for some old platforms (just in case). We can remove it if
&gt; we find out eventually that there&apos;s really no consumer of it.
&gt; 
&gt; Laszlo,
&gt; 
&gt; SMM variable doesn&apos;t need randomness currently. But it will need it soon.
&gt; I&apos;m working on a feature for Windows 2020 boot requirement, which needs to
&gt; encrypt variable data. I think we need a SMM version of EFI_RNG_PROTOCOL for
&gt; it. But I won&apos;t do it this time.
&gt; 

RngLib should *never* be backed by just a counter. RngLib should produce entropy of a reasonable quality, and it is up to the caller to decide whether pseudorandomness with a low quality seed is a usable substitute, depending on the use case, in which case it can fall back to doing something like encrypting a counter (and you can put that functionality into a library as well, but it should not be a variant of RngLib)

Generating keys for encrypted storage in SMM using a construction like this is absolutely unacceptable though. Generating key material is the primary purpose of true randomness in cryptography, and keys used for storage have a lifetime that is arbitrarily long.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10360</commentid>
    <comment_count>18</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-07 02:13:20 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #17)
&gt; 
&gt; RngLib should *never* be backed by just a counter. RngLib should produce
&gt; entropy of a reasonable quality, and it is up to the caller to decide
&gt; whether pseudorandomness with a low quality seed is a usable substitute,
&gt; depending on the use case, in which case it can fall back to doing something
&gt; like encrypting a counter (and you can put that functionality into a library
&gt; as well, but it should not be a variant of RngLib)
&gt; 
&gt; Generating keys for encrypted storage in SMM using a construction like this
&gt; is absolutely unacceptable though. Generating key material is the primary
&gt; purpose of true randomness in cryptography, and keys used for storage have a
&gt; lifetime that is arbitrarily long.

That&apos;s for sure. We never use the counter directly even in current wrapper code. That&apos;s also why I suggest to use a RngLib implemented through a SMM version of EFI_RNG_PROTOCOL, which should follow NIST SP 800-90 or ANSI X9.31 spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10361</commentid>
    <comment_count>19</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-11-07 02:21:17 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #18)
&gt; (In reply to Ard Biesheuvel from comment #17)
&gt; &gt; 
&gt; &gt; RngLib should *never* be backed by just a counter. RngLib should produce
&gt; &gt; entropy of a reasonable quality, and it is up to the caller to decide
&gt; &gt; whether pseudorandomness with a low quality seed is a usable substitute,
&gt; &gt; depending on the use case, in which case it can fall back to doing something
&gt; &gt; like encrypting a counter (and you can put that functionality into a library
&gt; &gt; as well, but it should not be a variant of RngLib)
...
&gt; 
&gt; That&apos;s for sure. We never use the counter directly even in current wrapper
&gt; code. That&apos;s also why I suggest to use a RngLib implemented through a SMM
&gt; version of EFI_RNG_PROTOCOL, which should follow NIST SP 800-90 or ANSI
&gt; X9.31 spec.

Of course you never use the counter directly. But pseudorandomness with a low quality seed is is not acceptable either for any implementation of RngLib.

If your execution context does not provide access to a suitable source of entropy, you should not pretend that mixing some counters together and applying a deterministic cryptographic transformation to it is a reasonable fallback, especially in reference code. This may imply that it is impossible to meet the Windows 2020 requirements on some hardware, but that is fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10362</commentid>
    <comment_count>20</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-07 02:43:42 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #19)
&gt; (In reply to Wang, Jian J from comment #18)
&gt; &gt; (In reply to Ard Biesheuvel from comment #17)
&gt; &gt; &gt; 
&gt; &gt; &gt; RngLib should *never* be backed by just a counter. RngLib should produce
&gt; &gt; &gt; entropy of a reasonable quality, and it is up to the caller to decide
&gt; &gt; &gt; whether pseudorandomness with a low quality seed is a usable substitute,
&gt; &gt; &gt; depending on the use case, in which case it can fall back to doing something
&gt; &gt; &gt; like encrypting a counter (and you can put that functionality into a library
&gt; &gt; &gt; as well, but it should not be a variant of RngLib)
&gt; ...
&gt; &gt; 
&gt; &gt; That&apos;s for sure. We never use the counter directly even in current wrapper
&gt; &gt; code. That&apos;s also why I suggest to use a RngLib implemented through a SMM
&gt; &gt; version of EFI_RNG_PROTOCOL, which should follow NIST SP 800-90 or ANSI
&gt; &gt; X9.31 spec.
&gt; 
&gt; Of course you never use the counter directly. But pseudorandomness with a
&gt; low quality seed is is not acceptable either for any implementation of
&gt; RngLib.
&gt; 
&gt; If your execution context does not provide access to a suitable source of
&gt; entropy, you should not pretend that mixing some counters together and
&gt; applying a deterministic cryptographic transformation to it is a reasonable
&gt; fallback, especially in reference code. This may imply that it is impossible
&gt; to meet the Windows 2020 requirements on some hardware, but that is fine.

I&apos;m not trying to pretend anything. I&apos;m just trying to eliminate the potential impact to some platforms caused by this change. It&apos;s OK to me not to add such RngLib if we think it&apos;s not acceptable due to not enough security. Maybe there&apos;s actually no such platforms and I&apos;m just over-worrying.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10363</commentid>
    <comment_count>21</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-07 05:12:03 +0000</bug_when>
    <thetext>Started an email thread (cross-posted to edk2-devel and qemu-devel):

&quot;privileged entropy sources in QEMU/KVM guests&quot;
http://mid.mail-archive.com/03e769cf-a5ad-99ce-cd28-690e0a72a310@redhat.com
https://edk2.groups.io/g/devel/message/50191</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10364</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-07 10:22:40 +0000</bug_when>
    <thetext>Here&apos;s an idea / question, based on the mailing list thread linked in comment 21.

If an EFI_RNG_PROTOCOL instance is available in the UEFI / DXE protocol database at the time End-of-DXE is signaled by platform BDS, that means the EFI_RNG_PROTOCOL comes from a component that is built into the platform firmware. This suggests that the EFI_RNG_PROTOCOL in question is trustworthy, for *seeding* a DRBG that is embedded in an SMM driver.

Can we agree about that?

If so, then the next question is, if we can expect SMM drivers to need their DRBGs seeded at End-of-DXE.

Specifically, the 2nd question translates to whether the variable SMM driver feature that Jian is working on for Windows 2020 boot is okay with consuming actual randomness *no earlier than* End-of-DXE.

If the answer is yes, then it seems feasible to seed such SMM drivers from such an EFI_RNG_PROTOCOL.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10366</commentid>
    <comment_count>23</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-07 21:31:07 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #22)
&gt; Here&apos;s an idea / question, based on the mailing list thread linked in
&gt; comment 21.
&gt; 
&gt; If an EFI_RNG_PROTOCOL instance is available in the UEFI / DXE protocol
&gt; database at the time End-of-DXE is signaled by platform BDS, that means the
&gt; EFI_RNG_PROTOCOL comes from a component that is built into the platform
&gt; firmware. This suggests that the EFI_RNG_PROTOCOL in question is
&gt; trustworthy, for *seeding* a DRBG that is embedded in an SMM driver.
&gt; 
&gt; Can we agree about that?
&gt; 

Agree.

&gt; If so, then the next question is, if we can expect SMM drivers to need their
&gt; DRBGs seeded at End-of-DXE.
&gt; 
&gt; Specifically, the 2nd question translates to whether the variable SMM driver
&gt; feature that Jian is working on for Windows 2020 boot is okay with consuming
&gt; actual randomness *no earlier than* End-of-DXE.
&gt; 
&gt; If the answer is yes, then it seems feasible to seed such SMM drivers from
&gt; such an EFI_RNG_PROTOCOL.

Do you mean that it&apos;s acceptable if only seed before End-of-Dxe but never after? If yes, I think it&apos;s feasible.

Per Windows requirement, the encryption algorithm is AES-CBC, which needs an random IVEC to encrypt variable. That means we need randomness in both DXE and SMM environment. I don&apos;t understand why &quot;consuming actual randomness no earlier than End-of-DXE&quot; is important.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10368</commentid>
    <comment_count>24</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-11-08 02:45:55 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #23)
&gt; (In reply to Laszlo Ersek from comment #22)
&gt; &gt; Here&apos;s an idea / question, based on the mailing list thread linked in
&gt; &gt; comment 21.
&gt; &gt; 
&gt; &gt; If an EFI_RNG_PROTOCOL instance is available in the UEFI / DXE protocol
&gt; &gt; database at the time End-of-DXE is signaled by platform BDS, that means the
&gt; &gt; EFI_RNG_PROTOCOL comes from a component that is built into the platform
&gt; &gt; firmware. This suggests that the EFI_RNG_PROTOCOL in question is
&gt; &gt; trustworthy, for *seeding* a DRBG that is embedded in an SMM driver.
&gt; &gt; 
&gt; &gt; Can we agree about that?
&gt; &gt; 
&gt; 
&gt; Agree.
&gt; 
&gt; &gt; If so, then the next question is, if we can expect SMM drivers to need their
&gt; &gt; DRBGs seeded at End-of-DXE.
&gt; &gt; 
&gt; &gt; Specifically, the 2nd question translates to whether the variable SMM driver
&gt; &gt; feature that Jian is working on for Windows 2020 boot is okay with consuming
&gt; &gt; actual randomness *no earlier than* End-of-DXE.
&gt; &gt; 
&gt; &gt; If the answer is yes, then it seems feasible to seed such SMM drivers from
&gt; &gt; such an EFI_RNG_PROTOCOL.
&gt; 
&gt; Do you mean that it&apos;s acceptable if only seed before End-of-Dxe but never
&gt; after? If yes, I think it&apos;s feasible.
&gt; 
&gt; Per Windows requirement, the encryption algorithm is AES-CBC, which needs an
&gt; random IVEC to encrypt variable. That means we need randomness in both DXE
&gt; and SMM environment. I don&apos;t understand why &quot;consuming actual randomness no
&gt; earlier than End-of-DXE&quot; is important.

IV generation for CBC does not require strong randomness, given that IV values are not actually secret. The only requirement is that IVs should not be reused, but for block modes like CBC, reuse does not result in catastrophic failure like it does for streamciphers, so a small likelihood of reuse is tolerable here.

In other words, using a timestamp and some deterministic transformation for diffusion is perfectly fine, and it does not even have to be cryptographically strong, so something like CRC would suffice.

So going through the trouble if implementing the general purpose RngLib in a bad way in SMM is not the right approach IMO. Instead, we could have a base GenIvLib library, and document it as not being cryptographically random.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10369</commentid>
    <comment_count>25</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-08 03:24:33 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #24)
&gt; (In reply to Wang, Jian J from comment #23)
&gt; &gt; (In reply to Laszlo Ersek from comment #22)
&gt; &gt; &gt; Here&apos;s an idea / question, based on the mailing list thread linked in
&gt; &gt; &gt; comment 21.
&gt; &gt; &gt; 
&gt; &gt; &gt; If an EFI_RNG_PROTOCOL instance is available in the UEFI / DXE protocol
&gt; &gt; &gt; database at the time End-of-DXE is signaled by platform BDS, that means the
&gt; &gt; &gt; EFI_RNG_PROTOCOL comes from a component that is built into the platform
&gt; &gt; &gt; firmware. This suggests that the EFI_RNG_PROTOCOL in question is
&gt; &gt; &gt; trustworthy, for *seeding* a DRBG that is embedded in an SMM driver.
&gt; &gt; &gt; 
&gt; &gt; &gt; Can we agree about that?
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; Agree.
&gt; &gt; 
&gt; &gt; &gt; If so, then the next question is, if we can expect SMM drivers to need their
&gt; &gt; &gt; DRBGs seeded at End-of-DXE.
&gt; &gt; &gt; 
&gt; &gt; &gt; Specifically, the 2nd question translates to whether the variable SMM driver
&gt; &gt; &gt; feature that Jian is working on for Windows 2020 boot is okay with consuming
&gt; &gt; &gt; actual randomness *no earlier than* End-of-DXE.
&gt; &gt; &gt; 
&gt; &gt; &gt; If the answer is yes, then it seems feasible to seed such SMM drivers from
&gt; &gt; &gt; such an EFI_RNG_PROTOCOL.
&gt; &gt; 
&gt; &gt; Do you mean that it&apos;s acceptable if only seed before End-of-Dxe but never
&gt; &gt; after? If yes, I think it&apos;s feasible.
&gt; &gt; 
&gt; &gt; Per Windows requirement, the encryption algorithm is AES-CBC, which needs an
&gt; &gt; random IVEC to encrypt variable. That means we need randomness in both DXE
&gt; &gt; and SMM environment. I don&apos;t understand why &quot;consuming actual randomness no
&gt; &gt; earlier than End-of-DXE&quot; is important.
&gt; 
&gt; IV generation for CBC does not require strong randomness, given that IV
&gt; values are not actually secret. The only requirement is that IVs should not
&gt; be reused, but for block modes like CBC, reuse does not result in
&gt; catastrophic failure like it does for streamciphers, so a small likelihood
&gt; of reuse is tolerable here.
&gt; 
&gt; In other words, using a timestamp and some deterministic transformation for
&gt; diffusion is perfectly fine, and it does not even have to be
&gt; cryptographically strong, so something like CRC would suffice.
&gt; 
&gt; So going through the trouble if implementing the general purpose RngLib in a
&gt; bad way in SMM is not the right approach IMO. Instead, we could have a base
&gt; GenIvLib library, and document it as not being cryptographically random.

Good to know. Thanks for explanation. In current plan, there will be a EncryptionLib which will cover the IV generation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10371</commentid>
    <comment_count>26</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-08 09:58:04 +0000</bug_when>
    <thetext>(1) *If* the variable SMM driver needs strong randomness, then the idea of seeding it exactly *at* End-Of-Dxe, from an EFI_RNG_PROTOCOL is the following:

- EFI_RNG_PROTOCOL should not be consumed *after* End-of-Dxe, because third party drivers could install EFI_RNG_PROTOCOL too (or even attack existent EFI_RNG_PROTOCOL implementations), and the caller (= variable SMM) could not distinguish what EFI_RNG_PROTOCOL is third party, and what is from the platform firmware. In other words, EFI_RNG_PROTOCOL should be consumed &quot;no later than&quot; End-of-Dxe, because that&apos;s when the SMM driver knows that *any* EFI_RNG_PROTOCOL in the UEFI protocol database comes from the platform vendor, and is therefore trustworthy.

- EFI_RNG_PROTOCOL should not be consumed *before* End-Of-Dxe, in the variable SMM driver, because the provider RNG driver -- included in the platform firmware -- may not have produced the RNG protocol *yet*. Note that EFI_RNG_PROTOCOL may be produced by a UEFI driver that follows the UEFI driver model, and not necessarily by a platform DXE driver. Therefore EFI_RNG_PROTOCOL may become available first when platform BDS connects the underlying device to the RNG driver, just before signaling End-of-Dxe.

From the above two restrictions (&quot;not after&quot; and &quot;not before&quot;) we get that the variable SMM driver should consume EFI_RNG_PROTOCOL &quot;exactly at&quot; End-of-Dxe. (In an End-of-Dxe event notification function.)

(2) All of the above said, I agree with Ard about CBC not requiring cryptographically strong IVs, just unique IVs. (I&apos;m not even sure about the diffusion / avalanche effect requirement for CBC IVs, but I&apos;m not equipped enough at the moment to challenge the claim that diffusion is required -- diffusion will certainly not *hurt*.)

Therefore, if the dependency in the variable SMM driver can be reduced to &quot;unique enough IV&quot; from &quot;cryptographically strong seed&quot;, then that&apos;s definitely the way to go, in my opinion -- it would allow us to *not* solve (= ignore) the &quot;strong seed for SMM&quot; problem altogether. And in DXE, modules can simply consume EFI_RNG_PROTOCOL. (We have to be careful about DEPEXes though -- again, EFI_RNG_PROTOCOL may become available only in early BDS (just before End-of-Dxe), so e.g. drivers producing architectural UEFI protocols should not use DEPEXes to wait for EFI_RNG_PROTOCOL, but protocol notify functions.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10372</commentid>
    <comment_count>27</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-08 10:33:45 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #26)
&gt; (1) *If* the variable SMM driver needs strong randomness, then the idea of
&gt; seeding it exactly *at* End-Of-Dxe, from an EFI_RNG_PROTOCOL is the
&gt; following:
&gt; 
&gt; - EFI_RNG_PROTOCOL should not be consumed *after* End-of-Dxe, because third
&gt; party drivers could install EFI_RNG_PROTOCOL too (or even attack existent
&gt; EFI_RNG_PROTOCOL implementations), and the caller (= variable SMM) could not
&gt; distinguish what EFI_RNG_PROTOCOL is third party, and what is from the
&gt; platform firmware. In other words, EFI_RNG_PROTOCOL should be consumed &quot;no
&gt; later than&quot; End-of-Dxe, because that&apos;s when the SMM driver knows that *any*
&gt; EFI_RNG_PROTOCOL in the UEFI protocol database comes from the platform
&gt; vendor, and is therefore trustworthy.
&gt; 
&gt; - EFI_RNG_PROTOCOL should not be consumed *before* End-Of-Dxe, in the
&gt; variable SMM driver, because the provider RNG driver -- included in the
&gt; platform firmware -- may not have produced the RNG protocol *yet*. Note that
&gt; EFI_RNG_PROTOCOL may be produced by a UEFI driver that follows the UEFI
&gt; driver model, and not necessarily by a platform DXE driver. Therefore
&gt; EFI_RNG_PROTOCOL may become available first when platform BDS connects the
&gt; underlying device to the RNG driver, just before signaling End-of-Dxe.
&gt; 
&gt; From the above two restrictions (&quot;not after&quot; and &quot;not before&quot;) we get that
&gt; the variable SMM driver should consume EFI_RNG_PROTOCOL &quot;exactly at&quot;
&gt; End-of-Dxe. (In an End-of-Dxe event notification function.)
&gt; 
&gt; (2) All of the above said, I agree with Ard about CBC not requiring
&gt; cryptographically strong IVs, just unique IVs. (I&apos;m not even sure about the
&gt; diffusion / avalanche effect requirement for CBC IVs, but I&apos;m not equipped
&gt; enough at the moment to challenge the claim that diffusion is required --
&gt; diffusion will certainly not *hurt*.)
&gt; 
&gt; Therefore, if the dependency in the variable SMM driver can be reduced to
&gt; &quot;unique enough IV&quot; from &quot;cryptographically strong seed&quot;, then that&apos;s
&gt; definitely the way to go, in my opinion -- it would allow us to *not* solve
&gt; (= ignore) the &quot;strong seed for SMM&quot; problem altogether. And in DXE, modules
&gt; can simply consume EFI_RNG_PROTOCOL. (We have to be careful about DEPEXes
&gt; though -- again, EFI_RNG_PROTOCOL may become available only in early BDS
&gt; (just before End-of-Dxe), so e.g. drivers producing architectural UEFI
&gt; protocols should not use DEPEXes to wait for EFI_RNG_PROTOCOL, but protocol
&gt; notify functions.)

Got it. I didn&apos;t notice the driver model things. Thanks for explanations.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10373</commentid>
    <comment_count>28</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-08 10:42:02 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #21)
&gt; Started an email thread (cross-posted to edk2-devel and qemu-devel):
&gt; 
&gt; &quot;privileged entropy sources in QEMU/KVM guests&quot;
&gt; http://mid.mail-archive.com/03e769cf-a5ad-99ce-cd28-690e0a72a310@redhat.com
&gt; https://edk2.groups.io/g/devel/message/50191

Just FYI.

I did a quick porting of the Cpu Jitter Entropy code to edk2. I added it to VariableSmm to just generate an 8-byte random number at each boot. So far I got about 6K bytes data (boot to shell and then reset). Following is the entropy estimated by &apos;ent&apos;.

~$ ent random.bin
Entropy = 7.973469 bits per byte.

Maybe the data is not enough and I&apos;m not sure if it can be taken as high quality of entropy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10375</commentid>
    <comment_count>29</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-11-08 11:00:28 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #28)
&gt; (In reply to Laszlo Ersek from comment #21)
&gt; &gt; Started an email thread (cross-posted to edk2-devel and qemu-devel):
&gt; &gt; 
&gt; &gt; &quot;privileged entropy sources in QEMU/KVM guests&quot;
&gt; &gt; http://mid.mail-archive.com/03e769cf-a5ad-99ce-cd28-690e0a72a310@redhat.com
&gt; &gt; https://edk2.groups.io/g/devel/message/50191
&gt; 
&gt; Just FYI.
&gt; 
&gt; I did a quick porting of the Cpu Jitter Entropy code to edk2. I added it to
&gt; VariableSmm to just generate an 8-byte random number at each boot. So far I
&gt; got about 6K bytes data (boot to shell and then reset). Following is the
&gt; entropy estimated by &apos;ent&apos;.
&gt; 
&gt; ~$ ent random.bin
&gt; Entropy = 7.973469 bits per byte.
&gt; 
&gt; Maybe the data is not enough and I&apos;m not sure if it can be taken as high
&gt; quality of entropy.

&apos;ent&apos; is a useful tool, but it cannot distinguish true entropy from pseudorandomness, so its output should be taken with a grain of salt:

$ dd if=/dev/zero bs=2k count=1 |openssl enc -aes-128-ctr -nosalt -K 00000000000000000000000000000000 -iv 00000000000000000000000000000000 |ent
Entropy = 7.902219 bits per byte.

So while the sequence you are getting appears to be pseudorandom, it is hard to tell how deterministic it is between different boots on the same system, and between different systems built on the same silicon revision, etc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10376</commentid>
    <comment_count>30</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-08 19:17:20 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #29)
&gt; 
&gt; &apos;ent&apos; is a useful tool, but it cannot distinguish true entropy from
&gt; pseudorandomness, so its output should be taken with a grain of salt:
&gt; 
&gt; $ dd if=/dev/zero bs=2k count=1 |openssl enc -aes-128-ctr -nosalt -K
&gt; 00000000000000000000000000000000 -iv 00000000000000000000000000000000 |ent
&gt; Entropy = 7.902219 bits per byte.
&gt; 
&gt; So while the sequence you are getting appears to be pseudorandom, it is hard
&gt; to tell how deterministic it is between different boots on the same system,
&gt; and between different systems built on the same silicon revision, etc.

That&apos;s interesting. If it&apos;s hard to tell on two different systems, is it possible to measure how deterministic on the same system?

If the bios boot on the same system is deterministic, and we generate the random number at the same boot point (for example, in the VarialeSmm entry point), does it mean we always get the same (or low entropy) data sequence on different boots?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10378</commentid>
    <comment_count>31</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-11-09 03:17:45 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #30)
&gt; (In reply to Ard Biesheuvel from comment #29)
&gt; &gt; 
&gt; &gt; &apos;ent&apos; is a useful tool, but it cannot distinguish true entropy from
&gt; &gt; pseudorandomness, so its output should be taken with a grain of salt:
&gt; &gt; 
&gt; &gt; $ dd if=/dev/zero bs=2k count=1 |openssl enc -aes-128-ctr -nosalt -K
&gt; &gt; 00000000000000000000000000000000 -iv 00000000000000000000000000000000 |ent
&gt; &gt; Entropy = 7.902219 bits per byte.
&gt; &gt; 
&gt; &gt; So while the sequence you are getting appears to be pseudorandom, it is hard
&gt; &gt; to tell how deterministic it is between different boots on the same system,
&gt; &gt; and between different systems built on the same silicon revision, etc.
&gt; 
&gt; That&apos;s interesting. If it&apos;s hard to tell on two different systems, is it
&gt; possible to measure how deterministic on the same system?
&gt; 
&gt; If the bios boot on the same system is deterministic, and we generate the
&gt; random number at the same boot point (for example, in the VarialeSmm entry
&gt; point), does it mean we always get the same (or low entropy) data sequence
&gt; on different boots?

Yes, that is the risk. Early boot code that only accesses memory and SPI flash in a highly predictable manner is unlikely to display any jitter that is sufficient to gather a high quality seed in an acceptable amount of time.

One workaround could be to store a seed as a EFI variable, and update it at ReadyToBoot. Care should be taken though to avoid a &apos;first factory boot&apos; scenario where long-lived keys are generated when the system is booted the first time, before such a recorded seed exists.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10385</commentid>
    <comment_count>32</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-11 04:51:39 +0000</bug_when>
    <thetext>And such a variable should be locked from the OS (minimally for writing), should it not?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10386</commentid>
    <comment_count>33</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-11-11 05:06:56 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #32)
&gt; And such a variable should be locked from the OS (minimally for writing),
&gt; should it not?

Yes, I suppose it would make sense to make it a boot time variable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390</commentid>
    <comment_count>34</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-11-11 09:59:01 +0000</bug_when>
    <thetext>(In reply to Ard Biesheuvel from comment #33)
&gt; (In reply to Laszlo Ersek from comment #32)
&gt; &gt; And such a variable should be locked from the OS (minimally for writing),
&gt; &gt; should it not?
&gt; 
&gt; Yes, I suppose it would make sense to make it a boot time variable

My understanding is that the variable behaves like a random number pool used to increase entropy cross boots, right?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10415</commentid>
    <comment_count>35</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-11-13 04:22:56 +0000</bug_when>
    <thetext>Related patches on the list:

[edk2-devel] [PATCH] SecurityPkg/RngLibNull: add null version of RngLib
https://edk2.groups.io/g/devel/message/50432
msgid: &lt;20191112055545.3948-1-jian.j.wang@intel.com&gt;

[edk2-devel] [PATCH v2] MdePkg: add null version of RngLib
https://edk2.groups.io/g/devel/message/50562
msgid: &lt;20191113053529.7768-1-jian.j.wang@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11094</commentid>
    <comment_count>36</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 13:07:46 +0000</bug_when>
    <thetext>*** Bug 2143 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11343</commentid>
    <comment_count>37</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-02-20 11:34:17 +0000</bug_when>
    <thetext>Is this bug going to get fixed.  We all agreed that we can generally do better than timer for rng and so openssl should use rnglib instead of making its own.   More than anything this platform dependency (timerlib) is a hassle and breaks plans to finish the binary crypto module.  

Am I missing some part of the discussion  or is this just a case of getting the code in?  

Here is our solution which I think we all mostly agreed on.
https://github.com/microsoft/mu_tiano_plus/commit/6cf27acd3077ec82e4ba42a1af757afc20fbe117#diff-635afe8b785d50d4ba6e86bb5f0ee992</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12789</commentid>
    <comment_count>38</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-06-03 15:51:41 +0000</bug_when>
    <thetext>Related commit: c9af866cdd62 (&quot;MdePkg: add null version of RngLib&quot;, 2019-11-14).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13100</commentid>
    <comment_count>39</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-07-14 14:47:22 +0000</bug_when>
    <thetext>Just a check-in, where are we on this? It looks like there was a todo list.
  1) Use RngLib interface to generate random entropy in rand_pool
  2) Remove dependency on TimerLib in OpensslLib
  3) Add a new version of RngLib implemented by TimerLib
  4) Add a new version of RngLib implemented by EFI_RNG_PROTOCOL
  5) Add a NULL version of RngLib for build purpose

Is there anyone actively working towards this? We have a lot of this in Project MU as a reference. I see that a null verison of RngLib (#5) has been done c9af866cdd62 (thank you Lazlo). There is still the issue the BaseCryptLib/OpenSSL requires a timerlib and that it implements its own random functionality. I believe the consensus of this thread is that it should be replaced by a proper random library and platforms can decide their own entropy source. 

We have made the change to use RngLib and would propose the current RNG/NOISE functions are removed and replaced with this change. 

https://github.com/microsoft/mu_tiano_plus/commit/46d1613f91aae7860fcbd37bf2863880115d0c02
https://github.com/microsoft/mu_basecore/commit/ad051b380f3e89c2b0b1decc8bf425d06e355921

I can stage a patch series that does 1-4 if no one is actively working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13110</commentid>
    <comment_count>40</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-15 08:03:18 +0000</bug_when>
    <thetext>Hi Matthew,

I&apos;m not working on this, I&apos;d just like to point out that credit for commit c9af866cdd62 is due Jian; my only &quot;merit&quot; there is that I reviewed the patch, and mentioned it in comment 38.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13296</commentid>
    <comment_count>41</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-08-01 21:04:12 +0000</bug_when>
    <thetext>I would like double confirm on the randomness requirement.
According to https://software.intel.com/content/www/us/en/develop/blogs/the-difference-between-rdrand-and-rdseed.html, the RDSEED is a &quot;Non-deterministic random bit generator&quot;, while RDRAND is a &quot;Cryptographically secure pseudorandom number generator&quot;

Before this patch:
rand_pool_acquire_entropy()-&gt; RandGetSeed128()-&gt;MicroSecondDelay()+RandGetBytes()-&gt;GetRandomNoise64()-&gt;AsmReadTsc()+MicroSecondDelay().
rand_pool_add_nonce_data()-&gt;GetPerformanceCounter()+RandGetBytes()
It seems return TSC and TimerCounter.

After this patch:
rand_pool_acquire_entropy()-&gt;RandGetBytes()-&gt;GetRandomNumber64()-&gt;AsmRdRand64().
rand_pool_add_nonce_data()-&gt;RandGetBytes()
It becomes pseudorandom.

So the meaning of the function seems changed.
I have not checked the randomness requirement for those two functions yet.
But could anyone confirm that a pseudorandom value returned is OK?

Or should we use RDSEED for non-deterministic value?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13297</commentid>
    <comment_count>42</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-08-01 21:38:46 +0000</bug_when>
    <thetext>I have read openssl CPU entropy function.

rand\rand_lib.c
============
size_t rand_acquire_entropy_from_cpu(RAND_POOL *pool)
{
    size_t bytes_needed;
    unsigned char *buffer;

    bytes_needed = rand_pool_bytes_needed(pool, 1 /*entropy_factor*/);
    if (bytes_needed &gt; 0) {
        buffer = rand_pool_add_begin(pool, bytes_needed);

        if (buffer != NULL) {
            /* Whichever comes first, use RDSEED, RDRAND or nothing */
            if ((OPENSSL_ia32cap_P[2] &amp; (1 &lt;&lt; 18)) != 0) {
                if (OPENSSL_ia32_rdseed_bytes(buffer, bytes_needed)
                    == bytes_needed) {
                    rand_pool_add_end(pool, bytes_needed, 8 * bytes_needed);
                }
            } else if ((OPENSSL_ia32cap_P[1] &amp; (1 &lt;&lt; (62 - 32))) != 0) {
                if (OPENSSL_ia32_rdrand_bytes(buffer, bytes_needed)
                    == bytes_needed) {
                    rand_pool_add_end(pool, bytes_needed, 8 * bytes_needed);
                }
            } else {
                rand_pool_add_end(pool, 0, 0);
            }
        }
    }

    return rand_pool_entropy_available(pool);
}
============

Also, https://software.intel.com/content/www/us/en/develop/blogs/changes-to-rdrand-integration-in-openssl.html

Besides this patch, I suggest:
1) Add AsmRdSeed to BaseLib.
2) Update BaseRngLib to use AsmRdSeed() for the random number, if RdSeed is supported (CPUID BIT18)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13391</commentid>
    <comment_count>43</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-08-13 19:04:56 +0000</bug_when>
    <thetext>RDSEED request is in https://bugzilla.tianocore.org/show_bug.cgi?id=2897</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14242</commentid>
    <comment_count>44</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-11-05 20:17:57 +0000</bug_when>
    <thetext>PR https://github.com/tianocore/edk2/pull/938 for Use RngLib instead of TimerLib for OpensslLib. So, this issue can be closed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1872</bug_id>
          
          <creation_ts>2019-06-03 16:42:46 +0000</creation_ts>
          <short_desc>FSP related Python build script error log enhancement</short_desc>
          <delta_ts>2019-06-26 20:33:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dheeraj Varambally">dheeraj_varambally</reporter>
          <assigned_to name="Dheeraj Varambally">dheeraj_varambally</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>lavanya.c.palakshareddy</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>IntelFspPkg</cf_package>
    
    <cf_package>IntelFspWrapperPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7917</commentid>
    <comment_count>0</comment_count>
    <who name="Dheeraj Varambally">dheeraj_varambally</who>
    <bug_when>2019-06-03 16:42:46 +0000</bug_when>
    <thetext>During compilation of FSP for ICL\TGL based chipsets we run into several python script errors that generates a stack trace. It is tedious to walk thru the stack trace to figure out the cause of failure. Most often the input parameters fed to the python scripts are incorrect requiring us to fix it before recompilation. The functions defined in the python scripts have no documentation or code comments requiring lot of debug. This dramatically slows down our FSP integration time. We need all the python scripts involved in generating the FSP to do better sanity checks on the input parameters and flag meaningful error messages enabling us to fix the issue without extensive debug of the scripts. Here is an example error in GenFds.py that failed since the path to FSP_Rebased_S.fd was incorrect.
GenFds.py...
 : error C0DE: Tools code failure
	Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!

Traceback (most recent call last):
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\GenFds.py&quot;, line 328, in main
    GenFds.GenFd(&apos;&apos;, FdfParserObj, BuildWorkSpace, ArchList)
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\GenFds.py&quot;, line 442, in GenFd
    FdObj.GenFd()
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\Fd.py&quot;, line 140, in GenFd
    RegionObj.AddToBuffer (FdBuffer, self.BaseAddress, self.BlockSizeList, self.ErasePolarity, GenFdsGlobalVariable.ImageBinDict, self.vtfRawDict, self.DefineVarDict, Flag=Flag)
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\Region.py&quot;, line 139, in AddToBuffer
    FvObj.AddToBuffer(FvBuffer, FvBaseAddress, BlockSize, BlockNum, ErasePolarity, vtfDict, Flag=Flag)
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\Fv.py&quot;, line 132, in AddToBuffer
    FileName = FfsFile.GenFfs(MacroDict, FvParentAddr=BaseAddress, IsMakefile=Flag, FvName=self.UiFvName)
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\FfsFileStatement.py&quot;, line 156, in GenFfs
    sectList, align = section.GenSection(OutputDir, self.NameGuid, SecIndex, self.KeyStringList, None, Dict)
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\GuidSection.py&quot;, line 100, in GenSection
    ReturnSectList, align = Sect.GenSection(OutputPath, ModuleName, SecIndex, KeyStringList, FfsInf, Dict, IsMakefile=IsMakefile)
  File &quot;U:\Edk2\BP1.6Pkg\BaseTools\Source\Python\GenFds\FvImageSection.py&quot;, line 138, in GenSection
    if len (mws.getPkgPath()) == 0:
NameError: global name &apos;mws&apos; is not defined</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7936</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-05 12:01:53 +0000</bug_when>
    <thetext>Dheeraj, please provide some specific scripts that need improvement.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7939</commentid>
    <comment_count>2</comment_count>
    <who name="Dheeraj Varambally">dheeraj_varambally</who>
    <bug_when>2019-06-05 16:57:16 +0000</bug_when>
    <thetext>In addition to the scripts in the stack trace example shown above the following scripts needs to be reviewed and enhanced to add better error log (they have failed in the past during our FSP integration) based on the input parameters passed to them. Its not obvious what the scripts are looking for based on the failure signature.

RebaseAndPatchFspBinBaseAddress.py
GenCfgOpt.py
GenFds.py
SplitFspBin.py</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8159</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-06-24 05:13:20 +0000</bug_when>
    <thetext>GenFds.py issue is fixed at 370f16c5489609062d8ee0940f29f6c3393f1b68</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8164</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-24 11:59:30 +0000</bug_when>
    <thetext>closing per comment 3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8217</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-26 20:33:44 +0000</bug_when>
    <thetext>In terms of below 3 FSP scripts:
. edk2-platforms\Platform\Intel\MinPlatformPkg\Tools\Fsp\RebaseAndPatchFspBinBaseAddress.py
. edk2\IntelFsp2Pkg\Tools\SplitFspBin.py
. edk2\IntelFsp2Pkg\Tools\GenCfgOpt.py

I think latest version already verify all the input parameters and print error message if invalid.

Also GenFds.py was fixed by Bob already.

Submitter please verify latest scripts from open source and let us know if any particular case was not handled well and we can re-visit it again.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1152</bug_id>
          
          <creation_ts>2018-09-05 02:28:05 +0000</creation_ts>
          <short_desc>System crash when EXCLUSIVE open of PXE child (LoadFile) handle</short_desc>
          <delta_ts>2018-09-18 06:19:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Sriram">sriram-s</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fan.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>sriram-s</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4859</commentid>
    <comment_count>0</comment_count>
    <who name="Sriram">sriram-s</who>
    <bug_when>2018-09-05 02:28:05 +0000</bug_when>
    <thetext>Following is the scenario:

The UEFI PXE driver produces 2 child handles for IPv4 and IPv6 for each controller handle and has LoadFile installed on it. It also installs the SNP and opens it BY_DRIVER.

3A1: VlanConfig SimpleNetwork HIIConfigAccess AdapterInfo(AdapterInfo) FirmwareManagement(FirmwareManagement) NetworkInterfaceIdentifier31 ... DevicePath(..0,0x0)/MAC(...,0x1)) ...

3C8: SimpleNetwork PXEBaseCode LoadFile DevicePath(MAC(..,0x1)/Vlan(5)/IPv4(0.0.0.0))

3D0: SimpleNetwork PXEBaseCode LoadFile DevicePath(MAC(..,0x1)/Vlan(5)/IPv6(0000:0000:0000:0000:0000:0000:0000:0000))

Now there is a scenario where the system crashes if an application or driver attempts to do an EFI_OPEN_PROTOCOL_EXCLUSIVE OpenProtocol() on one of the LoadFile child handles. Since these SNP handles are created in PXE DBstart(), it make sense to uninstall these SNP protocol in PXE DBstop(), then these SNP handles are no longer valid after PXE DBstop. Possibly that&apos;s why system crashes: an EXCLUSIVE OpenProtocol() triggers DBstop(), but the handle is gone after driver binding stop() return, the DXE core doesn&apos;t know this and continue try to access something non-existent.

The original problem is coming from the Linux (RHEL or SLES) boot loader grub.efi. Grub opens the SNP (on the main handle with the MAC device path, identified by 3A1 in the above example) with EFI_OPEN_PROTOCOL_EXCLUSIVE after being downloaded to the system via PXE. 

When the system is configured with a VLAN for the MNP instance (via VlanConfig protocol or other means), the VLAN node is added to the two LoadFile PXE handles. Now Grub is not handling this VLAN node in the device path and so eventually ends up OpenProtocol() the child handle (instead of the parent handle with the MAC device path and SNP). This crashes the system.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4875</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-06 20:05:36 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4967</commentid>
    <comment_count>2</comment_count>
    <who name="">fan.wang</who>
    <bug_when>2018-09-14 03:48:14 +0000</bug_when>
    <thetext>The SNP installed in PXE is for special use and shouldn&apos;t be opened by other drivers with EXCLUSIVE. To avoid other calling by error, we will add a EXCLUSIVE attribute when PXE opening this SNP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5004</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-18 06:19:45 +0000</bug_when>
    <thetext>Fixed in commit cde5a72d365e (&quot;NetworkPkg: UefiPxeBcDxe: Add EXCLUSIVE attribute when opening SNP protocol installed by PXE.&quot;, 2018-09-17).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1619</bug_id>
          
          <creation_ts>2019-03-13 06:01:56 +0000</creation_ts>
          <short_desc>CLANG Build issues with CLANG version 8.0.0.0 (trunk 339469)</short_desc>
          <delta_ts>2019-03-20 20:59:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1618</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="sivaraman">sivaramann</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>madhans</cc>
    
    <cc>sivaramann</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6706</commentid>
    <comment_count>0</comment_count>
    <who name="sivaraman">sivaramann</who>
    <bug_when>2019-03-13 06:01:56 +0000</bug_when>
    <thetext>Hello:

Facing Issues when building stdlib in CLANG and attached here the issues and work around did for the same. Help to review and provide generic solution for the same

Error #1: while compiling Time.c it shows “sse register return with sse disabled” in the function difftime() which uses double.
If we remove the flag mno-sse in CC Flags for CLANG then it build fine.

Error #2: When an C file includes the base.h and Stdarg.h it throws the error 
/Stdlib/StdLib/Include/stdarg.h:56:29: error: typedef redefinition with different types (&apos;__builtin_va_list&apos; vs &apos;__builtin_ms_va_list&apos;)
typedef __builtin_va_list   va_list;
/Stdlib/MdePkg/Include/Base.h:652:30: note: previous definition is here
typedef __builtin_ms_va_list VA_LIST;
Changing the typedef __builtin_ms_va_list   va_list; in stdarg.h resolves this

Error #3: In multiple C files “__warn_references” used which is intern calling .stab directive which is not compatible for CLANG causing build error.
Kept #define __warn_references(sym,msg)    resolves this in line #51 of Stdlib\Include\sys\cdefs_aout.h

Error #4: In Syscalls.c function va_Utimes
/Stdlib/StdLib/LibC/Uefi/SysCalls.c:1428:3: error: &apos;va_start&apos; used in Win64 ABI function
Removing EFIAPI from the definition of va_Utimes resolving the issue.
Attached the changes for reference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6780</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 20:57:49 +0000</bug_when>
    <thetext>seems duplicate with bug 1618</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6781</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 20:59:39 +0000</bug_when>
    <thetext>change status to Resolved as duplicate

*** This bug has been marked as a duplicate of bug 1618 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1684</bug_id>
          
          <creation_ts>2019-04-05 01:56:59 +0000</creation_ts>
          <short_desc>ACPI table RAW section not included in Tcg2Smm FFS</short_desc>
          <delta_ts>2019-05-06 14:15:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7009</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-05 01:56:59 +0000</bug_when>
    <thetext>SecurityPkg/Tcg/Tcg2Smm/Tcg2Smm.inf specifies Tpm.asl in [Sources]. Most users of MinPlatformPkg include the TPM related modules into their flash file via MinPlatformPkg/Include/Fdf/CoreSecurityLateInclude.fdf where the INF statement is currently as follows:

INF  SecurityPkg/Tcg/Tcg2Smm/Tcg2Smm.inf

By default as a DXE_SMM_DRIVER type, Tcg2Smm will use the DXE_SMM_DRIVER rule defined in MinPlatformPkg/Include/Fdf/RuleInclude.fdf which does not specify how to handle a .asl source file:

[Rule.Common.DXE_SMM_DRIVER]
  FILE SMM = $(NAMED_GUID) {
    DXE_DEPEX DXE_DEPEX Optional       $(INF_OUTPUT)/$(MODULE_NAME).depex
    PE32      PE32                     $(INF_OUTPUT)/$(MODULE_NAME).efi
    UI        STRING=&quot;$(MODULE_NAME)&quot; Optional
    VERSION   STRING=&quot;$(INF_VERSION)&quot; Optional BUILD_NUM=$(BUILD_NUMBER)

Therefore, the check at runtime in Tcg2Smm.c for the ACPI table to be in the FFS file as a RAW section will fail.

The RuleOverride INF statement modifier should be applied to instead use the DXE_SMM_DRIVER.DRIVER_ACPITABLE rule in RuleInclude.fdf which specifies that the .asl file should be compiled and included as a RAW section in the FFS file.

This would look as follows:
  INF RuleOverride = DRIVER_ACPITABLE SecurityPkg/Tcg/Tcg2Smm/Tcg2Smm.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7010</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-05 01:58:21 +0000</bug_when>
    <thetext>Confirmed the issue on a system with a TPM present.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7011</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-05 01:59:56 +0000</bug_when>
    <thetext>Work in progress on devel-MinPlatform</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7380</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-06 14:15:54 +0000</bug_when>
    <thetext>Resolved in commit a6e500d7af41a72c0639d32db76f02cbeeb0d88a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1428</bug_id>
          
          <creation_ts>2019-01-04 12:26:27 +0000</creation_ts>
          <short_desc>Fix IScsiDxe Cleanup Sequence</short_desc>
          <delta_ts>2019-08-27 19:31:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1429</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashish Singhal">ashishsingha</reporter>
          <assigned_to name="Ashish Singhal">ashishsingha</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5987</commentid>
    <comment_count>0</comment_count>
    <who name="Ashish Singhal">ashishsingha</who>
    <bug_when>2019-01-04 12:26:27 +0000</bug_when>
    <thetext>During cleanup of IScsiDxe if initialization fails, some driver bindings are not uninstalled which leads to exceptino being hit in ollowing drivers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6049</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-10 19:45:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9316</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:31:43 +0000</bug_when>
    <thetext>Fixed in 15666b8cd0a2 (&quot;NetworkPkg/IScsiDxe: Use UEFILib APIs to uninstall protocols.&quot;, 2019-01-10).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9317</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:31:56 +0000</bug_when>
    <thetext>Setting status to RESOLVED|FIXED per comment 2.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1001</bug_id>
          
          <creation_ts>2018-07-06 12:46:12 +0000</creation_ts>
          <short_desc>Renaming Directory Fat32 Loses Directory</short_desc>
          <delta_ts>2018-11-07 02:44:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="David F">df7729</reporter>
          <assigned_to name="David F">df7729</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FatBinPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4239</commentid>
    <comment_count>0</comment_count>
    <who name="David F">df7729</who>
    <bug_when>2018-07-06 12:46:12 +0000</bug_when>
    <thetext>Hello,

Should have reported earlier but busy.   On FAT32 EFI System partition renaming a directory causes the directory to be lost (have to run chkdsk /f or fsck).   This is not affecting the VM&apos;s (OMVF) as they must have a newer or different version?  But on many physical machines, the problem exists.   

You can use our new BootIt UEFI then Scripting to test,  Install It so working from the EFI System FAT32 (or if using a UFD, should have same problem, although I didn&apos;t test on it), choose scripting from desktop.

md test
ren test test.001
exit

you&apos;ll find test is now gone and no test.001.

Files work fine and dirs work fine on some systems.  So maybe issue fixed here and there or others haven&apos;t updated?   I didn&apos;t look at the 1.06 code to see if there was a problem or one was fixed.  I figure you would be able to know or test faster.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4277</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-12 20:06:40 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4345</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-07-19 04:56:54 +0000</bug_when>
    <thetext>(In reply to David F from comment #0)
&gt; Hello,
&gt; 
&gt; Should have reported earlier but busy.   On FAT32 EFI System partition
&gt; renaming a directory causes the directory to be lost (have to run chkdsk /f
&gt; or fsck).   This is not affecting the VM&apos;s (OMVF) as they must have a newer
&gt; or different version?  But on many physical machines, the problem exists.   
&gt; 
&gt; You can use our new BootIt UEFI then Scripting to test,  Install It so
&gt; working from the EFI System FAT32 (or if using a UFD, should have same
&gt; problem, although I didn&apos;t test on it), choose scripting from desktop.
&gt; 
&gt; md test
&gt; ren test test.001
&gt; exit
&gt; 
&gt; you&apos;ll find test is now gone and no test.001.
&gt; 
&gt; Files work fine and dirs work fine on some systems.  So maybe issue fixed
&gt; here and there or others haven&apos;t updated?   I didn&apos;t look at the 1.06 code
&gt; to see if there was a problem or one was fixed.  I figure you would be able
&gt; to know or test faster.
&gt; 
&gt; Thanks.

Our QA cannot reproduce this issue in latest code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4810</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-09-03 05:10:25 +0000</bug_when>
    <thetext>Assign back to submitter to confirm whether the latest code has the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5519</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-07 02:44:22 +0000</bug_when>
    <thetext>change status to resolved/WORKSFORME since we can&apos;t reproduce it. 
Need submitter to provide more detail steps to debug if he still can reproduce on latest code.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1939</bug_id>
          
          <creation_ts>2019-06-26 06:59:15 +0000</creation_ts>
          <short_desc>Compilation Error during edk2-test compile of edk2-test-stable201904</short_desc>
          <delta_ts>2021-04-13 01:31:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Edhay">edhaya.chandran</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gononic963</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8202</commentid>
    <comment_count>0</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2019-06-26 06:59:15 +0000</bug_when>
    <thetext>When I compile edk2-test with commit id : 7db6ecd85f4e133e82cc3a70985f13f65c526602
(edk2-test-stable201904), I get the following errors:

=============================================================================

edhcha01@edhcha01-VirtualBox:~/sct_workspace/edk2$ ./SctPkg/build.sh AARCH64 GCC
Target: AARCH64
Build: other
TOOLCHAIN is GCC49
Toolchain prefix: GCC49_AARCH64_PREFIX=aarch64-linux-gnu-
Initializing workspace
Loading previous configuration from /home/edhcha01/sct_workspace/edk2/Conf/BuildEnv.sh
WORKSPACE: /home/edhcha01/sct_workspace/edk2
EDK_TOOLS_PATH: /home/edhcha01/sct_workspace/edk2/BaseTools
CONF_PATH: /home/edhcha01/sct_workspace/edk2/Conf
using prebuilt tools
Building GenBin
make: Entering directory &apos;/home/edhcha01/sct_workspace/edk2-test/uefi-sct/SctPkg/Tools/Source/GenBin&apos;
Attempting to detect ARCH from &apos;uname -m&apos;: x86_64
Detected ARCH of X64 using uname.
gcc -o /home/edhcha01/sct_workspace/edk2/BaseTools/Source/C/bin/GenBin  GenBin.o -L/home/edhcha01/sct_workspace/edk2/BaseTools/Source/C/libs 
make: Leaving directory &apos;/home/edhcha01/sct_workspace/edk2-test/uefi-sct/SctPkg/Tools/Source/GenBin&apos;
/home/edhcha01/sct_workspace/edk2
Build environment: Linux-4.15.0-51-generic-x86_64-with-Ubuntu-18.04-bionic
Build start time: 17:55:06, Jun.25 2019

WORKSPACE        = /home/edhcha01/sct_workspace/edk2
ECP_SOURCE       = /home/edhcha01/sct_workspace/edk2/EdkCompatibilityPkg
EDK_SOURCE       = /home/edhcha01/sct_workspace/edk2/EdkCompatibilityPkg
EFI_SOURCE       = /home/edhcha01/sct_workspace/edk2
EDK_TOOLS_PATH   = /home/edhcha01/sct_workspace/edk2/BaseTools
CONF_PATH        = /home/edhcha01/sct_workspace/edk2/Conf


Architecture(s)  = AARCH64
Build target     = DEBUG
Toolchain        = GCC49

Active Platform          = /home/edhcha01/sct_workspace/edk2/SctPkg/UEFI/UEFI_SCT.dsc

Processing meta-data ...

build.py...
/home/edhcha01/sct_workspace/edk2/SctPkg/TestCase/UEFI/EFI/BootServices/ImageServices/BlackBoxTest/Dependency/InvalidImage1/InvalidImage1.inf(...): error 5000: COMPONENT_TYPE is not given
	
 

- Failed -
Build end time: 17:55:10, Jun.25 2019
Build total time: 00:00:04

Could not build the UEFI SCT package

	
==============================================================================



I have used the following procedure to compile:

https://github.com/tianocore/edk2-test/blob/master/uefi-sct/HowToBuild/How%20to%20build%20SCT%20in%20UDK2017.txt

Build Instructions for UEFI SCTII AARCH64 (Linux)

I have used UDK2018 branch for EDK2.


Analysis: 
In the file: 
SctPkg/TestCase/UEFI/EFI/BootServices/ImageServices/BlackBoxTest/Dependency/InvalidImage1/InvalidImage1.inf
COMPONENT_TYPE has been changed to MODULE_TYPE
But the code is still referring to COMPONENT_TYPE</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8220</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-06-26 20:54:23 +0000</bug_when>
    <thetext>Edhay, could you please try the build with latest EDK2 or edk2-stable201905 ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8226</commentid>
    <comment_count>2</comment_count>
      <attachid>359</attachid>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2019-06-27 00:39:55 +0000</bug_when>
    <thetext>Created attachment 359
Compile log</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8227</commentid>
    <comment_count>3</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2019-06-27 00:45:21 +0000</bug_when>
    <thetext>Hi Eric, 
   I have tried the compilation with both  edk2 and edk2-stable201905.
In both cases the compilation fails in other files, I have attached the log.

Please note: edk2test version remains edk2-test-stable201904 in both cases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8228</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-06-27 01:02:00 +0000</bug_when>
    <thetext>The build issue mentioned in log(2019-06-27 00:39:55 EDT) should be fixed in edk2-test with 60892af72d5a0b8d6f337ed7f8ee0ab4d704eabd in the middle of June. Please try it or latest commit.

The failure reason is edk2(edk2-stable201905) has removed IPF support, such as Guid/SalSystemTable.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8230</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2019-06-27 01:28:24 +0000</bug_when>
    <thetext>Hi Eric, 
Thank you for the response. 

1. Do you mean that for EDK2 I have to use edk2-stable201905 or latest only and I cannot use UDK2018, if I want to use the latest edk2-test?

2. May I know what is your plan to release the next stable version of edk2-test?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8242</commentid>
    <comment_count>6</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:16:55 +0000</bug_when>
    <thetext>	
supreeth, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8253</commentid>
    <comment_count>7</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-06-27 20:31:03 +0000</bug_when>
    <thetext>Hi Edhay, 

Generally, edk2-test will has a tag one or two months after the edk2 stable tag.
In this case, edk2(edk2-stable201905) makes the incompatible change to drop IPF, edk2-test has to fix the build issue in June.

edk2(edk2-stable201903) also has one change related to COMPONENT_TYPE, edk2-test has to align with it(edk2-stable201904). It is the reason that you report edk2-test don&apos;t work with UDK2018.

Hope you can use edk2-test now. 

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8274</commentid>
    <comment_count>8</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2019-06-28 05:17:53 +0000</bug_when>
    <thetext>Hi Eric,

    Thank you so much for your response.
Yes, we will update the version of EDK2 in our project to use  edk2-test.

With Warm Regards,
Edhay</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9073</commentid>
    <comment_count>9</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-19 21:31:18 +0000</bug_when>
    <thetext>I would like to close this ticket next week if no objection is received.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9391</commentid>
    <comment_count>10</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-29 04:32:25 +0000</bug_when>
    <thetext>(In reply to eric.jin from comment #9)
&gt; I would like to close this ticket next week if no objection is received.

closing it per comment 9.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>359</attachid>
            <date>2019-06-27 00:39:55 +0000</date>
            <delta_ts>2019-06-27 00:39:55 +0000</delta_ts>
            <desc>Compile log</desc>
            <filename>compile_ed2master_edk2-stable201905.txt</filename>
            <type>text/plain</type>
            <size>39915</size>
            <attacher name="Edhay">edhaya.chandran</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1429</bug_id>
          
          <creation_ts>2019-01-04 12:30:16 +0000</creation_ts>
          <short_desc>Provide library functions that abstract driver model protocols uninstallation.</short_desc>
          <delta_ts>2019-08-27 19:31:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1428</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashish Singhal">ashishsingha</reporter>
          <assigned_to name="Ashish Singhal">ashishsingha</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5988</commentid>
    <comment_count>0</comment_count>
    <who name="Ashish Singhal">ashishsingha</who>
    <bug_when>2019-01-04 12:30:16 +0000</bug_when>
    <thetext>Uefilib provides functions that abstract driver model protocols installation. Need to provide functions for protocol uninstallation to keep things seemless.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6048</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-10 19:45:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6089</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-15 00:59:09 +0000</bug_when>
    <thetext>Fix it at edk2 0290fca20fe18f44fd5e5490722e1ffc493470de</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1019</bug_id>
          
          <creation_ts>2018-07-17 05:06:04 +0000</creation_ts>
          <short_desc>INF File Specification 1.26 specifies INF_VERSION 1.25</short_desc>
          <delta_ts>2018-09-07 01:56:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Alexei">Alexei.Fedorov</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4294</commentid>
    <comment_count>0</comment_count>
    <who name="Alexei">Alexei.Fedorov</who>
    <bug_when>2018-07-17 05:06:04 +0000</bug_when>
    <thetext>EDK II Module Information (INF) File Specification 1.26 lists INF_VERSION = 0x00010019 or INF_VERSION = 1.25 on pages #37, 38, 91, 95, 97, 166, 167, 171, ... etc. Should it be changed 0x0001001A and 1.26?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4318</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-18 21:05:21 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4877</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-07 01:56:04 +0000</bug_when>
    <thetext>in the latest spec, the version already be updated to 1.27 and 0x0001001B.

spec link: https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Draft-Specification</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1510</bug_id>
          
          <creation_ts>2019-02-03 05:45:30 +0000</creation_ts>
          <short_desc>Possible overflow the Nodesize variable</short_desc>
          <delta_ts>2023-01-10 16:44:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yitzhak Briskman">yitzhak.briskman</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>amachiry</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6279</commentid>
    <comment_count>0</comment_count>
    <who name="Yitzhak Briskman">yitzhak.briskman</who>
    <bug_when>2019-02-03 05:45:30 +0000</bug_when>
    <thetext>edk2\StdLib\LibC\StdLib\Malloc.c : Lines: 84-119
Code Snippet:
void *
malloc(size_t Size)
{
  CPOOL_HEAD   *Head;
  void         *RetVal;
  EFI_STATUS    Status;
  UINTN         NodeSize;

  if( Size == 0) {
    errno = EINVAL;   // Make errno diffenent, just in case of a lingering ENOMEM.
    DEBUG((DEBUG_ERROR, &quot;ERROR malloc: Zero Size\n&quot;));
    return NULL;
  }

NodeSize = (UINTN)(Size + sizeof(CPOOL_HEAD));

  DEBUG((DEBUG_POOL, &quot;malloc(%d): NodeSz: %d&quot;, Size, NodeSize));

  Status = gBS-&gt;AllocatePool( EfiLoaderData, NodeSize, (void**)&amp;Head);
  if( Status != EFI_SUCCESS) {
    RetVal  = NULL;
    errno   = ENOMEM;
    DEBUG((DEBUG_ERROR, &quot;\nERROR malloc: AllocatePool returned %r\n&quot;, Status));
  }
  else {
    assert(Head != NULL);
    // Fill out the pool header
    Head-&gt;Signature = CPOOL_HEAD_SIGNATURE;
    Head-&gt;Size      = NodeSize;

    // Add this node to the list
    (void)InsertTailList(&amp;MemPoolHead, (LIST_ENTRY *)Head);

    // Return a pointer to the data
    RetVal          = (void*)Head-&gt;Data;
    DEBUG((DEBUG_POOL, &quot; Head: %p, Returns %p\n&quot;, Head, RetVal));
  }

  return RetVal;
}


If the &quot;size&quot; variable of the malloc function is under the control of an attacker (See finding 25 where size is under attacker control), then it is possible to overflow the Nodesize variable, thereby allocating less than specified &quot;size&quot; value which might lead to heap overflow vulnerabilities. There is no bound check on the Nodesize variable. This finding is applicable only if this particular stdlib (../edk2/StdLib/LibC/StdLib) implementation (attached to the code base) is used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6828</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-21 05:41:29 +0000</bug_when>
    <thetext>StdLib is supposed to be used only by applications in shell, all of which are meant for debug, diagnosis and/or test purpose, not for product UEFI BIOS. Any issue in it will not be taken as security issue but just normal bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6843</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-21 15:43:20 +0000</bug_when>
    <thetext>Thanks for the additional analysis!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6844</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-21 15:44:07 +0000</bug_when>
    <thetext>Jian, can you please make this BZ public then? Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6845</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-21 18:50:48 +0000</bug_when>
    <thetext>Transfer to normal bug</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7594</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:28:58 +0000</bug_when>
    <thetext>Jaben, please help to investigate, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16967</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 18:06:23 +0000</bug_when>
    <thetext>Reassign owner

Patch review email:

https://edk2.groups.io/g/devel/message/79538</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16987</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 23:16:29 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-libc/commit/40de116f18fbb1ac19acc06fabe598441d2488d8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1547</bug_id>
          
          <creation_ts>2019-02-20 18:50:01 +0000</creation_ts>
          <short_desc>Windows 10 bugcheck if VT-d context cache and IOTLB cache are not always flushed</short_desc>
          <delta_ts>2019-05-13 20:15:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6462</commentid>
    <comment_count>0</comment_count>
      <attachid>259</attachid>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-02-20 18:50:01 +0000</bug_when>
    <thetext>Created attachment 259
Workaround in VtdReg.c

Hardware Environment
 * Board: Kaby Lake RVP3
 * Hard disk: SATA SSD
 * Display: eDP panel
 * OS: Windows 10 Professional 1803 OS build 17133.1

Boots successfully:
  * Edk2 - 3ccf5a8a41b42fc5116fdc03bc2a273f7f3c5179

Boot fails with BSOD:
  * Edk2 - 4ad5f597153c7cb20a968236c2c7d6ff01994350

  * BSOD observed: DRIVER_VERIFIER_DMA_VIOLATION

Current workaround (patch attached):

Unconditionally call the InvalidateContextCache() and InvalidateIOTLB() functions in InvalidateVtdIOTLBGlobal() in IntelSiliconPkg/Feature/VTd/IntelVTdDxe/VtdReg.c when building with KabylakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6463</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-02-20 18:52:42 +0000</bug_when>
    <thetext>This was filed against KabylakeOpenBoardPkg as that is the only platform currently known to observe this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6485</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:09:21 +0000</bug_when>
    <thetext>Assign to package owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6597</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-01 00:53:58 +0000</bug_when>
    <thetext>change to zhichao to investigate it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7515</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-05-13 20:15:40 +0000</bug_when>
    <thetext>fixed at
30a888b5a0a01eb9ce79b46af9937e997a30ae5c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>259</attachid>
            <date>2019-02-20 18:50:01 +0000</date>
            <delta_ts>2019-02-20 18:50:01 +0000</delta_ts>
            <desc>Workaround in VtdReg.c</desc>
            <filename>vtdreg_kabylakeopenboardpkg_workaround.patch</filename>
            <type>application/octet-stream</type>
            <size>869</size>
            <attacher name="Michael Kubacki">michael.a.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1006</bug_id>
          
          <creation_ts>2018-07-10 09:03:06 +0000</creation_ts>
          <short_desc>Need to update LZMA module to LZMA SDK latest version 18.05.</short_desc>
          <delta_ts>2018-10-09 21:50:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Younas khan">pmdyounaskhan786</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4255</commentid>
    <comment_count>0</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-07-10 09:03:06 +0000</bug_when>
    <thetext>Need to update LZMA module to LZMA SDK latest version 18.05.

https://www.7-zip.org/sdk.html

Thank you,
Younas.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4270</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-07-11 21:06:13 +0000</bug_when>
    <thetext>assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4348</commentid>
    <comment_count>2</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-07-19 06:43:44 +0000</bug_when>
    <thetext>Any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4478</commentid>
    <comment_count>3</comment_count>
    <who name="Younas khan">pmdyounaskhan786</who>
    <bug_when>2018-08-02 00:12:34 +0000</bug_when>
    <thetext>Liming,
Any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5056</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-21 04:35:36 +0000</bug_when>
    <thetext>Patch has been sent in https://lists.01.org/pipermail/edk2-devel/2018-August/029091.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5204</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-09 21:50:25 +0000</bug_when>
    <thetext>Fix it at 5ec5a236d1fe64b2c40075b6738b74bdf7e1acdc..50431b9cc70cd5a084ebd85436bfdd6e2e4b89a7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1550</bug_id>
          
          <creation_ts>2019-02-20 19:58:51 +0000</creation_ts>
          <short_desc>Windows 10 bugcheck if MemoryTest() is executed in BdsPlatform.c</short_desc>
          <delta_ts>2019-06-04 03:00:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>michael.a.kubacki</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6466</commentid>
    <comment_count>0</comment_count>
      <attachid>260</attachid>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-02-20 19:58:51 +0000</bug_when>
    <thetext>Created attachment 260
Workaround in BdsPlatform.c

Hardware Environment
 * Board: Kaby Lake RVP3
 * Hard disk: SATA SSD
 * Display: eDP panel
 * OS: Windows 10 Professional 1803 OS build 17133.1

Boot fails with BSOD:
  * Edk2 - 1a35dd723bbf9333a11f6397dac77f1a5dadd3c5
  * Edk2-platforms - 28ace192e321a8958bae590ff164a3ff544397e6

  * BSOD observed: SYSTEM_THREAD_EXCEPTION_NOT_HANDLED

Current workaround (patch attached):

Do not call MemoryTest() in PlatformBootManagerBeforeConsole() in MinPlatformPkg/Bds/Library/DxePlatformBootManagerLib/BdsPlatform.c.

The KabylakeOpenBoardPkg is currently using the instance of gEfiGenericMemTestProtocolGuid produced by MdeModulePkg/Universal/MemoryTest/NullMemoryTestDxe/NullMemoryTestDxe.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6484</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:08:46 +0000</bug_when>
    <thetext>Assign to package owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6596</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-01 00:53:54 +0000</bug_when>
    <thetext>change to zhichao to investigate it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6680</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-03-10 23:34:05 +0000</bug_when>
    <thetext>(In reply to michael.a.kubacki from comment #0)
&gt; Created attachment 260 [details]
&gt; Workaround in BdsPlatform.c
&gt; 
&gt; Hardware Environment
&gt;  * Board: Kaby Lake RVP3
&gt;  * Hard disk: SATA SSD
&gt;  * Display: eDP panel
&gt;  * OS: Windows 10 Professional 1803 OS build 17133.1
&gt; 
&gt; Boot fails with BSOD:
&gt;   * Edk2 - 1a35dd723bbf9333a11f6397dac77f1a5dadd3c5
&gt;   * Edk2-platforms - 28ace192e321a8958bae590ff164a3ff544397e6
&gt; 
&gt;   * BSOD observed: SYSTEM_THREAD_EXCEPTION_NOT_HANDLED
&gt; 
&gt; Current workaround (patch attached):
&gt; 
&gt; Do not call MemoryTest() in PlatformBootManagerBeforeConsole() in
&gt; MinPlatformPkg/Bds/Library/DxePlatformBootManagerLib/BdsPlatform.c.
&gt; 
&gt; The KabylakeOpenBoardPkg is currently using the instance of
&gt; gEfiGenericMemTestProtocolGuid produced by
&gt; MdeModulePkg/Universal/MemoryTest/NullMemoryTestDxe/NullMemoryTestDxe.inf

I cannot get this version of windows. But I have tried some closer versions:
Windows 10 Enterprise 1803 OS build 17133.1
Windows 10 Professional 1803 OS build 17134.1
Windows 10 1709
Cannot duplicate this issue.
My code version:
  * edk2 - 1a35dd723bbf9333a11f6397dac77f1a5dadd3c5
  * edk2-platform - 28ace192e321a8958bae590ff164a3ff544397e6
  * edk2-non-osi - d1db14ea1b234d03493d1b8f289e730b58a7c854
  * FSP - d75b5372b5f4066b4c83909afef8b8b0c4a17835
  * apply patch in https://bugzilla.tianocore.org/show_bug.cgi?id=1547</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7510</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-13 11:38:28 +0000</bug_when>
    <thetext>Issue root caused and it was platform configuration issue, not MemoryTest driver related. This can be closed as INVALID.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7511</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-13 13:23:13 +0000</bug_when>
    <thetext>(In reply to Chasel from comment #4)
&gt; Issue root caused and it was platform configuration issue, not MemoryTest
&gt; driver related. This can be closed as INVALID.

This was intended to track a fix for the symptom (memory test failure) not limited to the memory test code itself. I am fine with it being closed as invalid but the KabylakeOpenBoardPkg configuration change to change the SPD table used needs to be made soon to resolve it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7516</commentid>
    <comment_count>6</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-13 21:11:13 +0000</bug_when>
    <thetext>Re-opening this one and will send code review to fix from KabylakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7742</commentid>
    <comment_count>7</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-22 01:21:39 +0000</bug_when>
    <thetext>commit 452cdb85ba19ecc3bf865b2312c233d9d3381771 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon May 13 20:00:09 2019 +0800

    KabylakeOpenBoardPkg: Fixed system hang caused by MemoryTest.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1550

    OS hang due to non-existing memory reported as usable memory.
    There are 2 different RVP3 boards and one with 4GB memory down
    implementation while another one with 8GB. Since rest of the
    configurations are exactly the same, board detection is added
    to the same RVP3 BoardInitLib and only SPD policy assigned
    differently.

    This also fixed below 2 issues:
    1. Fixed build failuire when PcdMultiBoardSupport == FALSE.
       (Wrong Pcd TokenSpace used in DxeBoardAcpiTableLib.inf)
    2. Always failed to read SPD from DIMM because SpdAddressTable
       policy was not updated properly. Fixed by a notify callback
       when policy PPI installed.

    Test: Verified both RVP3 boards can boot to Windows.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>260</attachid>
            <date>2019-02-20 19:58:51 +0000</date>
            <delta_ts>2019-02-20 19:58:51 +0000</delta_ts>
            <desc>Workaround in BdsPlatform.c</desc>
            <filename>bdsplatform_kabylakeopenboardpkg_workaround.patch</filename>
            <type>application/octet-stream</type>
            <size>1322</size>
            <attacher name="Michael Kubacki">michael.a.kubacki</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1095</bug_id>
          
          <creation_ts>2018-08-20 01:07:37 +0000</creation_ts>
          <short_desc>Support non-stop mode of heap guard and null pointer detection</short_desc>
          <delta_ts>2018-08-29 19:49:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4640</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-08-20 01:07:37 +0000</bug_when>
    <thetext>From QA team:
When enabling heap guard and null pointer detection in UEFI code, the bios may enter into dead loop in exception handler (default behavior) if an issue is detected. And the remaining testing will be totally blocked. This will cost QA more time to get final result. It&apos;s suggested to add non-stop mode for those features.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4695</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:19:20 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4725</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-08-27 20:03:26 +0000</bug_when>
    <thetext>My team hit this issue as well. We solved it for our SMM test as shown in this commit. 

https://github.com/Microsoft/MS_UEFI/commit/c048283f9ff4f5004002ba40fb16def634964fc0

We are just finishing our non SMM test which i can post a link to once it is published to GitHub.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4749</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-08-29 19:47:32 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #2)
&gt; My team hit this issue as well. We solved it for our SMM test as shown in
&gt; this commit. 
&gt; 
&gt; https://github.com/Microsoft/MS_UEFI/commit/
&gt; c048283f9ff4f5004002ba40fb16def634964fc0
&gt; 
&gt; We are just finishing our non SMM test which i can post a link to once it is
&gt; published to GitHub.

The changes is now at 09afd9a42a7ff719bcb5b464a2b2dea7eb3e5e7b.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4750</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-08-29 19:49:34 +0000</bug_when>
    <thetext>Pushed at 09afd9a42a7ff719bcb5b464a2b2dea7eb3e5e7b.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1925</bug_id>
          
          <creation_ts>2019-06-20 01:45:00 +0000</creation_ts>
          <short_desc>Build cache need more comprehensive info to explain why cache miss</short_desc>
          <delta_ts>2019-08-29 15:17:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8131</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-20 01:45:00 +0000</bug_when>
    <thetext>Current build cache only print which driver module has cache miss as below. But don&apos;t tell which level/module/lib cause the cache hash mismatch. 
...
cache miss: k:\edk2\MdeModulePkg\Bus\Usb\UsbBusDxe\UsbBusDxe.inf[X64]
...

It&apos;s very useful to tell what is the first mismatch hash:
Is it the Platform hash or Package hash or library hash or module self hash or Module&apos;s source files hash. 

It&apos;s better to follow the hashing algorithm steps in edk2\BaseTools\Source\Python\AutoGen\AutoGen.py GenModuleHash() to print the first mismatch hash owner info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8132</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-06-20 01:46:38 +0000</bug_when>
    <thetext>Confirm and take it.
This issue need enhance the hash info in cache database and not only store the finial hash value but also store the whole hash chain info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9279</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:49:10 +0000</bug_when>
    <thetext>Has this been fixed at 56c786b0a9fd4f08b1f0bc10b7718a7577cb0146?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9335</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:33:31 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Has this been fixed at 56c786b0a9fd4f08b1f0bc10b7718a7577cb0146?

To clarify: Steven, please answer this question. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9355</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 21:21:21 +0000</bug_when>
    <thetext>Yes. This issue is fixed at 56c786b0a9fd4f08b1f0bc10b7718a7577cb0146.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1398</bug_id>
          
          <creation_ts>2018-12-13 00:31:08 +0000</creation_ts>
          <short_desc>Log Extended data to report status code when a boot option fails</short_desc>
          <delta_ts>2019-02-19 20:34:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1539</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5855</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-13 00:31:08 +0000</bug_when>
    <thetext>Use case is similar to 1397.  It allows for a better logging facility and error determination if a boot option fails.  

https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Library/UefiBootManagerLib/BmBoot.c#L1842

and

https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Library/UefiBootManagerLib/BmBoot.c#L1806</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5864</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-13 04:10:38 +0000</bug_when>
    <thetext>Sean,
PI Spec has a change to report the boot status through status code, which is proposed by Laszlo from Redhat.
I am not sure if the accordingly change is already in the PI Spec and code implementation.
But that can solve the problem.


Dandan, can you confirm?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5868</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-12-13 07:51:48 +0000</bug_when>
    <thetext>See &lt;https://mantis.uefi.org/mantis/view.php?id=1885&gt;. (I don&apos;t think I can offer more than a Mantis link in the public bugzilla.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5869</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-13 08:47:43 +0000</bug_when>
    <thetext>Laszlo, cannot thank you enough!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5872</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:10:10 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6371</commentid>
    <comment_count>5</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-15 03:56:48 +0000</bug_when>
    <thetext>Email patch is at
https://lists.01.org/pipermail/edk2-devel/2019-February/036735.html

Patches are also available at: 
https://github.com/dandanbi/edk2/commits/ExtendedStatusCodeV1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6392</commentid>
    <comment_count>6</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-19 03:35:47 +0000</bug_when>
    <thetext>Fix at:
https://github.com/tianocore/edk2/commit/2b005f41fdf1a5783eed0d0304c8d9c114acea68
https://github.com/tianocore/edk2/commit/c2cf8720a5aad74230767a1f11bade2d86de3745</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1835</bug_id>
          
          <creation_ts>2019-05-22 05:48:41 +0000</creation_ts>
          <short_desc>&quot;edksetup.bat ReBuild&quot; fail on &quot;echo.&quot; of Makefile on Windows (NMAKE : fatal error U1045: spawn failed : Permission denied)</short_desc>
          <delta_ts>2022-02-11 08:24:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bin.Lain">bin_601</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7749</commentid>
    <comment_count>0</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2019-05-22 05:48:41 +0000</bug_when>
    <thetext>When install GnuWin32 on Windows, &quot;echo.&quot; will cause build fail.
Becuase it will use &quot;C:\Program Files (x86)\GnuWin32\bin\echo.exe&quot;, not use internal. 

It can change &quot;echo.&quot; to &quot;echo;&quot; follow  https://stackoverflow.com/questions/20712307/echo-fails-in-make-on-windows


Error Message: 
    NMAKE : fatal error U1045: spawn failed : Permission denied
    Stop.
    NMAKE : fatal error U1077: &apos;if&apos; : return code &apos;0x1&apos;


edk2\BaseTools\Source\C\Makefile(29):

libs: $(LIBRARIES)
	@echo.
	@echo ######################
	@echo # Build libraries
	@echo ######################</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7877</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 20:18:18 +0000</bug_when>
    <thetext>Bob, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8309</commentid>
    <comment_count>2</comment_count>
    <who name="Bin.Lain">bin_601</who>
    <bug_when>2019-07-01 22:17:09 +0000</bug_when>
    <thetext>Hi all,

  Sorry, I make a mistake. 
  I found there is a folder which name &quot;echo&quot; in PATH variable list to cause this isse. 
  Not GnuWin32 echo.exe. 

  ex: PATH=XXX;C:\Program Files (x86)\Vim\vim81;C:\Program Files (x86)\GnuWin32\bin;D:\Bat\
  there is a &quot;echo&quot; folder in D:\Bat folder.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18335</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-11 08:24:25 +0000</bug_when>
    <thetext>Close this bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1297</bug_id>
          
          <creation_ts>2018-11-05 00:59:59 +0000</creation_ts>
          <short_desc>BaseTools ConvertFceToStructurePcd script should report the warning message when the found file is not .h</short_desc>
          <delta_ts>2018-11-28 19:37:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5459</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-05 00:59:59 +0000</bug_when>
    <thetext>ConvertFceToStructurePcd script bases on the build output vfr.lst to search the struct definition and its header file. If the struct is not defined in .h header file, ConvertFceToStructurePcd script should report the warning. For below case, TEST_SETUP is defined in Test.vfr. The script should report the warning, not use Test.h. 

For example:
#line 182 &quot;Test.h&quot;
#line 55 &quot;Test.vfr&quot;

typedef struct {
  UINT8 TestOne;
} TEST_SETUP;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5460</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-05 01:00:25 +0000</bug_when>
    <thetext>Assign it to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5496</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 03:20:17 +0000</bug_when>
    <thetext>assign to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5713</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-28 19:37:07 +0000</bug_when>
    <thetext>edk2 commit 591a44c02d92fcb9f1ec0950714d20c5da283d38</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1731</bug_id>
          
          <creation_ts>2019-04-18 05:46:38 +0000</creation_ts>
          <short_desc>ECC reports 1 error in UefiCpuPkg</short_desc>
          <delta_ts>2019-08-06 01:35:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2052</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7177</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-18 05:46:38 +0000</bug_when>
    <thetext>Error Code:9002
Error Message: The function headers should follow Doxygen special documentation blocks in section 2.3.5
File: C:\ECC\Edk2R9\UefiCpuPkg\Application\Cpuid\Cpuid.c
LineNo: 708
Other Message: No doxygen tags in comment  
SHA-1: 079141ebe7f1bf5f85a0c7f1c43f77c44844b1bd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7188</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:04:55 +0000</bug_when>
    <thetext>Package owner to help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8794</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-06 01:35:05 +0000</bug_when>
    <thetext>More clear description for the same issue has been reported. https://bugzilla.tianocore.org/show_bug.cgi?id=2052 

close this one.

*** This bug has been marked as a duplicate of bug 2052 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1632</bug_id>
          
          <creation_ts>2019-03-19 03:03:46 +0000</creation_ts>
          <short_desc>SdMmcPciHcDxe driver fails to detect SD card on OVMF platform with SD card enabled</short_desc>
          <delta_ts>2022-02-10 21:50:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6749</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-03-19 03:03:46 +0000</bug_when>
    <thetext>SdMmcPciHcDxe driver fails to start on OVMF platform with SD card enabled. Below are the reproduce steps in my side:

$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -t CLANG38 -a IA32 -a X64 -b DEBUG -DDEBUG_ON_SERIAL_PORT
$ dd if=/dev/null of=/home/jshi19/wksp_efi/edk2/Build/rootfs/sd.img bs=1M seek=16
$ sudo qemu-system-x86_64 -m 5120 -smp 1 -pflash ~/wksp_efi/edk2-fork/Build/Ovmf3264/DEBUG_CLANG38/FV/OVMF.fd -global e1000.romfile=&quot;&quot; -machine q35 -serial mon:stdio -display none --net none -drive if=none,id=mydrive,file=/home/jshi19/wksp_efi/edk2/Build/rootfs/sd.img -device sdhci-pci,id=sdhci0 -device sd-card,id=sdcard0,drive=mydrive

... ...
Slot[0] Base Clock Frequency: 52MHz
BaseClkFreq 52MHz Divisor 65 ClockFreq 400Khz
SdCardIdentification: Found a SD device at slot [0]
SdCardSetBusMode: Switch to AccessMode 1 ClockFreq 50 BusWidth 4 fails! The Switch response is 0x0
... ...

From the above boot log, the SdCardSetBusMode() function fails.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6750</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-03-19 03:13:53 +0000</bug_when>
    <thetext>Hello Laszlo,
I&apos;m trying to test the SD Card on Qemu with OVMF firmware. I&apos;m using above qemu command to enable the SD card. Could you help to take a look whether my &quot; -device sdhci-pci,id=sdhci0 -device sd-card...&quot; command is correct?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6751</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-03-19 03:19:08 +0000</bug_when>
    <thetext>Forgot to mention that the OvmfPkgIa32X64 need add the SD related modules before build. Below is my example:

diff --git a/OvmfPkg/OvmfPkgIa32X64.dsc b/OvmfPkg/OvmfPkgIa32X64.dsc
@@ -947,3 +947,7 @@
       NULL|SecurityPkg/Library/HashInstanceLibSha512/HashInstanceLibSha512.inf
   }
 !endif
+
+  MdeModulePkg/Bus/Pci/SdMmcPciHcDxe/SdMmcPciHcDxe.inf
+  MdeModulePkg/Bus/Sd/SdDxe/SdDxe.inf
+  MdeModulePkg/Bus/Sd/EmmcDxe/EmmcDxe.inf
diff --git a/OvmfPkg/OvmfPkgIa32X64.fdf b/OvmfPkg/OvmfPkgIa32X64.fdf
@@ -393,6 +393,10 @@ INF  SecurityPkg/Tcg/Tcg2Config/Tcg2ConfigDxe.inf
 !endif
 !endif

+INF  MdeModulePkg/Bus/Pci/SdMmcPciHcDxe/SdMmcPciHcDxe.inf
+INF  MdeModulePkg/Bus/Sd/SdDxe/SdDxe.inf
+INF  MdeModulePkg/Bus/Sd/EmmcDxe/EmmcDxe.inf
+</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6772</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-20 07:04:05 +0000</bug_when>
    <thetext>Hi Steven,

unfortunately I won&apos;t be able to help much here. I&apos;ve never used the emulated SD card of QEMU in the past, and I don&apos;t know what we should expect of it / how we should construct the command line for it. Your comment 2 also shows that OVMF has never tried to run the edk2 SD drivers on QEMU&apos;s device model.

From the MAINTAINERS file of QEMU, it seems like Phil offers &quot;Odd Fixes&quot; for the device model(s):

SD (Secure Card)
M: Philippe Mathieu-Daudé &lt;f4bug@amsat.org&gt;
S: Odd Fixes
F: include/hw/sd/sd*
F: hw/sd/core.c
F: hw/sd/sd*
F: tests/sd*

I&apos;ve added Phil to the CC list now (using his RH email); perhaps he can help. (I think he might need some time before he gets to this BZ comment though.) If it&apos;s urgent, please try to ask on the qemu-devel mailing list. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6849</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:13:20 +0000</bug_when>
    <thetext>Steven, could you help to work on it. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18322</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 21:50:45 +0000</bug_when>
    <thetext>No needs to fix it. Pls reopen it if there is new need.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1515</bug_id>
          
          <creation_ts>2019-02-05 12:21:31 +0000</creation_ts>
          <short_desc>UefiCpuPkg/MpInitLib: allow platforms to provide a dedicated hint about the online (as opposed to: maximum) CPU count</short_desc>
          <delta_ts>2020-05-05 18:33:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1512</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1512</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>stephano</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6297</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-05 12:21:31 +0000</bug_when>
    <thetext>In commit 6e1987f19af7 (&quot;UefiCpuPkg/MpInitLib: wait no longer than necessary for initial AP startup&quot;, 2016-11-29), we allowed platforms to set PcdCpuMaxLogicalProcessorNumber dynamically to the exact number of online CPUs in the system, and to set PcdCpuApInitTimeOutInMicroSeconds to a very long time.

In effect this would make MpInitLib wait precisely until all CPUs reported in. This was very useful on QEMU, where the VCPUs could suffer from scheduling jitter (i.e. a timeout-based wait in MpInitLib wasn&apos;t *robust*), and the online VCPU count was also available from QEMU up-front.

The feature was utilized in OvmfPkg, in the direct child commit 45a70db3c3a5 (&quot;OvmfPkg/PlatformPei: take VCPU count from QEMU and configure MpInitLib&quot;, 2016-11-29).

The issue with this solution is that it abuses PcdCpuMaxLogicalProcessorNumber, and it is not compatible with CPU hotplug. The PCD says *maximum* logical processor number in the name, i.e. the count that is possible if the topology is fully populated. For supporting CPU hotplug, a platform should set the PCD to the maximum count enabled by the topology -- however, if the platform *also* knows the initial online CPU count, then it should be able to continue instructing MpInitLib to wait exactly as long as necessary (until the online CPU count is reached, regardless of a timeout).

On the surface, this seems as simple as:
(1) adding another dynamic PCD to &quot;UefiCpuPkg.dec&quot;,
(2) modifying WakeUpAP() to pass the new PCD to TimedWaitForApFinish().

Ray, Eric, do you agree with that?

Also: is my understanding correct that, if the online count is strictly smaller than PcdCpuMaxLogicalProcessorNumber, that will cause no problems for UefiCpuPkg modules, generally speaking?

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7592</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:27:03 +0000</bug_when>
    <thetext>Ray, please help to investigate, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8427</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:49:26 +0000</bug_when>
    <thetext>Bug Triage: We think this is a reasonable feature request. Please work with Laszlo on a design.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9937</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-08 07:28:16 +0000</bug_when>
    <thetext>Posted:

* [qemu-devel] [PATCH 0/4]
  hw/i386: pass &quot;MachineState.smp.max_cpus&quot; to OVMF

  http://mid.mail-archive.com/20191008105259.5378-1-lersek@redhat.com

* [edk2-devel] [PATCH 0/4]
  UefiCpuPkg, OvmfPkg: separate PCDs for boot CPU count vs. max CPU count

  http://mid.mail-archive.com/20191008112714.6215-1-lersek@redhat.com
  https://edk2.groups.io/g/devel/message/48562</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9994</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-10 07:31:02 +0000</bug_when>
    <thetext>Posted

[edk2-devel] [PATCH v2 0/2]
UefiCpuPkg/MpInitLib: introduce PcdCpuBootLogicalProcessorNumber

http://mid.mail-archive.com/20191010112952.7187-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/48722</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10005</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-11 17:33:02 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
&gt; Posted
&gt; 
&gt; [edk2-devel] [PATCH v2 0/2]
&gt; UefiCpuPkg/MpInitLib: introduce PcdCpuBootLogicalProcessorNumber
&gt; 
&gt; http://mid.mail-archive.com/20191010112952.7187-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/48722

Pushed as commit range a7e2d20193e8..778832bcad33.

This BZ should remain open for now, because soon I&apos;m going to post a new version of the OvmfPkg patches too (see comment 3), in order to put the new AP enumeration from MpInitLib to use.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10180</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-10-22 18:17:27 +0000</bug_when>
    <thetext>Posted

[edk2-devel] [PATCH v2 0/3]
OvmfPkg: distinguish boot CPU count from possible CPU count

http://mid.mail-archive.com/20191022221554.14963-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/49364</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10998</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-29 12:30:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)
&gt; Posted
&gt; 
&gt; [edk2-devel] [PATCH v2 0/3]
&gt; OvmfPkg: distinguish boot CPU count from possible CPU count
&gt; 
&gt; http://mid.mail-archive.com/20191022221554.14963-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/49364

Merged via &lt;https://github.com/tianocore/edk2/pull/319&gt;; commit range c8b8157e126a..83357313dd67.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12376</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 18:33:54 +0000</bug_when>
    <thetext>*** Bug 251 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1854</bug_id>
          <alias>CVE-2021-28212</alias>
          <creation_ts>2019-05-28 21:45:42 +0000</creation_ts>
          <short_desc>Buffer overflow in modules AcpiPlatform</short_desc>
          <delta_ts>2024-03-11 13:36:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kevinj</cc>
    
    <cc>kraxel</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7832</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-28 21:45:42 +0000</bug_when>
    <thetext>(From Iyer, Priya B)

Exploiting this vulnerability allows an attacker to corrupt memory with a controlled data at every boot of the system.
It&apos;s relieves an attacker from the need of writing to the flash to perform malicious activity at every boot.
Thus, a persistent backdoor, which can survive the OS reinstallation, can be builded even if Boot Guard and(or) BIOS Guard are ON.

Module location: edk2\Vlv2TbltDevicePkg\AcpiPlatform\AcpiPlatform.c

Let&apos;s look at `AcpiPlatformEntryPoint`.
Starting on the line 1217 sections with GUID {7e374e25-8e01-4fee-87f2-390c23c606cd} being readed:
------------------------------------------------------------------------------------------
1217:	while (!EFI_ERROR (Status)) {
1218:	    CurrentTable = NULL;
1219:
1220:	    Status = FwVol-&gt;ReadSection (
1221:	                      FwVol,
1222:	                      &amp;gEfiAcpiTableStorageGuid,
1223:	                      EFI_SECTION_RAW,
1224:	                      Instance,
1225:	                      (VOID **) &amp;CurrentTable,
1226:	                      (UINTN *) &amp;Size,
1227:	                      &amp;FvStatus
1228:	                      );
------------------------------------------------------------------------------------------

Because `CurrentTable` variable is null, `ReadSection` function will allocate a buffer with size equal to the section size and will save the pointer to this buffer in the `CurrentTable` variable.

So, `CurrentTable` variable contains a pointer to the buffer which has a predictable length.

After section reading, `CurrentTable` is passed as an argument to the function `PlatformUpdateTables`:
------------------------------------------------------------------------------------------
1240:	AcpiStatus = PlatformUpdateTables (CurrentTable);
------------------------------------------------------------------------------------------

In this function a signature check is perfomed, and if the signature is equal to EFI_ACPI_OSFR_TABLE_SIGNATURE, then variable read operations are perfomed:
------------------------------------------------------------------------------------------
201:	EFI_STATUS
202:	PlatformUpdateTables (
203:	  IN OUT EFI_ACPI_COMMON_HEADER  *Table
204:	  )
.........................................
318:	switch (Table-&gt;Signature) {
.........................................
482:	case EFI_ACPI_OSFR_TABLE_SIGNATURE:
483:		//
484:		// Get size of OSFR variable.
485:		//
486:	      OcurMfgStringBufferSize = 0;
487:	      Status = gRT-&gt;GetVariable (
488:	                      gACPIOSFRMfgStringVariableName,
489:	                      &amp;gACPIOSFRMfgStringVariableGuid,
490:	                      NULL,
491:	                      &amp;OcurMfgStringBufferSize,
492:	                      NULL
493:	                      );
494:	      if (Status != EFI_BUFFER_TOO_SMALL) {
495:	        //
496:	        // Variable must not be present on the system.
497:	        //
498:	        return EFI_UNSUPPORTED;
499:	      }
500:	
501:	      //
502:	      // Allocate memory for variable data.
503:	      //
504:	      OcurMfgStringBuffer = AllocatePool (OcurMfgStringBufferSize);
505:	      Status = gRT-&gt;GetVariable (
506:	                      gACPIOSFRMfgStringVariableName,
507:	                      &amp;gACPIOSFRMfgStringVariableGuid,
508:	                      NULL,
509:	                      &amp;OcurMfgStringBufferSize,
510:	                      OcurMfgStringBuffer
511:	                      );
512:	      if (!EFI_ERROR (Status)) {
513:	        OcurModelStringBufferSize = 0;
514:	        Status = gRT-&gt;GetVariable (
515:	                        gACPIOSFRModelStringVariableName,
516:	                        &amp;gACPIOSFRModelStringVariableGuid,
517:	                        NULL,
518:	                        &amp;OcurModelStringBufferSize,
519:	                        NULL
520:	                        );
521:	        if (Status != EFI_BUFFER_TOO_SMALL) {
522:	          //
523:	          // Variable must not be present on the system.
524:	          //
525:	          return EFI_UNSUPPORTED;
526:	        }
527:
528:	        //
529:	        // Allocate memory for variable data.
530:	        //
531:	        OcurModelStringBuffer = AllocatePool (OcurModelStringBufferSize);
532:	        Status = gRT-&gt;GetVariable (
533:	                        gACPIOSFRModelStringVariableName,
534:	                        &amp;gACPIOSFRModelStringVariableGuid,
535:	                        NULL,
536:	                        &amp;OcurModelStringBufferSize,
537:	                        OcurModelStringBuffer
538:	                        );
539:	        if (!EFI_ERROR (Status)) {
540:	          OcurRefDataBlockBufferSize = 0;
541:	          Status = gRT-&gt;GetVariable (
542:	                          gACPIOSFRRefDataBlockVariableName,
543:	                          &amp;gACPIOSFRRefDataBlockVariableGuid,
544:	                          NULL,
545:	                          &amp;OcurRefDataBlockBufferSize,
546:	                          NULL
547:	                          );
548:	          if (Status == EFI_BUFFER_TOO_SMALL) {
549:	            //
550:	            // Allocate memory for variable data.
551:	            //
552:	            OcurRefDataBlockBuffer = AllocatePool (OcurRefDataBlockBufferSize);
553:	            Status = gRT-&gt;GetVariable (
554:	                            gACPIOSFRRefDataBlockVariableName,
555:	                            &amp;gACPIOSFRRefDataBlockVariableGuid,
556:	                            NULL,
557:	                            &amp;OcurRefDataBlockBufferSize,
558:	                            OcurRefDataBlockBuffer
559:	                            );
560:	          }
------------------------------------------------------------------------------------------

EFI Variables with GUID&apos;s `gACPIOSFRMfgStringVariableGuid`, `gACPIOSFRModelStringVariableGuid`, `gACPIOSFRRefDataBlockVariableGuid` get readed according to the following scheme:
1. `GetVariable` method gets called with `Data` argument equal to null. Size of the EFI variable will received in the variable passed as `DataSize` argument.
2. Buffer with size equal to the EFI variable size gets allocated
3. `GetVariable` method gets called with `Data` argument equal to the pointer to the newly allocated buffer

After the second call of `GetVariable` function, EFI variable data gets copied to the allocated buffer (size of the buffer equals to the size of this EFI variable)

An attacker can set EFI variables simply using the interface provided by an OS or by triggering some SMI&apos;s. 
Thus, an attacker can control variables `OcurRefDataBlockBuffer`, `OcurRefDataBlockBufferSize`, `OcurModelStringBuffer`, `OcurModelStringBufferSize`, `OcurMfgStringBuffer`, `OcurMfgStringBufferSize`.

Let&apos;s look further:
------------------------------------------------------------------------------------------
561:          OsfrTable = (EFI_ACPI_OSFR_TABLE *) Table;
........................................................
              //
              // pOcurObject = Table + 44 (`Table` points to the buffer with predictable length)
              //
572:          pOcurObject = (EFI_ACPI_OSFR_OCUR_OBJECT *)((UINTN) OsfrTable + sizeof (EFI_ACPI_OSFR_TABLE_FIXED_PORTION) + \
573:            sizeof (UINT32));  
........................................................
              //
              // Unsecure write! `OcurMfgStringBufferSize` and `OcurMfgStringBuffer` are controllable!
              // `pOcurObject` is the pointer to the buffer with predictable length
              //
583:          CopyMem ((UINTN *)((UINTN) pOcurObject + sizeof (EFI_ACPI_OSFR_OCUR_OBJECT)), OcurMfgStringBuffer, \
584:            OcurMfgStringBufferSize);
              //
              // Unsecure write! `OcurModelStringBufferSize` and `OcurModelStringBuffer` are controllable!
              // `pOcurObject` is the pointer to the buffer with predictable length
              //
585:          CopyMem ((UINTN *)((UINTN) pOcurObject + sizeof (EFI_ACPI_OSFR_OCUR_OBJECT) + OcurMfgStringBufferSize), \
586:            OcurModelStringBuffer, OcurModelStringBufferSize);
              //
              // Unsecure write! `OcurRefDataBlockBufferSize` and `OcurRefDataBlockBuffer` are controllable!
              // `pOcurObject` is the pointer to the buffer with predictable length
              //
587:          if (OcurRefDataBlockBufferSize &gt; 0) {
588:            CopyMem ((UINTN *)((UINTN) pOcurObject + sizeof (EFI_ACPI_OSFR_OCUR_OBJECT) + OcurMfgStringBufferSize + \
589:            OcurModelStringBufferSize),OcurRefDataBlockBuffer, OcurRefDataBlockBufferSize);
------------------------------------------------------------------------------------------

As we can see, three memory copy operations are perfomed.
Data from EFI variables copied to the `pOcurObject`, which actually equals to the address of the buffer allocated by `ReadSection` function at line 1220 (plus 44).
And there is no size checks!!! 

Thus, an attacker can overflow the buffer allocated by `ReadSection` funtion at line 1220 just by setting three EFI variables with GUID&apos;s `gACPIOSFRMfgStringVariableGuid`, `gACPIOSFRModelStringVariableGuid`, `gACPIOSFRRefDataBlockVariableGuid` with summary size above then OSFR ACPI section saved on the flash.

Because an attacker can set these EFI variables as Non-Volatile, buffer overflow can occur at every boot of the system!
As I mentioned earlier, it&apos;s allows an attacker to build a persistent backdoor, which can survive the OS reinstallation, even if Boot Guard and(or) BIOS Guard are ON.
Impact
A buffer overflow which may allow an attacker to build a persistent backdoor, which can survive the OS reinstallation, can be builded even if Boot Guard and(or) BIOS Guard are ON.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7833</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-28 21:49:58 +0000</bug_when>
    <thetext>Mike agreed to take a look at this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9804</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:43:43 +0000</bug_when>
    <thetext>CVE-2019-14561 (share with BZ1990)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11085</commentid>
    <comment_count>3</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:54:20 +0000</bug_when>
    <thetext>infosec 2/5/2020 - given copy-paste nature of code, give one more month to assess if this pattern exists in other platforms.  If not, then open.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11087</commentid>
    <comment_count>4</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-02-05 12:56:28 +0000</bug_when>
    <thetext>According to Jian&apos;s last comment, the CVE number is shared with 1990, but 1990 has received a lot more attention and has patches, whereas this one doesn&apos;t.

Can the same patches be used? Should they have the same owners?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11918</commentid>
    <comment_count>5</comment_count>
      <attachid>501</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-03-30 11:12:42 +0000</bug_when>
    <thetext>Created attachment 501
v1

Solution attached.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13013</commentid>
    <comment_count>6</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:53:38 +0000</bug_when>
    <thetext>Patch has been available for 3 month embargo. 

Jian, this one is ready for advisory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13035</commentid>
    <comment_count>7</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-07-02 12:16:02 +0000</bug_when>
    <thetext>(In reply to John Mathews from comment #6)
&gt; Patch has been available for 3 month embargo. 
&gt; 
&gt; Jian, this one is ready for advisory.

Ok. Un-embargo it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13186</commentid>
    <comment_count>8</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-27 15:15:58 +0000</bug_when>
    <thetext>Moving the status to &quot;IN_PROGRESS&quot;, since a patch exists.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15189</commentid>
    <comment_count>9</comment_count>
      <attachid>659</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-03-03 11:48:03 +0000</bug_when>
    <thetext>Created attachment 659
CVE .json file

I have attached the .json file for CVE classification. Please review and provide feedback, especially for the version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15299</commentid>
    <comment_count>10</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-03-12 16:08:47 +0000</bug_when>
    <thetext>Please assign a release this issue is observed in, so I can update the .json file and assign a CVE-ID to this bug. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15542</commentid>
    <comment_count>11</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-04-07 12:17:02 +0000</bug_when>
    <thetext>A CVE-ID has been assigned to this bug. Please review the .json file again, especially the version this bug is observed in and inform me when you plan to publicly disclose this bug, so we know when to submit this CVE back to MITRE. Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18821</commentid>
    <comment_count>12</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-04-18 14:20:15 +0000</bug_when>
    <thetext>This patch looks to be upstreamed already can this be moved to closed and made public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22778</commentid>
    <comment_count>13</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2024-03-11 13:36:17 +0000</bug_when>
    <thetext>Minnowboard products are EoL / out of support. Not upstreaming fixes to Vlv2TbltDevicePkg anymore. Closing this. Won&apos;t publish anything.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>501</attachid>
            <date>2020-03-30 11:12:42 +0000</date>
            <delta_ts>2020-03-30 11:12:42 +0000</delta_ts>
            <desc>v1</desc>
            <filename>0001-Vlv2TbltDevicePkg-AcpiPlatform-drop-OSFR-support-CVE.patch</filename>
            <type>text/plain</type>
            <size>15674</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>659</attachid>
            <date>2021-03-03 11:48:03 +0000</date>
            <delta_ts>2021-03-03 11:48:03 +0000</delta_ts>
            <desc>CVE .json file</desc>
            <filename>1854.json</filename>
            <type>application/json</type>
            <size>913</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1751</bug_id>
          
          <creation_ts>2019-04-26 05:58:02 +0000</creation_ts>
          <short_desc>ECC report errors on account of analyze special characters</short_desc>
          <delta_ts>2019-05-07 22:21:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7270</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-26 05:58:02 +0000</bug_when>
    <thetext>In case that a C function body contains the string of L&apos;&apos;, L&apos;\&quot;&apos;, L&quot;\&quot;&quot;,
 L&apos;&apos;&apos; or L&quot;&quot;&quot;, ECC tool running under python3 interpreter will report
error. The antlr4 module misidentified this character</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7316</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-28 01:47:54 +0000</bug_when>
    <thetext>Zhiju will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7417</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-07 22:21:20 +0000</bug_when>
    <thetext>fixed at 0cb3f77153b7fde612ed49dddd986cf8421be7ba</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1222</bug_id>
          
          <creation_ts>2018-10-03 03:56:43 +0000</creation_ts>
          <short_desc>TianoCore Bugzilla instance: make the home page title more specific</short_desc>
          <delta_ts>2019-08-26 18:29:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Stephano Cetola">stephano</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5168</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-10-03 03:56:43 +0000</bug_when>
    <thetext>Currently the Home page at &lt;https://bugzilla.tianocore.org/&gt; presents itself with the title &quot;Bugzilla Main Page&quot;. (This applies to both the HTML title which is usually shown in the browser window&apos;s title bar, and the rendered page content itself, which says at the top, &quot;Bugzilla – Main Page&quot;.)

Please update both to say &quot;TianoCore Bugzilla Main page&quot;. When trying to locate the browser window (or tab) in a window (or tab) list, &quot;Bugzilla Main Page&quot; is not selective enough.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5232</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:10:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9249</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-26 12:24:30 +0000</bug_when>
    <thetext>Sent an email to the Bugzilla website contractor.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9255</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-26 18:29:32 +0000</bug_when>
    <thetext>Title changed. Happy tab browsing.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1535</bug_id>
          
          <creation_ts>2019-02-19 08:19:51 +0000</creation_ts>
          <short_desc>Build fail when Hii Pcd is a Structure PCD</short_desc>
          <delta_ts>2019-02-25 00:49:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6399</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-19 08:19:51 +0000</bug_when>
    <thetext>If there is a HII structured pcd, build will fail. This is a regression issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6432</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:30:55 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6519</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-25 00:49:09 +0000</bug_when>
    <thetext>fixed on 2cfb9d0f1a10546d15bcf9979407988fc6904bd6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1967</bug_id>
          
          <creation_ts>2019-07-08 20:38:48 +0000</creation_ts>
          <short_desc>BaseLib.h linked list macros should define &quot;delete safe iterator loop&quot; instead of having EFI_LIST_FOR_EACH_SAFE defined numerous places in edk2 code</short_desc>
          <delta_ts>2019-08-01 22:58:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1659</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8387</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-07-08 20:38:48 +0000</bug_when>
    <thetext>Lots of copy and paste of list iterator macros and none in a common/logical place like BaseLib.h.  
  

Search code tree for EFI_LIST_FOR_EACH_SAFE and find that it is defined in numerous places.  

Ehci (dxe and pei), xhci, ufs, ramdisk



Also EFI_LIST_FOR_EACH is also copied numerous places.  

HddPasswordSmm, HddPasswordDxe, RamDisk, Ehci (dxe and PEI).  


If this macro is a good iterator pattern then we should remove private macro definitions and create it in BaseLib.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8414</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:15:43 +0000</bug_when>
    <thetext>Bug Triage: this is a good code cleanup request. Assign to Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8726</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-01 22:58:06 +0000</bug_when>
    <thetext>Duplicated report.

*** This bug has been marked as a duplicate of bug 1659 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1040</bug_id>
          
          <creation_ts>2018-07-20 02:49:00 +0000</creation_ts>
          <short_desc>PcdFmpDeviceSystemResetRequired could be removed</short_desc>
          <delta_ts>2018-07-28 09:41:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4364</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-07-20 02:49:00 +0000</bug_when>
    <thetext>Use Attributes to know whether reset is required and PcdFmpDeviceSystemResetRequired could be removed from https://github.com/tianocore/edk2-staging/tree/FmpDevicePkg-master and https://github.com/tianocore/edk2-staging/tree/FmpDevicePkg-UDK2018.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4416</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:11:43 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4452</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-07-28 09:41:36 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2-staging/commit/99cbc9992060b16aeb4a7d8d3767be90bb3a742e and https://github.com/tianocore/edk2-staging/commit/cd9db75081240283239e774812f3d7674c84a350.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1339</bug_id>
          
          <creation_ts>2018-11-20 01:13:27 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Pci/IdeBusDxe</short_desc>
          <delta_ts>2019-07-03 01:49:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5641</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 01:13:27 +0000</bug_when>
    <thetext>It&apos;s not used by any platform.
AHCI is very popular now. So IdeBusDxe is no longer needed in new platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5650</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-20 04:03:43 +0000</bug_when>
    <thetext>Hi Ray,

I don&apos;t object to removing IdeBusDxe. However, we should be clearler why we can do that.

We can remove IdeBusDxe because the replacement driver stack (see below) is backward compatible, and it supports IDE.

The replacement driver stack consists of:

- a platform-dependent EFI_IDE_CONTROLLER_INIT_PROTOCOL implementation
  (although nowadays a central one exists too,
  MdeModulePkg/Bus/Pci/SataControllerDxe)

- MdeModulePkg/Bus/Ata/AtaAtapiPassThru/AtaAtapiPassThru.inf

- MdeModulePkg/Bus/Ata/AtaBusDxe/AtaBusDxe.inf

(See for example commit b82802b83f06, &quot;OvmfPkg: enable SATA controller&quot;, 2015-09-22.)

Old (possibly virtual) platforms will still require IDE support for a while (such as the &quot;pc&quot; machine type of QEMU), but thankfully, the above modern driver stack offers that as well.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5651</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 04:11:47 +0000</bug_when>
    <thetext>Laszlo,
Thanks for your comments. I agree the replacement driver stack should be provided here and in final commit message.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6427</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:03:46 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7407</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:55:06 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8349</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:49:10 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1552</bug_id>
          
          <creation_ts>2019-02-21 00:01:41 +0000</creation_ts>
          <short_desc>Add new library to provide cmos related actions</short_desc>
          <delta_ts>2019-07-03 01:14:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6472</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-21 00:01:41 +0000</bug_when>
    <thetext>Cmos read/write actions are common actions for bios code, propose to add new library to provide these actions. With this library, the platform code not needs to provides their own implementation separately.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6482</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:06:55 +0000</bug_when>
    <thetext>Assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8333</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-03 01:14:24 +0000</bug_when>
    <thetext>SHA-1: ffaa0b2bcd8bb3152a3d97e95831a1797cd26dcb

* Platform/Intel: Add Cmos related modules to BoardModulePkg

https://bugzilla.tianocore.org/show_bug.cgi?id=1552

Add Cmos related libraries to BoardModulePkg. Totally two
library have been added, one is CmosAccessLib and the other
is PlatformCmosAccessLib. PlatformCmosAccessLib will be used
by CmosAccessLib.

These two libraries provide the generic operations for CMOS
access.

APIs exports by PlatformCmosAccessLib include:
  PlatformCmosGetEntry
  PlatformCmosGetNmiState

APIs exports by CmosAccessLib include:
  CmosRead8
  CmosWrite8
  CmosRead16
  CmosWrite16
  CmosRead32
  CmosWrite32
  CmosInit

Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Cc: Sai Chaganty &lt;rangasai.v.chaganty@intel.com&gt;
Cc: Oram Isaac W &lt;isaac.w.oram@intel.com&gt;
Sign-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1057</bug_id>
          
          <creation_ts>2018-07-25 17:11:24 +0000</creation_ts>
          <short_desc>FvSimpleFileSystem driver leaks memory on read</short_desc>
          <delta_ts>2018-07-26 21:04:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>vladimir.olovyannikov</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4400</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-07-25 17:11:24 +0000</bug_when>
    <thetext>FvSimpleFileSystem on read always allocates a FileBuffer.
It never frees it. This causes memory leaks. It is especially bad for multiple reading lines of UEFI Shell scripts line-by-line by Shell. In some cases memory leak can exceed 1GB. Submitted a fix for review.

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4409</commentid>
    <comment_count>1</comment_count>
      <attachid>186</attachid>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-07-26 00:26:45 +0000</bug_when>
    <thetext>Created attachment 186
Proposed fix

Proposed patch to fix the leak issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4414</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:06:17 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4429</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-07-26 21:04:26 +0000</bug_when>
    <thetext>The patch has already been reviewed and pushed by Star at:
https://github.com/tianocore/edk2/commit/b5bd3ed64898db1088a9468446a0d2d0dc7185e8

Change the Assignee to Star as well.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>186</attachid>
            <date>2018-07-26 00:26:45 +0000</date>
            <delta_ts>2018-07-26 00:26:45 +0000</delta_ts>
            <desc>Proposed fix</desc>
            <filename>0001-MdeModulePkg-Fix-memory-leak-in-FvSimpleFileSystem-d.patch</filename>
            <type>text/plain</type>
            <size>1634</size>
            <attacher name="Vladimir Olovyannikov">vladimir.olovyannikov</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1458</bug_id>
          
          <creation_ts>2019-01-15 03:03:08 +0000</creation_ts>
          <short_desc>[ResetUtilityLib] Add ResetSystemWithSubtype API.</short_desc>
          <delta_ts>2019-04-28 20:05:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6091</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-15 03:03:08 +0000</bug_when>
    <thetext>Please refer to the change in:
https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Library/ResetUtilityLib/ResetUtility.c

For now, it violates the UEFI 2.7 spec because spec says &quot;ResetData is only valid if ResetStatus is something other than EFI_SUCCESS unless the ResetType is EfiResetPlatformSpecific where a minimum amount of ResetData is always required&quot;.
The change can be made if the future UEFI spec allows such change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6144</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:40:24 +0000</bug_when>
    <thetext>bug scrub: assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7303</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:32:32 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7326</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-28 20:05:15 +0000</bug_when>
    <thetext>finished at
06aaf2f82cd1cd6a45e826cf33666cb979cd9950..0851d7a53a1d7db853a0c553df95708923961418</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1890</bug_id>
          
          <creation_ts>2019-06-10 11:14:09 +0000</creation_ts>
          <short_desc>Move IntelSiliconPkg from edk2 repo to edk2-platforms repo</short_desc>
          <delta_ts>2019-06-24 21:26:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7959</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 11:14:09 +0000</bug_when>
    <thetext>RFC https://edk2.groups.io/g/devel/message/41215 has been sent. 

This BZ is for code change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7960</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 11:14:47 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8173</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-24 21:26:30 +0000</bug_when>
    <thetext>edk2 370f16c5489609062d8ee0940f29f6c3393f1b68..48c921a79f0fbb477046cf3b0bf71a2dd42e0c74

edk2-platform f87b5c8a6b4b8401a490f4f100f412425b295e5a..bb556a89c69bd6f8a6ee0aa9d43550a47fc808cb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1356</bug_id>
          
          <creation_ts>2018-11-22 08:26:05 +0000</creation_ts>
          <short_desc>MdeModulePkg: Support Dynamic 64bit PcdVpdBaseAddress</short_desc>
          <delta_ts>2018-11-26 22:33:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5692</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-22 08:26:05 +0000</bug_when>
    <thetext>Current PcdVpdBaseAddress is 32bit static. It may cause issue. NON spi platform needs to configure it as Dynamic PCD. Emulator platform (such as NT32) may set its value to 64bit address. To meet with this usage, 64bit DynamicEx PcdVpdBaseAddress64 is introduced. If its value is not zero, it will be used. If its value is zero, static PcdVpdBaseAddress will be used. When NON spi platform enables VPD PCD, they need to set PCD PcdVpdBaseAddress64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5693</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-22 08:26:45 +0000</bug_when>
    <thetext>Assign it to owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5707</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-26 22:33:00 +0000</bug_when>
    <thetext>Fix it at edk2 commit 534efca06f029433f07edc49e68d9c474902648d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1375</bug_id>
          
          <creation_ts>2018-12-04 02:56:42 +0000</creation_ts>
          <short_desc>Simplify CPU feature initialization PCDs</short_desc>
          <delta_ts>2019-07-03 01:16:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5734</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-04 02:56:42 +0000</bug_when>
    <thetext>Today there are four PCDs being used by the CPU feature initialization code in UefiCpuPkg:
PcdCpuFeaturesSupport
	Fixed PCD to turn on/off features, decided by platform owner
PcdCpuFeaturesCapability
	CPU Capabilities, subset of PcdCpuFeaturesSupport
	Consumed by UI module
PcdCpuFeaturesUserConfiguration
	Dynamic PCD to turn on/off features, decided by end user
	Set by UI module
PcdCpuFeaturesSetting
	= PcdCpuFeaturesCapability &amp; PcdCpuUserConfiguration
	CPU feature enable status
	Consumed by UI module


We could simplify them actually as below:
1. PcdCpuFeaturesSupport
    This PCD is consumed by CpuCommonFeatureLib to determin whether to support certain features.
    But the problem is RegisterCpuFeatureLib also consumes this PCD to determin whether to support certain features. Which means we provide two different machanisms here: one through the *Support PCD, the other through the RegisterCpuFeature() API. We can remove the usage of this PCD in RegisterCpuFeatureLib to make the *Support PCD consumed by only CpuCommonFeatureLib. We can remove IsCpuFeatureSupported() API as well.


2. Combine PcdCpuFeaturesUserConfiguration and PcdCpuFeaturesSetting
    PcdCpuFeaturesUserConfiguration is the INPUT from UI/end-user, PcdCpuFeaturesSetting is the OUTPUT to UI/end-user. We can combine them into one PCD like PcdCpuFeaturesSetting. So RegisterCpuFeatureLib only consumes two PCDs: PcdCpuFeaturesCapability and PcdCpuFeaturesSetting. It follows the common pattern for a device attribute: attribute and capability. we can remove IsCpuFeatureUserConfiguration() as well.

3. we need to assert when the size of PcdCpuFeaturesSetting and PcdCpuFeaturesCapability don&apos;t equal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5768</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:10:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6355</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-13 19:54:40 +0000</bug_when>
    <thetext>After investigating the code, we agreed to do below changes:
1. Remove the useless APIs, include IsCpuFeatureCapability and IsCpuFeatureUserConfiguration.
2. Combine PCD PcdCpuFeaturesUserConfiguration into PcdCpuFeaturesSetting. 
Use PcdCpuFeaturesSetting as input for the user input feature setting. 
Use PcdCpuFeaturesSetting as output for the final CPU feature setting.
3. Remove extra support check logic with PcdCpuFeaturesSupport. This pcd will be used only when library try to register one CPU features. This library will still provide IsCpuFeatureSupported() API because it is used by core CpuCommonFeaturesLib and platform CPU features libraries.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8334</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-03 01:16:59 +0000</bug_when>
    <thetext>SHA-1: 6214ffb41079525875af3adc7f437a0fe8dbd09d

* UefiCpuPkg/RegisterCpuFeaturesLib: Optimize PCD
PcdCpuFeaturesUserConfiguration.

Merge PcdCpuFeaturesUserConfiguration into PcdCpuFeaturesSetting.
Use PcdCpuFeaturesSetting as input for the user input feature setting
Use PcdCpuFeaturesSetting as output for the final CPU feature setting

BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=1375

Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1813</bug_id>
          
          <creation_ts>2019-05-15 08:13:54 +0000</creation_ts>
          <short_desc>Add ACPI6.3 definition</short_desc>
          <delta_ts>2019-05-15 08:15:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7558</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-15 08:13:54 +0000</bug_when>
    <thetext>The following ACPI 6.3 updates:
 1. Reserve CRAT and CDIT table names in ACPI 6.3 header.
    - ACPI 6.3 January 2019, Table 5-30
    - Mantis ID 1883 (https://mantis.uefi.org/mantis/view.php?id=1883)
 2. Add new processor structure flags in PPTT.
    - ACPI 6.3 January 2019, Section 5.2.29
    - Mantis ID 1870 (https://mantis.uefi.org/mantis/view.php?id=1870)
    - Mantis ID 1934 (https://mantis.uefi.org/mantis/view.php?id=1934)
 3. Add SPE support to MADT.
    - ACPI 6.3 January 2019, Table 5-60
    - Mantis ID 1934 (https://mantis.uefi.org/mantis/view.php?id=1934)
 4. Add &apos;Hot-plug Capable&apos; flag to APIC.
    - ACPI 6.3 January 2019, Table 5-44, Table 5-47 &amp; Table 5-58
    - Mantis ID 1948 (https://mantis.uefi.org/mantis/view.php?id=1948)
 5. Add CNTHV timer to GTDT.
    - ACPI 6.3 January 2019, Section 5.2.24
    - Mantis ID 1851 (https://mantis.uefi.org/mantis/view.php?id=1851)
 6. Add &apos;Trigger Order&apos; to Platform Communication Channel Identification
    Structure.
    - ACPI 6.3 January 2019, Section 5.2.28
    - Mantis ID 1867 (https://mantis.uefi.org/mantis/view.php?id=1867)
 7. Add Generic Initiator Affinity Structure to SRAT.
    - ACPI 6.3 January 2019, Section 5.2.16.6
    - Mantis ID 1904 (https://mantis.uefi.org/mantis/view.php?id=1904)
 8. Add &apos;HMAT Enhancements&apos;.
    - ACPI 6.3 January 2019, Section 5.2.27
    - Mantis ID 1914 (https://mantis.uefi.org/mantis/view.php?id=1914)
    - Mantis ID 1959 (https://mantis.uefi.org/mantis/view.php?id=1959)
 9. Fix generic address structure definition to include all address
    space ID keywords.
   - ACPI 6.3 January 2019, Table 5-25
   - Mantis ID 1965 (https://mantis.uefi.org/mantis/view.php?id=1965)
10. Make Acpi63.h the latest ACPI definition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7559</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-15 08:14:24 +0000</bug_when>
    <thetext>Confirm</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7560</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-15 08:15:14 +0000</bug_when>
    <thetext>krzysztof.koch@arm.com provided the patch and push @a40f30398ab0f13cd79048b4b2f98449ebad96cd</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1185</bug_id>
          
          <creation_ts>2018-09-18 03:47:09 +0000</creation_ts>
          <short_desc>SdMmcPciHcDxe: Timeout in SdMmcHcReset</short_desc>
          <delta_ts>2018-09-20 22:53:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marcin Wojtas">mw</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4999</commentid>
    <comment_count>0</comment_count>
    <who name="Marcin Wojtas">mw</who>
    <bug_when>2018-09-18 03:47:09 +0000</bug_when>
    <thetext>with SwResetMask = 0xFF, on all my boards (regardless speed),
SdMmcHcWaitMmioSet times out on each interface. With
SwReset = SD_MMC_HC_SW_RST_ALL (BIT0) it&apos;s all ok.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5026</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:27:05 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5041</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-09-20 22:53:34 +0000</bug_when>
    <thetext>Resolved via the below commit contributed by Marcin Wojtas:
https://github.com/tianocore/edk2/commit/064d301fb07566ab6d3d89010b9666f320698f34</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1498</bug_id>
          
          <creation_ts>2019-01-29 18:17:37 +0000</creation_ts>
          <short_desc>Error in DisplaySysEventLogData in EventLogInfo.c</short_desc>
          <delta_ts>2019-06-12 21:05:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Oleksiy">oleksiyy</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6233</commentid>
    <comment_count>0</comment_count>
      <attachid>250</attachid>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-01-29 18:17:37 +0000</bug_when>
    <thetext>Created attachment 250
Changes

There is an error in while loop in DisplaySysEventLogData function in EventLogInfo.c file.

Log increment (Log = (LOG_RECORD_FORMAT *) (LogData + Offset);) should happened in the end of while loop, not in the very beginning. 

In while conditions you check for the last entry by comparing Log-&gt;Type with END_OF_LOG (Log-&gt;Type != END_OF_LOG). If End of Log reached and previous record was processed - loop should be terminated. But with current implementation END_OF_LOG record will be also processed, because Log increment happened after END_OF_LOG check, not before.

Also I think DisplaySELTypes function should be used in while loop instead of DisplaySELVarDataFormatType.

Attaching proposed changes here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6864</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:39:31 +0000</bug_when>
    <thetext>dandan please help to check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7565</commentid>
    <comment_count>2</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-05-15 14:33:02 +0000</bug_when>
    <thetext>Any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7570</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-15 20:32:10 +0000</bug_when>
    <thetext>Sorry to delay, I will take a look this issue within this week.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7608</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-16 21:36:30 +0000</bug_when>
    <thetext>Hi Oleksiy,

I agree this is a bug. 
Will you send your update to edk2 community to fix this issue or want us to send the patch?


Thanks,
Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7611</commentid>
    <comment_count>5</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-05-17 10:07:39 +0000</bug_when>
    <thetext>Hi Dandan.

Not sure that I understand you last comment.
I already attached my variant of fix.
You can use it if you want.

Did you mean something else?

Regards, Oleksiy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7612</commentid>
    <comment_count>6</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-17 11:01:28 +0000</bug_when>
    <thetext>Hi Oleksiy,

I just mean whether you will send the patch the edk2 community to fix this issue you found.


Thanks,
Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7613</commentid>
    <comment_count>7</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-05-17 12:17:45 +0000</bug_when>
    <thetext>I already submitted a number of bugs here. And always module owner take care of verifying and posting it to EDKII.

So I really do not understand what you mean by &quot;send the patch the edk2 community&quot;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7698</commentid>
    <comment_count>8</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-18 04:59:54 +0000</bug_when>
    <thetext>What I said is edk2 dev process. I am sorry that previously I thought you knew this process. I can introduce it more here.
We have edk2 community where everyone can discuss edk2 issues and send/review patches to fix edk2 issues.
community mail list:devel@edk2.groups.io
More info you can find in https://edk2.groups.io/g/devel
Edk2 dev wiki page: https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

We welcome more people join edk2 community to discuss and fix edk2 issue.

So previously I just want to double confirm with you whether you want to send the fix patch by yourself.

Yes, edk2 maintainer and modules can fix edk2 issues. And any individual also can send edk2 patch to devel@edk2.groups.io directly to fix issue. And edk2 maintain will push the patches after the patch get reviewed -by.

Of course,  we are OK to follow edk2 precess to merge the fix to edk2 master if you don&apos;t want to do involve edk2 dev process.
And thanks for reporting issue to help improve our edk2 code quality.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7711</commentid>
    <comment_count>9</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-05-20 14:53:25 +0000</bug_when>
    <thetext>Please send a patch by yourself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8029</commentid>
    <comment_count>10</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-06-12 21:05:29 +0000</bug_when>
    <thetext>Fixed via https://github.com/tianocore/edk2/commit/fc7d997c35372126823c3b0acf7b67c45cbeea36</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>250</attachid>
            <date>2019-01-29 18:17:37 +0000</date>
            <delta_ts>2019-01-29 18:17:37 +0000</delta_ts>
            <desc>Changes</desc>
            <filename>Changes.rar</filename>
            <type>application/octet-stream</type>
            <size>5978</size>
            <attacher name="Oleksiy">oleksiyy</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1836</bug_id>
          
          <creation_ts>2019-05-22 22:51:17 +0000</creation_ts>
          <short_desc>Add tools/scripts to automate setup of git environment for EDK II dev process</short_desc>
          <delta_ts>2019-08-19 18:39:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Leif Lindholm">quic_llindhol</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7753</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-22 22:51:17 +0000</bug_when>
    <thetext>There are features in git that improve the readability of git patches.  The steps to enable these are described in the wiki links below.

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers

Add files/scripts/tools as needed to make it easier for all developers to enable these features by default and to make it easy to set and verify the current git configuration settings required for the EDK II dev process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7876</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 20:16:44 +0000</bug_when>
    <thetext>Leif has sent the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9071</commentid>
    <comment_count>2</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-08-19 18:39:55 +0000</bug_when>
    <thetext>The final version sent out:
https://edk2.groups.io/g/devel/message/42094

was merged as 9e2416ae2e1d..4eb0acb1e2be on 12 June 2019.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1298</bug_id>
          
          <creation_ts>2018-11-05 01:24:56 +0000</creation_ts>
          <short_desc>PcdShellFile reference can be removed from platform DSC file</short_desc>
          <delta_ts>2018-11-19 02:12:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>Nt32Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5461</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-05 01:24:56 +0000</bug_when>
    <thetext>Commit SHA-1: e2e9b3b433210bb05500e948f37f6522a120d302
* Nt32Pkg: Add LoadFileOnFv2 driver in DSC/FDF

made a change to how a platform adds an application boot options list.

After that change, PcdShellFile actually is no longer needed to be referenced by platform BDS, or the platform DSC file.

We can remove them from Nt32Pkg.DSC and EmulatorPkg.DSC.
Some other platforms may also need the review to remove.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5495</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 03:19:52 +0000</bug_when>
    <thetext>assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5630</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-11-19 02:12:39 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/cc5c08f9d630b17a3a052aa397b835868d9f0261
https://github.com/tianocore/edk2/commit/f07afa3e266354be9e194368d15d2db6a4c5d4a4</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1633</bug_id>
          
          <creation_ts>2019-03-19 04:31:50 +0000</creation_ts>
          <short_desc>CascadeLake support</short_desc>
          <delta_ts>2019-11-06 12:32:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>PurleyOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="wvervoorn@eltan.com">wvervoorn</reporter>
          <assigned_to name="Yi Qian">yi.qian</assigned_to>
          <cc>michael.a.kubacki</cc>
    
    <cc>wvervoorn</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6756</commentid>
    <comment_count>0</comment_count>
    <who name="wvervoorn@eltan.com">wvervoorn</who>
    <bug_when>2019-03-19 04:31:50 +0000</bug_when>
    <thetext>At this moment the binaries included only support the Skylake X processor (aka NeonCity platform).

In order to remain usefull the binaries to support Cascade Lake (aka NeonCity Refresh) should be added as well.

We are trying to create an OpenSource BIOS using this tree as a base and this issue is a showstopper at the moment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7033</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-09 02:50:35 +0000</bug_when>
    <thetext>Yi will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8478</commentid>
    <comment_count>2</comment_count>
    <who name="wvervoorn@eltan.com">wvervoorn</who>
    <bug_when>2019-07-18 10:20:18 +0000</bug_when>
    <thetext>Can anyone opdate me on the status? Will this ever be solved or should we deal with the fact that this will never be available?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10328</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-05 16:28:16 +0000</bug_when>
    <thetext>This BZ is being closed since PurleyOpenBoardPkg has been removed. See https://bugzilla.tianocore.org/show_bug.cgi?id=2322 for more details.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10337</commentid>
    <comment_count>4</comment_count>
    <who name="wvervoorn@eltan.com">wvervoorn</who>
    <bug_when>2019-11-06 04:25:05 +0000</bug_when>
    <thetext>I understand the reasoning behind this. The issue that I have is that I don&apos;t see a way forward. Is there a plan create a new server platform?

As far as I understood in the past this was the goal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10341</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-11-06 12:32:43 +0000</bug_when>
    <thetext>(In reply to wvervoorn@eltan.com from comment #4)
&gt; I understand the reasoning behind this. The issue that I have is that I
&gt; don&apos;t see a way forward. Is there a plan create a new server platform?
&gt; 
&gt; As far as I understood in the past this was the goal.

Yes, there is. Details will be sent to the mailing list when more information is available. Thank you for your interest and understanding.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1855</bug_id>
          
          <creation_ts>2019-05-29 00:43:28 +0000</creation_ts>
          <short_desc>Add UniTool script into Platform\Intel\Tools directory</short_desc>
          <delta_ts>2019-09-11 02:52:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Placeholder</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7836</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-29 00:43:28 +0000</bug_when>
    <thetext>UniTool is one python script to generate UQI (Universal Question Identifier) unicode string for HII question PROMPT string. UQI string can be used to identify each HII question.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7837</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-29 00:43:53 +0000</bug_when>
    <thetext>Zhiju will work it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8130</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-20 01:19:26 +0000</bug_when>
    <thetext>Based on the proposal in https://edk2.groups.io/g/devel/message/42546, UniTool will be moved to edk2-platform Platform\Intel\Tools directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9600</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-11 02:52:43 +0000</bug_when>
    <thetext>fixed it in cef32d77375056ab3af31abc64a5327860ca5339</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1752</bug_id>
          
          <creation_ts>2019-04-26 06:02:55 +0000</creation_ts>
          <short_desc>When assign value size &gt; PCD array size in dsc, returned value is not right.</short_desc>
          <delta_ts>2019-08-27 18:35:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7271</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-26 06:02:55 +0000</bug_when>
    <thetext>In h file:
typedef struct {
 UINT8 Byte;
} TEST1;

In dec file:
[PcdsFixedAtBuild, PcdsPatchableInModule, PcdsDynamic, PcdsDynamicEx]
  gEfiStructuredPcdPkgTokenSpaceGuid.Test001|{0x0}|TEST1[0x10]|0x4{
  &lt;HeaderFiles&gt;
  Pcd/Test1.h
  &lt;Packages&gt;
  MdePkg/MdePkg.dec
  OvmfPkg/OvmfPkg.dec
  }

In dsc file:
[PcdsDynamicDefault.common.DEFAULT]
  gEfiStructuredPcdPkgTokenSpaceGuid.Test001|{CODE({0x1, 0x2, 0x3, 0x4, 0x1, 0x2, 0x3, 0x4, 0x1, 0x2, 0x3, 0x4, 0x1, 0x2, 0x3, 0x4, 0x1, 0x2, 0x3, 0x4})}


When defined one PCD array whose size is 16 in dec file, assigned one value whose size is also 20, but returned value in report is not right, returned value&apos;s size in report is 21, it should be 16.

In report:
 *P Test001                                     :    DYN (TEST1[0x10]) = {

0x01,0x02,0x03,0x04,0x01,0x02,0x03,0x04,0x01,0x02,0x03,0x04,0x01,0x02,0x03,0x04,

0x01,0x02,0x03,0x04,0x00}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7315</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-28 01:47:12 +0000</bug_when>
    <thetext>Zhiju will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9298</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:35:19 +0000</bug_when>
    <thetext>Fixed in commit afe8c4110c07 (&quot;BaseTools: Correct the value assignment for StructurePcd&quot;, 2019-05-10). Probably. (The assignee should have closed the bug, or updated it with a comment at the least, when their patch was pushed.)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1133</bug_id>
          <alias>CVE-2018-12179</alias>
          <creation_ts>2018-08-30 20:31:28 +0000</creation_ts>
          <short_desc>Opal BlockSid Setting Disabled after S3</short_desc>
          <delta_ts>2019-08-01 15:26:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ryan Ware">ryan.ware</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>dannf</cc>
    
    <cc>eric.dong</cc>
    
    <cc>guoheyi</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2015</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4772</commentid>
    <comment_count>0</comment_count>
      <attachid>210</attachid>
    <who name="Ryan Ware">ryan.ware</who>
    <bug_when>2018-08-30 20:31:28 +0000</bug_when>
    <thetext>Created attachment 210
BlockSid Patches

Incorrect configuration in system firmware allows local attacker to bypass maximum authentication attempts for opal drives (eg. enabling brute force attacks on the password).

After OpalPasswordDxe driver enhanced to use TCG PP to track the BlockSid setting, &quot;OpalExtraInfo&quot; variable is deprecated.

Current OpalpasswordSmm driver still uses this deprecated &quot;OpalExtraInfo&quot; variable to track whether need to do the blocksid action. It may finally caused BlockSid setting lost after resume from S3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4802</commentid>
    <comment_count>1</comment_count>
    <who name="hhtian">hot.tian</who>
    <bug_when>2018-09-02 21:42:24 +0000</bug_when>
    <thetext>assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6730</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-15 02:55:23 +0000</bug_when>
    <thetext>Please be notified that this issue is going to public. Any concern or objection?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6735</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-15 10:56:32 +0000</bug_when>
    <thetext>CVE Number: CVE-2018-12179</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7012</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-04-05 11:10:57 +0000</bug_when>
    <thetext>Eric, please proceed to open source this patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7423</commentid>
    <comment_count>5</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-05-07 23:33:54 +0000</bug_when>
    <thetext>Fixed with change 54d5ab6a7354c7f7d8828136fa4bb3119984bfad

* SecurityPkg/OpalPasswordSmm: Fix get BlockSid value error.

OpalDxe driver already enhanced to use TCG PP to send BlockSid request, so the old variable OPAL_EXTRA_INFO_VAR_NAME is not used by OpalDxe driver. But OpalSmm driver still consume this variable to decide whether need to send BlockSid when S3 resume. This patch fixed this issue by change OpalSmm driver to consume Tcg PP actions.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7433</commentid>
    <comment_count>6</comment_count>
    <who name="Heyi Guo">guoheyi</who>
    <bug_when>2019-05-08 09:25:28 +0000</bug_when>
    <thetext>Hi Eric,

Is this fix needed for the mainline code?

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7480</commentid>
    <comment_count>7</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-05-09 22:43:07 +0000</bug_when>
    <thetext>(In reply to Heyi Guo from comment #6)
&gt; Hi Eric,
&gt; 
&gt; Is this fix needed for the mainline code?
&gt; 
&gt; Thanks.

Not needed, mainline code not has SMM driver. PEI driver already follow this rule.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>210</attachid>
            <date>2018-08-30 20:31:28 +0000</date>
            <delta_ts>2018-08-30 20:31:28 +0000</delta_ts>
            <desc>BlockSid Patches</desc>
            <filename>BlockSid.zip</filename>
            <type>application/zip</type>
            <size>4900</size>
            <attacher name="Ryan Ware">ryan.ware</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1340</bug_id>
          
          <creation_ts>2018-11-20 01:22:04 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Library/LzmaCustomDecompressLib</short_desc>
          <delta_ts>2019-07-03 01:49:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5642</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 01:22:04 +0000</bug_when>
    <thetext>IntelFrameworkModulePkg/Library/LzmaCustomDecompressLib is identical to MdeModulePkg/Library/LzmaCustomDecompressLib.
We can remove the one in IntelFrameworkModulePkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6426</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:03:30 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7406</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:54:56 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8350</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:49:30 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1777</bug_id>
          
          <creation_ts>2019-05-07 01:26:22 +0000</creation_ts>
          <short_desc>Remove BootInRecoveryMode PPI DEPEX from PEI storage stack</short_desc>
          <delta_ts>2019-05-15 02:05:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FatPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7389</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-05-07 01:26:22 +0000</bug_when>
    <thetext>BootInRecoveryMode Ppi dependency should be removed from PEI storage stack modules. Except recovery, more features are using the storage stack.
Platform can apply Ppi dependency in Recovery FV which contains full storage driver stack.

It includes following modules:
FatPkg\FatPei\FatPei.inf
MdeModulePkg\Bus\Pci\EhciPei\EhciPei.inf
MdeModulePkg\Bus\Pci\IdeBusPei\IdeBusPei.inf
MdeModulePkg\Bus\Pci\UhciPei\UhciPei.inf
MdeModulePkg\Bus\Pci\XhciPei\XhciPei.inf
MdeModulePkg\Bus\Usb\UsbBotPei\UsbBotPei.inf
MdeModulePkg\Bus\Usb\UsbBusPei\UsbBusPei.inf
MdeModulePkg\Universal\Disk\CdExpressPei\CdExpressPei.inf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7458</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-09 01:11:37 +0000</bug_when>
    <thetext>Wei will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7542</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-05-15 02:05:44 +0000</bug_when>
    <thetext>Remove BootInRecoveryMode PPI DEPEX via the following two commits:
https://github.com/tianocore/edk2/commit/0a506fc7ab8b5df2944d2e4602a46fbef57edc82
https://github.com/tianocore/edk2/commit/20af3a7a3ec471585d672ad7bc2cf161b7fed2cf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1553</bug_id>
          
          <creation_ts>2019-02-21 00:54:37 +0000</creation_ts>
          <short_desc>Add libraries to enable USB3 for debug</short_desc>
          <delta_ts>2019-07-03 01:13:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>castro8583bennett</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6473</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-21 00:54:37 +0000</bug_when>
    <thetext>Now USB3 is an common device in the board. It&apos;s valuable if edk2 can provide a common solution to support this device. 
Submit this BZ to propose to add new libraries to enable USB3 device in edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6474</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-21 01:07:13 +0000</bug_when>
    <thetext>edk2 supports UBS3 already. What does &quot;USB3&quot; mean here?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6475</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-21 01:52:33 +0000</bug_when>
    <thetext>It should be specified as usb3 debug port capability.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6481</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:06:07 +0000</bug_when>
    <thetext>change status and assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7828</commentid>
    <comment_count>4</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-05-28 20:17:17 +0000</bug_when>
    <thetext>i will contribute the library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8137</commentid>
    <comment_count>5</comment_count>
    <who name="Castrob">castro8583bennett</who>
    <bug_when>2019-06-20 02:31:19 +0000</bug_when>
    <thetext>I am still waiting for the libraries for USB3
Thank you guys!

Castro B,
https://rechargevodafone.co.uk/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8332</commentid>
    <comment_count>6</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-03 01:13:22 +0000</bug_when>
    <thetext>SHA-1: 624afaf58cc84785f4902acd5997137f1b393dc3

* Platform/Intel/DebugFeaturePkg: Add USB3DebugPort related modules.

https://bugzilla.tianocore.org/show_bug.cgi?id=1553

Add USB3DebugPort related modules, include Usb3DebugPortLib and
Usb3DebugPortParameterLib. Usb3DebugPortParameterLib will be consumed
by Usb3DebugPortLib.

Interfaces export by Us3DebugPortLib includes:
Usb3DebugPortParameterLib
Usb3DebugPortWrite
Usb3DebugPortPoll

Interfaces export by Usb3DebugPortParameterLib includes:
GetUsb3DebugPortController
SetUsb3DebugPortController

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1989</bug_id>
          <alias>CVE-2019-14587</alias>
          <creation_ts>2019-07-19 02:13:06 +0000</creation_ts>
          <short_desc>Double EFI_PCI_ROOT_BRIDGE_IO_PROTOCOL_UNMAP in SdMmcCreateTrb</short_desc>
          <delta_ts>2021-09-22 15:47:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202011</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8486</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 02:13:06 +0000</bug_when>
    <thetext>There appears to be a double-unmap issue in SdMmcCreateTrb() as a result of calling PciIo-&gt;Unmap (PciIo, Trb-&gt;DataMap); within an error condition, as well as within the body of the SdMmcFreeTrb() which is also called on error. It&apos;s unclear if this will have exploitable properties in cases where other devices share a DMA mapping.

Either remove the first unmap or set Trb-&gt;DataMap to NULL after first free. Note: MdeModulePkg\Core\Dxe\Mem\Pool.c, CoreFreePoolI(), it checks the header signature and verifies it&apos;s of type POOL_HEAD_SIGNATURE. Presumably, if it was freed once, this signature should not match and error out.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8487</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 02:15:33 +0000</bug_when>
    <thetext>Assigned to Hao to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8488</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 02:17:21 +0000</bug_when>
    <thetext>CVSS: Medium 4.2 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:A/AC:H/PR:N/UI:N/S:U/C:N/I:L/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8493</commentid>
    <comment_count>3</comment_count>
      <attachid>363</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-19 03:44:11 +0000</bug_when>
    <thetext>Created attachment 363
V1 Patch

Upload V1 patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8526</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-21 23:38:03 +0000</bug_when>
    <thetext>There is no explicit uni-test for this issue.

I think code review (for all unmap operation within the driver) can be used to serve as the test/verification process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8631</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-29 22:51:38 +0000</bug_when>
    <thetext>Solution is ready. Let&apos;s set the embargo ETA to Jan.21&apos;20</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8713</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 19:55:08 +0000</bug_when>
    <thetext>OvmfPkg and ArmVirtPkg platforms are not affected as they don&apos;t include SdMmcPciHcDxe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11086</commentid>
    <comment_count>7</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:56:17 +0000</bug_when>
    <thetext>2/5/2020 infosec meeting - agree to 1/21/20 un embargo date.  no issues seen by reviewers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11270</commentid>
    <comment_count>8</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-16 22:58:22 +0000</bug_when>
    <thetext>V1 patch has been sent for community review:
https://edk2.groups.io/g/devel/message/54523

The patch plan to catch the edk2-stable202002 tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11290</commentid>
    <comment_count>9</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2020-02-18 00:15:38 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/e36d5ac7d10a6ff5becb0f52fdfd69a1752b0d14</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17361</commentid>
    <comment_count>10</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:20 +0000</bug_when>
    <thetext>http://www.compilatori.com/category/services/	http://www.wearelondonmade.com/category/services/	http://www.jopspeech.com/category/services/	http://joerg.li/category/services/	http://connstr.net/category/services/	http://embermanchester.uk/category/services/	http://www.slipstone.co.uk/category/services/	http://www.logoarts.co.uk/category/services/	http://www.acpirateradio.co.uk/category/services/	https://waytowhatsnext.com/category/crypto/	https://www.webb-dev.co.uk/category/crypto/	http://www.iu-bloomington.com/category/crypto/	http://www-look-4.com/category/services/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>363</attachid>
            <date>2019-07-19 03:44:11 +0000</date>
            <delta_ts>2019-07-19 03:44:11 +0000</delta_ts>
            <desc>V1 Patch</desc>
            <filename>0001-MdeModulePkg-SdMmcPciHcDxe-Fix-double-PciIo-Unmap-in.patch</filename>
            <type>text/plain</type>
            <size>2181</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1059</bug_id>
          
          <creation_ts>2018-07-25 23:05:39 +0000</creation_ts>
          <short_desc>Clang build fail in SmmRuntimeDxeReportStatusCodeLibFramework module</short_desc>
          <delta_ts>2019-08-07 21:56:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4408</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 23:05:39 +0000</bug_when>
    <thetext>Clang build fail with below build command:

build -p IntelFrameworkModulePkg/IntelFrameworkModulePkg.dsc -t CLANG38 -a IA32 -a X64 -b NOOPT -n 5 -m IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeReportStatusCodeLibFramework.inf

The build fail log is in below:
&quot;clang&quot; -g -fshort-wchar -fno-builtin -fno-strict-aliasing -Wall -Werror -Wno-array-bounds -ffunction-sections -fdata-sections -include AutoGen.h -fno-common -DSTRING_ARRAY_NAME=SmmRuntimeDxeReportStatusCodeLibFrameworkStrings -Wno-parentheses-equality -Wno-tautological-compare -Wno-tautological-constant-out-of-range-compare -Wno-empty-body -Wno-unused-const-variable -Wno-varargs -Wno-unknown-warning-option -fno-stack-protector -mms-bitfields -Wno-address -Wno-shift-negative-value -Wno-unknown-pragmas -Wno-incompatible-library-redeclaration -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -msoft-float -mno-implicit-float -ftrap-function=undefined_behavior_has_been_optimized_away_by_clang -funsigned-char -fno-ms-extensions -Wno-null-dereference -m64 &quot;-DEFIAPI=__attribute__((ms_abi))&quot; -mno-red-zone -mcmodel=small -fpie -O0 -target x86_64-pc-linux-gnu -g -D DISABLE_NEW_DEPRECATED_INTERFACES -c -o /home/jshi19/wksp_efi/edk2/Build/IntelFrameworkModuleAll/NOOPT_CLANG38/X64/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeReportStatusCodeLibFramework/OUTPUT/./SmmRuntimeDxeSupport.obj -I/home/jshi19/wksp_efi/edk2/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework -I/home/jshi19/wksp_efi/edk2/Build/IntelFrameworkModuleAll/NOOPT_CLANG38/X64/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeReportStatusCodeLibFramework/DEBUG -I/home/jshi19/wksp_efi/edk2/MdePkg -I/home/jshi19/wksp_efi/edk2/MdePkg/Include -I/home/jshi19/wksp_efi/edk2/MdePkg/Include/X64 -I/home/jshi19/wksp_efi/edk2/MdeModulePkg -I/home/jshi19/wksp_efi/edk2/MdeModulePkg/Include -I/home/jshi19/wksp_efi/edk2/IntelFrameworkPkg -I/home/jshi19/wksp_efi/edk2/IntelFrameworkPkg/Include -I/home/jshi19/wksp_efi/edk2/IntelFrameworkModulePkg -I/home/jshi19/wksp_efi/edk2/IntelFrameworkModulePkg/Include /home/jshi19/wksp_efi/edk2/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeSupport.c
/home/jshi19/wksp_efi/edk2/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeSupport.c:99:12: error: cast between incompatible calling conventions &apos;cdecl&apos; and &apos;ms_abi&apos;; calls through this pointer may abort at runtime [-Werror,-Wcast-calling-convention]
    return (EFI_REPORT_STATUS_CODE) SmmStatusCodeReport;
           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/jshi19/wksp_efi/edk2/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeSupport.c:64:1: note: consider defining &apos;SmmStatusCodeReport&apos; with the &apos;ms_abi&apos; calling convention
SmmStatusCodeReport (
^
EFIAPI
1 error generated.
GNUmakefile:383: recipe for target &apos;/home/jshi19/wksp_efi/edk2/Build/IntelFrameworkModuleAll/NOOPT_CLANG38/X64/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeReportStatusCodeLibFramework/OUTPUT/SmmRuntimeDxeSupport.obj&apos; failed

The build fail reason is because the EFI_REPORT_STATUS_CODE function has EFIAPI, which is ms_abi ABI attribute, see its definition in below, but the SmmStatusCodeReport does not have the same ABI attribute. When the code force covert the SmmStatusCodeReport to EFI_REPORT_STATUS_CODE type, the ABI attribute will conflict.

edk2\MdePkg\Include\Protocol\StatusCode.h
typedef
EFI_STATUS
(EFIAPI *EFI_REPORT_STATUS_CODE)(
  IN EFI_STATUS_CODE_TYPE     Type,
  IN EFI_STATUS_CODE_VALUE    Value,
  IN UINT32                   Instance,
  IN EFI_GUID                 *CallerId  OPTIONAL,
  IN EFI_STATUS_CODE_DATA     *Data      OPTIONAL
  );

Fix this issue is simple, below is a reference fix:
--- a/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeSupport.c
+++ b/IntelFrameworkModulePkg/Library/SmmRuntimeDxeReportStatusCodeLibFramework/SmmRuntimeDxeSupport.c
@@ -61,6 +61,7 @@ SmmStatusCodeInitialize (

 **/
 EFI_STATUS
+EFIAPI
 SmmStatusCodeReport (
   IN EFI_STATUS_CODE_TYPE     Type,
   IN EFI_STATUS_CODE_VALUE    Value,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4430</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 21:39:37 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7653</commentid>
    <comment_count>2</comment_count>
      <attachid>340</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:14:09 +0000</bug_when>
    <thetext>Created attachment 340
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7679</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 15:54:02 +0000</bug_when>
    <thetext>change back to shenglei.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8847</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-07 21:56:37 +0000</bug_when>
    <thetext>IntelFrameworkPkg has been removed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>340</attachid>
            <date>2019-05-17 13:14:09 +0000</date>
            <delta_ts>2019-05-17 13:14:09 +0000</delta_ts>
            <desc>data</desc>
            <filename>file_1059.txt</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1460</bug_id>
          
          <creation_ts>2019-01-15 03:16:37 +0000</creation_ts>
          <short_desc>[ResetSystemLib] Adds a new API ResetSystem()</short_desc>
          <delta_ts>2019-04-28 20:04:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6093</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-15 03:16:37 +0000</bug_when>
    <thetext>The prototype of ResetSystem() can be:
VOID
EFIAPI
ResetSystem (
  IN EFI_RESET_TYPE               ResetType,
  IN EFI_STATUS                   ResetStatus,
  IN UINTN                        DataSize,
  IN VOID                         *ResetData OPTIONAL
  )

The purpose of the new API is that consumer of ResetSystemLib can use the new API to reset system with additional reset data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6143</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:39:51 +0000</bug_when>
    <thetext>bug scrub: assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6501</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-02-21 21:13:46 +0000</bug_when>
    <thetext>finished at:
https://github.com/tianocore/edk2/commit/e2531da3b861fe80c4b18d90b6b12a14c98eef81
https://github.com/tianocore/edk2/commit/23812dcea9196ca4b0e72794aa7c81dbc9e06c5c
https://github.com/tianocore/edk2/commit/6b20fd3d94695fec407899db7760f806d41a4367
https://github.com/tianocore/edk2/commit/2bf671f11fc829af0828c006539c861d6bbef7e8
https://github.com/tianocore/edk2/commit/049974bd6c73177c74dc5cb2719ecea38fd7daa4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7035</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-09 03:38:41 +0000</bug_when>
    <thetext>Should add the new API to all ResetSystemLib instances</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7302</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:32:10 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7325</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-28 20:04:45 +0000</bug_when>
    <thetext>Additional changes for all platforms:
edk2-platforms: 2ab409d2f87ff2cd9fdec9e20d4cbad32ae3c7c6
edk2-platforms/devel-MinPlatform: 5ed632018f3f30b0dedb3ac947c7068ac5869559..b380c146d65f13cba30e030555eca49b81996452
edk2: 7701cd0487123d74e06796b326bce0d9660bcb79..d943e5ad3b2ba04578eaf71117d365b129ab6a65
Also change the description of ResetData refer to the UEFI spec 2.8:
228a9c2999bd36b9383d62aeb3bf44bd45aa56b4..c676cf740256a0eb88e75ab512069b5c8a44da9b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1891</bug_id>
          
          <creation_ts>2019-06-10 13:26:34 +0000</creation_ts>
          <short_desc>Base64Decode does not follow its specification</short_desc>
          <delta_ts>2019-07-16 18:04:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1980</blocked>
    
    <blocked>1981</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Marvin Häuser">mhaeuser</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7961</commentid>
    <comment_count>0</comment_count>
    <who name="Marvin Häuser">mhaeuser</who>
    <bug_when>2019-06-10 13:26:34 +0000</bug_when>
    <thetext>Base64Decode&apos;s parameter &quot;DestinationSize&quot; is described as &quot;Set to bytes stored on return&quot; [1] for its output state. However, this specification is not being complied to when reaching the translation loop at the end of the function. [2] DestinationSize must be updated with the offset of the new Destination pointer from its original value, which is currently not tracked.

Furthermore, DestinationIndex may overflow within said loop because it is incremented twice [3] without a possibly terminating comparison logic against *DestinationSize as top value. While tolerating this might be intended as *DestinationSize would need to be at least (MAX_ADDRESS - 1) for this to happen (and would require a very large source buffer as per loop condition), this, in my opinion, should at least be argued in a comment, especially as the marked conditions in [3] indicate DestinationIndex surpassing *DestinationSize is a legit scenario.


[1] https://github.com/tianocore/edk2/blob/edk2-stable201905/MdePkg/Library/BaseLib/String.c#L1930
[2] https://github.com/tianocore/edk2/blob/edk2-stable201905/MdePkg/Library/BaseLib/String.c#L2087
[3] https://github.com/tianocore/edk2/blob/edk2-stable201905/MdePkg/Library/BaseLib/String.c#L2080-L2083</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7986</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-11 12:05:19 +0000</bug_when>
    <thetext>I agree that the Base64Decode specification is fishy. For another example, please see:

https://github.com/tianocore/edk2/blob/1631bb26ae991e530d3c96fe3161ea15144b358e/OvmfPkg/EnrollDefaultKeys/EnrollDefaultKeys.c#L161</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7987</commentid>
    <comment_count>2</comment_count>
    <who name="Vitaly Cheptsov">vit9696</who>
    <bug_when>2019-06-11 12:33:48 +0000</bug_when>
    <thetext>Laszlo, it is a particularly bad example, as absolutely random data is appended after the potentially read certificate due to wrong size reported and AllocatePool used instead of AllocateZeroPool. While EnrollDefaultKeys is not supposed to protect from this by design, I can imagine the worst if this code gets copy-pasted. Hope the issue gets enough priority and is addressed by next stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8048</commentid>
    <comment_count>3</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:26:46 +0000</bug_when>
    <thetext>Zhi Chao, please follow up it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8256</commentid>
    <comment_count>4</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:40:27 +0000</bug_when>
    <thetext>ZhiChao, please provide the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8302</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-01 14:02:40 +0000</bug_when>
    <thetext>With ZhiChao&apos;s permission, I&apos;d like to assign this BZ to myself, at least temporarily. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8321</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-02 05:09:01 +0000</bug_when>
    <thetext>Earlier patch set from ZhiChao:

[edk2-devel] [PATCH 0/3]
MdePkg/BaseLib: Base64Decode: Make it follow its specification

http://mid.mail-archive.com/20190628035746.24160-1-zhichao.gao@intel.com
https://edk2.groups.io/g/devel/message/42968</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8324</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-02 06:29:56 +0000</bug_when>
    <thetext>Posted:

[edk2-devel] [PATCH 0/3]
MdePkg, OvmfPkg: rewrite Base64Decode(), clean up call site

http://mid.mail-archive.com/20190702102836.27589-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/43159</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8464</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-16 18:04:44 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #7)
&gt; Posted:
&gt; 
&gt; [edk2-devel] [PATCH 0/3]
&gt; MdePkg, OvmfPkg: rewrite Base64Decode(), clean up call site
&gt; 
&gt; http://mid.mail-archive.com/20190702102836.27589-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/43159

Pushed the first two patches in the series, as commit range 84a459472075..35e242b698cd. Those commits fix the issues tracked in the present BZ.

A coding style wart in the new MdePkg code will be addressed separately, under bug 1980.

The last patch (for OvmfPkg) has been isolated to bug 1981.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1357</bug_id>
          
          <creation_ts>2018-11-23 06:54:29 +0000</creation_ts>
          <short_desc>refresh networking build flags in all Wiki articles</short_desc>
          <delta_ts>2020-05-05 19:07:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1293</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="sfu5">siyuan.fu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5698</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-23 06:54:29 +0000</bug_when>
    <thetext>Under bug 1293, NetworkPkg is gaining include files (DSC and FDF file snippets), which depend on a number of build-time &quot;-D&quot; flags. The flags are also owned / defined by NetworkPkg, and they replace platform build flags.

For example, &quot;HTTP_BOOT_ENABLE&quot; in OvmfPkg is being replaced by the central &quot;NETWORK_HTTP_BOOT_ENABLE&quot;.

For another example, PcdAllowHttpConnections should now be set via the NETWORK_ALLOW_HTTP_CONNECTIONS build flag.

The patch series for bug 1293 handles all this in the edk2 source tree, but the Wiki articles should be searched &amp; updated too. Hence this separate BZ report. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5773</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:14:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12387</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:07:31 +0000</bug_when>
    <thetext>Nobody had capacity for 1.5 years, closing as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1798</bug_id>
          
          <creation_ts>2019-05-12 20:54:17 +0000</creation_ts>
          <short_desc>Add the Minimum Platform Specification</short_desc>
          <delta_ts>2019-05-19 18:17:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7495</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-12 20:54:17 +0000</bug_when>
    <thetext>A new specification is proposed for adoption by the Tianocore community 
called the &quot;Minimum Platform Specification&quot;. This specification describes 
the architecture and requirements for the Minimum Platform initiative which 
will guide Intel platform contributions in the community. The purpose of 
contributing this documentation is to encourage collaboration with the community 
and to provide easily accessible and updated documentation for platforms conforming
to the specification by using the Tianocore-Docs contribution process.

Most notably definitions for the following key concepts are introduced:
 * Advanced features
 * Board abstraction
 * Minimum platform

The concepts are currently realized in implementation in the following locations:
 * AdvancedFeaturePkg
 * Product generation specific board packages (e.g. KabylakeOpenBoardPkg)
 * MinPlatformPkg
 
The specification is in a &quot;draft state&quot;. Actions items will be tracked via
Bugzilla and of course all feedback and contributions are welcome.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7600</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:34:57 +0000</bug_when>
    <thetext>michael will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7700</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-19 18:17:27 +0000</bug_when>
    <thetext>The specification is published in the following locations:

HTML:    https://edk2-docs.gitbooks.io/edk-ii-minimum-platform-specification/content/
PDF:     https://legacy.gitbook.com/download/pdf/book/edk2-docs/edk-ii-minimum-platform-specification
Mobi:    https://legacy.gitbook.com/download/mobi/book/edk2-docs/edk-ii-minimum-platform-specification
ePub:    https://legacy.gitbook.com/download/epub/book/edk2-docs/edk-ii-minimum-platform-specification
Gitbook: https://legacy.gitbook.com/book/edk2-docs/edk-ii-minimum-platform-specification/details
GitHub:  https://github.com/tianocore-docs/edk2-MinimumPlatformSpecification

In addition, the specification has been add the Bugzilla. Closing this BZ.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1695</bug_id>
          
          <creation_ts>2019-04-10 21:35:21 +0000</creation_ts>
          <short_desc>Add PCD to Enabled/Disabled IPv4/IPv6 PXE Support in NetworkPkg</short_desc>
          <delta_ts>2020-04-24 03:56:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2681</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="xueshengfeng">shengfengx.xue</reporter>
          <assigned_to name="xueshengfeng">shengfengx.xue</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>foster.nong</cc>
    
    <cc>shengfengx.xue</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7070</commentid>
    <comment_count>0</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-10 21:35:21 +0000</bug_when>
    <thetext>IPv4 and IPv6 PXE support should be independent function. So it need open a method Enabled/Disabled IPV6/IPV6 PXE Support in PxeBcSupported().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7071</commentid>
    <comment_count>1</comment_count>
      <attachid>285</attachid>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-10 21:42:27 +0000</bug_when>
    <thetext>Created attachment 285
please help review attached code.

please help to review it, thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7076</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-11 02:17:55 +0000</bug_when>
    <thetext>Hi xueshengfeng,

Could you help to create and send the patch to devel@edk2.groups.io for community review ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7104</commentid>
    <comment_count>3</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-12 00:40:25 +0000</bug_when>
    <thetext>(In reply to Yonghong Zhu from comment #2)
&gt; Hi xueshengfeng,
&gt; 
&gt; Could you help to create and send the patch to devel@edk2.groups.io for
&gt; community review ?

how to send the patch to devel@edk2.groups.io? By email？</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7105</commentid>
    <comment_count>4</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-04-12 01:11:33 +0000</bug_when>
    <thetext>(In reply to xueshengfeng from comment #3)
&gt; (In reply to Yonghong Zhu from comment #2)
&gt; &gt; Hi xueshengfeng,
&gt; &gt; 
&gt; &gt; Could you help to create and send the patch to devel@edk2.groups.io for
&gt; &gt; community review ?
&gt; 
&gt; how to send the patch to devel@edk2.groups.io? By email？

Yes, pls refer to &quot;The developer process for the EDK II project&quot; here

https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7129</commentid>
    <comment_count>5</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-15 05:27:10 +0000</bug_when>
    <thetext>add description as below.

Some Platform setup need provide a item for user to Enabled/Disabled IPV4/IPV6 PXE boot, but Origin UefiPxeBcDxe driver doesn&apos;t have such interface. so it need added two PCD to control IPV4/IPV6 PXE function. Platform Developer will override this two PCD to Enabled/Disabled IPV4/IPV6 PXE boot according to Setup value.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7197</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:20:53 +0000</bug_when>
    <thetext>Is this a bug or a feature request ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7212</commentid>
    <comment_count>7</comment_count>
    <who name="xueshengfeng">shengfengx.xue</who>
    <bug_when>2019-04-19 08:12:51 +0000</bug_when>
    <thetext>(In reply to Yonghong Zhu from comment #6)
&gt; Is this a bug or a feature request ?

it&apos;s feature request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7216</commentid>
    <comment_count>8</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-04-21 21:17:31 +0000</bug_when>
    <thetext>Patch is committed @ SHA-1: b29e6365c37f60c1e3757bc1fde448102e98854c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7299</commentid>
    <comment_count>9</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:30:06 +0000</bug_when>
    <thetext>Per EDKII Q2 plan to add the deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>285</attachid>
            <date>2019-04-10 21:42:27 +0000</date>
            <delta_ts>2019-04-10 21:42:27 +0000</delta_ts>
            <desc>please help review attached code.</desc>
            <filename>2206240819IPV4Boot.7z</filename>
            <type>application/octet-stream</type>
            <size>13871</size>
            <attacher name="xueshengfeng">shengfengx.xue</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1478</bug_id>
          
          <creation_ts>2019-01-21 00:16:59 +0000</creation_ts>
          <short_desc>ECC report some coding style issue in MdePkg</short_desc>
          <delta_ts>2019-02-12 23:40:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6153</commentid>
    <comment_count>0</comment_count>
      <attachid>247</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-21 00:16:59 +0000</bug_when>
    <thetext>Created attachment 247
Ecc issues in MdePkg

Detail  error info see the attached file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6198</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-25 00:43:04 +0000</bug_when>
    <thetext>assign to dandan first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6345</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-12 23:40:13 +0000</bug_when>
    <thetext>Fixed via https://github.com/tianocore/edk2/commit/6c61ec4c62b6d1001e8ea6683e83f0e9ec0b3c9b</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>247</attachid>
            <date>2019-01-21 00:16:59 +0000</date>
            <delta_ts>2019-01-21 00:16:59 +0000</delta_ts>
            <desc>Ecc issues in MdePkg</desc>
            <filename>MdePkgecc.csv</filename>
            <type>application/vnd.ms-excel</type>
            <size>1926</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1908</bug_id>
          
          <creation_ts>2019-06-12 04:32:48 +0000</creation_ts>
          <short_desc>BaseTools doesn&apos;t throw an error when a FixAtBuildPcd is used but people forgot to declare the pcd name on inf</short_desc>
          <delta_ts>2022-02-22 04:17:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>amy.chan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8006</commentid>
    <comment_count>0</comment_count>
    <who name="">amy.chan</who>
    <bug_when>2019-06-12 04:32:48 +0000</bug_when>
    <thetext>BaseTools doesn&apos;t throw an error when a FixAtBuildPcd is used but people forgot to declare the pcd name on inf, looks that would make the pcd value become always 0, after declare the pcd on inf the pcd has the correct value and the issue got fix.
Because BaseTools doesn’t know PCD usage in source code, BaseTools doesn’t report error if PCD is missing in INF file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8045</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:21:52 +0000</bug_when>
    <thetext>Bob, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18385</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:30:37 +0000</bug_when>
    <thetext>Amy, please provide more details and an example.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18424</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-22 04:17:16 +0000</bug_when>
    <thetext>Confirmed with Amy, this bug was fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1186</bug_id>
          
          <creation_ts>2018-09-18 04:00:05 +0000</creation_ts>
          <short_desc>[CpuMpPei] Some static code checkers complain address of a local variable being returned function GetStackBase()</short_desc>
          <delta_ts>2018-10-16 03:26:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5000</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-09-18 04:00:05 +0000</bug_when>
    <thetext>Received an issue report by some static code checkers on function GetStackBase() within file UefiCpuPkg\CpuMpPei\CpuPaging.c.

The issue warns that the address of local variable &apos;StackBase&apos; is returned by function GetStackBase().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5001</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-09-18 04:01:01 +0000</bug_when>
    <thetext>Add missing information on field &apos;Release(s) the issue is observed&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5002</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-18 04:39:15 +0000</bug_when>
    <thetext>Take the owership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5025</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:25:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5279</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-10-16 03:26:57 +0000</bug_when>
    <thetext>According to community discussion, we&apos;ll add exception to static check checker. So this tracker will be closed as WONTFIX.

https://lists.01.org/pipermail/edk2-devel/2018-September/thread.html#30177</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1614</bug_id>
          <alias>CVE-2019-11098</alias>
          <creation_ts>2019-03-12 01:28:00 +0000</creation_ts>
          <short_desc>BootGuard TOCTOU vulnerability</short_desc>
          <delta_ts>2021-07-26 10:36:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=3374</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to>guomin.jiang</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>dannf</cc>
    
    <cc>dick_wilkins</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ericj</cc>
    
    <cc>felixp</cc>
    
    <cc>gaoliming</cc>
    
    <cc>hudson</cc>
    
    <cc>Jim_Mortensen</cc>
    
    <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>paul.a.lohr</cc>
    
    <cc>vincent.zimmer</cc>
    
    <cc>vkasthur</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6692</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-12 01:28:00 +0000</bug_when>
    <thetext>We have found a TOCTOU vulnerability which allows an attacker with physical access to achieve code execution after the Boot Guard ACM computes and validates the hash of the IBB and measured the firmware into the TPM PCR0. This means the firmware will be marked as valid and have normal PCR0 values even though unsigned code has run.

The root cause is when the FSP has finished memory init and disables MTRRs (and thereby the cache) in order to switch off No Evict Mode. The code doing this (the SecCore PeiTemporaryRamDonePpi callback), is executed directly from SPI flash, allowing an attacker to intercept execution flow.

As a proof of concept we demonstrated that using an FPGA to substitute a single, targeted SPI transaction we can gain code execution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6693</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-12 01:30:16 +0000</bug_when>
    <thetext>Assign to Michael who&apos;s working on the mitigation solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7391</commentid>
    <comment_count>2</comment_count>
      <attachid>316</attachid>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-07 07:38:50 +0000</bug_when>
    <thetext>Created attachment 316
v1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7446</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-08 22:39:59 +0000</bug_when>
    <thetext>There&apos;s a disclosure of this issue in following conference. 

https://conference.hitb.org/hitbsecconf2019ams/sessions/now-you-see-it-toctou-attacks-against-secure-boot-and-bootguard/

According to presenter&apos;s method, this issue might be out of scope of eminent threat model. We&apos;ll will open this tracker to public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7447</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-08 22:40:36 +0000</bug_when>
    <thetext>CVE Number: CVE-2019-11098</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7467</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-09 02:37:36 +0000</bug_when>
    <thetext>The mitigation patches are available in a edk2-staging branch: https://github.com/tianocore/edk2-staging/tree/BootGuardTocTouVulnerabilityMitigation.

This solution has been tested to mitigate the vulnerability, however the code is not production ready. The solution will evolve in this branch based on community feedback, further design review, and standardization of interfaces.

For more information regarding the changes, please follow the Readme.md in the staging branch - https://github.com/tianocore/edk2-staging/blob/BootGuardTocTouVulnerabilityMitigation/Readme.md.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8189</commentid>
    <comment_count>6</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-06-25 16:58:20 +0000</bug_when>
    <thetext>If this hasn&apos;t already been un-embargoed, I would support un-embargoing.
If it has been, should we track the issue outside of this security BZ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8193</commentid>
    <comment_count>7</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2019-06-25 22:05:18 +0000</bug_when>
    <thetext>Phoenix agrees that this code is not production ready. Has there been any feedback and any progress toward a complete fix?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8454</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-15 04:15:33 +0000</bug_when>
    <thetext>Bret,
It&apos;s been un-embargoed. But I suggest we still make use of this BZ for this issue for any future changes. I don&apos;t see any benefit for a separate BZ for the same issue.

Dick,
There&apos;s no feedback from community so far. But we keep working on this issue to avoid regression and make it product quality, like backporting the solution to different type of platforms based on old releases and completing required validation works. Since the changes are big, a thorough technical review of the whole solution is demanded. Once it&apos;s done and passed, we&apos;ll checkin the solution to trunk.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10032</commentid>
    <comment_count>9</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2019-10-16 11:56:49 +0000</bug_when>
    <thetext>Jian,

This is currently scored as a 9.1 on CVSS 3.0.  Since this requires obvious physical modification of the board, this score seems high to me.  Did Intel score this or the researcher?

Regards,
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10981</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2020-01-27 20:34:46 +0000</bug_when>
    <thetext>I&apos;d like to provide an update. After further evaluation on a few platforms, the solution provided in edk2-staging is not preferred for wider deployment because it requires a high number of platform firmware touchpoints. This is primarily because all pointers into CPU LLC can not automatically be migrated if the pointers were stored in custom data structures in dynamically allocated buffers. These could be updated by platform-specific firmware code with knowledge of the data buffer address and data structure format but the process is time consuming and all execution paths that might access a pointer to the CAR address range must be analyzed. The changes also increased complexity of core components such as PeiCore which is undesirable.

I&apos;d like to describe an alternative approach here, though still conceptual, to gather any early feedback. In this proposal, the verified IBB contents are retained at a constant address range from initial IBB execution (in CPU LLC) through execution in permanent memory (DRAM) so migration of individual pointers is not required. As currently defined, this approach is simpler to implement than the solution in edk2-staging and does not require any changes to source code in the edk2 repository. At a high-level it involves the following:

1. Existing behavior: Load an IBB image from non-volatile media (e.g. SPI flash) into CPU LLC.

2. New behavior: The address range of the IBB (&quot;IBB Range&quot;) should be chosen such that it will later be covered by permanent memory. Note that this range will likely be lower in the memory map than previous XIP IBB code which was typically mapped below 4GB.

3. Existing behavior: The IBB image in CPU LLC will be verified and measured to meet the given Boot Guard profile and platform requirements.

4. New behavior: After permanent memory is initialized and before NEM is disabled, copy the IBB image to a temporary buffer in permanent memory. Note that reads to &quot;IBB Range&quot; will hit the CPU cache until NEM is disabled and the CPU cache is flushed later in the boot flow.

5. Existing behavior: Allow the PEI Core to shadow to DRAM.

6. New behavior: After NEM is disabled and before gEfiPeiMemoryDiscoveredPpiGuid is installed (before a pointer to the IBB address range has an opportunity to be dereferenced), copy the IBB image from the temporary buffer to the same address range used in NEM.

To hook the new behavior into the existing boot flow:
* #2 could have the IBB statically linked at a known fixed address range for the system or perhaps a constant virtual address range
* #4 could be performed with the TemporaryRamMigration () function in EFI_PEI_TEMPORARY_RAM_SUPPORT_PPI
* #6 could be performed in the TemporaryRamDone () function in EFI_PEI_TEMPORARY_RAM_DONE_PPI

In the case any portion of early IBB code is mapped from SPI flash higher in memory, it is not allowed to have callbacks to its address range. It is still recommended to mark the pages for any SPI flash MMIO IBB ranges as NP after its execution is complete by verified IBB code to verify this is the case.

Any feedback is welcome. I&apos;ve moved ownership to Jian who will follow up on the details and provide further guidance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11069</commentid>
    <comment_count>11</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:11:09 +0000</bug_when>
    <thetext>2/5/2020 infosec meeting - question why this is still embargoed.  follow up on mid-last year suggestion to open this, esp since this has a CVE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11124</commentid>
    <comment_count>12</comment_count>
    <who name="Paul Lohr">paul.a.lohr</who>
    <bug_when>2020-02-06 12:16:33 +0000</bug_when>
    <thetext>It was publicly disclosed on 5-8-19, so it can&apos;t be embargoed any longer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11451</commentid>
    <comment_count>13</comment_count>
    <who name="Trammell Hudson">hudson</who>
    <bug_when>2020-02-27 05:55:19 +0000</bug_when>
    <thetext>(In reply to Eric Johnson from comment #9)
&gt; This is currently scored as a 9.1 on CVSS 3.0.  Since this requires obvious
&gt; physical modification of the board, this score seems high to me.  Did Intel
&gt; score this or the researcher?

I&apos;m one of the researchers who found the vulnerability and scored it with the approved CVSS calculator.  No hardware modifications are required - it works with a temporary chip clip on the SPI flash connected to the spispy hardware.

In addition to the FSP MTRR issues, most of the vendor firmwares have a large number of TOCTOU vulnerabilities that the spispy can use to get code execution in the PEI or DXE phases, sometimes as early as when SecCore is invoked by the ACM. The proposed fix to unmap the SPI flash seems like a reasonable way to try to reduce this entire class of attacks, although with the additional complexity mentioned in comment #10.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12500</commentid>
    <comment_count>14</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2020-05-13 20:38:42 +0000</bug_when>
    <thetext>(In reply to Trammell Hudson from comment #13)
&gt; (In reply to Eric Johnson from comment #9)
&gt; &gt; This is currently scored as a 9.1 on CVSS 3.0.  Since this requires obvious
&gt; &gt; physical modification of the board, this score seems high to me.  Did Intel
&gt; &gt; score this or the researcher?
&gt; 
&gt; I&apos;m one of the researchers who found the vulnerability and scored it with
&gt; the approved CVSS calculator.  No hardware modifications are required - it
&gt; works with a temporary chip clip on the SPI flash connected to the spispy
&gt; hardware.
&gt; 
&gt; In addition to the FSP MTRR issues, most of the vendor firmwares have a
&gt; large number of TOCTOU vulnerabilities that the spispy can use to get code
&gt; execution in the PEI or DXE phases, sometimes as early as when SecCore is
&gt; invoked by the ACM. The proposed fix to unmap the SPI flash seems like a
&gt; reasonable way to try to reduce this entire class of attacks, although with
&gt; the additional complexity mentioned in comment #10.

Hey Trammell.  Thank you for your response.  Perhaps I misunderstood your presentation but I thought that you were actively monitoring the SPI bus and injecting a new payload at boot.  This is what I mean by modifying the platform.  This would mean that a physical inspection would be sufficient to detect the compromise.  That being said, I prefer to defer to the researcher&apos;s scoring.  You did all of the hard work and deserve the right to score it as you deem fair.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12532</commentid>
    <comment_count>15</comment_count>
    <who name="Vinod Kasthuri">vkasthur</who>
    <bug_when>2020-05-19 21:40:13 +0000</bug_when>
    <thetext>What is the recommendation for OEM verification of Bootguard to confirm its free of this vulnerability? Has the below tool been used by anyone other than the researchers who found this vulnerability?

https://github.com/osresearch/spispy</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13067</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-08 12:56:50 +0000</bug_when>
    <thetext>* [edk2-devel] [PATCH 0/6]
  Migrate Pointer from flash to permanent memory (CVE-2019-11098)

  https://edk2.groups.io/g/devel/message/61822
  msgid &lt;20200630072422.753-1-guomin.jiang@intel.com&gt;

* [edk2-devel] [PATCH v2 0/9]
  Migrate Pointer from flash to permanent memory (CVE-2019-11098)

  https://edk2.groups.io/g/devel/message/61941
  msgid &lt;20200702051525.1102-1-guomin.jiang@intel.com&gt;

* [edk2-devel] [PATCH v3 00/11]
  Add new feature that evacuate temporary to permanent memory (CVE-2019-11098)

  https://edk2.groups.io/g/devel/message/62194
  msgid &lt;20200708024608.915-1-guomin.jiang@intel.com&gt;

* [edk2-devel] [PATCH v4 0/9]
  Add new feature that evacuate temporary to permanent memory (CVE-2019-11098)

  https://edk2.groups.io/g/devel/message/62218
  msgid &lt;20200708081059.691-1-guomin.jiang@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13084</commentid>
    <comment_count>17</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-10 02:55:23 +0000</bug_when>
    <thetext>Post change v5 at https://edk2.groups.io/g/devel/message/62265.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13137</commentid>
    <comment_count>18</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-20 20:31:26 +0000</bug_when>
    <thetext>Post change v6 at https://edk2.groups.io/g/devel/message/62824</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13159</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-22 17:31:55 +0000</bug_when>
    <thetext>v7:
https://edk2.groups.io/g/devel/message/63092
http://mid.mail-archive.com/20200722083657.739-1-guomin.jiang@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13171</commentid>
    <comment_count>20</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-24 05:57:50 +0000</bug_when>
    <thetext>v8: https://edk2.groups.io/g/devel/message/63232</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13188</commentid>
    <comment_count>21</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-07-27 22:46:26 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/830 merged.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13189</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-28 06:00:53 +0000</bug_when>
    <thetext>We should please state the commit range (or at least the finishing commit) as well, on the bugzilla ticket: a44f558a84c6..ffde22468e2f.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13228</commentid>
    <comment_count>23</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2020-07-29 10:47:57 +0000</bug_when>
    <thetext>Add wiki page https://github.com/GuoMinJ/tianocore.github.io/wiki/BtgTocTouMitigation for commit a44f558a84c6..ffde22468e2f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13663</commentid>
    <comment_count>24</comment_count>
    <who name="Dick Wilkins">dick_wilkins</who>
    <bug_when>2020-09-11 19:55:06 +0000</bug_when>
    <thetext>When will this be confirmed and moved to the stable branch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13668</commentid>
    <comment_count>25</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-13 23:27:08 +0000</bug_when>
    <thetext>This fix is included in edk2 stable tag 202008: https://github.com/tianocore/edk2/releases/tag/edk2-stable202008</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13910</commentid>
    <comment_count>26</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2020-10-07 15:28:23 +0000</bug_when>
    <thetext>Are there any test tools / validation guidance from Intel or Trammell?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13911</commentid>
    <comment_count>27</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-10-07 16:15:18 +0000</bug_when>
    <thetext>There is some high level validation guidance here:
https://github.com/tianocore/tianocore.github.io/wiki/Boot-Guard-TOCTOU-Vulnerability-Mitigation
Look for &quot;Verifying Migration&quot;. 

Also see commit commit d7c9de51d249ee101b4d90357a4272b36c831047. The patch sets up page table in post-mem PEI and marks SPI flash range as Not Present. Subsequent accesses to SPI flash (violations) will result in page fault.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14094</commentid>
    <comment_count>28</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2020-10-26 20:17:35 +0000</bug_when>
    <thetext>Regarding GDT migration introduced by commit 60b12e69fb1c8c7180fdda92f008248b9ec83db1.

If I&apos;m not mistaken there may still be TOCTOU in the GDT migration code.
This line copies GDT to memory
https://github.com/tianocore/edk2/blob/b70c4fdcde83689d8cd1e5e2faf598d0087934a3/UefiCpuPkg/CpuMpPei/CpuMpPei.c#L462
I think the source buffer is in ROM.
GDT migration happens in MigrateGdt function, which is called by the 
Memory Discovered PPI Callback. The callback is invoked when CAR is disabled.
So the copy operation performs SPI access.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14932</commentid>
    <comment_count>29</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-01-29 03:10:10 +0000</bug_when>
    <thetext>Send patch for bugfix.

[edk2-devel] [PATCH v2 1/1] UefiCpuPkg: Move MigrateGdt from DiscoverMemory to TempRamDone. (CVE-2019-11098)

https://edk2.groups.io/g/devel/message/70899

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15010</commentid>
    <comment_count>30</comment_count>
    <who name="">guomin.jiang</who>
    <bug_when>2021-02-04 00:04:00 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/pull/1405 merged
commit f6ec1dd34fb6b9757b5ead465ee2ea20c182b0ac</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>316</attachid>
            <date>2019-05-07 07:38:50 +0000</date>
            <delta_ts>2019-05-07 07:38:50 +0000</delta_ts>
            <desc>v1</desc>
            <filename>bz1614-btg-toctou-vul-patches-v1.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>33739</size>
            <attacher name="Wang, Jian J">jian.j.wang</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1499</bug_id>
          
          <creation_ts>2019-01-29 22:59:45 +0000</creation_ts>
          <short_desc>Enable compiler cache support in edk2 build</short_desc>
          <delta_ts>2019-08-29 15:16:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6236</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-01-29 22:59:45 +0000</bug_when>
    <thetext>Compiler cache can greatly improve the build performance and guarantee the build result safe. In our testing, the compiler cache can improve the overall clean build time usually by 30+% in linux and 10+% in windows. The compiler cache are very fit to improve the Continuous Integration (CI) build performance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6439</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 01:53:52 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to Steven</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9307</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:12:16 +0000</bug_when>
    <thetext>Has this been fixed in commit fb94f83131f0 (&quot;BaseTools: Enable compiler cache support in edk2 build&quot;, 2019-03-12)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9344</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:41:50 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Has this been fixed in commit fb94f83131f0 (&quot;BaseTools: Enable compiler
&gt; cache support in edk2 build&quot;, 2019-03-12)?

This question is for Steven to answer, to be clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9363</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 21:48:07 +0000</bug_when>
    <thetext>Yes. This feature is fixed at fb94f83131f032cd5ce027ea706c45513c1a799e.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1401</bug_id>
          
          <creation_ts>2018-12-13 03:51:56 +0000</creation_ts>
          <short_desc>Add support for get organization name to x509 and BaseCryptLib</short_desc>
          <delta_ts>2019-04-27 23:32:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5861</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-13 03:51:56 +0000</bug_when>
    <thetext>Create common function to get parts of x509

Use common function to get common name (existing api) and add new api to get organization name.  

shared internal func: https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Library/BaseCryptLib/Pk/CryptX509.c#L300 

Get common name: 
https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Library/BaseCryptLib/Pk/CryptX509.c#L468

Get org name:
https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Library/BaseCryptLib/Pk/CryptX509.c#L507</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5880</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:55:17 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7249</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-24 03:48:25 +0000</bug_when>
    <thetext>finished at
https://github.com/tianocore/edk2/commit/e2a673b85336bc2d88f0b3975679b2ae7bf92f2e
https://github.com/tianocore/edk2/commit/912e1e1ee27ed55baefac0002070472116202cbb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7304</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:32:55 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1837</bug_id>
          
          <creation_ts>2019-05-23 01:39:51 +0000</creation_ts>
          <short_desc>Tool to generate a Windows Firmware Update Drivers</short_desc>
          <delta_ts>2019-08-20 23:11:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7758</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-05-23 01:39:51 +0000</bug_when>
    <thetext>The tool is designed to generate Windows Firmware Update Drivers, the input is one drivername.cap with related parameters, the output Windows Driver package are composed by drivername.cap, drivername.inf and drivername.cat to update the single payload in device.
The tool is put in BaseTools/Source/Python/Capsule</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7759</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-23 09:47:14 +0000</bug_when>
    <thetext>Would this support LVFS &lt;http://fwupd.org/&gt; too? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7771</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-05-23 20:58:19 +0000</bug_when>
    <thetext>This BZ is focused on Windows Firmware Update Drivers.

A prototype of the LVFS support is implemented for MinnowMax in the following commit:

https://github.com/tianocore/edk2/commit/1bb262ea0440e4a74ba78af52ac4b8fd3ab91874

This prototype has moved to edk2-platforms and is located at:

https://github.com/tianocore/edk2-platforms/tree/master/Platform/Intel/Vlv2TbltDevicePkg/Feature/Capsule/GenerateCapsule

This prototype is implemented as windows bat files.  The additional work required is to implement a complete solution in python to generate the LVFS compatible content on all supported OSes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7780</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-24 05:46:29 +0000</bug_when>
    <thetext>Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7814</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-05-27 21:49:34 +0000</bug_when>
    <thetext>The tool leverages/ports CatGenerator/InfGenerator/WindowsCapsuleSupportHelper from ProjectMu, add GenerateWindowsDriver to generate the Windows Drivers Package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7882</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 21:02:09 +0000</bug_when>
    <thetext>eric will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100</commentid>
    <comment_count>6</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-20 23:08:08 +0000</bug_when>
    <thetext>The tool is committed to edk2/master with 48d8d4d80bb299af5422312d92b044cb10a2e790.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9101</commentid>
    <comment_count>7</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-20 23:11:32 +0000</bug_when>
    <thetext>The tool has been committed on 8/15.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1208</bug_id>
          
          <creation_ts>2018-09-25 15:24:27 +0000</creation_ts>
          <short_desc>fix the operand list bugs in &quot;BaseSynchronizationLib/*/GccInline.c&quot;</short_desc>
          <delta_ts>2018-10-17 13:17:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1207</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5093</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-25 15:24:27 +0000</bug_when>
    <thetext>The following source files:

  MdePkg/Library/BaseSynchronizationLib/Ia32/GccInline.c
  MdePkg/Library/BaseSynchronizationLib/X64/GccInline.c

contain multiple bugs, wrt. inline assembly operand list rules that concern
input-output operands.

This doesn&apos;t just apply to the recently pushed InternalSyncIncrement() /
InternalSyncDecrement() changes (refer to bug 1207 for those, specifically);
it applies to the preexistent InternalSyncCompareExchange*() functions as
well.

- IA32 InternalSyncCompareExchange16(): while it correctly marks
  &quot;ExchangeValue&quot; as an input-output operand, it marks &quot;*Value&quot; as
  input-only.

- IA32 InternalSyncCompareExchange32(): ditto. In addition, the operand
  numbering comments are wrong. %4 should be %3.

- IA32 InternalSyncCompareExchange64(): ... this variant (which is very
  different from the rest) looks correct.

- X64 InternalSyncCompareExchange16(): uses &quot;CompareValue&quot; as an
  input-output operand, without marking it as such. Same for &quot;*Value&quot;.

- X64 InternalSyncCompareExchange32(): ditto

- X64 InternalSyncCompareExchange64(): ditto

The core problem is that input-output operands for the inline assembly
templates must be marked as such. The GCC documentation describes two ways
for that (paraphrasing
&lt;https://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Extended-Asm.html&gt;):

- List the r/w operand only in the output operand list, and use the &quot;+&quot; (not
  &quot;=&quot;) constraint.

- Alternatively, list the operand in both input and output lists, and use
  the &quot;=&quot; constraint in the output list. However, in the input list, the
  constraing must be &quot;N&quot; (a decimal number), where N stands for the operand
  number in the output list. This is how GCC knows those operands are
  actually the same. Using just the same *expression* to fill in the two
  instances (= input and output) of the operand is not guaranteed to work;
  the gcc documentation explicitly highlights this fact.

In addition, in the ASM template, operands could be referenced by &quot;[name]&quot;
instead of %N. This has been supported since at least gcc-3.1. It could make
the template a lot more readable.

Mailing list references:

https://lists.01.org/pipermail/edk2-devel/2018-September/030141.html
https://lists.01.org/pipermail/edk2-devel/2018-September/030143.html
https://lists.01.org/pipermail/edk2-devel/2018-September/030150.html
https://lists.01.org/pipermail/edk2-devel/2018-September/030155.html


These issues should not be fixed by patching the files

  MdePkg/Library/BaseSynchronizationLib/Ia32/GccInline.c
  MdePkg/Library/BaseSynchronizationLib/X64/GccInline.c

Instead, based on the discussion here:

https://lists.01.org/pipermail/edk2-devel/2018-September/029607.html
https://lists.01.org/pipermail/edk2-devel/2018-September/029610.html

we should simply remove the GCC-specific inline assembly implementation, and
adopt the NASM code (currently used only with the INTEL toolchain family)
for GCC as well.


This BZ depends on bug 1207, because the regression described in bug 1207
should be fixed ASAP, independently of what we decide here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5137</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-27 20:07:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5141</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-09-27 20:41:22 +0000</bug_when>
    <thetext>I already discussed this option with Liming weeks ago. It seems a XCODE issue forbids to use NASM instead of GCC Inline.
So transfer this to Liming to close it when XCODE issue is fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5151</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-28 04:41:45 +0000</bug_when>
    <thetext>Ah yes, now I remember. We&apos;ve been removing GNU assembly files (standalone *.S files) as well, replacing them with the *.nasm variants -- but that hasn&apos;t been possible for *libraries*, only for drivers. Because of an XCODE issue. Apparently the same applies to inline GNU assembly. This is a valid point, and I&apos;m glad I separated the direct regression fix (bug 1207) from the long-term operand list fixes (this bug, i.e. 1208). I didn&apos;t expect bug 1208 would take *this* long, but now we benefit from the separation.

Adding bug 881 as a pre-requisite for this bug, for now.

And all that leaves us with the following question:

Until the XCODE issue (bug 881) is fixed for good, should we correct the dormant operand list problems (that I pointed out in comment 0) in the &quot;GccInline.c&quot; files first? I.e., without switching to *.nasm for now? Because, those unmarked input-output operands are real bugs, and we&apos;ve just gotten lucky with gcc thus far that they haven&apos;t been miscompiled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5161</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-29 18:25:41 +0000</bug_when>
    <thetext>Because the long-term solution is blocked by bug 881, let&apos;s fix the GCC inline assembly for now.

Posted
[PATCH 0/5] MdePkg/BaseSynchronizationLib GCC: fixes, cleanups
http://mid.mail-archive.com/20180929222312.32150-1-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2018-September/030325.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5298</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-10-17 13:17:23 +0000</bug_when>
    <thetext>Fixed in commit range b7dc8888f314..3a0329bed2a2.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1638</bug_id>
          
          <creation_ts>2019-03-20 21:48:08 +0000</creation_ts>
          <short_desc>Introduce a PCD for firmware device default image type ID</short_desc>
          <delta_ts>2020-07-08 22:09:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FmpDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6787</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-03-20 21:48:08 +0000</bug_when>
    <thetext>The function GetImageTypeIdGuid in FmpDxe driver would return the gEfiCallerIdGuid while FmpDeviceLib does not provide a GUID value. It is better to provide a default GUID value instead of gEfiCallerIdGuid.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6833</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 08:57:36 +0000</bug_when>
    <thetext>change status to confirmed, let Zhichao to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8957</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 11:34:13 +0000</bug_when>
    <thetext>https://bugzilla.tianocore.org/show_bug.cgi?id=1525 covers this change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13070</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-08 22:09:52 +0000</bug_when>
    <thetext>As per the comment 2, close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1134</bug_id>
          <alias>CVE-2018-12180</alias>
          <creation_ts>2018-08-30 20:40:25 +0000</creation_ts>
          <short_desc>Buffer Overflow in BlockIo service for RAM disk</short_desc>
          <delta_ts>2019-08-01 15:27:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ryan Ware">ryan.ware</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>hao.a.wu</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4773</commentid>
    <comment_count>0</comment_count>
      <attachid>211</attachid>
    <who name="Ryan Ware">ryan.ware</who>
    <bug_when>2018-08-30 20:40:25 +0000</bug_when>
    <thetext>Created attachment 211
RAM disk patches

When registering a Ram disk whose size is not a multiple of 512 bytes, the BlockIo protocol produced by the RamDiskDxe driver will incur memory read/write overrun.
The memory overrun will happen when reading/writing the last block on the Ram disk.

How to reproduce this issue:
I can think of two ways to reproduce:
1. Create a Ram disk whose size is not a multiple of 512 bytes (e.g. 4, 153, 1027, etc.) within the BIOS setup page.
2. During HTTP boot, one can set the URL of the HTTP server, the size of the image file on the server is not a multiple of 512 bytes.
The Ram disks created on the above two scenario will have the memory overrun issue on their last block.

Impact:

Since the Ram disk feature is in companion of the HTTP boot feature, confirmed with the HTTP boot owner that OSes like SUSE and RedHat already have the HTTP boot support. Hence, these OSes may be impacted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4803</commentid>
    <comment_count>1</comment_count>
    <who name="hhtian">hot.tian</who>
    <bug_when>2018-09-02 21:46:02 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5188</commentid>
    <comment_count>2</comment_count>
      <attachid>223</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-08 21:19:05 +0000</bug_when>
    <thetext>Created attachment 223
RAM disk patches V2

Update V2 of the patch file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5633</commentid>
    <comment_count>3</comment_count>
      <attachid>233</attachid>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-11-19 07:26:43 +0000</bug_when>
    <thetext>Created attachment 233
RAM disk patches V3

Update the attached patch for refining the patch commit log messages, no code changes update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6513</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-02-24 19:43:46 +0000</bug_when>
    <thetext>We plan to publish the patch for this issue into Q1&apos;19 stable tag. Any concern or objection, please raise it ASAP. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6529</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-02-26 02:18:42 +0000</bug_when>
    <thetext>Proceed to publish this issue and fix (CVE-2018-12180)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6537</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-26 12:16:04 +0000</bug_when>
    <thetext>Latest patch series on the list:

[edk2] [PATCH v3 0/2] MdeModulePkg: Resolve buffer cross boundary access in Ramdisk
https://lists.01.org/pipermail/edk2-devel/2019-February/037269.html
http://mid.mail-archive.com/20190226125651.14260-1-hao.a.wu@intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6567</commentid>
    <comment_count>7</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-27 19:17:32 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/fccdb88022c1f6d85c773fce506b10c879063f1d
https://github.com/tianocore/edk2/commit/38c9fbdcaa0219eb86fe82d90e3f8cfb5a54be9f</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>211</attachid>
            <date>2018-08-30 20:40:25 +0000</date>
            <delta_ts>2018-10-08 21:19:05 +0000</delta_ts>
            <desc>RAM disk patches</desc>
            <filename>Patch-V1.zip</filename>
            <type>application/zip</type>
            <size>125691</size>
            <attacher name="Ryan Ware">ryan.ware</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>223</attachid>
            <date>2018-10-08 21:19:05 +0000</date>
            <delta_ts>2018-11-19 07:26:43 +0000</delta_ts>
            <desc>RAM disk patches V2</desc>
            <filename>Patch-V2.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>136451</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>233</attachid>
            <date>2018-11-19 07:26:43 +0000</date>
            <delta_ts>2018-11-19 07:26:43 +0000</delta_ts>
            <desc>RAM disk patches V3</desc>
            <filename>Patch-V3.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>136823</size>
            <attacher name="Hao Wu">hao.a.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1969</bug_id>
          
          <creation_ts>2019-07-10 16:15:19 +0000</creation_ts>
          <short_desc>Handle NULL Data Pointer Properly in ReportStatusCodeRouterRuntimeDxe at TPL Less Than TPL_HIGH</short_desc>
          <delta_ts>2020-04-20 23:53:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8397</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-07-10 16:15:19 +0000</bug_when>
    <thetext>2 Bugs in router
MdeModulePkg/Universal/ReportStatusCodeRouter/RuntimeDxe/ReportStatusCodeRouterRuntimeDxe.c

1. Unsafe handling of RSC_DATA_ENTRY and EFI_STATUS_CODE_DATA.  
EFI_STATUS_CODE_DATA has a headersize field that allows headersize to be different than compile sizeof.  Algorithms walking buffers of this data must account for this.  

2. ReportStatusCode called with NULL for data parameter not properly supported in the router when the handler is registered at tpl lower than high.  
This is because uninitialized data can be sent to handler on their event notification.  

Proposed patch for both 1 and 2 here. 
https://github.com/microsoft/mu_basecore/commit/17d4af0bd2f0f256c389a2198bbbddca128c7efd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8413</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:12:52 +0000</bug_when>
    <thetext>Bug Triage: mark as confirmed and assign to Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8722</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-01 22:39:22 +0000</bug_when>
    <thetext>Dandan will help check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10484</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-19 22:24:00 +0000</bug_when>
    <thetext>There is a third bug in this same code.  

These are memory corruption bugs and should be fixed.  I am not sure why it has been almost 5 months with no progress.  

https://github.com/microsoft/mu_basecore/pull/40</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10491</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-11-20 03:29:35 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #3)
&gt; There is a third bug in this same code.  
&gt; 
&gt; These are memory corruption bugs and should be fixed.  I am not sure why it
&gt; has been almost 5 months with no progress.  
&gt; 
&gt; https://github.com/microsoft/mu_basecore/pull/40

Sorry for the later response. Since I am busy with other tasks and this bug has not been specified with the severity. I may miss it.

I see you have already have sample fix patch, could you help to go through Edk2 devlopement process to submit the fix to Edk2 master?


Thanks,
Dandan</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12151</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 15:28:09 +0000</bug_when>
    <thetext>To get progress made on this, I&apos;ll take ownership of these changes.

To cleanly track it, I&apos;m separating the issues as follows:

1 (this BZ): Properly handle a NULL Data pointer in ReportDispatcher()

2 (new BZ): Unsafe handling of RSC_DATA_ENTRY and EFI_STATUS_CODE_DATA when traversing data buffers.

3 (new BZ): Update the RSC data buffer to the newly allocated buffer on reallocation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12155</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 16:25:35 +0000</bug_when>
    <thetext>(In reply to Michael Kubacki from comment #5)
&gt; To get progress made on this, I&apos;ll take ownership of these changes.
&gt; 
&gt; To cleanly track it, I&apos;m separating the issues as follows:
&gt; 
&gt; 1 (this BZ): Properly handle a NULL Data pointer in ReportDispatcher()
&gt; 
&gt; 2 (new BZ): Unsafe handling of RSC_DATA_ENTRY and EFI_STATUS_CODE_DATA when
&gt; traversing data buffers.
&gt; 
&gt; 3 (new BZ): Update the RSC data buffer to the newly allocated buffer on
&gt; reallocation

Bugzilla links to the above list:

1. This BZ
2. https://bugzilla.tianocore.org/show_bug.cgi?id=2669
3. https://bugzilla.tianocore.org/show_bug.cgi?id=2670</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12159</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 18:12:50 +0000</bug_when>
    <thetext>V1 patch is on the mailing list - https://edk2.groups.io/g/devel/message/57089</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12237</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 14:26:12 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/tree/bz1969_rsc_handle_null_data_pointer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12259</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-20 23:53:37 +0000</bug_when>
    <thetext>Submitted to edk2 in commit https://github.com/tianocore/edk2/commit/7a7bedce25d257c1058d9a5212a3a0554c5d70a6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1043</bug_id>
          
          <creation_ts>2018-07-25 03:52:29 +0000</creation_ts>
          <short_desc>Redundant info are defined in UefiCpuPkg SecCore module INF</short_desc>
          <delta_ts>2018-09-21 03:24:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4384</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 03:52:29 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are many redundant definitions defined in UefiCpuPkg SecCore module INF file. Need to remove it.


Below is the fix reference:
--- a/UefiCpuPkg/SecCore/SecCore.inf
+++ b/UefiCpuPkg/SecCore/SecCore.inf
@@ -48,36 +48,8 @@
   UefiCpuPkg/UefiCpuPkg.dec

 [LibraryClasses]
-  BaseMemoryLib
-  DebugLib
-  BaseLib
   PlatformSecLib
   PcdLib
-  DebugAgentLib
-  UefiCpuLib
-  PeCoffGetEntryPointLib
-  PeCoffExtraActionLib
-  CpuExceptionHandlerLib
-  ReportStatusCodeLib
-  PeiServicesLib
-  PeiServicesTablePointerLib
-  HobLib
-
-[Ppis]
-  ## SOMETIMES_CONSUMES
-  ## PRODUCES
-  gEfiSecPlatformInformationPpiGuid
-  ## SOMETIMES_CONSUMES
-  ## SOMETIMES_PRODUCES
-  gEfiSecPlatformInformation2PpiGuid
-  gEfiTemporaryRamDonePpiGuid                          ## PRODUCES
-  ## NOTIFY
-  ## SOMETIMES_CONSUMES
-  gPeiSecPerformancePpiGuid
-
-[Guids]
-  ## SOMETIMES_PRODUCES   ## HOB
-  gEfiFirmwarePerformanceGuid

 [Pcd]
   gUefiCpuPkgTokenSpaceGuid.PcdPeiTemporaryRamStackSize  ## CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4428</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:54:57 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4471</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-07-31 23:13:41 +0000</bug_when>
    <thetext>Shenglei will help to fix it as he has experience to fix such issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4503</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-08-03 03:22:40 +0000</bug_when>
    <thetext>After testing,many library classses and Ppis are required.

Blow is the reference after fix:
[LibraryClasses]
  BaseMemoryLib
  DebugLib
  PlatformSecLib
  PcdLib
  UefiCpuLib
  PeCoffGetEntryPointLib
  PeCoffExtraActionLib
  ReportStatusCodeLib
  PeiServicesLib
  PeiServicesTablePointerLib  
  HobLib

[Ppis]
  gEfiTemporaryRamDonePpiGuid                          ## PRODUCES

[Pcd]
  gUefiCpuPkgTokenSpaceGuid.PcdPeiTemporaryRamStackSize  ## CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5047</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 03:24:10 +0000</bug_when>
    <thetext>After a test, DebugAgentLib and CpuExceptionHandlerLib proved to be required.
Fixed at:
https://github.com/tianocore/edk2/commit/997731e796f51df57c113dfd966e818622c3d4aa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1778</bug_id>
          
          <creation_ts>2019-05-07 08:43:55 +0000</creation_ts>
          <short_desc>ECC need to handle lower case &apos;static&apos; at the beginning of functions</short_desc>
          <delta_ts>2019-10-15 01:07:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7392</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-05-07 08:43:55 +0000</bug_when>
    <thetext>Based on the mailing discussion:
https://edk2.groups.io/g/devel/topic/patch_v2_3_8/31318888

We are going to add keyword (lower case) &apos;static&apos; for functions and global variables which are not referenced outside their current C file.

However, the ECC tool only recognizes upper case &apos;STATIC&apos; at this moment. This will lead to issue reports for new codes that follow the above coding style.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7442</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-08 22:22:12 +0000</bug_when>
    <thetext>Bob, please help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10019</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-10-15 01:07:30 +0000</bug_when>
    <thetext>fixed in d6f5a5050b942cc0ec08bdc39900b8231957e18c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1244</bug_id>
          
          <creation_ts>2018-10-11 22:51:14 +0000</creation_ts>
          <short_desc>BaseTools: Missing the .depex file info in increment build generate Asbuilt inf file.</short_desc>
          <delta_ts>2018-10-12 23:28:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5240</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 22:51:14 +0000</bug_when>
    <thetext>After the first build, in the build output some driver (EmuVariableFvbRuntimeDxe) have .depex file be generated, and this file info is listed in the EmuVariableFvbRuntimeDxe.inf file [Binaries] section.

Then without any changes we do increment build, we found the .depex is still list in the output directory, but this file info is not list in the Asbuilt inf file [Binaries] section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5250</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-12 23:28:09 +0000</bug_when>
    <thetext>mail thread: https://lists.01.org/pipermail/edk2-devel/2018-October/030691.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5251</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-12 23:28:34 +0000</bug_when>
    <thetext>commit version SHA-1: b87099f336cf40c7de42d037451eca96c5bbd2b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1554</bug_id>
          
          <creation_ts>2019-02-21 02:41:30 +0000</creation_ts>
          <short_desc>Ecc tool can&apos;t parse configure file and exception list by symbol &quot;-c&quot; and &quot;-e&quot; with Python3.7</short_desc>
          <delta_ts>2019-02-26 21:48:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xueminyu">xuemin.yuan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhijux.fan</cc>
          <deadline>2019-02-26</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6476</commentid>
    <comment_count>0</comment_count>
    <who name="xueminyu">xuemin.yuan</who>
    <bug_when>2019-02-21 02:41:30 +0000</bug_when>
    <thetext>Fetch the latest edk2 source code and launch Ecc scan by python source, here we find Ecc tool can&apos;t parse configure file and exception list by symbol &quot;-c&quot; and &quot;-e&quot; after upgrade Python from 2.7 to 3.7.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6493</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:31:04 +0000</bug_when>
    <thetext>Assign to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6541</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-02-26 21:48:51 +0000</bug_when>
    <thetext>fix it in SHA-1: de72c9d1da8d2d81477f921644db7a55912cddf6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1461</bug_id>
          
          <creation_ts>2019-01-15 03:18:19 +0000</creation_ts>
          <short_desc>[ResetSystemLib] Add a library instance that can be linked against Runtime driver</short_desc>
          <delta_ts>2019-02-21 21:15:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6094</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-15 03:18:19 +0000</bug_when>
    <thetext>For now there is no ResetSystemLib instance that can be linked against Runtime driver.
And it&apos;s improper to extend the existing DxeResetSystemLib to support Runtime driver because no one converts gRT when entering RT phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6142</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:39:32 +0000</bug_when>
    <thetext>bug scrub: assign to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6502</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-02-21 21:15:57 +0000</bug_when>
    <thetext>finished at:
https://github.com/tianocore/edk2/commit/d6de6452c51028f57754e23f495455cbb326a9d8
https://github.com/tianocore/edk2/commit/08b4ad6283c362fff412baa95fb49dc5dc7ccb3c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1892</bug_id>
          
          <creation_ts>2019-06-10 21:24:37 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Support multi-FV in FSP-S for dispatch mode.</short_desc>
          <delta_ts>2022-01-18 21:09:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>michael.a.kubacki</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7963</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-10 21:24:37 +0000</bug_when>
    <thetext>FSP spec defines that FSP-S can contain more than 1 FV but current implementation only supports single FV which should be enhanced.

PostFspsHobProcess ()
{
  ...
  if (PcdGet8 (PcdFspModeSelection) == 0) {
    BuildFvHob (
      (EFI_PHYSICAL_ADDRESS) (UINTN) PcdGet32 (PcdFlashFvFspSBase),
      PcdGet32 (PcdFlashFvFspSSize)
      );
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8047</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:25:18 +0000</bug_when>
    <thetext>Chasel, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9178</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 17:52:18 +0000</bug_when>
    <thetext>Chasel, can you please give an update?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9196</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-08-22 21:51:06 +0000</bug_when>
    <thetext>Currently no bandwidth on this yet, Michael.
If you know who has bandwidth to work on this please feel free to re-assign, otherwise I will find some time later to look into this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18182</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2022-01-18 21:09:59 +0000</bug_when>
    <thetext>Currently no real usage case for this feature request thus we would like to close this for now.
If we got a real case later we will file a new BZ basing on the real usage model and come out implementation to fit into real usage model.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1264</bug_id>
          
          <creation_ts>2018-10-19 03:16:51 +0000</creation_ts>
          <short_desc>BaseTools: use Dynamic Structure Pcd in the FDF file cause crash issue</short_desc>
          <delta_ts>2018-10-21 08:21:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5329</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-19 03:16:51 +0000</bug_when>
    <thetext>when set a Dynamic Structure Pcd in FDF file, eg:
SET gEfiStructuredPcdPkgTokenSpaceGuid.Test.TESTINT8 = 7

This PCD&apos;s definition in the DEC file is :
[PcdsDynamic]
  gEfiStructuredPcdPkgTokenSpaceGuid.Test|{0x03,0x04,0x05}|TEST|0x01{
  &lt;HeaderFiles&gt;
  xxx
  &lt;Packages&gt;
  xxx
  }
  gEfiStructuredPcdPkgTokenSpaceGuid.Test.TESTINT8|1


it report crash issue:

build.py...
 : error C0DE: Unknown fatal error when processing [d:\git_test\edk2\OvmfPkg\OvmfPkgIa32X64.dsc]
	
(Please send email to edk2-devel@lists.01.org for help, attaching following call stack trace!)

(Python 2.7.10 on win32) Traceback (most recent call last):
  File &quot;D:\Git_Test\edk2\BaseTools\Source\Python\build\build.py&quot;, line 2494, in Main
    MyBuild.Launch()
  File &quot;D:\Git_Test\edk2\BaseTools\Source\Python\build\build.py&quot;, line 2227, in Launch
    self._MultiThreadBuildPlatform()
  File &quot;D:\Git_Test\edk2\BaseTools\Source\Python\build\build.py&quot;, line 2002, in _MultiThreadBuildPlatform
    self.Progress
  File &quot;D:\Git_Test\edk2\BaseTools\Source\Python\AutoGen\AutoGen.py&quot;, line 241, in __init__
    self._InitWorker(Workspace, MetaFile, Target, Toolchain, Arch, *args, **kwargs)
  File &quot;D:\Git_Test\edk2\BaseTools\Source\Python\AutoGen\AutoGen.py&quot;, line 586, in _InitWorker
    File = self.FdfProfile.PcdFileLineDict[Name, Guid][0],
KeyError: (&apos;Test&apos;, &apos;gEfiStructuredPcdPkgTokenSpaceGuid&apos;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5340</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-21 08:21:16 +0000</bug_when>
    <thetext>patch email: https://lists.01.org/pipermail/edk2-devel/2018-October/031161.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5341</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-21 08:21:59 +0000</bug_when>
    <thetext>fixed in edk2 master. SHA-1: eb99b52f9888e99f449b8b984ee5a095027b5fd9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1479</bug_id>
          
          <creation_ts>2019-01-21 00:18:48 +0000</creation_ts>
          <short_desc>ECC report some coding style issue in MdeModulePkg</short_desc>
          <delta_ts>2019-02-12 23:41:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6154</commentid>
    <comment_count>0</comment_count>
      <attachid>248</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-21 00:18:48 +0000</bug_when>
    <thetext>Created attachment 248
ECC issues in MdeModulePkg

Detail error info see the attached file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6197</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-25 00:41:34 +0000</bug_when>
    <thetext>Assign to Dandan to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6346</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-02-12 23:41:00 +0000</bug_when>
    <thetext>Fixed via https://github.com/tianocore/edk2/commit/44289eeafdf12bc1e7a50221f10760b466a7e987</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>248</attachid>
            <date>2019-01-21 00:18:48 +0000</date>
            <delta_ts>2019-01-21 00:18:48 +0000</delta_ts>
            <desc>ECC issues in MdeModulePkg</desc>
            <filename>MdeModulePkgecc.csv</filename>
            <type>application/vnd.ms-excel</type>
            <size>2661</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1909</bug_id>
          
          <creation_ts>2019-06-12 04:38:56 +0000</creation_ts>
          <short_desc>Adding a new TSC library by using CPUID(0x15) TSC leaf</short_desc>
          <delta_ts>2019-08-21 09:44:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>amy.chan</reporter>
          <assigned_to name="Kuo, Donald">donald.kuo</assigned_to>
          <cc>donald.kuo</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8007</commentid>
    <comment_count>0</comment_count>
    <who name="">amy.chan</who>
    <bug_when>2019-06-12 04:38:56 +0000</bug_when>
    <thetext>Need a new TSC library to check the CPUID leaf (EAX=0x15) for TSC. For new platform (start from SKL) can use CPUID and retire/remove the current override from AcpiTimerLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8044</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:21:07 +0000</bug_when>
    <thetext>Amy, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9078</commentid>
    <comment_count>2</comment_count>
      <attachid>383</attachid>
    <who name="Kuo, Donald">donald.kuo</who>
    <bug_when>2019-08-19 22:12:45 +0000</bug_when>
    <thetext>Created attachment 383
To calculate TSC from CPUID Leaf 0x15 Core XTAL clock frequency as TimerLib instances

Based on https://hsdes.intel.com/appstore/article/#/220738527
- The Timerlib used for performance calculations should get the processor TSC frequency from an MSR instead of calculating it. The current algorithm uses another timer to measure the amount of TSC ticks in 100us and uses that to calculate the frequency. The implementation causes delay in the performance boot and sometimes returns incorrect values causing the performance logs to be unreliable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9085</commentid>
    <comment_count>3</comment_count>
      <attachid>384</attachid>
    <who name="Kuo, Donald">donald.kuo</who>
    <bug_when>2019-08-20 02:58:46 +0000</bug_when>
    <thetext>Created attachment 384
0001-UefiCpuPkg-Adding-a-new-TSC-library-by-using-CPUID-0.patch

Attached 0001-UefiCpuPkg-Adding-a-new-TSC-library-by-using-CPUID-0.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9093</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-20 10:59:28 +0000</bug_when>
    <thetext>This is a new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9095</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-20 11:05:50 +0000</bug_when>
    <thetext>The patch has passed review process.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9119</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-21 09:43:23 +0000</bug_when>
    <thetext>Patch Review-by https://edk2.groups.io/g/devel/message/45787
Patch v4 https://edk2.groups.io/g/devel/message/45707
Patch v3 https://edk2.groups.io/g/devel/message/45682
Patch v2 https://edk2.groups.io/g/devel/message/45522
Patch v1 https://edk2.groups.io/g/devel/message/45452</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9120</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-21 09:44:55 +0000</bug_when>
    <thetext>Fix at 30781febe2106cc0d7186e70136120353cd67df2</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>383</attachid>
            <date>2019-08-19 22:12:45 +0000</date>
            <delta_ts>2019-08-19 22:12:45 +0000</delta_ts>
            <desc>To calculate TSC from CPUID Leaf 0x15 Core XTAL clock frequency as TimerLib instances</desc>
            <filename>Captured_SDM_CH18.7_Counting_Clock.JPG</filename>
            <type>image/jpeg</type>
            <size>241015</size>
            <attacher name="Kuo, Donald">donald.kuo</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>384</attachid>
            <date>2019-08-20 02:58:46 +0000</date>
            <delta_ts>2019-08-20 02:58:46 +0000</delta_ts>
            <desc>0001-UefiCpuPkg-Adding-a-new-TSC-library-by-using-CPUID-0.patch</desc>
            <filename>0001-UefiCpuPkg-Adding-a-new-TSC-library-by-using-CPUID-0.patch</filename>
            <type>text/plain</type>
            <size>25853</size>
            <attacher name="Kuo, Donald">donald.kuo</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1377</bug_id>
          
          <creation_ts>2018-12-06 09:33:20 +0000</creation_ts>
          <short_desc>Remove unused tool chain configuration in tools_def.template</short_desc>
          <delta_ts>2019-02-14 20:41:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5755</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-06 09:33:20 +0000</bug_when>
    <thetext>VS2003, VS2005, VS2008, VS2010, DDK3790, UNIXGCC, GCC44, GCC45, GCC46, GCC47, ELFGCC, CYGGCC, ICC, ICC11, MYTOOLS are too old. There is no verification for them. I suggest to remove those changes in tools_def.template from edk2/master.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5763</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:06:02 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5826</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-11 19:38:52 +0000</bug_when>
    <thetext>Community people still uses VS2008. So, keep it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5970</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-02 14:17:29 +0000</bug_when>
    <thetext>Patches on the list thus far:

* [edk2] [PATCH]
  BaseTools/Conf/tools_def.template: drop ARM/AARCH support from GCC46/GCC47
  http://mid.mail-archive.com/20181208093242.3313-1-ard.biesheuvel@linaro.org

* [edk2] [Patch 0/5] Remove unused tool chains in tools_def.template
  http://mid.mail-archive.com/20181224150107.28624-1-liming.gao@intel.com

  (incorporating the former)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5972</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-02 21:50:04 +0000</bug_when>
    <thetext>[edk2] [PATCH 00/26] remove the GCC44 through GCC47 toolchains
https://lists.01.org/pipermail/edk2-devel/2019-January/034568.html
http://mid.mail-archive.com/20190103024816.9236-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6007</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-07 20:58:17 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
&gt; [edk2] [PATCH 00/26] remove the GCC44 through GCC47 toolchains
&gt; https://lists.01.org/pipermail/edk2-devel/2019-January/034568.html
&gt; http://mid.mail-archive.com/20190103024816.9236-1-lersek@redhat.com

Pushed as commit range 46f4c9677c61..7423ba9d499b.

Note that the BZ must stay open at this point, since the above series addresses only a part of the scope. AIUI, Liming plans to handle the remaining ELFGCC/UNIXGCC/CYGGCC, various (but not all) VS*, DDK3790, and various ICC* toolchains.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6366</commentid>
    <comment_count>6</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-14 20:41:51 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/320c754a9eb52799eba373cd8e301958dd41ea01
https://github.com/tianocore/edk2/commit/3b6148d3d5e7ab3309119f05e4a7044e8d310c32
https://github.com/tianocore/edk2/commit/4824bd5514ab8ef51ee2b77595d2c8d1765e1a23
https://github.com/tianocore/edk2/commit/ad6ce208dca36b57bcb5c8a54c677fb60eb86217
https://github.com/tianocore/edk2/commit/3b3f8de175318d5a89f266d76b70a01bb71c4844
https://github.com/tianocore/edk2/commit/2d07607d8b1a0710ba7379f8ee6c11dae1ea7c07
https://github.com/tianocore/edk2/commit/e067816aee67ac14d0b532c067800a024d185738
https://github.com/tianocore/edk2/commit/5094971155fd4eb1e0362525a1e4aff78f07fb5f
https://github.com/tianocore/edk2/commit/b912169d4c80cbc7a4fb3f74fd84d807ac508f9b
https://github.com/tianocore/edk2/commit/3cbb5bbac3f909b0a4da181311bab588d471a671</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1284</bug_id>
          
          <creation_ts>2018-10-26 21:53:03 +0000</creation_ts>
          <short_desc>1 coding style issue in MdeModulePkg\Core\Dxe\Mem\HeapGuard.c</short_desc>
          <delta_ts>2018-12-05 21:30:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5410</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-10-26 21:53:03 +0000</bug_when>
    <thetext>ECC check tool report 1 coding style issue in MdeModulePkg\Core\Dxe\Mem\HeapGuard.c

Error message:
Non-Boolean comparisons should use a compare operator (==, !=, &gt;, &lt; &gt;=, &lt;=)
Line number:1562</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5746</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-05 21:27:39 +0000</bug_when>
    <thetext>assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5747</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-12-05 21:30:00 +0000</bug_when>
    <thetext>It has been fixed at:
https://github.com/tianocore/edk2/commit/895415ed47c5796b8e0ddd905f20817f9f4bf114</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1928</bug_id>
          
          <creation_ts>2019-06-20 13:53:46 +0000</creation_ts>
          <short_desc>Add support for KDF function</short_desc>
          <delta_ts>2019-08-08 21:42:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Gary West">gary.west</reporter>
          <assigned_to name="Gary West">gary.west</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>sachin.agrawal</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8140</commentid>
    <comment_count>0</comment_count>
    <who name="Gary West">gary.west</who>
    <bug_when>2019-06-20 13:53:46 +0000</bug_when>
    <thetext>We need to derive multiple keys from a single key provided by hardware. This can by done by supporting KDF functions such as RFC 5869 which is implemented with HMAC and SHA-256.

This function is already supported in openssl. Only a wrapper function for BIOS to call is needed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8249</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:27:58 +0000</bug_when>
    <thetext>gary, please submit patch, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8425</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:42:56 +0000</bug_when>
    <thetext>Bug Triage: We&apos;d like some information on the use case so we can decide how this best fits in firmware.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8471</commentid>
    <comment_count>3</comment_count>
    <who name="Sachin Agrawal">sachin.agrawal</who>
    <bug_when>2019-07-17 13:11:37 +0000</bug_when>
    <thetext>Intel SoC provides a single 64 bit device specific key for software/bios to use. BIOS has multiple use-case where it requires a hardware specific key, such as:
1) Key needed for Android Trusty (TEE for Android)
2) Key needed for Android Attestation.
3) Key needed for PSE (a IP in ElkhartLake platform)

Currently, the only KDF supported by edk2&apos;s CryptoPkg is Password-based KDF (i.e. PBKDF2), which will NOT apply in this scenario.
Another alternative would have been to directly use HMAC-SHA256 interface by using use-case info as data for HMAC-SHA256 operation, i.e.
HMAC-SHA256(&quot;secret-key&quot;, &quot;use-case specific string&quot;).
But, in our internal discussions with cryptographers at Intel, there was a recommendation to instead use industry-defined standard, such as RFC 5869, for key derivation from one single key.

And, therefore we need this support in edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8473</commentid>
    <comment_count>4</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-17 16:49:13 +0000</bug_when>
    <thetext>Gary will have patches forthcoming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8549</commentid>
    <comment_count>5</comment_count>
    <who name="Gary West">gary.west</who>
    <bug_when>2019-07-23 11:18:47 +0000</bug_when>
    <thetext>I have submitted the patch (https://edk2.groups.io/g/devel/message/44257)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8579</commentid>
    <comment_count>6</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:18:27 +0000</bug_when>
    <thetext>Bug Triage: Thank you for the patch. Please close this out once the patch is upstream.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8702</commentid>
    <comment_count>7</comment_count>
    <who name="Gary West">gary.west</who>
    <bug_when>2019-08-01 16:21:23 +0000</bug_when>
    <thetext>Second version is out for review. Waiting for reviewers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8904</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-08 21:42:59 +0000</bug_when>
    <thetext>Pushed at 4b1b7c1913092d73d689d8086dcfa579c0217dc8
Reviewed at https://edk2.groups.io/g/devel/message/44918</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1011</bug_id>
          
          <creation_ts>2018-07-17 03:24:52 +0000</creation_ts>
          <short_desc>Redundant library class is defined in PciBusDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:00:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4283</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 03:24:52 +0000</bug_when>
    <thetext>Edk2 INF clean tool find there is a redundant library class, which is PeCoffLib, defined in PciBusDxe module INF file. Need to remove it.

Below is the fix reference:
--- a/MdeModulePkg/Bus/Pci/PciBusDxe/PciBusDxe.inf
+++ b/MdeModulePkg/Bus/Pci/PciBusDxe/PciBusDxe.inf
@@ -78,7 +78,6 @@
   BaseLib
   UefiDriverEntryPoint
   DebugLib
-  PeCoffLib

 [Protocols]
   gEfiPciHotPlugRequestProtocolGuid               ## SOMETIMES_PRODUCES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4284</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 03:26:35 +0000</bug_when>
    <thetext>Edk2 INF clean tool is based on Uefi-aware compiler, FYI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4372</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 22:42:09 +0000</bug_when>
    <thetext>bug scrub: assign to module owner to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4925</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:00:43 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1402</bug_id>
          
          <creation_ts>2018-12-13 04:02:43 +0000</creation_ts>
          <short_desc>Add support for checking x509 EKUs to BaseCryptLib</short_desc>
          <delta_ts>2019-04-27 23:33:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5862</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-13 04:02:43 +0000</bug_when>
    <thetext>Add api to check if x509 cert has any or all EKUs.  

API Change
https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Include/Library/BaseCryptLib.h#L2691

Implementation:
https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Library/BaseCryptLib/Pk/CryptPkcs7VerifyEku.c

UEFI shell based unit test:
https://github.com/Microsoft/mu_tiano_plus/tree/release/201808/CryptoPkg/UnitTests/VerifyPkcs7EkuUnitTestApp</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5875</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:21:36 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7250</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-24 03:49:10 +0000</bug_when>
    <thetext>finished at
https://github.com/tianocore/edk2/commit/1796a39493b2447758099e1fba77e61b5cfe9261
https://github.com/tianocore/edk2/commit/23c3178c4d45729052bdd69b7cf6ffa2c5bb75c8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7305</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:33:24 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1838</bug_id>
          
          <creation_ts>2019-05-23 12:35:36 +0000</creation_ts>
          <short_desc>OVMF found EFI executable on USB Attached SCSI device but fail to boot</short_desc>
          <delta_ts>2019-06-28 09:30:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tom Yan">tom.ty89</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7766</commentid>
    <comment_count>0</comment_count>
    <who name="Tom Yan">tom.ty89</who>
    <bug_when>2019-05-23 12:35:36 +0000</bug_when>
    <thetext>I have a ASM1142 XHCI controller passed-through to the VM. When I try to boot a USB Attached SCSI device connected to it, I can see it successfully found/load/execute the EFI executable on it. However, the OS-specific boot process fails to work (for both Windows and Linux). OVMF should really support UAS devices properly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7769</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-23 13:25:00 +0000</bug_when>
    <thetext>This is similar to moving the XHCI controller to a different physical machine. It has the following effects:

- The location of the XHCI controller in the PCI(E) hierarchy likely changes.
- The UEFI boot options and boot order (= non-volatile variables) that refer to the boot loader of the installed OS are lost.

UEFI itself copes with this problem by attempting to boot the &quot;fallback&quot; boot loader from the EFI System Partition, as if the storage device was a removable media device. This is described in detail in Peter Jones&apos;s blog post at &lt;https://blog.uncooperative.org/blog/2014/02/06/the-efi-system-partition/&gt;.

The question is what this &quot;fallback&quot; boot loader does. The actions are specific to the OS distribution. Some examples:

- The &quot;fallback&quot; boot loader could simply try to boot the installed OS like always. However, if the boot loader configuration -- resident on the EFI System Partition -- refers to the OS root filesystem through a hardcoded, absolute, device path, then this &quot;boot the OS as usual&quot; attempt may easily fail, given that the same root filesystem is now reachable at a different device path (minimally due to moving the XHCI controller into a different PCI(E) hierarchy).

- The &quot;fallback&quot; boot loader may also try to locate the OS root filesystem more dynamically, and/or re-create UEFI boot options pointing to the &quot;real&quot; boot loader. This behavior is not uniform and is not necessarily specified.

To my knowledge, what you are trying to do is entirely unsupported with Windows.

It *might* work with Linux, assuming that your
- grub config (or other boot loader config),
- your /etc/fstab,
- your /etc/crypttab,
- the copy of /etc/crypttab in your initrd / initramfs,
all refer to filesystems by block device UUID *only*. (The kind that the &quot;blkid&quot; utility lists, when run as root.) Block device UUIDs are independent of device paths and can be located dynamically, but the references have to contain UUIDs.

From your description, the &quot;fallback&quot; boot loader seems to be launched already. Again, I can&apos;t help with Windows at all. With Linux, *if* your boot loader config etc already use UUID references exclusively, then I might be able to help. In that case, please capture the OVMF debug log (see OvmfPkg/README for how), plus please share your OS release, and the contents of your EFI system partition (usually mounted at /boot/efi). Even if you provide this info, I might have to ask people for help who are more familiar with Linux boot loader internals.

Right now my assumption is that the UEFI &quot;fallback&quot; logic works fine, and your OS boot loader expects the OS root partition to show up on the original device path (i.e. it doesn&apos;t use UUID-based addressing).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7770</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-23 13:27:31 +0000</bug_when>
    <thetext>(Due to the above complications, I always advise against booting a fixed media OS installation from both a physical machine and a virtual machine.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7787</commentid>
    <comment_count>3</comment_count>
    <who name="Tom Yan">tom.ty89</who>
    <bug_when>2019-05-25 00:17:35 +0000</bug_when>
    <thetext>I think I can differentiate whether if it&apos;s a post-firmware booting issue. I have to admit I didn&apos;t describe the problem well though.

First of all, Windows does support, albeit not very well, USB booting (Windows-to-Go and equivalent set-up). It was broken before but fixed in 19H1, that I confirmed with physical booting.

And let&apos;s get back to OVMF. From what I can see here, it seems to hang/stall in random occasions when executing EFI executables. For example, when the kernel EFISTUB is being loaded/executed from systemd-boot (i.e. before the init in the initramfs gets into action to find the root device); or, when I do some browsing in the grub shell (&quot;proper&quot; shell, that is, not the rescue shell).

In fact, the problem may not even be specific to UAS devices. Rather it could be just the XHCI driver or BOT driver in EDK/OVMF is bugged. After the hang/stall, it seem to unable to find the device until I reconnect it as well (so the device got &quot;powered off&quot; in some way by the firmware?).

It could also be just a bug in vfio or my XHCI controller firmware though (the controller is on a PCI-E card and my physical UEFI doesn&apos;t support booting from it at all).

I will see if I can get some logging, and maybe see if the problem also occur if I passthrough my onboard XHCI controller, if I can manage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8260</commentid>
    <comment_count>4</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:44:39 +0000</bug_when>
    <thetext>Laszlo, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8277</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-28 09:30:17 +0000</bug_when>
    <thetext>This BZ has been assigned to me already, for a good while (and it&apos;s been on my radar). The latest status has been that there&apos;s nothing actionable in edk2; we&apos;ve been waiting for further feedback from Tom. (See comment 3.)

But, comment 3 is older than a month now, so I&apos;m closing the BZ. (Alas, in the TianoCore Bugzilla installation, there is no INSUFFICIENT_DATA resolution, so I&apos;ll resort to INVALID.) Thanks.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1209</bug_id>
          
          <creation_ts>2018-09-25 21:01:51 +0000</creation_ts>
          <short_desc>VS2012 build failure in mdemodulepkg\universal\regularexpressiondxe\oniguruma\regparse.c</short_desc>
          <delta_ts>2018-10-08 11:28:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5097</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-09-25 21:01:51 +0000</bug_when>
    <thetext>Failure Log:
s:\Edk2\mdemodulepkg\universal\regularexpressiondxe\oniguruma\regparse.c(6861) : error C2220: warning treated as error - no &apos;object&apos; file generated
s:\Edk2\mdemodulepkg\universal\regularexpressiondxe\oniguruma\regparse.c(6861) : warning C4703: potentially uninitialized local pointer variable &apos;tag_end&apos; used
s:\Edk2\mdemodulepkg\universal\regularexpressiondxe\oniguruma\regparse.c(6577) : warning C4703: potentially uninitialized local pointer variable &apos;tag_end&apos; used
s:\Edk2\mdemodulepkg\universal\regularexpressiondxe\oniguruma\regparse.c(7331) : warning C4703: potentially uninitialized local pointer variable &apos;Then&apos; used</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5136</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-27 20:05:49 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5186</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-08 11:28:11 +0000</bug_when>
    <thetext>Fix it at b9cee524e6c1941b77b6780e19bd57052e53249c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1949</bug_id>
          
          <creation_ts>2019-07-01 01:29:17 +0000</creation_ts>
          <short_desc>File MdeModulePkg/Include/Protocol/Dpc.h should be placed in NetworkPkg</short_desc>
          <delta_ts>2019-08-18 22:52:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8293</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-01 01:29:17 +0000</bug_when>
    <thetext>The file MdeModulePkg/Include/Protocol/Dpc.h is currently consumed by the below modules:

NetworkPkg/DpcDxe/
NetworkPkg/Library/DxeDpcLib/

Hence, this protocol header file should be moved into NetworkPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8423</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:34:19 +0000</bug_when>
    <thetext>Bug Triage: set to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8728</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-01 23:09:49 +0000</bug_when>
    <thetext>Shenglei will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9050</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-08-18 22:52:58 +0000</bug_when>
    <thetext>Fxied at edk2/master:
492a1db0b81ccab53a8c3782a6d84715779bd189
~
a6ee24fbddcd901347014e045611eb6108f4f741</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1422</bug_id>
          
          <creation_ts>2018-12-25 22:03:04 +0000</creation_ts>
          <short_desc>Edk2 Coding style check tool (ECC) report an error in MdeModulePkg\Bus\Pci\NonDiscoverablePciDeviceDxe\NonDiscoverablePciDeviceIo.c</short_desc>
          <delta_ts>2019-01-07 21:26:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5957</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-12-25 22:03:04 +0000</bug_when>
    <thetext>File:MdeModulePkg\Bus\Pci\NonDiscoverablePciDeviceDxe\NonDiscoverablePciDeviceIo.c
LineNo:1729
Error Info:
Predicate Expression: Attribute
Non-Boolean comparisons should use a compare operator (==, !=, &gt;, &lt; &gt;=, &lt;=)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5958</commentid>
    <comment_count>1</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-12-25 22:04:21 +0000</bug_when>
    <thetext>The issue is introduced with following commit:
SHA-1: c8c3c53669bea887ecc093167d64d1fbe63c213f

* MdeModulePkg/NonDiscoverablePciDeviceDxe: add missing validation

UEFI SCT crashed and failed in NonDiscoverablePciDeviceDxe becase
required checks were not performed. Perform parameters validation in
NonDiscoverablePciDeviceDxe.

Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Vladimir Olovyannikov &lt;vladimir.olovyannikov@broadcom.com&gt;
Reviewed-by: Ard Biesheuvel &lt;ard.biesheuvel at linaro.org&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5962</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-26 23:58:13 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6008</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-07 21:26:35 +0000</bug_when>
    <thetext>Fix it at:
https://github.com/tianocore/edk2/commit/a53a888de8f5fa8dbf75a381e28f25a5497572f1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1755</bug_id>
          
          <creation_ts>2019-04-27 23:00:18 +0000</creation_ts>
          <short_desc>There are some duplicate header files in devel-MinPlatform branch</short_desc>
          <delta_ts>2020-07-08 22:17:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7296</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-27 23:00:18 +0000</bug_when>
    <thetext>I found that the devel-MinPlatform branch have a same header file with edk2 repo named &apos;ResetSystemLib.h&apos;. Here is the path:
Silicon\Intel\KabylakeSiliconPkg\SampleCode\MdeModulePkg\Include\Library\ResetSystemLib.h
We should use the header file in the edk2 repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7439</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-08 22:18:00 +0000</bug_when>
    <thetext>Zhichao help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13071</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2020-07-08 22:17:26 +0000</bug_when>
    <thetext>It is already be covered by https://bugzilla.tianocore.org/show_bug.cgi?id=2375. Close it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1135</bug_id>
          <alias>CVE-2018-12181</alias>
          <creation_ts>2018-08-30 20:45:44 +0000</creation_ts>
          <short_desc>Stack Overflow on Corrupted BMP</short_desc>
          <delta_ts>2023-01-10 16:44:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ryan Ware">ryan.ware</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>amachiry</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4774</commentid>
    <comment_count>0</comment_count>
      <attachid>212</attachid>
    <who name="Ryan Ware">ryan.ware</who>
    <bug_when>2018-08-30 20:45:44 +0000</bug_when>
    <thetext>Created attachment 212
BMP Corruption Patch

When the HII database contains a Bitmap who claims as 4-bit or 8-bit per pixel, but the palette contains more than 16(2^4) or 256(2^8) colors, stack overflow occurs.
The image data is not digitally signed. There is no security claims or secure design around this usage model.
There is only data validation in consuming the image data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4804</commentid>
    <comment_count>1</comment_count>
    <who name="hhtian">hot.tian</who>
    <bug_when>2018-09-02 21:47:35 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6635</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-06 10:33:09 +0000</bug_when>
    <thetext>Please note that the embargo of this issue is finished. If possible, we plan to review and commit the patch before coming stable tag. Please raise any concern or objection ASAP. Sorry for the late notification.

CVE number: CVE-2018-12181</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6698</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-13 02:40:09 +0000</bug_when>
    <thetext>fixed @ ffe5f7a6b4e978dffbe1df228963adc914451106 and 89910a39dcfd788057caa5d88b7e76e112d187b5.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>212</attachid>
            <date>2018-08-30 20:45:44 +0000</date>
            <delta_ts>2018-08-30 20:45:44 +0000</delta_ts>
            <desc>BMP Corruption Patch</desc>
            <filename>0001-MdeModulePkg-HiiImage-Fix-stack-overflow-when-corrup.patch</filename>
            <type>application/octet-stream</type>
            <size>2453</size>
            <attacher name="Ryan Ware">ryan.ware</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1044</bug_id>
          
          <creation_ts>2018-07-25 04:19:29 +0000</creation_ts>
          <short_desc>Redundant info is defined in UfsPciHcDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:05:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4385</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:19:29 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is one redundant library class, which is DevicePathLib, defined in UfsPciHcDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Bus/Pci/UfsPciHcDxe/UfsPciHcDxe.inf
+++ b/MdeModulePkg/Bus/Pci/UfsPciHcDxe/UfsPciHcDxe.inf
@@ -42,7 +42,6 @@
 [LibraryClasses]
   BaseLib
   DebugLib
-  DevicePathLib
   UefiDriverEntryPoint
   UefiBootServicesTableLib
   UefiLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4418</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:52:44 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4927</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:05:49 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1342</bug_id>
          
          <creation_ts>2018-11-20 03:09:48 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Library/DxeCapsuleLib</short_desc>
          <delta_ts>2019-07-03 01:49:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5646</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 03:09:48 +0000</bug_when>
    <thetext>The CapsuleLib in MdeModulePkg/Library directory is recommended to use.
The one in IntelFrameworkModulePkg is no longer used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6425</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:03:22 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7405</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:54:44 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8351</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:49:45 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1781</bug_id>
          
          <creation_ts>2019-05-07 21:02:56 +0000</creation_ts>
          <short_desc>Enable SM3 digest algorithm for measured boot and TCG2 EVENT protocol</short_desc>
          <delta_ts>2019-08-12 04:39:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1089</dependson>
    
    <dependson>1861</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="idesai">imran.desai</reporter>
          <assigned_to name="idesai">imran.desai</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>imran.desai</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>sachin.agrawal</cc>
    
    <cc>xiaoyux.lu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7412</commentid>
    <comment_count>0</comment_count>
    <who name="idesai">imran.desai</who>
    <bug_when>2019-05-07 21:02:56 +0000</bug_when>
    <thetext>Support for SM3 digest algorithm is needed for TPM with SM3 PCR banks. This digest algorithm is part of the China Crypto algorithm suite. Support for these algorithms is needed to enable platforms for the PRC market.

This integration is now possible with openssl_1_1_1b integration into edk2. There is an implementation of this that we&apos;d like to contribute to edk2 repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7441</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-08 22:21:22 +0000</bug_when>
    <thetext>jian, please help to investigate , thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7444</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-08 22:31:28 +0000</bug_when>
    <thetext>idesai, please help to contribute the patch. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7477</commentid>
    <comment_count>3</comment_count>
      <attachid>318</attachid>
    <who name="idesai">imran.desai</who>
    <bug_when>2019-05-09 17:27:47 +0000</bug_when>
    <thetext>Created attachment 318
Proposed patch for sm3 digest based measured boot enabling

This patch enables measured boot with sm3 digest algorithm. It depends on Openssl_1_1_1b EDK2 integration patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7478</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-09 19:02:32 +0000</bug_when>
    <thetext>Please split the patch into a patch series, minimally along Package and Module boundaries. Then please submit the patch series to the &lt;devel@edk2.groups.io&gt; mailing list, for review:

https://edk2.groups.io/g/devel
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Development-Process

Please consult &quot;Maintainers.txt&quot;, to find the people to CC on the series.

Thanks.

(I can also offer personal hints, at &lt;https://github.com/tianocore/tianocore.github.io/wiki/Laszlo&apos;s-unkempt-git-guide-for-edk2-contributors-and-maintainers&gt;, but this last article is entirely unofficial.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7533</commentid>
    <comment_count>5</comment_count>
    <who name="idesai">imran.desai</who>
    <bug_when>2019-05-14 17:19:16 +0000</bug_when>
    <thetext>Thanks Laszlo Ersek, I will follow the guide and break the attachment into a patch series per your suggestion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7748</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-22 05:45:14 +0000</bug_when>
    <thetext>v1 series on the list (with test description in the comments):
http://mid.mail-archive.com/20190517183127.38140-1-imran.desai@intel.com
https://edk2.groups.io/g/devel/message/40964</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7864</commentid>
    <comment_count>7</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-05-30 01:52:25 +0000</bug_when>
    <thetext>idesai, I will wrap OpenSSL SM3 algorithm into BaseCryptLib in BZ 1861(https://bugzilla.tianocore.org/show_bug.cgi?id=1861).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8365</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-04 05:47:36 +0000</bug_when>
    <thetext>Posted

[edk2-devel] [PATCH 0/5]
MdePkg, SecurityPkg, OvmfPkg: revert unreviewed SM3 patches

http://mid.mail-archive.com/20190704094624.21057-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/43257</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8366</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-04 05:48:21 +0000</bug_when>
    <thetext>This BZ should have been moved to IN_PROGRESS status when the v1 set was posted for it, at the latest. Doing that now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8369</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-04 12:08:04 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #8)
&gt; Posted
&gt; 
&gt; [edk2-devel] [PATCH 0/5]
&gt; MdePkg, SecurityPkg, OvmfPkg: revert unreviewed SM3 patches
&gt; 
&gt; http://mid.mail-archive.com/20190704094624.21057-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/43257

This revert series has been pushed as commit range 1ec05b81e59f..6a34c1ce7054.

The SM3 patches may now be resubmitted for proper package maintainer review (including MdePkg and OvmfPkg). Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8447</commentid>
    <comment_count>11</comment_count>
    <who name="idesai">imran.desai</who>
    <bug_when>2019-07-12 20:50:50 +0000</bug_when>
    <thetext>Posted 

[PATCH v6 0/5] Implement SM3 measured boot
https://edk2.groups.io/g/devel/message/43682</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8480</commentid>
    <comment_count>12</comment_count>
    <who name="idesai">imran.desai</who>
    <bug_when>2019-07-18 18:56:18 +0000</bug_when>
    <thetext>Posted v7

Delta in v7 @ https://edk2.groups.io/g/devel/topic/32520440?p=,,,20,0,0,0::Created,,sm3,20,2,0,32520440,ct=1&amp;ct=1

1. Dropped 95a040cff from v6 to address https://edk2.groups.io/g/devel/topic/
32454898?p=,,,20,0,0,0::Created,,sm3,20,2,0,32454898,ct=1&amp;ct=1
2. Relocated SM3 GUID definition from MdePkg to SecurityPkg in 9728b54f4

Requesting reviews from Jian and Jiewen @ https://edk2.groups.io/g/devel/topic/32520441?p=,,,20,0,0,0::Created,,sm3,20,2,0,32520441,ct=1&amp;ct=1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8492</commentid>
    <comment_count>13</comment_count>
    <who name="idesai">imran.desai</who>
    <bug_when>2019-07-19 03:19:55 +0000</bug_when>
    <thetext>0001-SecurityPkg-introduce-the-SM3-digest-algorithm.patch
0002-SecurityPkg-HashLibBaseCryptoRouter-recognize-the-SM.patch
0003-SecurityPkg-set-SM3-bit-in-TPM-2.0-hash-mask-by-defa.patch
Signed-off-by: Imran Desai &lt;imran.desai@intel.com&gt;
Reviewed-by:   Jian J Wang &lt;jian.j.wang@intel.com&gt;
Reviewed-by:   Jiewen Yao &lt;jiewen.yao@intel.com&gt;

0004-OvmfPkg-link-SM3-support-into-Tcg2Pei-and-Tcg2Dxe.patch
Signed-off-by: Imran Desai &lt;imran.desai@intel.com&gt;
Reviewed-by:   Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8518</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-19 08:25:59 +0000</bug_when>
    <thetext>Hello Imran,

we shouldn&apos;t close a BZ as &quot;RESOLVED|FIXED&quot; until the patches have been pushed to the master branch (and the commit range has been noted in the BZ).

I agree that the v7 series is fully reviewed now, but we still have to push the patches. (As of master HEAD being @ 296c908c6968.)

I&apos;m going to do that push for you soon. Until then, let me reopen this BZ. (I&apos;d prefer to move it back to IN_PROGRESS, but Bugzilla only allows me to pick CONFIRMED.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8519</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-19 08:40:48 +0000</bug_when>
    <thetext>Fixed in commit range 296c908c6968..5d3ef15da7c3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8938</commentid>
    <comment_count>16</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 00:53:51 +0000</bug_when>
    <thetext>This can be regarded as one feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8948</commentid>
    <comment_count>17</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:39:02 +0000</bug_when>
    <thetext>This is a feature.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>318</attachid>
            <date>2019-05-09 17:27:47 +0000</date>
            <delta_ts>2019-05-09 17:27:47 +0000</delta_ts>
            <desc>Proposed patch for sm3 digest based measured boot enabling</desc>
            <filename>sm3_measuredboot_enabling.patch</filename>
            <type>application/octet-stream</type>
            <size>16122</size>
            <attacher name="idesai">imran.desai</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1680</bug_id>
          
          <creation_ts>2019-04-02 21:06:16 +0000</creation_ts>
          <short_desc>BaseTools: Fix corner-cases of --hash feature</short_desc>
          <delta_ts>2019-05-21 09:52:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Rodriguez">christian.rodriguez</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6982</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-02 21:06:16 +0000</bug_when>
    <thetext>Consider modules with .inc source files as Binary Modules and do not Skip by hash.
Re-order hashing operations so we don&apos;t do redundant hashes.
Respect artifact location within directory structure.
Re-use libraries, since they have already been hashed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6983</commentid>
    <comment_count>1</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-02 21:12:28 +0000</bug_when>
    <thetext>I have confirmed the issue and am currently working on patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7062</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-10 11:10:36 +0000</bug_when>
    <thetext>Patch set commited:
https://github.com/tianocore/edk2/commit/2914e8153dd31a6594862ac6c0c7e7e460737991
https://github.com/tianocore/edk2/commit/1b8caf0d87eacc66aba70e8698c7bd1518bb7be1
https://github.com/tianocore/edk2/commit/f2b5e04acad2bac7f11d97871cc68e8a0d312289
https://github.com/tianocore/edk2/commit/db4d47fd3ae9cb4a80399b7ea4cfd55f1b22d180</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7717</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:52:05 +0000</bug_when>
    <thetext>See commit above.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1153</bug_id>
          
          <creation_ts>2018-09-06 03:17:15 +0000</creation_ts>
          <short_desc>Just display the second table when specify two ACPITable type.</short_desc>
          <delta_ts>2019-04-11 20:36:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi.Jiang">wenyi.jiang</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>evan.lloyd</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4867</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-09-06 03:17:15 +0000</bug_when>
    <thetext>+++++ lihaiyax 9/3/2018 8:14:22 PM

1.Boot to shell and execute command &quot;acpiview -s apic -s bgrt&quot;,only BGRT Table was displayed. Reproduce it with all the other table type.
2.Log:

Shell&gt; acpiview -s apic -s bgrt


 --------------- BGRT Table --------------- 

Address  : 0xBEFD4000
Length   : 56
  
00000000 : 42 47 52 54 38 00 00 00 - 01 EB 49 4E 54 45 4C 20   BGRT8.....INTEL 
00000010 : 45 44 4B 32 20 20 20 20 - 02 00 00 00 20 20 20 20   EDK2    ....    
00000020 : 13 00 00 01 01 00 00 00 - 18 C0 D5 BA 00 00 00 00   ................
00000030 : 1F 02 00 00 6B 01 00 00                             ....k...

Table Checksum : OK

BGRT                                 :
  Signature                          : BGRT
  Length                             : 56
  Revision                           : 1
  Checksum                           : 0xEB
  Oem ID                             : INTEL 
  Oem Table ID                       : EDK2    
  Oem Revision                       : 0x2
  Creator ID                         :     
  Creator Revision                   : 0x1000013
  Version                            : 0x1
  Status                             : 0x0
  Image Type                         : 0x0
  Image Address                      : 0xBAD5C018
  Image Offset X                     : 543
  Image Offset Y                     : 363

Table Statistics:
	0 Error(s)
	0 Warning(s)
Shell&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5167</commentid>
    <comment_count>1</comment_count>
    <who name="Evan Lloyd">evan.lloyd</who>
    <bug_when>2018-10-01 13:18:07 +0000</bug_when>
    <thetext>This is the case, but there is a simple work around:
    acpiview -s apic
    acpiview -s bgrt

Is there a compelling need for the single invocation option?
Changing this involves a significant modification, so is there a justification for expending effort?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5215</commentid>
    <comment_count>2</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-10-11 02:32:08 +0000</bug_when>
    <thetext>If the explanation could be added into help information, it may make user notice more clearly about that the shell command &quot;acpiview&quot; only support single invocation option like &quot;acpiview -s apic&quot; and does not support multiply invocation option like &quot;acpiview -s apic -s bgrt&quot;  .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5800</commentid>
    <comment_count>3</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-12-09 21:22:31 +0000</bug_when>
    <thetext>-s - Display only the specified AcpiTable type and only support single invocation options
         AcpiTable    : The required ACPI Table type.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6442</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 01:59:02 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to zhichao.  Please discuss with ShellPkg owner and Submitter (xuemin.yuan@intel.com) to resolve it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7102</commentid>
    <comment_count>5</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-11 20:36:30 +0000</bug_when>
    <thetext>Finished at:
https://github.com/tianocore/edk2/commit/e0fd9ece26c9b84a1a756a869ff2a4525e23ab33</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1993</bug_id>
          
          <creation_ts>2019-07-19 04:56:58 +0000</creation_ts>
          <short_desc>Integer overflows in PeCoffLoaderRelocateImage</short_desc>
          <delta_ts>2024-10-01 12:56:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1957</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1990</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1991</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Gobichettipalayam Raghupathi, SriraamX">sriraamx.gobichettipalayam.raghupathi</assigned_to>
          <cc>benjamin.you</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kevinj</cc>
    
    <cc>kraxel</cc>
    
    <cc>mhaeuser</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>miki.demeter</cc>
    
    <cc>nobody</cc>
    
    <cc>rencyx.reji</cc>
    
    <cc>rschiron</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>vit9696</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8499</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 04:56:58 +0000</bug_when>
    <thetext>Integer overflows in PeCoffLoaderRelocateImage may cause memory corruption. 	

In BasePeCoff.c, check to see if in the PeCoffLoaderRelocateImage() does RelocDir→VirtualAddress + ReloDir→Size - 1 inside a function call.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8500</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 04:57:43 +0000</bug_when>
    <thetext>CVSS score: Medium: 5.9 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:A/AC:H/PR:L/UI:N/S:U/C:L/I:H/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8761</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 09:32:35 +0000</bug_when>
    <thetext>Same requests as for bug 1957, bug 1990, bug 1991: please allocate a CVE number, and please let us rebase PeCoffLoaderRelocateImage() to SafeIntLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9802</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-09-25 02:37:53 +0000</bug_when>
    <thetext>CVE-2019-14562 (share with BZ2215)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9842</commentid>
    <comment_count>4</comment_count>
      <attachid>413</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-27 03:33:01 +0000</bug_when>
    <thetext>Created attachment 413
V1 patch to fix the potential overflow issue

Attach the patch to fix the issue.
The patch is created based on edk2 master:6da405ebf6e946429953c56fcbc8f60abe1407de</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9843</commentid>
    <comment_count>5</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-27 03:34:55 +0000</bug_when>
    <thetext>Make it in &quot;IN PROGRESS&quot; status and also CC the module owners to help review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13008</commentid>
    <comment_count>6</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:26:12 +0000</bug_when>
    <thetext>We have had a patch for over 6 month, and CVE assigned.

Jian, please update this with disclosure info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16575</commentid>
    <comment_count>7</comment_count>
      <attachid>758</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-07-07 10:16:47 +0000</bug_when>
    <thetext>Created attachment 758
v1 MITRE .json file

I have attached the .json file for CVE classification. Please review and provide feedback. Please assign a release this issue is observed in, so I can update the .json file. Also note, John Matthews has instructed me to request a CVE-ID from MITRE fro this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17127</commentid>
    <comment_count>8</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-09-01 13:10:48 +0000</bug_when>
    <thetext>I have attached the .json file for CVE classification. Please review and provide feedback and assign a release this issue is observed in, so I can update the .json file and submit it back to MITRE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18826</commentid>
    <comment_count>9</comment_count>
    <who name="Miki Demeter">miki.demeter</who>
    <bug_when>2022-04-18 17:26:22 +0000</bug_when>
    <thetext>Has this patch been signed off and received enough reviews to upstream this?

Patch has been here since 2019 and CVE updated 9/2021</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23021</commentid>
    <comment_count>10</comment_count>
      <attachid>1504</attachid>
    <who name="Gobichettipalayam Raghupathi, SriraamX">sriraamx.gobichettipalayam.raghupathi</who>
    <bug_when>2024-05-10 09:23:19 +0000</bug_when>
    <thetext>Created attachment 1504
V2 patch

Unit Test:

Following Wang Jing suggestion of manual review for the patch
In BasePeCoff.c, the PeCoffLoaderRelocateImage() does RelocDir→VirtualAddress + ReloDir→Size- 1
inside the function was overflowing and causing memory corruption.
so added the below check for avoiding the memory corruption before calculating the RelocBase and RelocBaseEnd.
if ((RelocDir != NULL) &amp;&amp; (RelocDir-&gt;Size &gt; 0) &amp;&amp; (RelocDir-&gt;Size -1 &lt; MAX_UINT32 - RelocDir-&gt;VirtualAddress))

With this condition added the max value while adding size and address is always less than MAX_UINT32.
Hence there won’t be integer overflow with possible values for RelocDir-&gt;VirtualAddress and RelocDir-&gt;Size.

Have tested the fix in real platform and confirmed the image is booting fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>23416</commentid>
    <comment_count>11</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2024-10-01 12:56:31 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/security/advisories/GHSA-xpcr-7hjq-m6qm</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>413</attachid>
            <date>2019-09-27 03:33:01 +0000</date>
            <delta_ts>2019-09-27 03:33:01 +0000</delta_ts>
            <desc>V1 patch to fix the potential overflow issue</desc>
            <filename>0001-MdePkg-BasePeCoff-CVE-2019-14562-Check-for-potential.patch</filename>
            <type>application/octet-stream</type>
            <size>1702</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>758</attachid>
            <date>2021-07-07 10:16:47 +0000</date>
            <delta_ts>2021-07-07 10:16:47 +0000</delta_ts>
            <desc>v1 MITRE .json file</desc>
            <filename>1993.json</filename>
            <type>application/json</type>
            <size>1953</size>
            <attacher>kevinj</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1504</attachid>
            <date>2024-05-10 09:23:19 +0000</date>
            <delta_ts>2024-05-10 09:23:19 +0000</delta_ts>
            <desc>V2 patch</desc>
            <filename>Bug_1993.patch</filename>
            <type>text/plain</type>
            <size>783</size>
            <attacher name="Gobichettipalayam Raghupathi, SriraamX">sriraamx.gobichettipalayam.raghupathi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1061</bug_id>
          
          <creation_ts>2018-07-26 04:01:19 +0000</creation_ts>
          <short_desc>GenerateCapsule: when the tool is not exist or the cert file is incorrect, decode still success</short_desc>
          <delta_ts>2018-07-29 13:09:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4411</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 04:01:19 +0000</bug_when>
    <thetext>some cases for decode operation, I hope it will halt the decode operation.
1. use signtool, user input a incorrect pfx-file to decode, it still decode success with following info:
signtool verify is not supported.
GenerateCapsule: warning: can not verify payload.

2. use openssl tool, user use a incorrect trusted-public-cert file, the decode still success with following info:
Error loading file incorrect.pem
GenerateCapsule: warning: can not verify payload. 


3. use openssl tool, the cert file is correct, but the openssl tool is not exist, it still decode success with following info.
&apos;&quot;C:\test\openssl&quot;&apos; is not recognized as an internal or external command,
operable program or batch file.

GenerateCapsule: warning: can not verify payload.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4444</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-27 02:42:29 +0000</bug_when>
    <thetext>Assign to Mike to take a look first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4453</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 13:09:38 +0000</bug_when>
    <thetext>GenerateCapsule is behaving as expected.

Not all signing tools support a verify operation, so failure to verify is 
a warning and not an error.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1462</bug_id>
          
          <creation_ts>2019-01-15 03:23:34 +0000</creation_ts>
          <short_desc>[ResetSystemRuntimeDxe] doesn&apos;t call EnterS3WithImmediateWake() in warm reset path</short_desc>
          <delta_ts>2019-04-02 20:16:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6095</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-15 03:23:34 +0000</bug_when>
    <thetext>EnterS3WithImmediateWake() is called in today&apos;s implementation to handle capsule update.
However, since the reset handler mechanism was added, platform should use the reset handler mechanism to handle the capsule update case.
After this change, ResetSystemRuntimeDxe driver can be cleaned to remove the S3 concept.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6134</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:16:55 +0000</bug_when>
    <thetext>bug scrub: assign to module owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6981</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-02 20:16:24 +0000</bug_when>
    <thetext>Finished at:
https://github.com/tianocore/edk2/commit/a89fd3a359b868e619355dbeda14ac4104b467a6
https://github.com/tianocore/edk2/commit/9338e230178599491a2de28ecaea8c6383eceeaf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1893</bug_id>
          
          <creation_ts>2019-06-10 23:33:39 +0000</creation_ts>
          <short_desc>Add generic Microcode FfsRule</short_desc>
          <delta_ts>2019-06-24 21:28:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7966</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 23:33:39 +0000</bug_when>
    <thetext>Generic Microcode FfsRule can be used for Microcode FFS. If so, there is no need to hard code Microcode file path in FDF file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7967</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 23:35:33 +0000</bug_when>
    <thetext>Liming will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8174</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-24 21:28:02 +0000</bug_when>
    <thetext>Fix at bb556a89c69bd6f8a6ee0aa9d43550a47fc808cb..a89235068ee957828bdb7f1ea3d2fde2546d666a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1359</bug_id>
          
          <creation_ts>2018-11-27 01:16:24 +0000</creation_ts>
          <short_desc>[SdMmcPciHcDxe] Add 64-bit DMA (SDMA &amp; ADMA2) support for SD host controller with version &gt;= 4.0</short_desc>
          <delta_ts>2019-01-02 21:46:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5708</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-11-27 01:16:24 +0000</bug_when>
    <thetext>According to SD Host Controller Simplified Specification Ver4.20, both SDMA and ADMA2 transfer support 64-bit system addressing.

This request is submitted to add this 64-bit system addressing feature support in the MdeModulePkg\Bus\Pci\SdMmcPciHcDxe driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5709</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-11-27 01:18:45 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #0)
&gt; According to SD Host Controller Simplified Specification Ver4.20, both SDMA
&gt; and ADMA2 transfer support 64-bit system addressing.

To be more specific, &quot;both SDMA and ADMA2 transfer support 64-bit system addressing&quot; is for host controller with version &gt;= 4.0.

Add this information to match with the feature request title. 

&gt; 
&gt; This request is submitted to add this 64-bit system addressing feature
&gt; support in the MdeModulePkg\Bus\Pci\SdMmcPciHcDxe driver.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5749</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-05 21:59:27 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5971</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-01-02 21:46:33 +0000</bug_when>
    <thetext>Contributed by Ashish Singhal &lt;ashishsingha@nvidia.com&gt; and resolved via commit:
https://github.com/tianocore/edk2/commit/b5547b9ce97e80c3127682a2a5d4b9bd14af353e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1170</bug_id>
          
          <creation_ts>2018-09-13 00:42:08 +0000</creation_ts>
          <short_desc>BaseTools: regression issue that display an empty PCD not used section in the report</short_desc>
          <delta_ts>2018-09-17 21:45:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4923</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 00:42:08 +0000</bug_when>
    <thetext>in the build report, it display an empty Pcd not used section. this is a regression issue caused by ac4578af364

&gt;=============================================================&lt;
PCDs not used by modules or in conditional directives
  *B  - PCD override in the build option
  *P  - Platform scoped PCD override in DSC file
  *F  - Platform scoped PCD override in FDF file
===============================================================
&lt;=============================================================&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4924</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 00:42:28 +0000</bug_when>
    <thetext>take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4947</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 02:48:13 +0000</bug_when>
    <thetext>Patch email:

https://lists.01.org/pipermail/edk2-devel/2018-September/029635.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4993</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-17 21:45:20 +0000</bug_when>
    <thetext>commit on edk2 master: SHA-1: ae57950fc878618083bca435fa4bc00d4bec97c1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1080</bug_id>
          
          <creation_ts>2018-08-08 04:38:05 +0000</creation_ts>
          <short_desc>[Shell] Input redirection should make sure 0xFFFE is in the beginning of the input source</short_desc>
          <delta_ts>2018-08-16 04:03:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4522</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-08 04:38:05 +0000</bug_when>
    <thetext>Today&apos;s Shell input redirection contains 3 minor bugs per Shell spec 3.4.4.2.
#1. If redirect input from a Unicode file through &apos;&lt;&apos;, it doesn&apos;t check whether the first character is 0xFFFE. It should insert 0xFFFE when the first character is not 0xFFFE.
#2. If redirect input from an ASCII file through &apos;&lt;a&apos;, it does convert the ASCII to Unicode but forgets to insert 0xFFFE.
#3. If redirect input from an environment variable through &apos;&lt;v&apos;, it forgets to insert 0xFFFE.


3.4.4.2 Input Redirection
Contents from an existing file or variable can be used as standard input to a UEFI
shell command. Any commands coming from an ASCII file will be automatically be
converted to the equivalent UCS-2 encoding and passed to the UEFI shell
command.
When redirecting input from an environment variable, the environment variable
must already exist. If it does not, an error will be generated. The shell will ensure
that the first character read from an input redirected environment variable will
contain the Unicode Byte Ordering Character (0xFFFE). If the first character in the
input source is not the Unicode Byte Ordering Character, the shell will insert this
character in the output from the input redirected variable. This is done to ensure
that an input redirected variable will be look like a UCS-2 encoded file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4567</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-09 20:03:43 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4594</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-16 04:03:56 +0000</bug_when>
    <thetext>pushed to master: bc0d3e29122df5fe4b71f6ef62e8652ea29fd6a0, 52047be0243074f50fab45650f36ae693c93d1b3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1910</bug_id>
          
          <creation_ts>2019-06-12 12:59:11 +0000</creation_ts>
          <short_desc>Codify, unify and document git submodule use in edk2</short_desc>
          <delta_ts>2019-08-14 22:31:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Leif Lindholm">quic_llindhol</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
    
    <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8024</commentid>
    <comment_count>0</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-06-12 12:59:11 +0000</bug_when>
    <thetext>EDK2 currently contains two submodules:
- CryptoPkg/Library/OpensslLib/openssl
- ArmPkg/Library/ArmSoftFloatLib/berkeley-softfloat-3

Instructions for how to initialize the repository for submodules
currently exist only in CryptoPkg/Library/OpensslLib/OpenSSL-HOWTO.txt
or externally to the edk2 repository.

Recent(ish) changes to upstream openssl adds further submodules, not
actually needed by edk2. And in general, I think we should work very
hard to prevent having submodules that require further submodules -
the risk to end up with fragile dependency chains is too high.

The current instructions we have for importing submodules do however
document initializing and updating submodules with --recursive.
Currently, that causes issues with openssl for users inside PRC behind
the GFW.

So, we need to document our policy for submodules, and together
with that we need to 
My suggestion is that we add this information as a new section in
edk2/Readme.md (and echo the git submodule commands in edk2-platforms/Readme.md).
- That policy *should* include the requirement to not permit
  submodules requiring submodules for our purposes.
- That policy should include the steps required to get the edk2
  repository to a buildable state.
- Nothing related to submodules should be documented anywhere else
  in the tree. Sure, OpenSSL-HOWTO.txt can still be there, but
  the section &quot;HOW to Install OpenSSL for UEFI Building&quot; should go.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8043</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:20:18 +0000</bug_when>
    <thetext>Jian, please follow up it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8391</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-09 21:35:41 +0000</bug_when>
    <thetext>Change to edk2-platforms/Readme.md has been pushed at 369c177357312c3e66721f1ea6216ce06c90f569</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9007</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-08-14 22:31:26 +0000</bug_when>
    <thetext>Pushed@5ab96088aec98a9a24e5a8b82ed41d1930239f84
Reviewed@https://edk2.groups.io/g/devel/message/43482
Reviewed@https://edk2.groups.io/g/devel/message/45643?p=,,,20,0,0,0::Created,,submodule,20,2,0,32861686</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1816</bug_id>
          <alias>CVE-2021-28211</alias>
          <creation_ts>2019-05-15 13:55:17 +0000</creation_ts>
          <short_desc>Possible heap corruption with LzmaUefiDecompressGetInfo</short_desc>
          <delta_ts>2021-09-22 15:47:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Satoshi Tanda">tanda.sat</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>aionescu+efi</cc>
    
    <cc>bret.barkelew</cc>
    
    <cc>dandan.bi</cc>
    
    <cc>ericj</cc>
    
    <cc>f4bug</cc>
    
    <cc>gaoliming</cc>
    
    <cc>gsuckevi</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kevinj</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nathaniel.p.mitchell</cc>
    
    <cc>rschiron</cc>
    
    <cc>tanda.sat</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202008</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>edk2-stable202011</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7564</commentid>
    <comment_count>0</comment_count>
    <who name="Satoshi Tanda">tanda.sat</who>
    <bug_when>2019-05-15 13:55:17 +0000</bug_when>
    <thetext>The LzmaUefiDecompressGetInfo function fetches 8 bytes (64bit-wide) of the uncompressed data size from the LZMA header then silently drops the upper 32bit by casting it to UINT32. 

https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Library/LzmaCustomDecompressLib/LzmaDecompress.c#L146

Since the caller of the function typically allocates heap based on the reported size by this function to subsequently decompress data, the caller may allocate smaller buffer than necessary when the input LZMA headers is greater than 32bit-wide. For example, when the uncompressed size claimed in the header is 0x1_00000100, the LzmaUefiDecompressGetInfo function reports 0x100 to the caller. The caller would allocate that heap and call the LzmaUefiDecompress function. Because the LzmaUefiDecompress function fetches an uncompressed size from the header again which will be 0x1_00000100 and decompresses data accordingly (without taking the size of allocated buffer), it is possible to overflow the allocated heap during the decompression process. 

It is probably challenging to exploit this in code compiled into firmware as you need to control input in the first place, but the LzmaUefiDecompressGetInfo function may be used to 3rd party software that parses UEFI firmware image files. For example, UEFITool has its own copy of this function (and fixed it by themselves
https://github.com/LongSoft/UEFITool/commit/f507d71ead4dcc516d6be1b5b3cd61f900abb4a4#diff-fa8944f45e026a9e683e0f552b418626).

I do not have an PoC firmware image and a standalone parser to demonstrate the issue handy, but hopefully, the issue is clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7854</commentid>
    <comment_count>1</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-05-29 12:46:37 +0000</bug_when>
    <thetext>5/29/19 tianocore infosec bugscrub - brent h. to dig in further.
Kinney - looks like &gt; 4gb input data would cause issue
Brett - ok if 32-bit everywhere.  mixing would be an issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7855</commentid>
    <comment_count>2</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-05-29 12:47:14 +0000</bug_when>
    <thetext>Bret*
;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7859</commentid>
    <comment_count>3</comment_count>
    <who name="">brent.holtsclaw</who>
    <bug_when>2019-05-29 17:41:05 +0000</bug_when>
    <thetext>It appears to be a security issue if using compilers size_t on a 64bit system. Suggest either casting to SizeT within LzmaUefiDecompressGetInfo or casting to UINT32 within LzmaUefiDecompress.

LzmaUefiDecompressGetInfo function casts DestinationSize to UINT32
..
DecodedSize = GetDecodedSizeOfBuf((UINT8*)Source);
*DestinationSize = (UINT32)DecodedSize;

LzmaUefiDecompress function casts DecodedBufSize to SizeT which appears to also be defined as UINTN
DecodedBufSize = (SizeT)GetDecodedSizeOfBuf((UINT8*)Source);
It then uses the DecodedBufSize in call to LzmaDecode
  LzmaResult = LzmaDecode(
    Destination,
    &amp;DecodedBufSize,
    (Byte*)((UINT8*)Source + LZMA_HEADER_SIZE),
    &amp;EncodedDataSize,
    Source,
    LZMA_PROPS_SIZE,
    LZMA_FINISH_END,
    &amp;Status,
    &amp;(AllocFuncs.Functions)
    )

Function LzmaDecode uses DecodedBufSize as the size of the destination buffer and also treats it as SizeT
SRes LzmaDecode(Byte *dest, SizeT *destLen, const Byte *src, SizeT *srcLen,
    const Byte *propData, unsigned propSize, ELzmaFinishMode finishMode,
    ELzmaStatus *status, ISzAlloc *alloc)

SizeT outSize = *destLen
p.dicBufSize = outSize;
res = LzmaDec_DecodeToDic(&amp;p, outSize, src, srcLen, finishMode, status);</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8183</commentid>
    <comment_count>4</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-06-25 16:48:12 +0000</bug_when>
    <thetext>Agree with Brent about explicitly casting consistently in this library.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8711</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 19:19:02 +0000</bug_when>
    <thetext>(comment made against edk2 @ 3d34b5f32692)

I think I disagree about both impact (comment 0) and mitigation
(comments 3-4).

Regarding impact: 3rd party UEFI binaries may be LZMA compressed. They
are decompressed before e.g. secure boot image verification. This means
that a crafted EFI binary can look small but cause buffer overflow in
section extraction, before validation. A similar issue was bug 686,
which merited multiple CVE numbers.

(In particular, see:
- https://bugzilla.tianocore.org/show_bug.cgi?id=686#c13
- https://lists.01.org/pipermail/edk2-devel/2018-October/031095.html
- https://lists.01.org/pipermail/edk2-devel/2018-October/031138.html
)

Regarding mitigation:

- I don&apos;t think we should ever truncate to UINT32 if he input is
  provided as UINT64. (As a special case, I don&apos;t think we should
  truncate to UINT32 within LzmaUefiDecompress().)

- Outputting UINT64 from LzmaUefiDecompressGetInfo() is theoretically
  safe, but messy in practice. While LzmaUefiDecompressGetInfo() is
  indeed an internal function, declared in:

    MdeModulePkg/Library/LzmaCustomDecompressLib/LzmaDecompressLibInternal.h

  its output parameter called &quot;DestinationSize&quot; is directly propagated
  out of two public functions. Namely (all pathnames relative to
  &quot;MdeModulePkg/Library/LzmaCustomDecompressLib&quot;):

  - LzmaGuidedSectionGetInfo()   [GuidedSectionExtraction.c]
  - LzmaArchGuidedSectionGetInfo [F86GuidedSectionExtraction.c]

  Both of these functions are registered with the
  ExtractGuidedSectionRegisterHandlers() API of the
  ExtractGuidedSectionLib class.

  The registered functions need to conform to the
  EXTRACT_GUIDED_SECTION_GET_INFO_HANDLER type.

  The registered functions are searched for, and called, through the
  public ExtractGuidedSectionGetInfo() API, from:

    MdePkg/Include/Library/ExtractGuidedSectionLib.h

  The ExtractGuidedSectionGetInfo() function is called from several
  places in edk2. I guess the most important could be that the DXE Core
  uses ExtractGuidedSectionGetInfo() for implementing
  EFI_GUIDED_SECTION_EXTRACTION_PROTOCOL -- see
  &quot;MdeModulePkg/Core/Dxe/SectionExtraction/CoreSectionExtraction.c&quot;.

  This protocol comes from the PI spec, and the &quot;OutputSize&quot; output
  parameter has type UINTN. Therefore, even if all the internal
  propagation of the original &quot;DecodedSize&quot; were widened correctly to
  64-bit, the PI protocol would still be a bottleneck on 32-bit
  architectures.

  Therefore, I would catch &gt;= 4GB DestinationSize values right in
  LzmaUefiDecompressGetInfo(), and return an error. The function&apos;s
  return type is already RETURN_STATUS, and all of the call sites
  correctly propagate errors. This wouldn&apos;t enable edk2 to extract
  GUIDed (LZMA) sections larger than 4GB, but we&apos;d replace the potential
  buffer overflow with clean errors, at minimal cost to dependent code.
  (4GB+ GUIDed sections are clearly not needed in practice.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8910</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-09 09:42:31 +0000</bug_when>
    <thetext>The CustomGuidedSectionExtract() function in &quot;MdeModulePkg/Core/Dxe/SectionExtraction/CoreSectionExtraction.c&quot; at commit 4b1b7c191309 is vulnerable to the exact issue described in comment 0; therefore I&apos;m marking this as CONFIRMED.

  UINT32          OutputBufferSize;
...
  Status = ExtractGuidedSectionGetInfo (
             InputSection,
             &amp;OutputBufferSize,
             &amp;ScratchBufferSize,
             &amp;SectionAttribute
             );
...
  if (OutputBufferSize &gt; 0) {
    //
    // Allocate output buffer
    //
    AllocatedOutputBuffer = AllocatePool (OutputBufferSize);
...
    *OutputBuffer = AllocatedOutputBuffer;
  }
...
  Status = ExtractGuidedSectionDecode (
             InputSection,
             OutputBuffer,
             ScratchBuffer,
             AuthenticationStatus
             );

and see comment 3 for where the last function call quoted above ends.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13018</commentid>
    <comment_count>7</comment_count>
    <who name="Alex Ionescu">aionescu+efi</who>
    <bug_when>2020-07-01 16:29:05 +0000</bug_when>
    <thetext>Any plan on actually fixing this issue? It seems to be bouncing around. Since it seems to have real security merit, perhaps we should plan a disclosure timeline since many 3rd party libraries are affected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13805</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-25 11:30:39 +0000</bug_when>
    <thetext>I&apos;ll try to propose a patch (as an attachment) next week.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13815</commentid>
    <comment_count>9</comment_count>
      <attachid>564</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-28 12:22:25 +0000</bug_when>
    <thetext>Created attachment 564
[PATCH] MdeModulePkg/LzmaCustomDecompressLib: catch 4GB+ uncompressed buffer sizes

Proposed patch, applies on top of commit 1d058c3e86b0 (&quot;IntelFsp2Pkg GenCfgOpt.py: Initialize IncLines as empty list&quot;, 2020-09-25).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13816</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-28 12:26:06 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; Created attachment 564 [details]
&gt; [PATCH] MdeModulePkg/LzmaCustomDecompressLib: catch 4GB+ uncompressed buffer
&gt; sizes
&gt; 
&gt; Proposed patch, applies on top of commit 1d058c3e86b0 (&quot;IntelFsp2Pkg
&gt; GenCfgOpt.py: Initialize IncLines as empty list&quot;, 2020-09-25).

Cc: Dandan Bi &lt;dandan.bi@intel.com&gt;
Cc: Hao A Wu &lt;hao.a.wu@intel.com&gt;
Cc: Jian J Wang &lt;jian.j.wang@intel.com&gt;
Cc: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;
Cc: Philippe Mathieu-Daudé &lt;philmd@redhat.com&gt;

Please review.

Note: I have only regression-tested this patch, using OVMF&apos;s automatic LZMA decompression (covering PEIFV and DXEFV) during boot, and S3 resume. (See the message on commit b24fca05751f for a few more details on PEIFV and DXEFV.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13817</commentid>
    <comment_count>11</comment_count>
    <who name="Alex Ionescu">aionescu+efi</who>
    <bug_when>2020-09-28 14:46:34 +0000</bug_when>
    <thetext>Thanks for the patch.

Team/Vincent -- would it help to get a CVE assigned? I can work with MITRE on that...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13821</commentid>
    <comment_count>12</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2020-09-28 21:29:37 +0000</bug_when>
    <thetext>I agree this fix. Reviewed-by: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13836</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-29 14:56:01 +0000</bug_when>
    <thetext>Hi Alex,

(In reply to Alex Ionescu from comment #11)
&gt; Thanks for the patch.
&gt; 
&gt; Team/Vincent -- would it help to get a CVE assigned? I can work with MITRE
&gt; on that...

I agree that a CVE should be assigned (see my reference to bug#686 in comment#5 above).

Luckily, TianoCore has recently become a CNA &lt;https://cve.mitre.org/cve/request_id.html#t&gt; thanks to the work of the infosec group. From Vincent&apos;s announcement on the edk2-infosec mailing list, &quot;Points of contact for infosec and CVE&apos;s will include Kevin Davis from Insyde, Eric Johnson from AMI, Dick Wilkins from Phoenix, and Vincent Zimmer from Intel&quot;. So (I think?) we need not contact an external org for assigning a CVE.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13837</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-09-29 14:58:27 +0000</bug_when>
    <thetext>(In reply to gaoliming from comment #12)
&gt; I agree this fix. Reviewed-by: Liming Gao &lt;gaoliming@byosoft.com.cn&gt;

Thank you, Liming!

So if there are no more comments on the patch, I think we should set up an embargo end date, so that people can start applying the patch.

Once the embargo elapses, I&apos;ll post the patch to edk2-devel for public review, with your R-b from comment#12 included. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13838</commentid>
    <comment_count>15</comment_count>
    <who name="Alex Ionescu">aionescu+efi</who>
    <bug_when>2020-09-29 17:23:31 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #13)
&gt; Hi Alex,
&gt; 
&gt; (In reply to Alex Ionescu from comment #11)
&gt; &gt; Thanks for the patch.
&gt; &gt; 
&gt; &gt; Team/Vincent -- would it help to get a CVE assigned? I can work with MITRE
&gt; &gt; on that...
&gt; 
&gt; I agree that a CVE should be assigned (see my reference to bug#686 in
&gt; comment#5 above).
&gt; 
&gt; Luckily, TianoCore has recently become a CNA
&gt; &lt;https://cve.mitre.org/cve/request_id.html#t&gt; thanks to the work of the
&gt; infosec group. From Vincent&apos;s announcement on the edk2-infosec mailing list,
&gt; &quot;Points of contact for infosec and CVE&apos;s will include Kevin Davis from
&gt; Insyde, Eric Johnson from AMI, Dick Wilkins from Phoenix, and Vincent Zimmer
&gt; from Intel&quot;. So (I think?) we need not contact an external org for assigning
&gt; a CVE.
&gt; 
&gt; Thanks.

That&apos;s awesome. Let me know if this is something I need to ping Vincent on or if it will be handled automatically as part of the bug/triage process. I want to make sure the bug will be correctly credited to Satoshi Tanda -- CrowdStrike and to be aware of disclosure timeline so that we can also absorb the patch in our own product -- for now we used a workaround to avoid showcasing the issue (it&apos;s a closed-source component).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13853</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-01 03:33:42 +0000</bug_when>
    <thetext>According to the flowchart at

https://github.com/tianocore/tianocore.github.io/wiki/Reporting-Security-Issues

(direct link: &lt;https://raw.githubusercontent.com/jwang36/tianocore.github.io/master/security/flowchart.svg&gt;)

from phase 2, we&apos;re still missing the CVSS evaluation step on this BZ. Once that is done (or may in parallel to it), we should indeed figure out the embargo length (phase 3), and get a CVE number (for phase 4).

I&apos;m going to send an email to the edk2-infosec mailing list now, CC&apos;ing the CVE contacts, about this BZ. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13891</commentid>
    <comment_count>17</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2020-10-07 07:17:09 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; Created attachment 564 [details]
&gt; [PATCH] MdeModulePkg/LzmaCustomDecompressLib: catch 4GB+ uncompressed buffer
&gt; sizes
&gt; 
&gt; Proposed patch, applies on top of commit 1d058c3e86b0 (&quot;IntelFsp2Pkg
&gt; GenCfgOpt.py: Initialize IncLines as empty list&quot;, 2020-09-25).

Reviewed-by: Philippe Mathieu-Daude &lt;philmd@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13899</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-10-07 11:52:56 +0000</bug_when>
    <thetext>Thank you, Phil!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14340</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-12 12:16:52 +0000</bug_when>
    <thetext>PROPOSED PUBLIC DATE (opening up the BZ and posting the patch to edk2-devel):

  Thursday 2020-Nov-19 07:00 UTC

in order to get the fix into edk2-stable202011.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14346</commentid>
    <comment_count>20</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2020-11-13 06:14:53 +0000</bug_when>
    <thetext>Is this going to have a CVE before it goes public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14350</commentid>
    <comment_count>21</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-13 15:21:13 +0000</bug_when>
    <thetext>(In reply to Riccardo Schirone from comment #20)
&gt; Is this going to have a CVE before it goes public?

CC&apos;ing Eric.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14373</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-19 06:53:01 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #9)
&gt; Created attachment 564 [details]
&gt; [PATCH] MdeModulePkg/LzmaCustomDecompressLib: catch 4GB+ uncompressed buffer
&gt; sizes
&gt; 
&gt; Proposed patch, applies on top of commit 1d058c3e86b0 (&quot;IntelFsp2Pkg
&gt; GenCfgOpt.py: Initialize IncLines as empty list&quot;, 2020-09-25).

Public posting:

* [edk2-devel] [PATCH RESEND 0/1]
  security fix: possible heap corruption with LzmaUefiDecompressGetInfo

msgid &lt;20201119115034.12897-1-lersek@redhat.com&gt;
https://edk2.groups.io/g/devel/message/67708
https://www.redhat.com/archives/edk2-devel-archive/2020-November/msg00866.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14377</commentid>
    <comment_count>23</comment_count>
    <who name="Alex Ionescu">aionescu+efi</who>
    <bug_when>2020-11-19 11:25:12 +0000</bug_when>
    <thetext>@Ericj -- what&apos;s the CVE/Ack for this? I see this is now public.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14389</commentid>
    <comment_count>24</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-11-20 21:06:10 +0000</bug_when>
    <thetext>Merged as commit e7bd0dd26db7, via &lt;https://github.com/tianocore/edk2/pull/1138&gt;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15188</commentid>
    <comment_count>25</comment_count>
      <attachid>658</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-03-03 11:46:54 +0000</bug_when>
    <thetext>Created attachment 658
CVE .json file

I have attached the .json file for CVE classification. Please review and provide feedback, especially for the version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15195</commentid>
    <comment_count>26</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-03 12:02:57 +0000</bug_when>
    <thetext>Hello Kevin,

last vulnerable release: edk2-stable202008
first fixed release:     edk2-stable202011

$ git tag --contains e7bd0dd26db7
edk2-stable202011</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15197</commentid>
    <comment_count>27</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-03 12:05:23 +0000</bug_when>
    <thetext>Upon reviewing commit e7bd0dd26db7, I think CWE-122 is a good match.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15216</commentid>
    <comment_count>28</comment_count>
      <attachid>666</attachid>
    <who name="">kevinj</who>
    <bug_when>2021-03-04 14:29:59 +0000</bug_when>
    <thetext>Created attachment 666
CVE .json file_2

Thank you Laszlo for your feedback. I have updated the version in the .json file and re-uploaded it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15265</commentid>
    <comment_count>29</comment_count>
    <who name="Alex Ionescu">aionescu+efi</who>
    <bug_when>2021-03-10 09:26:36 +0000</bug_when>
    <thetext>Hi,

Still wondering when it&apos;s possible to have the CVE assigned? This has almost taken two years now since reporting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15282</commentid>
    <comment_count>30</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-03-11 16:59:03 +0000</bug_when>
    <thetext>(In reply to Alex Ionescu from comment #29)
&gt; Hi,
&gt; 
&gt; Still wondering when it&apos;s possible to have the CVE assigned? This has almost
&gt; taken two years now since reporting.

We have requested CVE-IDs from MITRE. We are still waiting to receive said ID number from them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15292</commentid>
    <comment_count>31</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-12 16:03:49 +0000</bug_when>
    <thetext>Thanks for the CVE number, Kevin!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15294</commentid>
    <comment_count>32</comment_count>
    <who name="">kevinj</who>
    <bug_when>2021-03-12 16:05:15 +0000</bug_when>
    <thetext>Laszlo,

Please review the .json file again, especially the version this bug is observed in and inform me when you plan to publicly disclose this bug, so we know when to submit this CVE back to MITRE. Thank you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15302</commentid>
    <comment_count>33</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2021-03-12 16:56:54 +0000</bug_when>
    <thetext>The release info (edk2-stable202008) in the JSON from comment 28 seems OK, matching my comment 26.

Regarding public disclosure, we&apos;re past that -- please see comment 19 and comment 22. The issue was disclosed on November 19, 2020.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15304</commentid>
    <comment_count>34</comment_count>
    <who name="Alex Ionescu">aionescu+efi</who>
    <bug_when>2021-03-12 17:09:26 +0000</bug_when>
    <thetext>Since TianoCore is a CNA, I&apos;m unclear why you&apos;re contacting MITRE to get a CVE -- can&apos;t Tiano issue one directly?

Additionally, when will the information be published here:

https://edk2-docs.gitbook.io/security-advisory/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15719</commentid>
    <comment_count>35</comment_count>
    <who name="Satoshi Tanda">tanda.sat</who>
    <bug_when>2021-04-18 14:27:24 +0000</bug_when>
    <thetext>Just noticed CVE-2021-28211 was assigned. It is still reserved in MITRE, but some vendors have public info 
https://access.redhat.com/security/cve/CVE-2021-28211</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17364</commentid>
    <comment_count>36</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:43 +0000</bug_when>
    <thetext>http://www.compilatori.com/tech/nvidia-and-samsung/	http://www.wearelondonmade.com/tech/nvidia-and-samsung/	http://www.jopspeech.com/tech/nvidia-and-samsung/	http://joerg.li/tech/nvidia-and-samsung/	http://connstr.net/tech/nvidia-and-samsung/	http://embermanchester.uk/tech/nvidia-and-samsung/	http://www.slipstone.co.uk/tech/nvidia-and-samsung/	http://www.logoarts.co.uk/tech/nvidia-and-samsung/	http://www.acpirateradio.co.uk/health/covid-and-tech/	https://waytowhatsnext.com/category/services/	https://www.webb-dev.co.uk/category/shopping/	http://www.iu-bloomington.com/category/services/	http://www-look-4.com/tech/nvidia-and-samsung/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>564</attachid>
            <date>2020-09-28 12:22:25 +0000</date>
            <delta_ts>2020-09-28 12:22:25 +0000</delta_ts>
            <desc>[PATCH] MdeModulePkg/LzmaCustomDecompressLib: catch 4GB+ uncompressed buffer sizes</desc>
            <filename>0001-MdeModulePkg-LzmaCustomDecompressLib-catch-4GB-uncompressed-buffer-sizes.patch</filename>
            <type>text/plain</type>
            <size>3943</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>658</attachid>
            <date>2021-03-03 11:46:54 +0000</date>
            <delta_ts>2021-03-04 14:29:59 +0000</delta_ts>
            <desc>CVE .json file</desc>
            <filename>1816.json</filename>
            <type>application/json</type>
            <size>873</size>
            <attacher>kevinj</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>666</attachid>
            <date>2021-03-04 14:29:59 +0000</date>
            <delta_ts>2021-03-04 14:29:59 +0000</delta_ts>
            <desc>CVE .json file_2</desc>
            <filename>1816.json</filename>
            <type>application/json</type>
            <size>907</size>
            <attacher>kevinj</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1718</bug_id>
          
          <creation_ts>2019-04-14 23:03:17 +0000</creation_ts>
          <short_desc>update ConvertFceToStructurePcd.py with the char order PCD name.</short_desc>
          <delta_ts>2019-04-17 21:21:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7127</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-14 23:03:17 +0000</bug_when>
    <thetext>Now, the output of this script is dis order.
The requests is to sorting the PCD order them
base on PcdName, then base on Pcd field name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7156</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-17 02:34:25 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7169</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-17 21:21:55 +0000</bug_when>
    <thetext>fix it on edk2 trunk:cfb29d2bda57baa344bded40cf12af81b13e8a40</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1929</bug_id>
          
          <creation_ts>2019-06-20 22:22:08 +0000</creation_ts>
          <short_desc>Running edksetup.sh will make an error because &quot;bc&quot; is not installed on Linux</short_desc>
          <delta_ts>2019-08-11 22:34:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>ray</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8142</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-06-20 22:22:08 +0000</bug_when>
    <thetext>Setting up the python version using edksetup.sh requires the &quot;bc&quot; calculator tool,
The &quot;bc&quot; calculator is used to find the latest python version.

But some Linux systems don&apos;t have &quot;bc&quot; calculators installed, so it needs to be replaced by something else.

Code:
ret=`echo &quot;$origin_version &lt; $python_version&quot; |bc`</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8209</commentid>
    <comment_count>1</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-06-26 11:34:55 +0000</bug_when>
    <thetext>bc is pretty commonly used in builds on linux/unix platforms (used by u-boot and linux kernel, for example). So I don&apos;t think requiring it is unreasonable.

However, if someone would like to update edksetup.sh to work without it, that would be a valid thing to do.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8210</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Marcilla">ray</who>
    <bug_when>2019-06-26 16:35:07 +0000</bug_when>
    <thetext>It looks like edksetup.sh is just using bc to compare numbers

https://github.com/tianocore/edk2/blob/master/edksetup.sh

In that case, you could swap it for regular bash -lt/-gt:

~$ origin_version=3
~$ python_version=4
~$ if [ $origin_version -lt $python_version ]; then echo &quot;true&quot;; fi
true</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8248</commentid>
    <comment_count>3</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:26:37 +0000</bug_when>
    <thetext>zhijux, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8936</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-11 22:34:18 +0000</bug_when>
    <thetext>fixed it in 39744883933eea9674ccaf243cbf565966b8fa74</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1012</bug_id>
          
          <creation_ts>2018-07-17 03:30:37 +0000</creation_ts>
          <short_desc>Redundant library class is defined in S3SaveStateDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:21:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4285</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 03:30:37 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant library class, which is MemoryAllocationLib, defined in S3SaveStateDxe module INF file. Need to remove it.

Below is the fix reference:
--- a/MdeModulePkg/Universal/Acpi/S3SaveStateDxe/S3SaveStateDxe.inf
+++ b/MdeModulePkg/Universal/Acpi/S3SaveStateDxe/S3SaveStateDxe.inf
@@ -42,7 +42,6 @@

 [LibraryClasses]
   UefiBootServicesTableLib
-  MemoryAllocationLib
   UefiDriverEntryPoint
   BaseMemoryLib
   BaseLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4371</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 22:40:40 +0000</bug_when>
    <thetext>bug scrub: assign to module owner to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4945</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:21:24 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1403</bug_id>
          
          <creation_ts>2018-12-13 04:03:20 +0000</creation_ts>
          <short_desc>add support for PKCS 1v2 RSAES-OAEP PKI encryption in base crypt lib</short_desc>
          <delta_ts>2019-04-27 23:33:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5863</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-13 04:03:20 +0000</bug_when>
    <thetext>Add support for this in BaseCryptLib.

Definition here:
https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Include/Library/BaseCryptLib.h#L2417



Implementation:
https://github.com/Microsoft/mu_tiano_plus/blob/release/201808/CryptoPkg/Library/BaseCryptLib/Pk/CryptPkcs1Oaep.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5874</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:21:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7251</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-24 03:49:42 +0000</bug_when>
    <thetext>finished at
https://github.com/tianocore/edk2/commit/aed90beee51054dbba2a90ef9662e9a5e5ceed53
https://github.com/tianocore/edk2/commit/933f1990f583d82d89a626f49d341dccf6cba5f7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7306</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:33:40 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1840</bug_id>
          
          <creation_ts>2019-05-24 01:51:30 +0000</creation_ts>
          <short_desc>[CapsuleApp] Enhance Capsule-On-Disk related functions</short_desc>
          <delta_ts>2019-06-26 03:24:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7778</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-05-24 01:51:30 +0000</bug_when>
    <thetext>The following must be enhanced:
1. &apos;CapsuleApp -OD&apos; should support to perform capsules in sub directory.
2. Currently the option -OD must be after -NR, otherwise will prompt an error. The position of option -OD and -NR should not be fixed. Both &apos;CapsuleApp -OD -NR&apos; and &apos;CapsuleApp -NR -OD&apos; should be supported.
3. &apos;CapsuleApp -OD&apos; should firstly check the Capsule-On-Disk support by OsIndicationsSupported variable before processing the capsules. If not supported, prompt an error message and quit the process.
4. &apos;Capsule -L&apos; will cause a dead loop. This bug need to be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7874</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 20:10:50 +0000</bug_when>
    <thetext>wei6 will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8195</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-06-26 03:24:30 +0000</bug_when>
    <thetext>Fix it at:
https://github.com/tianocore/edk2/commit/8165570e3e4a2f834786c67afe16a5d2d55bd65e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1301</bug_id>
          
          <creation_ts>2018-11-06 20:57:09 +0000</creation_ts>
          <short_desc>BaseTools: Enable Hash build by default</short_desc>
          <delta_ts>2022-02-15 22:33:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5509</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-06 20:57:09 +0000</bug_when>
    <thetext>current BaseTools have --hash option to enable hash build, and the hash build have better build performance than current build. so now we suggest to enable hash build by default.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5604</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-15 19:47:33 +0000</bug_when>
    <thetext>assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9461</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-04 23:17:09 +0000</bug_when>
    <thetext>patches for review.
https://edk2.groups.io/g/devel/message/46863
https://edk2.groups.io/g/devel/message/46862</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9462</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-04 23:19:43 +0000</bug_when>
    <thetext>ignore my previous comments. It&apos;s for 1302.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18393</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-02-15 22:33:55 +0000</bug_when>
    <thetext>close this bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1736</bug_id>
          
          <creation_ts>2019-04-21 23:14:57 +0000</creation_ts>
          <short_desc>ECC reports 1 error in CryptoPkg</short_desc>
          <delta_ts>2019-05-04 22:19:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7221</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-21 23:14:57 +0000</bug_when>
    <thetext>ECC reports 1 error in CryptoPkg. Error information:
Error Code: 9001
Error Message: The file headers should follow Doxygen special documentation blocks in section 2.3.5
File: C:\ECC\Edk2R9\CryptoPkg\Library\BaseCryptLib\PeiCryptLib.inf
Other Error Message: Header comment section must have license information</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7286</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 21:57:58 +0000</bug_when>
    <thetext>Dandan, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7292</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-04-27 22:10:42 +0000</bug_when>
    <thetext>This issue should be involved by following commit, it should not add an empty line below the line of &quot;SPDX-License-Identifier: BSD-2-Clause-Patent&quot;. Transfer to patch owner to check.

CryptoPkg/BaseCryptLib: Add new API VerifyEKUsInPkcs7Signature

REF:https://bugzilla.tianocore.org/show_bug.cgi?id=1402

Add the API VerifyEKUsInPkcs7Signature to check if x509 cert
has any or all EKUs.

Signed-off-by: Zhichao Gao &lt;zhichao.gao@intel.com&gt;
Cc: Ting Ye &lt;ting.ye@intel.com&gt;
Cc: Gang Wei &lt;gang.wei@intel.com&gt;
Cc: Wang Jian J &lt;jian.j.wang@intel.com&gt;
Cc: Liming Gao &lt;liming.gao@intel.com&gt;
Cc: Sean Brogan &lt;sean.brogan@microsoft.com&gt;
Cc: Michael Turner &lt;Michael.Turner@microsoft.com&gt;
Cc: Bret Barkelew &lt;Bret.Barkelew@microsoft.com&gt;
Reviewed-by: Jian J Wang &lt;jian.j.wang@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7310</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:36:32 +0000</bug_when>
    <thetext>Add it into Q2 fix plan since it is regression issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7360</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-30 04:32:37 +0000</bug_when>
    <thetext>Fixed at
038f929c921c3b6f2fb47a79f0e89caa0ed649c0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7367</commentid>
    <comment_count>5</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-05-04 22:19:29 +0000</bug_when>
    <thetext>Run pass with edk2:fbb0ec7ea4c0d1e9e397fe898fb7d69de0779084</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1642</bug_id>
          
          <creation_ts>2019-03-21 02:18:22 +0000</creation_ts>
          <short_desc>RegisterCpuFeaturesLib.h CPU_FEATURE_THREE_STRICK_COUNTER should be CPU_FEATURE_THREE_STRIKE_COUNTER</short_desc>
          <delta_ts>2019-06-12 21:38:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6813</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-03-21 02:18:22 +0000</bug_when>
    <thetext>In RegisterCpuFeaturesLib.h, CPU_FEATURE_THREE_STRICK_COUNTER should be CPU_FEATURE_THREE_STRIKE_COUNT, the &quot;STRICK&quot; should be &quot;STRIKE&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6877</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-22 00:55:28 +0000</bug_when>
    <thetext>Eric will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8030</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-06-12 21:37:49 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/e85cfa2fa4a5f2819639830b1eb43923ae8d8c14.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8031</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-06-12 21:38:41 +0000</bug_when>
    <thetext>Resolved</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1423</bug_id>
          
          <creation_ts>2018-12-26 08:06:55 +0000</creation_ts>
          <short_desc>BaseTools/GenFv: Support SecCore and PeiCore in different FV</short_desc>
          <delta_ts>2018-12-28 01:32:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5959</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2018-12-26 08:06:55 +0000</bug_when>
    <thetext>There is usage model that SecCore and PeiCore are in different FVs.
Update BaseTools to support this usage model.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5963</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-26 23:58:30 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5964</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2018-12-28 01:32:05 +0000</bug_when>
    <thetext>commit 2bb4a7ca6299298f84da4657576b140f178c7458 (HEAD -&gt; master, origin/master, origin/HEAD, devel8)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Wed Dec 26 21:15:19 2018 +0800

    BaseTools/GenFv: Support SecCore and PeiCore in different FV

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1423

    There is usage model that SecCore and PeiCore are in different FVs.
    Update BaseTools to support this usage model.

    Test: Verified on internal platform with the case SecCore and
    PeiCore in different FVs and built/booted successfully.

    Cc: Bob Feng &lt;bob.c.feng@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Cc: Yonghong Zhu &lt;yonghong.zhu@intel.com&gt;
    Contributed-under: TianoCore Contribution Agreement 1.1
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Bob Feng &lt;bob.c.feng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1858</bug_id>
          
          <creation_ts>2019-05-29 04:23:00 +0000</creation_ts>
          <short_desc>Clean up some unused parameters and change some incorrect parameter defaults</short_desc>
          <delta_ts>2019-09-16 22:47:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7847</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-29 04:23:00 +0000</bug_when>
    <thetext>def __InfParse__(self, Dict = {}):
and
def GetFileList(FfsInf, FileType, FileExtension, Dict = {}, IsMakefile=False)

for Dict={},There are pitfalls in the way this default parameter is set 
and Dict is not used in functions, other functions have these two cases,
I will clean up some unused parameters and change some incorrect parameter defaults</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7880</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 21:00:28 +0000</bug_when>
    <thetext>Zhiju wil work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9690</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-16 22:47:17 +0000</bug_when>
    <thetext>fixed it in e32f7bc96dc8db7af0c1c532e4990c9a36a12354</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1758</bug_id>
          
          <creation_ts>2019-04-28 02:26:49 +0000</creation_ts>
          <short_desc>UEFI SCT reports 16 failures in RuntimeServicesTest\TimeServicesTest on Emulator.</short_desc>
          <delta_ts>2019-06-05 03:41:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="wuzhiqix">zhiqiangx.wu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fanx.xu</cc>
    
    <cc>haiyanx.a.li</cc>
    
    <cc>ray.ni</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7318</commentid>
    <comment_count>0</comment_count>
      <attachid>311</attachid>
    <who name="wuzhiqix">zhiqiangx.wu</who>
    <bug_when>2019-04-28 02:26:49 +0000</bug_when>
    <thetext>Created attachment 311
UEFI SCT logs

UEFI SCT reports 16 failures in RuntimeServicesTest\TimeServicesTest on Emulator.
Detail failures please refer to attached logs.

RuntimeServicesTest\TimeServicesTest	5.2.2.2.22	0	0	29151AE4-7A5E-42D9-84F8-E9C56787B7E8	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Year at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.24	0	0	3B96A20C-2B1F-44EA-BAA9-F96FEE131D05	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Year at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.26	0	0	4E123824-8636-4426-81E6-1675628CDE69	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Month at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.28	0	0	2D5CDBE5-1055-4EF6-8E90-0C993F93F698	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Month at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.30	0	0	7AF90CE7-1FED-4101-82DC-CC634CDF204E	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the daylight at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.32	0	0	B39BC904-55E7-4B9B-B4D8-274ADD71D625	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the daylight at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.34	0	0	CDBBDA04-4F7C-4BA5-8BCF-C050E5A976C7	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the TimeZone at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.36	0	0	EA99DEC5-B879-4C8D-BFD1-F63FE75899BF	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the TimeZone at EFI_TPL_APPLICATION.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.23	0	0	75E988EE-EC78-4190-9A09-B1315C2025A5	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Year at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.25	0	0	E664E1D7-B733-410D-BC53-D4CFF2464355	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Year at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.27	0	0	8F0BFE23-B6EC-4EA2-8E03-0A7A5E3645B3	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Month at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.29	0	0	DA4B19E7-F605-4FB9-A181-CCD335290BFE	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the Month at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.31	0	0	FA81D174-5743-485F-B248-AAEADD7C1E51	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the daylight at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.33	0	0	54DAF29B-48E6-4FA4-AD00-B8D648AF7D88	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the daylight at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.35	0	0	F749B4F1-537D-4DDF-8545-C0A41993CEE4	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the TimeZone at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log

RuntimeServicesTest\TimeServicesTest	5.2.2.2.37	0	0	D9C645B9-52DE-415C-ABDC-7226CE6A30B1	FAIL	RT.SetTime - SetTime() returns EFI_SUCCESS to update the TimeZone at EFI_TPL_CALLBACK.	SetTime_Func_0_0_603B46BE-7E14-408A-93D7-DD9DEC732968.log</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7355</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-29 23:37:53 +0000</bug_when>
    <thetext>zhiguang, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7932</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-06-05 03:41:10 +0000</bug_when>
    <thetext>I think this failure is expected, 
because the following code in EmulatorPkg\RealTimeClockRuntimeDxe\RealTimeClock.c
will always return unsuccessful status.
Besides, this failure also happens to NT32.

EFI_STATUS
EFIAPI
EmuSetTime (
  IN EFI_TIME   *Time
  )
{
  EFI_STATUS            Status;

  if (Time == NULL) {
    return EFI_INVALID_PARAMETER;
  }
  //
  // Make sure that the time fields are valid
  //
  Status = RtcTimeFieldsValid (Time);
  if (EFI_ERROR (Status)) {
    return Status;
  }
  return EFI_UNSUPPORTED;
}</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>311</attachid>
            <date>2019-04-28 02:26:49 +0000</date>
            <delta_ts>2019-04-28 02:26:49 +0000</delta_ts>
            <desc>UEFI SCT logs</desc>
            <filename>TimeServicesTest0.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>17204</size>
            <attacher name="wuzhiqix">zhiqiangx.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1136</bug_id>
          <alias>CVE-2018-12182</alias>
          <creation_ts>2018-08-30 21:10:06 +0000</creation_ts>
          <short_desc>SMI Confused Deputy SmramSaveState.c</short_desc>
          <delta_ts>2019-08-01 15:36:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ryan Ware">ryan.ware</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>ericj</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>rschiron</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4775</commentid>
    <comment_count>0</comment_count>
      <attachid>213</attachid>
    <who name="Ryan Ware">ryan.ware</who>
    <bug_when>2018-08-30 21:10:06 +0000</bug_when>
    <thetext>Created attachment 213
Confused Deputy Patch

Insufficient memory write checking in system firmware allows local attacker to [ deny service | bypass OS protections | other? ]
Page fault exception (and hang) discovered by customer when IoData is copied back.
Issue appears to originate here: https://github.com/tianocore/edk2/blob/master/UefiCpuPkg/PiSmmCpuDxeSmm/SmramSaveState.c#L438</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4805</commentid>
    <comment_count>1</comment_count>
    <who name="hhtian">hot.tian</who>
    <bug_when>2018-09-02 21:49:10 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5594</commentid>
    <comment_count>2</comment_count>
    <who name="Eric Johnson">ericj</who>
    <bug_when>2018-11-14 11:07:05 +0000</bug_when>
    <thetext>Can we classify this as a bug?  Unless I am misunderstanding what is going on here, it looks like this is an issue in an SMM internal protocol.  This bug could cause a page fault if the caller passes an unsafe buffer into the function but the caller must already reside in SMM.  The bug does not allow the bypassing of platform protection (Secure Boot, Secure Flash, etc).  As far as I can tell, it only allows a denial of service if there is either an insecure smi handler, or one that does not use a buffer that has been marked as safe for SMM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5835</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-12-12 02:18:41 +0000</bug_when>
    <thetext>(In reply to Eric Johnson from comment #2)
&gt; Can we classify this as a bug?  Unless I am misunderstanding what is going
&gt; on here, it looks like this is an issue in an SMM internal protocol.  This
&gt; bug could cause a page fault if the caller passes an unsafe buffer into the
&gt; function but the caller must already reside in SMM.  The bug does not allow
&gt; the bypassing of platform protection (Secure Boot, Secure Flash, etc).  As
&gt; far as I can tell, it only allows a denial of service if there is either an
&gt; insecure smi handler, or one that does not use a buffer that has been marked
&gt; as safe for SMM.

No, it is a special case &quot;ins/outs occurs in one thread during SMI, a page fault will occur&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5847</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-12-13 00:17:32 +0000</bug_when>
    <thetext>Change Assignee to Jian.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6826</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-03-21 04:37:15 +0000</bug_when>
    <thetext>Please be informed that disclosure of this tracker is in plan (ETA 28 Mar&apos;19).

(What about one week for a transition period for anyone who concerns to raise/discuss issues for publishing? If no objection raised in one week, I&apos;ll start to open this tracker to community and ask patch owner to prepare code review.)

CVE Number: CVE-2018-12182</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7013</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-04-05 11:13:34 +0000</bug_when>
    <thetext>Proceed to open source the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7041</commentid>
    <comment_count>7</comment_count>
    <who name="Riccardo Schirone">rschiron</who>
    <bug_when>2019-04-09 10:21:04 +0000</bug_when>
    <thetext>I think there is only the &quot;Part 2&quot; of the patch in the attachment. Could you provide both parts since the flaw is public, please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7047</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-09 14:51:23 +0000</bug_when>
    <thetext>Can someone please contribute a *sensible* description of this
vulnerability. The closest to &quot;sensible&quot; from the above comments is
comment 3. Still extremely lacking.

Regarding the patch (attachment 213):

- Based on the commit message alone, it is malformed and/or truncated.

- It also refers to &quot;part 2&quot; (see comment 7).

- It seems to modify a file called &quot;SmramSaveState.c&quot;, without any
  directory prefix. In edk2, at commit f8113e25001e, there is only one
  file called &quot;SmramSaveState.c&quot;, so let&apos;s assume the patch is for:

    UefiCpuPkg/PiSmmCpuDxeSmm/SmramSaveState.c

- The patch modifies the SmmCpuFeaturesReadSaveStateRegister() function.
  However, in edk2 at f8113e25001e, the file identified above has no
  such function.

  In fact, PiSmmCpuDxeSmm in the open-source edk2 tree has never had an
  implementation of the SmmCpuFeaturesReadSaveStateRegister() function:
  when the module was introduced in commit 529a5a860996 (&quot;UefiCpuPkg:
  Add PiSmmCpuDxeSmm module no IA32/X64 files&quot;, 2015-10-19), it consumed
  the API from the SmmCpuFeaturesLib class.

  The lib class (and its first instance) was introduced in the same
  patch series, namely commit a9764e68f910 (&quot;UefiCpuPkg: Add
  SmmCpuFeaturesLib&quot;, 2015-10-19).

  Today, we have the following instances of this library class, in edk2:

    OvmfPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.inf
    QuarkSocPkg/QuarkNorthCluster/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.inf
    UefiCpuPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.inf
    UefiCpuPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLibStm.inf

  Therefore, the patch in the attachment does not apply to the open
  source edk2 tree.

Now, here&apos;s what we do have in PiSmmCpuDxeSmm, at f8113e25001e:

- The SmmReadSaveState() function in
  &quot;UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c&quot; calls the
  SmmCpuFeaturesReadSaveStateRegister() function, from the platform&apos;s
  SmmCpuFeaturesLib instance.

- If that platform-specific function returns EFI_UNSUPPORTED, then
  PiSmmCpuDxeSmm falls back to the common function
  ReadSaveStateRegister(), defined in file
  &quot;UefiCpuPkg/PiSmmCpuDxeSmm/SmramSaveState.c&quot;.

- Said fallback ReadSaveStateRegister() function contains code that is
  similar to what is patched in attachment 213.

Hence, presumably, the ReadSaveStateRegister() function in
&quot;UefiCpuPkg/PiSmmCpuDxeSmm/SmramSaveState.c&quot; should be patched. With a
clear and detailed commit message, of course.

... In theory at least, the problematic path is reachable in OVMF,
because OVMF&apos;s SmmCpuFeaturesReadSaveStateRegister()
[OvmfPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.c] can technically
return EFI_UNSUPPORTED.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7048</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-09 14:54:37 +0000</bug_when>
    <thetext>I&apos;m adding &quot;EDK II Trunk&quot; to both the &quot;Release(s) the issue is observed&quot; and the &quot;Release(s) the issues must be fixed&quot; fields, given that ReadSaveStateRegister() in &quot;UefiCpuPkg/PiSmmCpuDxeSmm/SmramSaveState.c&quot; seems to contain the affected code, and it is reachable too, dependent on the platform.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7079</commentid>
    <comment_count>10</comment_count>
      <attachid>286</attachid>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-04-11 04:14:05 +0000</bug_when>
    <thetext>Created attachment 286
0001-UefiCpuPkg-PiSmmCpuDxeSmm-Only-support-IN-OUT-IO-sav</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7080</commentid>
    <comment_count>11</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-04-11 04:23:09 +0000</bug_when>
    <thetext>I try to have most information as I know into the attached patch &quot;0001-UefiCpuPkg-PiSmmCpuDxeSmm-Only-support-IN-OUT-IO-sav&quot;.

For comment 7, I am not aware of other part, but I do not think it is related to the real fix at all.

For comment 8, Laszlo, you may check whether the attached patch has enough information.

OvmfPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.inf
No need to handle as it returns EFI_NOT_FOUND for EFI_SMM_SAVE_STATE_REGISTER_IO.
QuarkSocPkg/QuarkNorthCluster/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.inf
UefiCpuPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLib.inf
UefiCpuPkg/Library/SmmCpuFeaturesLib/SmmCpuFeaturesLibStm.inf
No need to handle as they return EFI_UNSUPPORTED directly.

But indeed, some platform-specific SmmCpuFeaturesReadSaveStateRegister() (like the attachment &quot;Confused Deputy Patch&quot;) needs to be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7083</commentid>
    <comment_count>12</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-04-11 06:48:33 +0000</bug_when>
    <thetext>Star, thanks for the clarification and patch repack.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7101</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-11 12:54:21 +0000</bug_when>
    <thetext>Hi Star, thank you for the extremely good explanation in the commit message and in comment 11. Combined with the following sections of the PI 1.7 spec:

- Volume 4: Management Mode Core Interface
  - 4.3 CPU Save State Access Services
    - [general description of EFI_MM_CPU_PROTOCOL]
    - EFI_MM_CPU_PROTOCOL.ReadSaveState()
    - 4.3.1 MM Save State IO Info

the issue is now clear to me, and also why it&apos;s called a &quot;confused deputy&quot; (and why it&apos;s a security issue). The attacker can set up one core to continuously execute the problematic instruction, and then trigger an SMI on another core. This will force a page fault (or worse) in SMM.

It&apos;s also clear that OVMF is not affected. In order for OVMF to reach the code that&apos;s being patched, Register would have to equal EFI_SMM_SAVE_STATE_REGISTER_IO, and OVMF&apos;s SmmCpuFeaturesReadSaveStateRegister() instance would have to return EFI_UNSUPPORTED. But for that Register value, OVMF&apos;s SmmCpuFeaturesReadSaveStateRegister() returns EFI_NOT_FOUND in reality. So there is no vulnerability on OVMF.

(BTW, OVMF behaving like described above simply means that MM drivers in OVMF cannot get this kind of information from the save state map, i.e. they cannot learn at all what IO port operation was interrupted by the SMI. But in practice that&apos;s not a problem for OVMF -- the only code in edk2 that actually calls EFI_SMM_CPU_PROTOCOL.ReadSaveState() lives under QuarkSocPkg and Vlv2TbltDevicePkg.)

Thank you again for the explanation!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7869</commentid>
    <comment_count>14</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-30 10:08:40 +0000</bug_when>
    <thetext>Patch pushed at cf574f0a1838665498e43e9c029d8c1211cbbfa3, reviewed at https://edk2.groups.io/g/devel/message/40525</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>213</attachid>
            <date>2018-08-30 21:10:06 +0000</date>
            <delta_ts>2018-08-30 21:10:06 +0000</delta_ts>
            <desc>Confused Deputy Patch</desc>
            <filename>confused_deputy.patch</filename>
            <type>application/octet-stream</type>
            <size>3253</size>
            <attacher name="Ryan Ware">ryan.ware</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>286</attachid>
            <date>2019-04-11 04:14:05 +0000</date>
            <delta_ts>2019-04-11 04:14:05 +0000</delta_ts>
            <desc>0001-UefiCpuPkg-PiSmmCpuDxeSmm-Only-support-IN-OUT-IO-sav</desc>
            <filename>0001-UefiCpuPkg-PiSmmCpuDxeSmm-Only-support-IN-OUT-IO-sav.patch</filename>
            <type>text/plain</type>
            <size>4488</size>
            <attacher name="StarZeng">star.zeng</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1971</bug_id>
          
          <creation_ts>2019-07-11 01:44:11 +0000</creation_ts>
          <short_desc>EDK generates PE32 instead of PE32+</short_desc>
          <delta_ts>2019-07-25 20:38:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Andrew Fish">afish</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.jin</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.a.rothman</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>stephano</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8403</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-07-11 01:44:11 +0000</bug_when>
    <thetext>According to the UEFI specifications 2.0 to 2.8 all binary UEFI images use the PE32+ format irrespective of the bitness of the binary. See chapter 2.1.1 UEFI Images.

EDK II generates PE32 for 32bit code and PE32+ for 64bit code which complies to the PE-COFF specification but not to the UEFI specification.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8411</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:09:42 +0000</bug_when>
    <thetext>Please provide host compiler and target where this breaks and we will research.

Bug Triage: set to need_info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8433</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-07-12 01:49:56 +0000</bug_when>
    <thetext>I am using Debian Buster with gcc 8.3 to compile for i386.

This is the build command:
BaseTools/BinWrappers/PosixLike/build -a IA32 -p ShellPkg/ShellPkg.dsc

This is the environment:

ACTIVE_PLATFORM = ShellPkg/ShellPkg.dsc
TARGET          = RELEASE
TARGET_ARCH     = IA32
TOOL_CHAIN_CONF = Conf/tools_def.txt
TOOL_CHAIN_TAG  = GCC5
BUILD_RULE_CONF = Conf/build_rule.txt

EFI_IMAGE_OPTIONAL_HEADER32 and EFI_IMAGE_OPTIONAL_HEADER64 are defined in MdePkg/Include/IndustryStandard/PeImage.h.

I am not sure if EDK II should be changed or the specification should be adjusted to reflect what is out in the wild. Either way the gap between EDK II and the specification should be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8439</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-12 12:31:26 +0000</bug_when>
    <thetext>For reference:
https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?h=v5.2&amp;id=494c704f9af0a0cddf593b381ea44320888733e6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8440</commentid>
    <comment_count>4</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-07-12 12:52:25 +0000</bug_when>
    <thetext>This is poor wording in the UEFI Spec. 

It looks to me like PE32+ is a specific type of header in the PE/COFF spec, but also used in the UEFI spec as a more generic term for PE/COFF.

It does not make sense for 32-bit images to have the 64-bit (PE32+) PE/COFF headers. I&apos;m not sure this is even possible with a lot of tool chains. 

Se we should file an ECR against the UEFI Spec to fix the wording to make it clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8442</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-07-12 14:12:11 +0000</bug_when>
    <thetext>(In reply to Stephano Cetola from comment #3)
&gt; For reference:
&gt; https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/
&gt; ?h=v5.2&amp;id=494c704f9af0a0cddf593b381ea44320888733e6

This relates to a separate problem which may also be best solved by adjusting the UEFI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8443</commentid>
    <comment_count>6</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-07-12 14:57:12 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #5)
&gt; (In reply to Stephano Cetola from comment #3)
&gt; &gt; For reference:
&gt; &gt; https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/
&gt; &gt; ?h=v5.2&amp;id=494c704f9af0a0cddf593b381ea44320888733e6
&gt; 
&gt; This relates to a separate problem which may also be best solved by
&gt; adjusting the UEFI spec.

Yikes from UEFI Spec: EFI_GUID: 128-bit buffer containing a unique identifier value. Unless otherwise specified, aligned on a 64-bit boundary.

That looks broken.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8444</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-12 19:29:58 +0000</bug_when>
    <thetext>(In reply to Andrew Fish from comment #6)
&gt; Yikes from UEFI Spec: EFI_GUID: 128-bit buffer containing a unique
&gt; identifier value. Unless otherwise specified, aligned on a 64-bit boundary.
&gt; 
&gt; That looks broken.

It was discussed earlier on the USWG mailing list:

  [uswg] UEFI specification and structure alignments
  (dated 8 Jan 2019)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8589</commentid>
    <comment_count>8</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:38:36 +0000</bug_when>
    <thetext>This is an issue with clarifying the spec. Stephano will contact Andrew and Mike Rothman.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1045</bug_id>
          
          <creation_ts>2018-07-25 04:24:25 +0000</creation_ts>
          <short_desc>Redundant info is defined in I2cHostDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:11:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4386</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:24:25 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is one redundant library class, which is DevicePathLib, defined in I2cHostDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Bus/I2c/I2cDxe/I2cHostDxe.inf
+++ b/MdeModulePkg/Bus/I2c/I2cDxe/I2cHostDxe.inf
@@ -36,7 +36,6 @@
 [LibraryClasses]
   BaseMemoryLib
   DebugLib
-  DevicePathLib
   MemoryAllocationLib
   UefiBootServicesTableLib
   UefiDriverEntryPoint</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4419</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:52:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4928</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:07:12 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4933</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:11:23 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1442</bug_id>
          
          <creation_ts>2019-01-09 10:28:46 +0000</creation_ts>
          <short_desc>migrate FTW and variable drivers to new MM foundation</short_desc>
          <delta_ts>2019-01-21 08:06:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>QuarkPlatformPkg</cf_package>
    
    <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6025</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-01-09 10:28:46 +0000</bug_when>
    <thetext>The traditional SMM foundation has been superseded in the PI spec by a generic MM foundation which can be implemented based on traditional SMM (x86 only) but also based on standalone MM (which is implemented for AArch64 only at the moment, but could be implemented by any architecture port which chooses to treat its MM environment as an isolated execution context)

The existing SMM implementation of the authenticated variable stack can be shared between traditional SMM and standalone MM by porting the majority of the code to the generic MM implementation, and only have some small pieces of code that deviate between traditional and standalone in separate source files. This should reduce the maintenance burden of having two versions of these drivers in the repository.

An patch series [0] has been proposed on the edk2-devel list that implements this logic to the fault tolerant write (FTW) and variable SMM drivers.

[0] https://github.com/ardbiesheuvel/edk2/tree/variable-ftw-standalone-mm-conversion</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6039</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-10 19:14:56 +0000</bug_when>
    <thetext>bug scrub: assign to Ard, thanks he contribute the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6159</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-01-21 08:06:09 +0000</bug_when>
    <thetext>MdePkg and MdeModulePkg changes have been merged after review.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1995</bug_id>
          <alias>CVE-2019-14586</alias>
          <creation_ts>2019-07-19 04:59:30 +0000</creation_ts>
          <short_desc>Error corner cases in Hii Os Runtime support, where Host OS could trigger use after free</short_desc>
          <delta_ts>2021-09-22 15:47:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>john.mathews</cc>
    
    <cc>kimolsun2020</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable202102</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>UDK 2010.SR1</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8502</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 04:59:30 +0000</bug_when>
    <thetext>There is a Hii PCD called PcdHiiOsRuntimeSupport. In the default configuration, this PCD is set to true. In which case a ready-to-boot callback is registered that will call HiiGetConfigurationSetting() and then set the gExportAfterReadyToBoot global variable to true.
HiiGetConfigurationSetting() calls HiiGetDatabaseInfo() and HiiGetConfigRespInfo(). Both functions basically allocate runtime memory, copy Hii data into it, assign it to a global variable, and call gBS-&gt;InstallConfigurationTable() on the pointer, so it will eventually be exposed to the Os Runtime. gExportAfterReadyToBoot is checked in several places, and if it is set, more calls are made to HiiGetConfigurationSetting() as to update the Hii data that is to be exposed to the Os Runtime. There is an error corner case where the update fails. In this case the original runtime memory is free&apos;d, but it is still exposed to the Os Runtime.Thus exposing an expired pointer to the Os Runtime. Obviously this can cause a use after free in the Os Runtime.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8503</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 05:00:14 +0000</bug_when>
    <thetext>CVSS score Medium: 4.6 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:A/AC:H/PR:L/UI:N/S:U/C:L/I:L/A:L</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8763</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 09:53:30 +0000</bug_when>
    <thetext>Doesn&apos;t affect ArmVirtPkg or OvmfPkg platforms; they all set the PCD to FALSE.

6a238fa88fd0 (&quot;ArmVirtPkg: disable PcdHiiOsRuntimeSupport&quot;, 2016-04-01)
eccc28bfcb91 (&quot;OvmfPkg: disable PcdHiiOsRuntimeSupport&quot;, 2016-04-06)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9757</commentid>
    <comment_count>3</comment_count>
      <attachid>402</attachid>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-23 23:25:57 +0000</bug_when>
    <thetext>Created attachment 402
Remove configuration table when it&apos;s freed

The patch is to fix this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9758</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-23 23:29:07 +0000</bug_when>
    <thetext>(In reply to dandanbi from comment #3)
&gt; Created attachment 402 [details]
&gt; Remove configuration table when it&apos;s freed
&gt; 
&gt; The patch is to fix this issue
Update this bug into IN_PROGRESS Status.
The patch is created based on edk2 master:670c903a68f214463f12c0c9619c162a0f342518
And also Cc module owner to help review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9829</commentid>
    <comment_count>5</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-26 03:41:48 +0000</bug_when>
    <thetext>Reviewed-by: Eric Dong &lt;eric.dong@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11082</commentid>
    <comment_count>6</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:49:52 +0000</bug_when>
    <thetext>2/5/2020 infosec - this has had a patch for 3 mos. and no further discussion.  recommend un-embargo and then follow-up on TA/CVE and other clean-up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11238</commentid>
    <comment_count>7</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2020-02-12 22:43:38 +0000</bug_when>
    <thetext>Will send out the patch to community</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11266</commentid>
    <comment_count>8</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-02-16 20:52:00 +0000</bug_when>
    <thetext>Pushed at c32be82e99ef272e7fa742c2f06ff9a4c3756613</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17362</commentid>
    <comment_count>9</comment_count>
    <who name="Kim Olsun">kimolsun2020</who>
    <bug_when>2021-09-22 15:47:28 +0000</bug_when>
    <thetext>http://www.compilatori.com/category/property/	http://www.wearelondonmade.com/category/property/	http://www.jopspeech.com/category/property/	http://joerg.li/category/property/	http://connstr.net/category/property/	http://embermanchester.uk/category/property/	http://www.slipstone.co.uk/category/property/	http://www.logoarts.co.uk/category/property/	http://www.acpirateradio.co.uk/category/property/	https://waytowhatsnext.com/category/sports/	https://www.webb-dev.co.uk/category/sports/	http://www.iu-bloomington.com/category/sports/	http://www-look-4.com/category/property/</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>402</attachid>
            <date>2019-09-23 23:25:57 +0000</date>
            <delta_ts>2019-09-23 23:25:57 +0000</delta_ts>
            <desc>Remove configuration table when it&apos;s freed</desc>
            <filename>0001-MdeModulePkg-HiiDB-Remove-configuration-table-when-i.patch</filename>
            <type>application/octet-stream</type>
            <size>2443</size>
            <attacher name="dandanbi">dandan.bi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1062</bug_id>
          
          <creation_ts>2018-07-27 02:06:26 +0000</creation_ts>
          <short_desc>Dead code and inf redundant definitions in MdeModulePkg</short_desc>
          <delta_ts>2018-09-21 01:46:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4433</commentid>
    <comment_count>0</comment_count>
      <attachid>187</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:06:26 +0000</bug_when>
    <thetext>Created attachment 187
X64 build log for dead code and inf redundant definitions

Uefi-aware compiler found many modules have dead code and redundant definitions in the MdeModulePkg. Please see the detail info in the attachment log. We need to clean them.

Because the module number is big, I report them all together by package in this tracker and don&apos;t by modules separately. 

Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and report it as dead code. Please verify them carefully if the module have assemble code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4434</commentid>
    <comment_count>1</comment_count>
      <attachid>188</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:07:59 +0000</bug_when>
    <thetext>Created attachment 188
IA32 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4493</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 20:31:26 +0000</bug_when>
    <thetext>bug scrub: assign it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4948</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:58:26 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb

There is a wrong log in X64 build log:
  Inf redundant definition in file: MdeModulePkg/Core/DxeIplPeim/DxeIpl.inf
  DebugAgentLib, line 80.

The build will fail when DebugAgentLib is removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4950</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 03:29:52 +0000</bug_when>
    <thetext>Redundant functions removed at:
https://github.com/tianocore/edk2/commit/d82ebaa3404587a3dd4cb68c4202d8657a6be0fd
https://github.com/tianocore/edk2/commit/0629ae291a8ad1488a76bdba4bca18be08a52a09
https://github.com/tianocore/edk2/commit/385fd1b846832b618bb573eacb212305dff61f06
https://github.com/tianocore/edk2/commit/f210a4339148d62ea33843bbd70c3c447553952a
https://github.com/tianocore/edk2/commit/442d4dde72d61bfb30ac5e1d712d93247a65c4b5
https://github.com/tianocore/edk2/commit/66d3c76b8a8a96598c7344ba136d2cf646296137
https://github.com/tianocore/edk2/commit/11237cf147df266e65819b8ce2c13775e47a38aa
https://github.com/tianocore/edk2/commit/2ed6c872f30a57cd25b34617e60cf6d2c75669b7
https://github.com/tianocore/edk2/commit/349b08d6ad2f42cdb3cd57f62c49edc2da284ee9
https://github.com/tianocore/edk2/commit/d270c1dea2f52dc29900d9c19fd8aec586ed3a56
https://github.com/tianocore/edk2/commit/2104e989cf95a45b8ba03f59919727255b4c87af
https://github.com/tianocore/edk2/commit/880cc3ebefa8bb126991c65dd2be916dab30d382
https://github.com/tianocore/edk2/commit/0ffa23c0f413fef1b1b35bac3ad328dcd20eafab
https://github.com/tianocore/edk2/commit/5bde6c2019a2cfac70cf63d571abdc73178d9bb7
https://github.com/tianocore/edk2/commit/d637282efea71c8b9e3b0a9afb4be0f15a8fe52f
https://github.com/tianocore/edk2/commit/c575d091bb50faa4a1e1ca3bc4c3cd84e66ef8c2
https://github.com/tianocore/edk2/commit/6e5676b3800b4bf939df1a058f231ab38761f7ce
https://github.com/tianocore/edk2/commit/2394f31c55b7a1bd0c1f944a4716885e07b6df03
https://github.com/tianocore/edk2/commit/a2a6f9f61de61622253d7b3cc74567e015cf26fc
https://github.com/tianocore/edk2/commit/f787da363bfa63c50776b7ccb526a88f1b639b13
https://github.com/tianocore/edk2/commit/3028d73e5a4073841fdfc94b1e984c92e8e8fa7a
https://github.com/tianocore/edk2/commit/d7bcd4c1b91e37d5cf7f4b5c9f2b81ce7698e132
https://github.com/tianocore/edk2/commit/4750f754fc573b9a7dd8057dbea94757fffdbad6
https://github.com/tianocore/edk2/commit/ae195de0a3c8a0f773e5cd3dc061799101115df1
https://github.com/tianocore/edk2/commit/cc6939067008c4dcab990d5e8be65086ec393afa
https://github.com/tianocore/edk2/commit/a829f08684e29ebb68009ff2bcbf9f8edaf4affa
https://github.com/tianocore/edk2/commit/78a6d34fa6d63801b266fd787633cc342138cd3c
There is a wrong log about dead code function in IA32 build log:
 MdeModulePkg/Universal/DebugSupportDxe/Ia32/PlDebugSupport.c
 InterruptDistrubutionHub, line 271
The build will fail when InterruptDistrubutionHub is removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5044</commentid>
    <comment_count>5</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 01:46:14 +0000</bug_when>
    <thetext>Remove two redundant Guids at:
https://github.com/tianocore/edk2/commit/8c06d18bc112c7b0547641e83a508c6784317f72</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>187</attachid>
            <date>2018-07-27 02:06:26 +0000</date>
            <delta_ts>2018-07-27 02:06:26 +0000</delta_ts>
            <desc>X64 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_X64.txt</filename>
            <type>text/plain</type>
            <size>12064</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>188</attachid>
            <date>2018-07-27 02:07:59 +0000</date>
            <delta_ts>2018-07-27 02:07:59 +0000</delta_ts>
            <desc>IA32 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_IA32.txt</filename>
            <type>text/plain</type>
            <size>11988</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1361</bug_id>
          
          <creation_ts>2018-11-28 03:40:04 +0000</creation_ts>
          <short_desc>The CCFlag generated in PcdValueinit makefile is incorrect</short_desc>
          <delta_ts>2018-12-06 21:53:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5711</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-11-28 03:40:04 +0000</bug_when>
    <thetext>The CCFlag generated in PcdValueinit makefile is incorrect. Build tool can not get the CCFlag for common arch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5718</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-29 01:07:52 +0000</bug_when>
    <thetext>assign to bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5785</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-06 21:52:06 +0000</bug_when>
    <thetext>Fixed at edk2 master SHA-1: 9601046bf4594be981b6ee9f75f81f0bc0e2cf54</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5786</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-06 21:53:15 +0000</bug_when>
    <thetext>Fixed at edk2 master SHA-1: 9601046bf4594be981b6ee9f75f81f0bc0e2cf54</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1802</bug_id>
          
          <creation_ts>2019-05-13 15:10:03 +0000</creation_ts>
          <short_desc>SctPkg: SCT requires deprecated EFI_UNICODE_COLL,ATION_PROTOCOL_GUID</short_desc>
          <delta_ts>2019-09-25 12:16:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7512</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-05-13 15:10:03 +0000</bug_when>
    <thetext>I am using SCT to test the UEFI compliance of U-Boot. The UEFI
specification 2.6ff have EFI_UNICODE_COLLATION_PROTOCOL2_GUID but not
EFI_UNICODE_COLLATION_PROTOCOL_GUID. Yet SCT.efi crashes if
EFI_UNICODE_COLLATION_PROTOCOL_GUID is not provided as installed
protocol interface.

Please, update the SCT to follow the specification.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7850</commentid>
    <comment_count>1</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-05-29 06:29:15 +0000</bug_when>
    <thetext>Adding Eric and Supreeth to cc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7879</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 20:28:24 +0000</bug_when>
    <thetext>Eric, any comment on it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9740</commentid>
    <comment_count>3</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-19 21:53:37 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #0)
&gt; I am using SCT to test the UEFI compliance of U-Boot. The UEFI
&gt; specification 2.6ff have EFI_UNICODE_COLLATION_PROTOCOL2_GUID but not
&gt; EFI_UNICODE_COLLATION_PROTOCOL_GUID. Yet SCT.efi crashes if
&gt; EFI_UNICODE_COLLATION_PROTOCOL_GUID is not provided as installed
&gt; protocol interface.
&gt; 
&gt; Please, update the SCT to follow the specification.
&gt; 
&gt; Best regards
&gt; 
&gt; Heinrich Schuchardt

Hi Heinrich,

Could you please describe the scenario in detail? or the operation steps which cause the SCT.efi crash?
The SCT core may not depend on the EFI_UNICODE_COLLATION_PROTOCOL_GUID or gtEfiUnicodeCollationProtocolGuid. In my perspective, they can be removed from Ents easily. But they are not used at all.
It is better if you have a patch to help us to understand your point on this issue. Thank you very much.

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9742</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-20 02:05:48 +0000</bug_when>
    <thetext>According to the crash dump I get in U-Boot the error occurs when SctStrEndWith() tries to call SctStriCmp() which uses the function StriColl of the Unicode collation protocol.

The call will fail if UnicodeInterface is not properly initialized.

InitializeUnicodeSupport() uses the deprecated Unicode collation protocol to set the variable UnicodeInterface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9746</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-20 07:09:44 +0000</bug_when>
    <thetext>Patch submitted

https://edk2.groups.io/g/devel/message/47716
[edk2-test] [PATCH 1/1] uefi-sct/SctPkg: use EFI_UNICODE_COLLATION_PROTOCOL2_GUID</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9814</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-25 12:16:19 +0000</bug_when>
    <thetext>Patch merged as

992d2b554142f9aa1f63fca6b2c4408049011534
uefi-sct/SctPkg: use EFI_UNICODE_COLLATION_PROTOCOL2_GUID</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1698</bug_id>
          
          <creation_ts>2019-04-11 07:46:19 +0000</creation_ts>
          <short_desc>Spurious rule about comment style in CCS 6.2.3</short_desc>
          <delta_ts>2022-11-15 22:13:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heyi Guo">heyi.guo</reporter>
          <assigned_to name="Chang, Abner">abner.chang</assigned_to>
          <cc>abner.chang</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>gaoliming</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7084</commentid>
    <comment_count>0</comment_count>
    <who name="Heyi Guo">heyi.guo</who>
    <bug_when>2019-04-11 07:46:19 +0000</bug_when>
    <thetext>In EDK II C Code Standards Specification, section 6.2.3 (https://edk2-docs.gitbooks.io/edk-ii-c-coding-standards-specification/content/6_documenting_software/62_comments.html#62-comments), it has statements as below:

6.2.3 Avoid comments where the opening comment characters are alone on a line.
/*
 * VIOLATION: Horror Vacui
*/
or

//
// VIOLATION: Horror Vacui
//

It seems we should not use empty // before and after the one line comment, but this conflicts lots existing code in core packages (MdePkg and MdeModulePkg), as well as the review rule from maintainers on the mailing list.

Please clarify which one is the final rule.

Thanks,

Heyi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7195</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:17:49 +0000</bug_when>
    <thetext>Mike will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19955</commentid>
    <comment_count>2</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-11-07 09:15:15 +0000</bug_when>
    <thetext>Mike, shall we remove the empty // for the one-line comment, and also for the multiple comments?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>19993</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2022-11-10 23:26:39 +0000</bug_when>
    <thetext>Looks like this issue has already been address in the following commits:

https://github.com/tianocore-docs/edk2-CCodingStandardsSpecification/commit/0f759345cc8aca2249b3b9f222bc22ce28e0dd17

https://github.com/tianocore-docs/edk2-CCodingStandardsSpecification/commit/1b4a4cc4e562d431928f45f655cad10cbe2321d0

If you agree, then this issue can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20006</commentid>
    <comment_count>4</comment_count>
    <who name="Chang, Abner">abner.chang</who>
    <bug_when>2022-11-13 20:38:42 +0000</bug_when>
    <thetext>Yes, this issue seems already been fixed. I agree to close this issue.


Another thing is the blank line above/below a &quot;Block of comment&quot;. Does this also apply to the one-line comment? CSS doesn&apos;t mention this clearly. This makes the confusing if we take a look at the comment styles in sections 6.4.6 and 6.5.2.5.

We can revise sections 6.5.2.2 and 6.5.2.3 a little bit. Don&apos;t specifically mention the &quot;block of comment&quot;, just mention &quot;comment&quot; which also includes one line comment.
Furthermore, there is no blank line above the comment block in the example in 6.5.2.5. Which is not consistent with what it mentioned in 6.5.2.2.

We can close this BZ and I will open another one for the one-line comment blank line if you agree this is something we can fix in CSS v2.3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20041</commentid>
    <comment_count>5</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2022-11-15 22:13:43 +0000</bug_when>
    <thetext>Abner: please open new issue for the separate one.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1482</bug_id>
          
          <creation_ts>2019-01-21 20:56:57 +0000</creation_ts>
          <short_desc>Enhance CapsuleApp to support Capsule-on-Disk feature.</short_desc>
          <delta_ts>2019-01-31 01:17:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ChenChen">chen.a.chen</reporter>
          <assigned_to name="ChenChen">chen.a.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6162</commentid>
    <comment_count>0</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-01-21 20:56:57 +0000</bug_when>
    <thetext>Add -OD/-F/-L options to support Capsule-on-Disk feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6202</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-25 01:15:25 +0000</bug_when>
    <thetext>assign to Chen Chen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6246</commentid>
    <comment_count>2</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-01-31 01:14:50 +0000</bug_when>
    <thetext>The patch already commit in edk2 branch.

commit-id b8e51a031c25a432ae38cec4317a3a9ab6f678ff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6247</commentid>
    <comment_count>3</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-01-31 01:17:23 +0000</bug_when>
    <thetext>Commit-id: 9747329114ec01ed838dc49c633295bb6966312a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1911</bug_id>
          
          <creation_ts>2019-06-12 14:06:42 +0000</creation_ts>
          <short_desc>Incorrect test for UnicodeCollationProtocol2 StrUpr()</short_desc>
          <delta_ts>2019-09-09 04:26:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8025</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-06-12 14:06:42 +0000</bug_when>
    <thetext>The test of StrUpr() of the UnicodeCollationProtocol2 uses the following test string:

L&quot;\x30\x50[A-D]\x40\x20\x30\x50f\x40\x20&quot; 

This string contains the Unicode code point 0x050f (CYRILLIC SMALL LETTER KOMI TJE). The correct conversion to upper case is 0x050e (CYRILLIC CAPITAL LETTER KOMI TJE).

But when running the UEFI SCT on U-Boot I get this error:

EFI_UNICODE_COLLATION_PROTOCOL.StrUpr - Verification of StrUpr interface -- FAILURE
6F390D73-E8C7-4032-B5CB-C0F6A818E187
/home/supven01/work/sct_workspace/edk2/SctPkg/TestCase/UEFI/EFI/Protocol/UnicodeCollation2/BlackBoxTest/UnicodeCollation2BBTestFunction.c:541: Original=0P[A-D]@ 0ԏ@ -- ToUpper=0P[A-D]@ 0Ԏ@ 

The capitalization provided by U-Boot is correct as the small letter has been replaced by the capital letter. A return value without modification of the cyrillic letter might be considered correct too, depending on the supported character set of the protocol implementation.

The SCT code uses function ToUpper() which is not a part of the SCT code itself for the verification. It is not a good idea to use an internal function of EDK2 to test itself when running the test on EDK2. A better solution is to supply the  correct response strings with the test data.

Please, correct the StrUpr() test to accept the correct capitalization.

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8042</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:18:36 +0000</bug_when>
    <thetext>let&apos;s ask the submitter who is the maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8058</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 21:16:31 +0000</bug_when>
    <thetext>Heinrich, can u continue to work on it or provide the patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8116</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-19 12:23:28 +0000</bug_when>
    <thetext>Bug Triage: Assign to SCT maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8255</commentid>
    <comment_count>4</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:39:47 +0000</bug_when>
    <thetext>supreeth, who is the SCT maintainer?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9426</commentid>
    <comment_count>5</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-02 05:58:01 +0000</bug_when>
    <thetext>Cf. https://edk2.groups.io/g/devel/message/46663</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9440</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-03 05:30:40 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/46702
patch reviewed by Eric Jin &lt;eric.jin@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9521</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-09 04:26:39 +0000</bug_when>
    <thetext>commit cce43fc3ae30d343964fe02f09242ec8604eb44b
uefi-sct/SctPkg: StrUpr() test for cyrillic letters</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1381</bug_id>
          
          <creation_ts>2018-12-07 07:31:01 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Add FspmArchConfigPpi to support Dispatch mode</short_desc>
          <delta_ts>2019-01-16 18:41:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>knifeeight22</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5790</commentid>
    <comment_count>0</comment_count>
    <who name="">knifeeight22</who>
    <bug_when>2018-12-07 07:31:01 +0000</bug_when>
    <thetext>In Dispatch mode FSP may consume PPI directly so creating FSPM_ARCH_CONFIG_PPI to align with FSPM_ARCH_UPD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5886</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 20:00:40 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6109</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-01-16 18:41:37 +0000</bug_when>
    <thetext>commit 3837e2e0384035d18d15dd810a7c4c1b0235858a (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Dec 7 21:18:42 2018 +0800

    IntelFsp2Pkg: Add FspmArchConfigPpi to support Dispatch mode

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1381

    In Dispatch mode FSP may consume PPI directly so creating
    FSPM_ARCH_CONFIG_PPI to align with FSPM_ARCH_UPD.
    Also Keeps new structure size 8 bytes alignment as other
    structures.

    Test: Verified on internal platform to boot with this PPI
    installed successfully.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Contributed-under: TianoCore Contribution Agreement 1.1
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1190</bug_id>
          
          <creation_ts>2018-09-19 01:24:46 +0000</creation_ts>
          <short_desc>Request to remove IntelFrameworkPkg\Library</short_desc>
          <delta_ts>2019-07-03 01:45:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5018</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-19 01:24:46 +0000</bug_when>
    <thetext>The header file in IntelFrameworkPkg\Include may be still used for CSM support.
But there should be no one using IntelFrameworkPkg\Library.
For example, the IntelFrameworkPkg\Library\FrameworkUefiLib even builds failure when linking with driver (https://bugzilla.tianocore.org/show_bug.cgi?id=1189).

So request to remove IntelFrameworkPkg\Library to reduce maintenance effort.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5023</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:23:27 +0000</bug_when>
    <thetext>Assign to Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8345</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:45:16 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/87fc0601fa9a98d5f86a81fc20d2cc8ef936e064</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1930</bug_id>
          
          <creation_ts>2019-06-21 01:39:13 +0000</creation_ts>
          <short_desc>FSP python scripts to support 3.x</short_desc>
          <delta_ts>2019-07-01 07:24:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8143</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-21 01:39:13 +0000</bug_when>
    <thetext>Some of FSP related python scripts only work in python 2.x and need to be upgraded to support python 3.x because python 2.x may not get latest security updates.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8247</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:25:46 +0000</bug_when>
    <thetext>Chasel, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8297</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-07-01 07:24:37 +0000</bug_when>
    <thetext>SHA-1: c3f0829b341618b12d69874ff676d9f720a32f3c

* IntelFsp2Pkg: FSP Python scripts to support 3.x.

https://bugzilla.tianocore.org/show_bug.cgi?id=1930

Updated FSP Python scripts to support both 2.x and
3.x.

Test:
  . Verified with Python 2.7.12 and 3.6.6.
  . Verified tool result is the same before the change.
  . Both py -2 and py -3 built binary can boot.

Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;

----------------------------------------------------------------------

SHA-1: bf10d7e6b8b42e2349465e721b444322fb265919

* MinPlatformPkg: FSP Python script to python 3.x.

https://bugzilla.tianocore.org/show_bug.cgi?id=1930

Updated FSP Python script to support both 2.x and
3.x.

Test:
  . Verified with Python 2.7.12 and 3.6.6.
  . Verified tool result is the same before the change.
  . Both py -2 and py -3 built binary can boot.

Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
Cc: Liming Gao &lt;liming.gao@intel.com&gt;
Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1013</bug_id>
          
          <creation_ts>2018-07-17 03:34:41 +0000</creation_ts>
          <short_desc>Redundant library class are defined in CpuDxe module INF</short_desc>
          <delta_ts>2018-09-21 03:27:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4286</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 03:34:41 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are two redundant library class, which are CpuLib and UefiCpuLib, defined in CpuDxe module INF file. Need to remove them.


Below is the fix reference:
--- a/UefiCpuPkg/CpuDxe/CpuDxe.inf
+++ b/UefiCpuPkg/CpuDxe/CpuDxe.inf
@@ -31,7 +31,6 @@
 [LibraryClasses]
   BaseLib
   BaseMemoryLib
-  CpuLib
   DebugLib
   DxeServicesTableLib
   MemoryAllocationLib
@@ -39,7 +38,6 @@
   UefiBootServicesTableLib
   UefiDriverEntryPoint
   LocalApicLib
-  UefiCpuLib
   UefiLib
   CpuExceptionHandlerLib
   HobLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4362</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:59:23 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4500</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-08-03 01:32:50 +0000</bug_when>
    <thetext>The library classses, CpuLib and UefiCpuLib, should not be removed. 
Some necessart functions denfined in CpuLib.h and UefiCpuLib.h are required in the sources.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5048</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 03:25:02 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/997731e796f51df57c113dfd966e818622c3d4aa</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5051</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 03:27:07 +0000</bug_when>
    <thetext>Status:CONFIRMED to RESOLVED</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1302</bug_id>
          
          <creation_ts>2018-11-06 21:01:17 +0000</creation_ts>
          <short_desc>BaseTools: Enable --genfds-multi-thread  by default build</short_desc>
          <delta_ts>2019-09-10 21:50:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5511</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-06 21:01:17 +0000</bug_when>
    <thetext>build tool have --genfds-multi-thread to Enable GenFds multi thread to generate ffs file. after enable this option, it improve much build performance, so we suggest to enable this option by default build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5605</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-15 19:47:50 +0000</bug_when>
    <thetext>assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9460</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-04 23:14:58 +0000</bug_when>
    <thetext>Patches were sent for review.
https://edk2.groups.io/g/devel/message/46863
https://edk2.groups.io/g/devel/message/46862</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9466</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-05 00:06:45 +0000</bug_when>
    <thetext>This is a feature request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9487</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-06 09:25:38 +0000</bug_when>
    <thetext>Patch set V2.
https://edk2.groups.io/g/devel/message/46977
https://edk2.groups.io/g/devel/message/46978
https://edk2.groups.io/g/devel/message/46979</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9582</commentid>
    <comment_count>5</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-09-10 21:50:05 +0000</bug_when>
    <thetext>pushed at e3c831..780949</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1523</bug_id>
          
          <creation_ts>2019-02-12 00:16:05 +0000</creation_ts>
          <short_desc>ECC fails to detect function header comments issue</short_desc>
          <delta_ts>2022-02-20 21:39:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Mingyuex.Liang</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6326</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-12 00:16:05 +0000</bug_when>
    <thetext>When the keyword after @param doesn&apos;t match the actual function parameter name, ECC doesn&apos;t detect such issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6417</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-19 23:58:21 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10812</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-08 20:32:37 +0000</bug_when>
    <thetext>Zhiju will check it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10836</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-09 23:40:25 +0000</bug_when>
    <thetext>I didn&apos;t reproduce the situation you described

diff --git a/CryptoPkg/Library/BaseCryptLib/Kdf/CryptHkdf.c b/CryptoPkg/Library/BaseCryptLib/Kdf/CryptHkdf.c
index 3a827dadfc..9d8e13800f 100644
--- a/CryptoPkg/Library/BaseCryptLib/Kdf/CryptHkdf.c
+++ b/CryptoPkg/Library/BaseCryptLib/Kdf/CryptHkdf.c
@@ -13,7 +13,7 @@ SPDX-License-Identifier: BSD-2-Clause-Patent
 /**
   Derive HMAC-based Extract-and-Expand Key Derivation Function (HKDF).
 
-  @param[in]   Key              Pointer to the user-supplied key.
+  @param[in]   Kew              Pointer to the user-supplied key.
   @param[in]   KeySize          Key size in bytes.
   @param[in]   Salt             Pointer to the salt(non-secret) value.
   @param[in]   SaltSize         Salt size in bytes.


result:
Error Message:The function headers should follow Doxygen special documentation blocks in section 2.3.5

Other Error Message:in Comment, &lt;@param[in] Kew&gt; does NOT consistent with parameter name Key</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11258</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-02-13 21:20:15 +0000</bug_when>
    <thetext>patch link in https://edk2.groups.io/g/devel/message/53424</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12700</commentid>
    <comment_count>5</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-05-25 01:21:26 +0000</bug_when>
    <thetext>change owner to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18404</commentid>
    <comment_count>6</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2022-02-16 21:59:43 +0000</bug_when>
    <thetext>(In reply to Ray Ni from comment #0)
&gt; When the keyword after @param doesn&apos;t match the actual function parameter
&gt; name, ECC doesn&apos;t detect such issue.

I checked the problem. The current ECC tool can successfully find the problem and record the error message. I suggest changing the status of this problem to resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18418</commentid>
    <comment_count>7</comment_count>
    <who name="MingYue Liang">Mingyuex.Liang</who>
    <bug_when>2022-02-20 21:39:18 +0000</bug_when>
    <thetext>79b74a03 Liming Gao:  ECC fails to detect function header comments issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1424</bug_id>
          
          <creation_ts>2019-01-02 22:50:49 +0000</creation_ts>
          <short_desc>Add a wiki page to introduce the usage of ECC tool</short_desc>
          <delta_ts>2019-01-09 22:12:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5973</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-02 22:50:49 +0000</bug_when>
    <thetext>Add a mew wiki page to share the usage of ECC tool</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5979</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-03 19:05:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6028</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-09 22:12:00 +0000</bug_when>
    <thetext>Add the document at: https://github.com/tianocore/tianocore.github.io/wiki/ECC-tool</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1319</bug_id>
          
          <creation_ts>2018-11-09 14:11:19 +0000</creation_ts>
          <short_desc>revert OvmfPkg patches unjustifiedly pushed past the edk2-201811 Soft Feature Freeze</short_desc>
          <delta_ts>2018-11-12 06:37:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5558</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-09 14:11:19 +0000</bug_when>
    <thetext>I pushed patches #1 through #4 of the series

  [edk2] [PATCH v2 0/5] OvmfPkg: simply use the Bochs interface for vmsvga
  https://lists.01.org/pipermail/edk2-devel/2018-November/031800.html

as commit range 62ea70e31285..328409ce8de7:

&gt; $ git log --oneline --reverse  62ea70e31285..328409ce8de7 | cat -n
&gt;
&gt; 1  e038bde2679b Revert &quot;OvmfPkg/QemuVideoDxe: list &quot;UnalignedIoInternal.h&quot;
&gt;                 in the INF file&quot;
&gt; 2  98856a724c2a Revert &quot;OvmfPkg/QemuVideoDxe: VMWare SVGA device support&quot;
&gt; 3  438ada5aa5a1 Revert &quot;OvmfPkg/QemuVideoDxe: Helper functions for
&gt;                 unaligned port I/O.&quot;
&gt; 4  328409ce8de7 Revert &quot;OvmfPkg: VMWare SVGA display device register
&gt;                 definitions&quot;

past the Soft Feature Freeze.

My reason for this was that I had just returned after a week of absence, and
I had missed the fact that we were past the Soft Feature Freeze (there was
no announcement on edk2-devel yet, and I failed to remember the Release
Planning wiki page).

  https://lists.01.org/pipermail/edk2-devel/2018-November/032092.html
  https://lists.01.org/pipermail/edk2-devel/2018-November/032256.html
  https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning/40b5be738e2adfafddef6e4e2b6585a321b54701

In fact, none of the patches from said series were suitable for pushing
after the Soft Feature Freeze. In the current state (i.e. with the first 4
patches pushed), they regress the VMW SVGA driver logic in QemuVideoDxe, for
QEMU versions v2.9 and earlier. (Note that on v2.10+, the subject logic does
not work *at all*, which is the reason for the entire series in the first
place.) See the sub-thread

  [edk2] [PATCH] OvmfPkg: initialize bochs when initializing vmsvga
  https://lists.01.org/pipermail/edk2-devel/2018-October/031259.html

for the details.

For edk2-stable201811, revert the reverts temporarily (i.e., temporarily
re-instate the incorrect VMW SVGA driver logic that only works on QEMU v2.9
and earlier).

(Once the release is tagged, we&apos;ll redo the reverts from the subject series,
and also apply the separate (and already reviewed):

  [edk2] [PATCH v3] OvmfPkg: simply use the Bochs interface for vmsvga
  https://lists.01.org/pipermail/edk2-devel/2018-November/032045.html

which implements a new VMW SVGA driver logic that is correct.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5559</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-09 14:45:27 +0000</bug_when>
    <thetext>Posted
[edk2] [PATCH 0/4] OvmfPkg: revert some untimely pushed VMW SVGA reverts
https://lists.01.org/pipermail/edk2-devel/2018-November/032274.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5566</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-12 06:37:43 +0000</bug_when>
    <thetext>Fixed in commit range ade71c52a49d..246604e3a46d.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1761</bug_id>
          
          <creation_ts>2019-04-28 03:14:30 +0000</creation_ts>
          <short_desc>UEFI SCT reports 5 failures in ConsoleSupportTest\SerialIOProtocolTest on Emulator.</short_desc>
          <delta_ts>2019-05-15 03:02:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="wuzhiqix">zhiqiangx.wu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fanx.xu</cc>
    
    <cc>haiyanx.a.li</cc>
    
    <cc>ray.ni</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7321</commentid>
    <comment_count>0</comment_count>
      <attachid>313</attachid>
    <who name="wuzhiqix">zhiqiangx.wu</who>
    <bug_when>2019-04-28 03:14:30 +0000</bug_when>
    <thetext>Created attachment 313
UEFI SCT logs

UEFI SCT reports 5 failures in ConsoleSupportTest\SerialIOProtocolTest on Emulator.
Detail failures please refer to attached logs.

ConsoleSupportTest\SerialIOProtocolTest	5.6.5.2.1	0	0	34260CB2-43AE-4853-874B-477CEB144202	FAIL	SERIAL_IO.SetAttributes - SetAttributes() with valid BaudRate returns EFI_SUCCESS	SetAttributes_Func_0_0_C3E72C51-39B3-46A7-A6CC-6D0D5BBAB35C.log

ConsoleSupportTest\SerialIOProtocolTest	5.6.5.2.3	0	0	8CF74222-7134-47B6-A582-F4D9ADA7A3F4	FAIL	SERIAL_IO.SetAttributes - SetAttributes() with valid Timeout returns EFI_SUCCESS	SetAttributes_Func_0_0_C3E72C51-39B3-46A7-A6CC-6D0D5BBAB35C.log

ConsoleSupportTest\SerialIOProtocolTest	5.6.5.2.4	0	0	68F91273-0078-4E6C-B9DB-6259B539F74A	FAIL	SERIAL_IO.SetAttributes - SetAttributes() with valid Parity returns EFI_SUCCESS	SetAttributes_Func_0_0_C3E72C51-39B3-46A7-A6CC-6D0D5BBAB35C.log

ConsoleSupportTest\SerialIOProtocolTest	5.6.5.2.5	0	0	DF6038C2-3752-4E22-AB4C-FE66670CA3DF	FAIL	SERIAL_IO.SetAttributes - SetAttributes() with valid DataBits returns EFI_SUCCESS	SetAttributes_Func_0_0_C3E72C51-39B3-46A7-A6CC-6D0D5BBAB35C.log

ConsoleSupportTest\SerialIOProtocolTest	5.6.5.2.6	0	0	DF6F2692-9A0D-4B0F-BC8E-368B6A03E0B1	FAIL	SERIAL_IO.SetAttributes - SetAttributes() with valid StopBits returns EFI_SUCCESS	SetAttributes_Func_0_0_C3E72C51-39B3-46A7-A6CC-6D0D5BBAB35C.log</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7352</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-29 23:36:28 +0000</bug_when>
    <thetext>zhiguang, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7547</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-15 03:02:25 +0000</bug_when>
    <thetext>The failures is expected and don&apos;t need to change.
Because, when call  SerialPortSetAttributes function, Emulator always gives unsupported back intentionally.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>313</attachid>
            <date>2019-04-28 03:14:30 +0000</date>
            <delta_ts>2019-04-28 03:14:30 +0000</delta_ts>
            <desc>UEFI SCT logs</desc>
            <filename>SerialIOProtocolTest0.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>17177</size>
            <attacher name="wuzhiqix">zhiqiangx.wu</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1661</bug_id>
          
          <creation_ts>2019-03-24 22:28:58 +0000</creation_ts>
          <short_desc>[MinnowMax 1.01 release]: The VERSION_MAJOR value should be update to 0101 instead of 0100.</short_desc>
          <delta_ts>2019-04-01 05:25:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to name="Zailiang Sun">zailiang.sun</assigned_to>
          <cc>haiyanx.a.li</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yi.qian</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zailiang.sun</cc>
    
    <cc>zhiqiangx.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6903</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-03-24 22:28:58 +0000</bug_when>
    <thetext>Boot to setup page, the BIOS ID shows &quot;MNW2MAX1.XXX.0100.XXXX&quot; which is the same with 1.00 release. The VERSION_MAJOR value should be update to 0101 instead of 0100.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6935</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-28 02:43:08 +0000</bug_when>
    <thetext>zailiang will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6941</commentid>
    <comment_count>2</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2019-03-28 22:31:46 +0000</bug_when>
    <thetext>Fixed in this commit 198f18a0e6e6f18dfac8282da6e72d4f0e9cc4ef to https://github.com/tianocore/edk2-platforms/tree/devel-MinnowBoardMax-UDK2017.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6956</commentid>
    <comment_count>3</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-01 05:05:35 +0000</bug_when>
    <thetext>The BIOS ID shows &quot;MNW2MAX1.XXX.0101.XXXX&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6958</commentid>
    <comment_count>4</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2019-04-01 05:17:39 +0000</bug_when>
    <thetext>update status to `In Progress&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6959</commentid>
    <comment_count>5</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2019-04-01 05:20:14 +0000</bug_when>
    <thetext>update status to `Resolved&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6960</commentid>
    <comment_count>6</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-01 05:25:29 +0000</bug_when>
    <thetext>Update status</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1972</bug_id>
          
          <creation_ts>2019-07-11 04:28:41 +0000</creation_ts>
          <short_desc>UefiCpuPkg RegisterCpuFeaturesLib should not use PcdCpuFeaturesSetting for AP code</short_desc>
          <delta_ts>2019-07-22 03:50:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8404</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-07-11 04:28:41 +0000</bug_when>
    <thetext>As PcdCpuFeaturesSetting is dynamic PCD, it should not be used PcdCpuFeaturesSetting for AP code in UefiCpuPkg RegisterCpuFeaturesLib, otherwise the code will ASSERT as no PeiServices could be used by AP code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8410</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:06:54 +0000</bug_when>
    <thetext>Bug Triage: Star has confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8535</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-22 03:50:54 +0000</bug_when>
    <thetext>SHA-1: bbd357ae57ec256e3aff9ecb38b6a588815bc861

* UefiCpuPkg/RegisterCpuFeaturesLib: Avoid AP calls PeiServices table.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1972

AP calls CollectProcessorData() to collect processor info.
CollectProcessorData function finally calls PcdGetSize function to
get DynamicPCD PcdCpuFeaturesSetting value. PcdGetSize will use
PeiServices table which caused below assert info:
Processor Info: Package: 1, MaxCore : 4, MaxThread: 1
Package: 0, Valid Core : 4
ASSERT [CpuFeaturesPei] c:\projects\jsl\jsl_v1193\Edk2\MdePkg\Library
\PeiServicesTablePointerLibIdt\PeiServicesTablePointer.c(48):
PeiServices != ((void *) 0)

This change uses saved global pcd size instead of calls PcdGetSize to
fix this issue.

Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Cc: Chandana Kumar &lt;chandana.c.kumar@intel.com&gt;
Cc: Star Zeng &lt;star.zeng@intel.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1444</bug_id>
          
          <creation_ts>2019-01-10 10:31:07 +0000</creation_ts>
          <short_desc>UEFI Drivers use UEFILib Protocol Un/Installation Abstraction</short_desc>
          <delta_ts>2019-01-14 01:15:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashish Singhal">ashishsingha</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6032</commentid>
    <comment_count>0</comment_count>
    <who name="Ashish Singhal">ashishsingha</who>
    <bug_when>2019-01-10 10:31:07 +0000</bug_when>
    <thetext>UEFI drivers using UEFILib abstraction for protocol installation should use uninstallation abstraction provided by the same library in case of failure as well so that cleanup is done properly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6036</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-10 19:11:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6038</commentid>
    <comment_count>2</comment_count>
    <who name="Ashish Singhal">ashishsingha</who>
    <bug_when>2019-01-10 19:14:18 +0000</bug_when>
    <thetext>https://bugzilla.tianocore.org/show_bug.cgi?id=1428 and https://bugzilla.tianocore.org/show_bug.cgi?id=1429 can give more context. I have submitted a patch for consideration that fixes the issue for every driver in NetworkPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6070</commentid>
    <comment_count>3</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-01-14 01:15:19 +0000</bug_when>
    <thetext>Commit version:
https://github.com/tianocore/edk2/commit/22b35e8bd1f9aea7bbab3a26e8ab4df339454463</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1344</bug_id>
          
          <creation_ts>2018-11-20 03:26:57 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Universal/CpuIoDxe</short_desc>
          <delta_ts>2019-07-03 01:50:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5649</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 03:26:57 +0000</bug_when>
    <thetext>UefiCpuPkg/CpuIo2Dxe producing PI defined CpuIo2 protocol should be used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6424</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:03:09 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7404</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:54:32 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8352</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:50:00 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1562</bug_id>
          
          <creation_ts>2019-02-25 20:28:51 +0000</creation_ts>
          <short_desc>SnpDxe ExitBootServices handler should run at TPL_CALLBACK, not TPL_NOTIFY</short_desc>
          <delta_ts>2020-04-17 13:45:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6526</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2019-02-25 20:28:51 +0000</bug_when>
    <thetext>Current SnpDxe implementation creates its ExitBootServices event at TPL_NOTIFY. This causes issues when the calls down the stack run at TPL_CALLBACK, such as variable services.

Also, UEFI spec (specifically 2.7 Errata A, but likely older version too) in Table 26 calls out usage of Simple Network Protocol as a reason to restrict TPL to &lt;= TPL_NOTIFY.

For a potential fix, see MU_BASECORE pull request: https://github.com/Microsoft/mu_basecore/pull/20/files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6859</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:27:16 +0000</bug_when>
    <thetext>Jiaxin will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12173</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-09 13:49:09 +0000</bug_when>
    <thetext>I&apos;ll take ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12174</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-09 14:17:23 +0000</bug_when>
    <thetext>V1 patch on the mailing list - https://edk2.groups.io/g/devel/message/57137</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12234</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 13:45:37 +0000</bug_when>
    <thetext>Change pushed to edk2 - https://github.com/tianocore/edk2/commit/ca08f3d4533caf152170fe9ec0ce585e452d995e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1996</bug_id>
          
          <creation_ts>2019-07-19 05:02:05 +0000</creation_ts>
          <short_desc>Wifi manager exposes sensitive material to HostOS</short_desc>
          <delta_ts>2020-07-02 12:09:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>john.mathews</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.kubacki</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8504</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 05:02:05 +0000</bug_when>
    <thetext>Appears that we are expecting wifi passwords to be stored as plain-text in the Hii Database. The entire Hii Database seems to be exposed to OS runtime. These wifi passwords should not be exposed as plain-text to OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8505</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-19 05:02:53 +0000</bug_when>
    <thetext>CVSS Score: 4.2 https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:H/UI:R/S:U/C:H/I:N/A:N</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8764</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-02 09:56:38 +0000</bug_when>
    <thetext>Doesn&apos;t affect ArmVirtPkg or OvmfPkg platforms, for two reasons: they don&apos;t include

  NetworkPkg/WifiConnectionManagerDxe/WifiConnectionManagerDxe.inf

and they set PcdHiiOsRuntimeSupport to FALSE.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9414</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-09-01 23:51:58 +0000</bug_when>
    <thetext>We have cleared the password in HiiDatabase, so we will not exposed the password with plain-text to OS runtime.
See BZ https://bugzilla.tianocore.org/show_bug.cgi?id=1611</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12976</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-06-30 13:57:55 +0000</bug_when>
    <thetext>Can this be closed since f1d78c489a39971b5aac5d2fc8a39bfa925c3c5d was submitted?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13014</commentid>
    <comment_count>5</comment_count>
    <who name="John Mathews">john.mathews</who>
    <bug_when>2020-07-01 12:58:41 +0000</bug_when>
    <thetext>Jian, do you agree that f1d78c489a39971b5aac5d2fc8a39bfa925c3c5d fixes this issue?  
If so, can proceed with advisory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13033</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-07-02 12:08:01 +0000</bug_when>
    <thetext>Yes, f1d78c489a39971b5aac5d2fc8a39bfa925c3c5d had fixed it. Close this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13034</commentid>
    <comment_count>7</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-07-02 12:09:14 +0000</bug_when>
    <thetext>Refer to https://bugzilla.tianocore.org/show_bug.cgi?id=1611</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1063</bug_id>
          
          <creation_ts>2018-07-27 02:18:37 +0000</creation_ts>
          <short_desc>Dead code and inf redundant definitions in IntelFrameworkModuleAll</short_desc>
          <delta_ts>2018-09-13 04:23:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4435</commentid>
    <comment_count>0</comment_count>
      <attachid>189</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:18:37 +0000</bug_when>
    <thetext>Created attachment 189
X64 build log for dead code and inf redundant definitions

Uefi-aware compiler found many modules have dead code and redundant definitions in the IntelFrameworkModuleAll. Please see the detail info in the attachment log. We need to clean them.

Because the module number is big, I report them all together by package in this tracker and don&apos;t by modules separately. 

Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and wrongly report it as dead code. Please verify them carefully if the module have assemble code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4436</commentid>
    <comment_count>1</comment_count>
      <attachid>190</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:19:55 +0000</bug_when>
    <thetext>Created attachment 190
IA32 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4492</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 20:31:03 +0000</bug_when>
    <thetext>bug scrub: assign it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4952</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 04:23:16 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/16973234fc60a95daf7be32ee89123914fdab3f0</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>189</attachid>
            <date>2018-07-27 02:18:37 +0000</date>
            <delta_ts>2018-07-27 02:18:37 +0000</delta_ts>
            <desc>X64 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_X64.txt</filename>
            <type>text/plain</type>
            <size>1601</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>190</attachid>
            <date>2018-07-27 02:19:55 +0000</date>
            <delta_ts>2018-07-27 02:19:55 +0000</delta_ts>
            <desc>IA32 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_IA32.txt</filename>
            <type>text/plain</type>
            <size>1601</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1173</bug_id>
          
          <creation_ts>2018-09-14 03:53:47 +0000</creation_ts>
          <short_desc>USB disk with UDF 2.50 file system cannot be mapped in UEFI Shell.</short_desc>
          <delta_ts>2018-10-17 20:54:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi.Jiang">wenyi.jiang</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>paulo</cc>
    
    <cc>pcacjr</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4968</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-09-14 03:53:47 +0000</bug_when>
    <thetext>The method of creating UDF USB disk is as follows:

1). Plug a USB disk in the client computer;
2). Open CMD as an administrator under  Windows OS environment.The command is :&quot;format e: /fs:UDF /q&quot;

Reproduce Steps:
1. Plug the UDF 2.5 USB disk into the test machine.
2. Boot to UEFI Shell and find that the UDF USB disk cannot be mapped.
3. Re-make the USB disk with UDF 2.01 file system using command :&quot;format e: /fs:UDF /q&quot;.
4. Repeat Step1 and 2.Find that the USB disk with UDF 2.01 can be mapped successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5030</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:29:02 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5060</commentid>
    <comment_count>2</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-09-24 09:20:44 +0000</bug_when>
    <thetext>I&apos;ll have a look as soon as I can.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5222</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-11 04:40:01 +0000</bug_when>
    <thetext>(In reply to Paulo Alcantara from comment #2)
&gt; I&apos;ll have a look as soon as I can.

Hi Paulo,

I have a quick check on this one, and found that it is the below check in file MdeModulePkg\Universal\Disk\PartitionDxe\Udf.c:

Function IsLogicalVolumeDescriptorSupported():

  //
  // Check for a single Partition Map
  //
  if (LogicalVolDesc-&gt;NumberOfPartitionMaps &gt; 1) {
    return FALSE;
  }

that prevent the file system created via Windows CMD &quot;format x: /FS:UDF /R:2.50 /Q&quot; from working. In this case, the value for &apos;LogicalVolDesc-&gt;NumberOfPartitionMaps&apos; is 2.

Is this supposed to be a known support limitation for the current EDK2 UDF file system implementation? If so, do you think we can directly close this one without any fix.

Thanks in advance.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5300</commentid>
    <comment_count>4</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-10-17 17:09:34 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #3)
&gt; (In reply to Paulo Alcantara from comment #2)
&gt; &gt; I&apos;ll have a look as soon as I can.
&gt; 
&gt; Hi Paulo,
&gt; 
&gt; I have a quick check on this one, and found that it is the below check in
&gt; file MdeModulePkg\Universal\Disk\PartitionDxe\Udf.c:
&gt; 
&gt; Function IsLogicalVolumeDescriptorSupported():
&gt; 
&gt;   //
&gt;   // Check for a single Partition Map
&gt;   //
&gt;   if (LogicalVolDesc-&gt;NumberOfPartitionMaps &gt; 1) {
&gt;     return FALSE;
&gt;   }
&gt; 
&gt; that prevent the file system created via Windows CMD &quot;format x: /FS:UDF
&gt; /R:2.50 /Q&quot; from working. In this case, the value for
&gt; &apos;LogicalVolDesc-&gt;NumberOfPartitionMaps&apos; is 2.
&gt; 
&gt; Is this supposed to be a known support limitation for the current EDK2 UDF
&gt; file system implementation? If so, do you think we can directly close this
&gt; one without any fix.

That&apos;s indeed a limitation on the current UDF implementation. It should                                                                  
be pretty straightforward to support, though -- but feel free to close                                                                   
it.                                                                                                                                      
                                                                                                                                         
BTW, there&apos;s a comment about it in GetPdFromLongAd():                                                                                    
                                                                                                                                         
    //                                                                                                                                   
    // UDF 1.02 specification:                                                                                                           
    //                                                                                                                                   
    // There shall be exactly one prevailing Logical Volume Descriptor recorded                                                          
    // per Volume Set. The Partition Maps field shall contain only Type 1                                                                
    // Partition Maps.                                                                                                                   
    //                                                                                                                                   
    // UDF 1.50 through 2.60 specs say:                                                                                                  
    //                                                                                                                                   
    // For the purpose of interchange partition maps shall be limited to                                                                 
    // Partition Map type 1, except type 2 maps as described in the document.                                                            
    //                                                                                                                                   
    // NOTE: Only one Type 1 (Physical) Partition is supported. It has been                                                              
    // checked already in Partition driver for existence of a single Type 1                                                              
    // Partition map, so we don&apos;t have to double check here.                                                                             
    //                                                                                                                                   
    // Partition reference number can also be retrieved from                                                                             
    // LongAd-&gt;ExtentLocation.PartitionReferenceNumber, however the spec says                                                            
    // it may be 0, so let&apos;s not rely on it.                                                                                             
    //

Thanks,
Paulo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5302</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-17 20:54:40 +0000</bug_when>
    <thetext>(In reply to Paulo Alcantara from comment #4)
&gt; (In reply to Hao Wu from comment #3)
&gt; &gt; (In reply to Paulo Alcantara from comment #2)
&gt; &gt; &gt; I&apos;ll have a look as soon as I can.
&gt; &gt; 
&gt; &gt; Hi Paulo,
&gt; &gt; 
&gt; &gt; I have a quick check on this one, and found that it is the below check in
&gt; &gt; file MdeModulePkg\Universal\Disk\PartitionDxe\Udf.c:
&gt; &gt; 
&gt; &gt; Function IsLogicalVolumeDescriptorSupported():
&gt; &gt; 
&gt; &gt;   //
&gt; &gt;   // Check for a single Partition Map
&gt; &gt;   //
&gt; &gt;   if (LogicalVolDesc-&gt;NumberOfPartitionMaps &gt; 1) {
&gt; &gt;     return FALSE;
&gt; &gt;   }
&gt; &gt; 
&gt; &gt; that prevent the file system created via Windows CMD &quot;format x: /FS:UDF
&gt; &gt; /R:2.50 /Q&quot; from working. In this case, the value for
&gt; &gt; &apos;LogicalVolDesc-&gt;NumberOfPartitionMaps&apos; is 2.
&gt; &gt; 
&gt; &gt; Is this supposed to be a known support limitation for the current EDK2 UDF
&gt; &gt; file system implementation? If so, do you think we can directly close this
&gt; &gt; one without any fix.
&gt; 
&gt; That&apos;s indeed a limitation on the current UDF implementation. It should     
&gt; 
&gt; be pretty straightforward to support, though -- but feel free to close      
&gt; 
&gt; it.                                                                         
&gt; 
&gt;                                                                             
&gt; 
&gt; BTW, there&apos;s a comment about it in GetPdFromLongAd():                       
&gt; 
&gt;                                                                             
&gt; 
&gt;     //                                                                      
&gt; 
&gt;     // UDF 1.02 specification:                                              
&gt; 
&gt;     //                                                                      
&gt; 
&gt;     // There shall be exactly one prevailing Logical Volume Descriptor
&gt; recorded                                                          
&gt;     // per Volume Set. The Partition Maps field shall contain only Type 1   
&gt; 
&gt;     // Partition Maps.                                                      
&gt; 
&gt;     //                                                                      
&gt; 
&gt;     // UDF 1.50 through 2.60 specs say:                                     
&gt; 
&gt;     //                                                                      
&gt; 
&gt;     // For the purpose of interchange partition maps shall be limited to    
&gt; 
&gt;     // Partition Map type 1, except type 2 maps as described in the
&gt; document.                                                            
&gt;     //                                                                      
&gt; 
&gt;     // NOTE: Only one Type 1 (Physical) Partition is supported. It has been 
&gt; 
&gt;     // checked already in Partition driver for existence of a single Type 1 
&gt; 
&gt;     // Partition map, so we don&apos;t have to double check here.                
&gt; 

Thanks Paulo,

Got it. Since this issue is related with a known limitation for the EDKII UDF
implementation, I will mark this one as &quot;RESOLVED&quot; via &quot;WONTFIX&quot;.

Best Regards,
Hao Wu

&gt;     //                                                                      
&gt; 
&gt;     // Partition reference number can also be retrieved from                
&gt; 
&gt;     // LongAd-&gt;ExtentLocation.PartitionReferenceNumber, however the spec
&gt; says                                                            
&gt;     // it may be 0, so let&apos;s not rely on it.                                
&gt; 
&gt;     //
&gt; 
&gt; Thanks,
&gt; Paulo</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1082</bug_id>
          
          <creation_ts>2018-08-08 12:34:41 +0000</creation_ts>
          <short_desc>SmmLockBoxRestore doesn&apos;t report buffer length</short_desc>
          <delta_ts>2018-08-15 21:07:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Baranee">anbazhagan</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4524</commentid>
    <comment_count>0</comment_count>
    <who name="Baranee">anbazhagan</who>
    <bug_when>2018-08-08 12:34:41 +0000</bug_when>
    <thetext>If caller provided a buffer that&apos;s large enough to restore data from lock box, actual data length is not returned. It needs to be updated in case of return status as success as well.

https://github.com/tianocore/edk2/blob/master/MdeModulePkg/Universal/LockBox/SmmLockBox/SmmLockBox.c#L220


- if (Status == EFI_BUFFER_TOO_SMALL) {
+ if ((Status == EFI_BUFFER_TOO_SMALL) || (Status == EFI_SUCCESS)) {</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4566</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-09 20:03:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4589</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-08-15 21:07:02 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/a9ae5b37bf5c7a3accbd2a513c354c4467547a05.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1483</bug_id>
          
          <creation_ts>2019-01-22 01:29:42 +0000</creation_ts>
          <short_desc>[Recovery] BlockIO support for ATA device</short_desc>
          <delta_ts>2019-04-24 04:16:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="chao">chao.b.zhang</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6164</commentid>
    <comment_count>0</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2019-01-22 01:29:42 +0000</bug_when>
    <thetext>Justification:
  At present, EDK2 PEI only supports ATA device in IDE mode. 
  Recovery in PEI requires full ATA device support so that Recovery image can be loaded from broader types of storage.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6201</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-25 01:09:50 +0000</bug_when>
    <thetext>Assign to Wu Hao first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6796</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:55:52 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6972</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-02 01:16:45 +0000</bug_when>
    <thetext>V1 patch series has been sent out for review:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg53159.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7057</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-09 21:14:03 +0000</bug_when>
    <thetext>V2 patch series has been proposed at:
https://edk2.groups.io/g/devel/message/38765</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7253</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-24 04:16:51 +0000</bug_when>
    <thetext>Resolved via commits:
https://github.com/tianocore/edk2/commit/04c7a5febd82681692c95450ea1979daee8f31aa
https://github.com/tianocore/edk2/commit/b2b8e872fd1b3fd19464f0c8634b937c82fcf7c9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1913</bug_id>
          
          <creation_ts>2019-06-13 01:03:28 +0000</creation_ts>
          <short_desc>Platform/Intel: Dynamic NUMBER_OF_PROCESSORS in build</short_desc>
          <delta_ts>2019-06-19 23:53:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8033</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-13 01:03:28 +0000</bug_when>
    <thetext>To improve build performance by default the maximum processors should be used for building. This should be automatically configured instead of hard-coded inside build.cfg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8040</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:13:14 +0000</bug_when>
    <thetext>Chasel will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8122</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-19 23:53:21 +0000</bug_when>
    <thetext>commit bd9cf02574de42b3cc4bb481e719ee2aceb265ab (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Thu Jun 13 12:28:39 2019 +0800

    Platform/Intel: Dynamic NUMBER_OF_PROCESSORS in build.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1913

    To improve build performance by default the maximum
    processors should be used for building.
    NUMBER_OF_PROCESSORS in build.cfg is set to 0 so
    BaseTools can utilize maximum processors for build.

    Test: tried NUMBER_OF_PROCESSORS 0 and 1 cases and
          confirmed the build time is half with 0 case.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Cc: Bob Feng &lt;bob.c.feng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Bob Feng &lt;bob.c.feng@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1383</bug_id>
          
          <creation_ts>2018-12-07 08:33:28 +0000</creation_ts>
          <short_desc>Enable parallel compiling in files level inside module internal for Edk2 multi-threaded build</short_desc>
          <delta_ts>2022-02-10 21:40:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5793</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-12-07 08:33:28 +0000</bug_when>
    <thetext>Current Edk2 multi-threaded build cannot do the parallel compiling in files level actually (unlike the make -j n) inside a module, but only parallel in modules level. This parallel granularity is too coarse and is not good to fully make use of existing tool of distributed compilation (e.g. distcc), which are usually designed for files level distribution. In my testing, many of C files cannot be dispatched by distcc. The distcc is designed to distribute files compilation paralleled by “-j n”, but current edk2 module parallel option “-N n” != files parallel option “-j n”, and limited the build as single thread in module internal build. It&apos;s better to enable the parallel compiling in files level inside a module internal.

See the distributed compilation enabling detail status here: https://github.com/shijunjing/edk2/wiki/Distcc-based-distributed-compilation-enabling-steps-on-edk2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5884</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:59:51 +0000</bug_when>
    <thetext>Bug scrub: Assign to steven first, if it is BaseTools bug, please re-assign it to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9364</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 22:01:32 +0000</bug_when>
    <thetext>The windows part is already done at below fix. But still need a linux part.

commit 05217d210e8da37b47d0be58ec363f7af2fa1c18
Author: Fan, ZhijuX &lt;zhijux.fan@intel.com&gt;
Date:   Tue Apr 16 10:43:04 2019 +0800

    BaseTools:Enable the /MP option of MSVC compiler

    BZ:https://bugzilla.tianocore.org/show_bug.cgi?id=1672
    The /MP option of MSVC compiler can reduce the total time to compile the
    source files on the command line.

    This patch is going to enable this MSVC option in BaseTools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18321</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 21:40:44 +0000</bug_when>
    <thetext>Has been fixed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1819</bug_id>
          
          <creation_ts>2019-05-16 04:35:27 +0000</creation_ts>
          <short_desc>Remove IntelFsp[Wrapper]Pkg</short_desc>
          <delta_ts>2019-08-12 04:32:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFspPkg</cf_package>
    
    <cf_package>IntelFspWrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7579</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-16 04:35:27 +0000</bug_when>
    <thetext>Since there are V2 FSP packages (IntelFsp2Pkg, IntelFsp2WrapperPkg), this bugzilla is submitted to track the V1 FSP packages removal.

An RFC was sent out on May 12th to propose removing IntelFspPkg and IntelFspWrapperPkg: https://edk2.groups.io/g/devel/message/40470.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7587</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:11:28 +0000</bug_when>
    <thetext>Just need the reviewed-by from package maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7978</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-06-11 05:03:00 +0000</bug_when>
    <thetext>pushed @ 1a48fda5315433661c2f3039a30aea5916c22267.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8943</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:32:42 +0000</bug_when>
    <thetext>This is a feature change.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1504</bug_id>
          
          <creation_ts>2019-02-01 03:12:32 +0000</creation_ts>
          <short_desc>Fail to run UPT</short_desc>
          <delta_ts>2019-02-20 00:34:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6260</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-01 03:12:32 +0000</bug_when>
    <thetext>The upt tool fail to run with the error like below:

File &quot;UPT\Core\DistributionPackageClass.py&quot;, line 23, in &lt;module&gt;

    from Library.Misc import Sdict

ImportError: cannot import name Sdict</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6354</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-13 19:32:54 +0000</bug_when>
    <thetext>it is python3 issue, assign to Bob.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6433</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-20 00:34:52 +0000</bug_when>
    <thetext>Fixed on 7da3ed89d4e8d5bf053c7eeec348c2b07b41dc53</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1406</bug_id>
          
          <creation_ts>2018-12-17 03:51:26 +0000</creation_ts>
          <short_desc>The metadata files are parsed multiple times in a build</short_desc>
          <delta_ts>2018-12-17 21:51:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5899</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-17 03:51:26 +0000</bug_when>
    <thetext>The metadata files are parsed multiple times in a build. This issue is introduced by the commit 2f818ed0fb57d98985d151781a2ce9b8683129ee. 

The active dsc file and its include dsc files should be parsed once in a build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5905</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-17 21:51:37 +0000</bug_when>
    <thetext>Fixed at SHA-1: 9bf86b12ce04fcb7d997eb1fc8c55fd43d18ab79</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1952</bug_id>
          
          <creation_ts>2019-07-01 22:20:09 +0000</creation_ts>
          <short_desc>add a new MODULE_TYPE HOST_APPLICATION</short_desc>
          <delta_ts>2019-08-08 00:07:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1962</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1956</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Xiaoyu Lu">xiaoyux.lu</reporter>
          <assigned_to name="Xiaoyu Lu">xiaoyux.lu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8310</commentid>
    <comment_count>0</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-07-01 22:20:09 +0000</bug_when>
    <thetext>We need to clarify host based module which can run in OS environment.

Cound you add a HOST_APPLICATION module_type for edk2 staging(https://github.com/tianocore/edk2-staging/tree/HBFA).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8362</commentid>
    <comment_count>1</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-07-03 04:39:12 +0000</bug_when>
    <thetext>INF spec patch v1: https://edk2.groups.io/g/devel/message/43205
BUILD spec patch v1: https://edk2.groups.io/g/devel/message/43206</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8402</commentid>
    <comment_count>2</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-07-11 00:20:28 +0000</bug_when>
    <thetext>(In reply to Xiaoyu Lu from comment #1)
&gt; INF spec patch v1: https://edk2.groups.io/g/devel/message/43205
&gt; BUILD spec patch v1: https://edk2.groups.io/g/devel/message/43206

add

DSC spec patch v1: https://edk2.groups.io/g/devel/message/43554
DEC spec patch v1: https://edk2.groups.io/g/devel/message/43436</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8412</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:11:25 +0000</bug_when>
    <thetext>Bug Triage: mark as confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8852</commentid>
    <comment_count>4</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-08-08 00:07:40 +0000</bug_when>
    <thetext>DSC spec pushed f4707ed7ea7b7b2d839a093999a42c2396f8bd17
DEC spec pushed 2de18ceff00746d9f1f4726843bfb99f924103ac</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1861</bug_id>
          
          <creation_ts>2019-05-30 00:23:42 +0000</creation_ts>
          <short_desc>Wrap OpenSSL SM3 algorithm into BaseCryptLib</short_desc>
          <delta_ts>2019-08-27 18:28:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1089</dependson>
          <blocked>1781</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Xiaoyu Lu">xiaoyux.lu</reporter>
          <assigned_to name="Xiaoyu Lu">xiaoyux.lu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>imran.desai</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>xiaoyux.lu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7862</commentid>
    <comment_count>0</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-05-30 00:23:42 +0000</bug_when>
    <thetext>Since OpenSSL_1_1_1b already implement these algorithm. So Wrap OpenSSL SM3 digest algorithm into BaseCryptLib.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7863</commentid>
    <comment_count>1</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-05-30 00:24:48 +0000</bug_when>
    <thetext>(In reply to Xiaoyu Lu from comment #0)
&gt; Since OpenSSL_1_1_1b already implement these algorithm. So Wrap OpenSSL SM3
&gt; digest algorithm into BaseCryptLib.

Bug 1781 - Enable SM3 digest algorithm for measured boot and TCG2 EVENT protocol
is dependent on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7868</commentid>
    <comment_count>2</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-05-30 04:34:25 +0000</bug_when>
    <thetext>v1:
https://edk2.groups.io/g/devel/message/41669</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7872</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 20:07:33 +0000</bug_when>
    <thetext>Xiaoyu already sent the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7890</commentid>
    <comment_count>4</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-05-31 04:37:33 +0000</bug_when>
    <thetext>v2:
https://edk2.groups.io/g/devel/message/41722</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9295</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:28:35 +0000</bug_when>
    <thetext>Fixed in commit f0718d1d6b47 (&quot;CryptoPkg/BaseCryptLib: Wrap OpenSSL SM3 algorithm&quot;, 2019-06-08).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1320</bug_id>
          
          <creation_ts>2018-11-09 15:05:42 +0000</creation_ts>
          <short_desc>clarify scope of &quot;bugfix&quot;, for the Hard Feature Freeze wiki page</short_desc>
          <delta_ts>2020-05-05 19:06:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Stephano Cetola">stephano</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5560</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-09 15:05:42 +0000</bug_when>
    <thetext>Sub-thread on the list that motivates this Wiki BZ:

  [edk2] [patch]
  MdeModulePkg/DisplayEngine: Remove useless NULL ptr check for NewPos

  https://lists.01.org/pipermail/edk2-devel/2018-November/032193.html

The Wiki page

  https://github.com/tianocore/tianocore.github.io/wiki/HardFeatureFreeze

restricts pushed commits to &quot;bug fixes&quot;. Opinions diverge on what constitutes a bugfix. We should discuss the topic in one of the community conference calls, and/or on the mailing list (or even in this BZ). Finally, we should capture the agreement on the Wiki page.

For starting point, I would recommend defining &quot;bugfix&quot; as &quot;focused, isolated code change that removes a bug of the software&quot;. In other words, for a patch (series) to qualify as &quot;bugfix&quot;, there must be a &quot;bug&quot;.

(Obviously, that leaves us with a missing definition for &quot;bug&quot;... But that could be more intuitive.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5607</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-15 21:22:29 +0000</bug_when>
    <thetext>Assign owner to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8280</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-28 13:28:03 +0000</bug_when>
    <thetext>This is a great topic for design review meetings.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12386</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:06:42 +0000</bug_when>
    <thetext>In the feature freezes since reporting / discussing this BZ, we&apos;ve ended up discussing (evaluating) pending patch sets one by one, to agree whether each is eligible for merging still. It seems to work OK without formally defining what&apos;s a bugfix. Closing as WONTFIX. (Not as INVALID, as such a definition, if it existed, would still be useful.)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1229</bug_id>
          
          <creation_ts>2018-10-07 22:00:27 +0000</creation_ts>
          <short_desc>Use VENDOR_DEVICE_PATH structure for Debug Port device path</short_desc>
          <delta_ts>2018-10-12 02:56:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5180</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-10-07 22:00:27 +0000</bug_when>
    <thetext>When converting DebugPort device path from text,
current code use VENDOR_DEFINED_MESSAGING_DEVICE_PATH structure
for Debug port device node.
typedef struct {
  EFI_DEVICE_PATH_PROTOCOL  Header;
  EFI_GUID                  Guid;
  UINT8                     VendorDefinedData[1];
} VENDOR_DEFINED_MESSAGING_DEVICE_PATH;

Debugport Device Path is a vendor-defined messaging
device path with no data, only a GUID. So maybe we can use
VENDOR_DEVICE_PATH to create the Debug port device node.
typedef struct {
  EFI_DEVICE_PATH_PROTOCOL        Header;
  EFI_GUID                        Guid;
} VENDOR_DEVICE_PATH;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5181</commentid>
    <comment_count>1</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-10-07 22:01:30 +0000</bug_when>
    <thetext>take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5237</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-11 20:42:35 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5243</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2018-10-12 02:56:28 +0000</bug_when>
    <thetext>Fix it at:
https://github.com/tianocore/edk2/commit/9343d0a1cd09544686b14dba5b428d7bc811f6b9</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1541</bug_id>
          
          <creation_ts>2019-02-19 23:34:03 +0000</creation_ts>
          <short_desc>Add new shell application to dump dynamic PCD settings</short_desc>
          <delta_ts>2019-05-08 02:26:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6415</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-19 23:34:03 +0000</bug_when>
    <thetext>Plan to let this tool to do below task:

Dump dynamic[ex] PCD info.
DumpDynPcd [-b] [PcdName]
-b         Display one screen at a time.
PcdName    Specifies the name of PCD.
           A literal[or partial] name or a pattern as specified in
           the MetaiMatch() function of the 
           EFI_UNICODE_COLLATION2_PROCOOL.
           If it is absent, dump all PCDs&apos; info.
           The PCD data is printed as hexadecimal dump.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6429</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:05:19 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6799</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-20 23:02:00 +0000</bug_when>
    <thetext>Shenglei will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7370</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-05-04 23:03:12 +0000</bug_when>
    <thetext>Disable the function of displaying one screen at a time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7425</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-05-08 02:26:48 +0000</bug_when>
    <thetext>Fixed at：
a642e2b42ed565645fa34e882ef4de3bfff67ef8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1047</bug_id>
          
          <creation_ts>2018-07-25 04:29:08 +0000</creation_ts>
          <short_desc>Redundant info is defined in ResetSystemRuntimeDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:11:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4388</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:29:08 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is one redundant library class, which is IoLib, defined in ResetSystemRuntimeDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Universal/ResetSystemRuntimeDxe/ResetSystemRuntimeDxe.inf
+++ b/MdeModulePkg/Universal/ResetSystemRuntimeDxe/ResetSystemRuntimeDxe.inf
@@ -43,7 +43,6 @@
   UefiRuntimeLib
   UefiBootServicesTableLib
   UefiDriverEntryPoint
-  IoLib
   UefiLib
   DebugLib
   BaseLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4420</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:52:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4929</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:07:32 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4934</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:11:36 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1345</bug_id>
          
          <creation_ts>2018-11-20 04:41:10 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Universal/LegacyRegionDxe</short_desc>
          <delta_ts>2019-07-03 01:50:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5652</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 04:41:10 +0000</bug_when>
    <thetext>This driver is a dummy driver. It doesn&apos;t provide any decode/lock/unlock capability for the legacy region (&lt; 1MB).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6423</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:03:02 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7402</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:54:10 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8353</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:50:28 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1156</bug_id>
          
          <creation_ts>2018-09-06 15:11:48 +0000</creation_ts>
          <short_desc>NonDiscoverablePciDeviceDxe causes system crash running UEFI SCT suite</short_desc>
          <delta_ts>2018-10-24 01:32:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4873</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2018-09-06 15:11:48 +0000</bug_when>
    <thetext>UEFI SCT crashes the systen and fails in NonDiscoverablePciDeviceDxe becase
input parameters validation is not performed. The fix has been submitted for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4963</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 20:11:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5377</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-24 01:32:54 +0000</bug_when>
    <thetext>Ard fixed it in 1a3bee208.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1563</bug_id>
          
          <creation_ts>2019-02-25 20:38:19 +0000</creation_ts>
          <short_desc>SnpDxe assumes Io/MemIo bar indices</short_desc>
          <delta_ts>2020-04-17 13:46:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6527</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2019-02-25 20:38:19 +0000</bug_when>
    <thetext>SnpDxe initializes values for MemoryBarIndex and IoBarIndex to 0 and 1 respectively, even if calls to PciIo-&gt;GetBarAttributes never return success. Later, if network traffic attempts to perform io/memIo reads/writes, potentially non-existing bar indices will be passed to PciIo protocol where they might be ignored silently and result in hard-to-debug network errors.

Light-touch fix for this issue is to initialize both bars to invalid indices and also check the values before calling Io/MemIo reads/writes, and assert in case of invalid indices.

Example of the fix can be found in this MU_BASECORE PR: https://github.com/Microsoft/mu_basecore/pull/21</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6858</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:26:51 +0000</bug_when>
    <thetext>Jiaxin will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12164</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 22:38:46 +0000</bug_when>
    <thetext>I&apos;ll take ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12165</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 23:03:18 +0000</bug_when>
    <thetext>V1 patch on mailing list - https://edk2.groups.io/g/devel/message/57093</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12235</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 13:46:25 +0000</bug_when>
    <thetext>Pushed to edk2 - https://github.com/tianocore/edk2/commit/df4f154da9cb193b8e539157d1ed1a851cf1488e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1064</bug_id>
          
          <creation_ts>2018-07-27 02:28:23 +0000</creation_ts>
          <short_desc>Dead code and inf redundant definitions in NetworkPkg</short_desc>
          <delta_ts>2018-08-23 04:38:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Ye Ting">ting.ye</assigned_to>
          <cc>aaron.li</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4437</commentid>
    <comment_count>0</comment_count>
      <attachid>191</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:28:23 +0000</bug_when>
    <thetext>Created attachment 191
X64 build log for dead code and inf redundant definitions

Uefi-aware compiler found many modules have dead code and redundant definitions in the NetworkPkg. Please see the detail info in the attachment log. We need to clean them.

Because the module number is big, I report them all together by package in this tracker and don&apos;t by modules separately. 

Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and wrongly report it as dead code. Please verify them carefully if the module have assemble code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4438</commentid>
    <comment_count>1</comment_count>
      <attachid>192</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:29:47 +0000</bug_when>
    <thetext>Created attachment 192
IA32 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4499</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 21:47:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4680</commentid>
    <comment_count>3</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2018-08-23 04:38:10 +0000</bug_when>
    <thetext>Commit version
https://github.com/tianocore/edk2/commit/fafdb489a7120b45cf8bc0cc4aaa01358f7d70e8
https://github.com/tianocore/edk2/commit/ad1e45ddb54f4d416ba465ee36b51c88e5c4dfca
https://github.com/tianocore/edk2/commit/8343c750240520d6eb381e688069d39b289cb144
https://github.com/tianocore/edk2/commit/b701aae6a8e01b3a39c1cc5ad1409c9b929495ad</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>191</attachid>
            <date>2018-07-27 02:28:23 +0000</date>
            <delta_ts>2018-07-27 02:28:23 +0000</delta_ts>
            <desc>X64 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_X64.txt</filename>
            <type>text/plain</type>
            <size>765</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>192</attachid>
            <date>2018-07-27 02:29:47 +0000</date>
            <delta_ts>2018-07-27 02:29:47 +0000</delta_ts>
            <desc>IA32 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_IA32.txt</filename>
            <type>text/plain</type>
            <size>765</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1364</bug_id>
          
          <creation_ts>2018-11-29 00:46:10 +0000</creation_ts>
          <short_desc>Add Release.txt in Edk2 root directory</short_desc>
          <delta_ts>2018-12-20 10:33:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5715</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-29 00:46:10 +0000</bug_when>
    <thetext>Many Edk2 people don&apos;t know the edk2 release tag and edk2 release plan. I proposed to add Release.txt file in Edk2 root directory to list future Edk2 release plan link and each Edk2 release link.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5716</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-29 00:46:37 +0000</bug_when>
    <thetext>Assign to Liming</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5928</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-20 10:33:22 +0000</bug_when>
    <thetext>Fix it 6f42f9a54bf0d796940bc9af6956157ef3e90c3e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1700</bug_id>
          
          <creation_ts>2019-04-11 09:17:12 +0000</creation_ts>
          <short_desc>ArmPlatformPkg: Coverity scan flags multiple issues in edk2-stable201903</short_desc>
          <delta_ts>2020-05-05 19:13:43 +0000</delta_ts>
          <reporter_accessible>0</reporter_accessible>
          <cclist_accessible>0</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPlatformPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7086</commentid>
    <comment_count>0</comment_count>
      <attachid>288</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-11 09:17:12 +0000</bug_when>
    <thetext>Created attachment 288
archive of Coverity reports for this package, categorized by issue type

This is a Coverity defect report against edk2-stable201903, detected by
Coverity in edk2 modules while they were built as parts of OVMF. This
issue is being filed as a security BZ so that the maintainers of this
package can evaluate whether any of the issues flagged by coverity have
security impact.

If none of the issues have security impact, please simply re-classify
this BZ as a normal bug report.

If there is at least one issue with security impact, then please filter
those out of the logs in the attachment, and create a new (public) BZ
for this same package, with just the normal issues. This way normal
bugfixing can proceed while the security problems are under embargo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8708</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 18:04:54 +0000</bug_when>
    <thetext>This BZ contains only one report, namely &quot;scan-0029.txt&quot;.

The warning is technically valid, but it is not a security issue; in fact, in practical terms, it is not an issue at all.

The &quot;ArmPlatformPkg/Scripts/Ds5/system_table.py&quot; python script is a UEFI debugger helper script for the ARM DS-5 development environment. The part quoted in &quot;scan-0029.txt&quot; parses members of EFI_LOADED_IMAGE_PROTOCOL, via raw memory access (using field offsets and field sizes).

The protocol structure is (excerpt from &quot;MdePkg/Include/Protocol/LoadedImage.h&quot;):

  VOID              *ImageBase;     ///&lt; The base address at which the image was loaded.
  UINT64            ImageSize;      ///&lt; The size in bytes of the loaded image.

The aarch64 code in the python script reads the fields with:

[1] image_base = self.ec.getMemoryService().readMemory64(loaded_image_protocol + 0x40)
[2] image_size = self.ec.getMemoryService().readMemory32(loaded_image_protocol + 0x48)

while the aarch32 code does:

[3] image_base = self.ec.getMemoryService().readMemory32(loaded_image_protocol + 0x20)
[4] image_size = self.ec.getMemoryService().readMemory32(loaded_image_protocol + 0x28)

Analysis:
[1] Correct. On AAarch64, the ImageBase field starts at offset 0x40, and takes up 8 bytes.

[2] Technically incorrect, but good enough for practical purposes. The ImageSize field starts at offset 0x48, fine. Its size is however 8 bytes, not 4. Does that matter in practice? It doesn&apos;t, as the byte order is little endian, and we&apos;re unlikely to find an executable image larger than 4GB.

[3] Correct. On AArch32, the ImageBase field starts at offset 0x20, and takes up 4 bytes.
[4] Hard to say without actually checking a disassembly. Regarding the size of the ImageSize field, the same argument applies as under [2]. Regarding the offset?... That&apos;s where I&apos;m unsure. I don&apos;t know if UINT64 members are aligned at an 8-byte boundary on Aarch64. If they are, then the offset is fine. Otherwise, the offset is wrong (and the script is unusable for AArch32 debugging).

I think this is most likely not-a-bug at all (&quot;invalid&quot;). I&apos;ll let Ard decide. Either way, this is not a security issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8709</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 18:07:47 +0000</bug_when>
    <thetext>typo correction for [4]: &quot;I don&apos;t know if UINT64 members are aligned at an 8-byte boundary on *Aarch32*&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8891</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-08-08 20:29:23 +0000</bug_when>
    <thetext>Bug Triage: Confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12391</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:13:43 +0000</bug_when>
    <thetext>Untouched in ~9 months, WONTFIX.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>288</attachid>
            <date>2019-04-11 09:17:12 +0000</date>
            <delta_ts>2019-04-11 09:17:12 +0000</delta_ts>
            <desc>archive of Coverity reports for this package, categorized by issue type</desc>
            <filename>ArmPlatformPkg.zip</filename>
            <type>application/octet-stream</type>
            <size>951</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1174</bug_id>
          
          <creation_ts>2018-09-14 03:54:45 +0000</creation_ts>
          <short_desc>Cannot boot from UEFI  USB disk in Boot Manager .</short_desc>
          <delta_ts>2018-10-17 20:50:40 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi.Jiang">wenyi.jiang</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>paulo</cc>
    
    <cc>pcacjr</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4969</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-09-14 03:54:45 +0000</bug_when>
    <thetext>Because UDF file system cannot be mapped in shell,I run this test with UDF 2.01 file system.

The method of creating UDF USB disk is as follows:

1). Plug a USB disk in the client computer;

2). Open CMD as an administrator under Windows OS environment. The command is :&quot;format e: /fs:UDF /q&quot;

Reproduce Steps:
1. Copy an old 1.0 Shell &quot;Shell_Full.efi&quot; from &quot;EdkShellBinPkg\FullShell&quot; 
  to the USB disk (You can choose the .efi for IA32 or X64 test)
  and creat directory &quot;\EFI\Boot\&quot; in the root directory of USB disk. 
  Rename the Shell_Full.efi (X64 or IA32 version) to be BootX64.efi (or BootIA32.efi) and paste it under &quot;\EFI\Boot\&quot;
2. Plug the UDF USB disk into test machine.
3. Boot to Setup, Enter Boot Manager, select the UDF USB disk.
4. It should boot to shell 1.0 but it boots failed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5029</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:28:54 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5062</commentid>
    <comment_count>2</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-09-24 09:22:58 +0000</bug_when>
    <thetext>I&apos;ll have a look as soon as I can.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5245</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-12 04:44:24 +0000</bug_when>
    <thetext>(In reply to Paulo Alcantara from comment #2)
&gt; I&apos;ll have a look as soon as I can.

Hi Paulo,

After looking into this, I found that the fail to boot from a UDF-formatted USB drive within Boot Manager is related with case sensitivity.

For current implementation of the UdfDxe driver, the locating of a file is case-sensitive. That means only when there exists a file named:

X64:  \EFI\BOOT\BOOTX64.EFI
IA32: \EFI\BOOT\BOOTIA32.EFI

then the boot from Boot Manager will work. Since Boot Manager will use path strings like:

#define EFI_REMOVABLE_MEDIA_FILE_NAME_IA32    L&quot;\\EFI\\BOOT\\BOOTIA32.EFI&quot;
#define EFI_REMOVABLE_MEDIA_FILE_NAME_IA64    L&quot;\\EFI\\BOOT\\BOOTIA64.EFI&quot;
#define EFI_REMOVABLE_MEDIA_FILE_NAME_X64     L&quot;\\EFI\\BOOT\\BOOTX64.EFI&quot;
#define EFI_REMOVABLE_MEDIA_FILE_NAME_ARM     L&quot;\\EFI\\BOOT\\BOOTARM.EFI&quot;
#define EFI_REMOVABLE_MEDIA_FILE_NAME_AARCH64 L&quot;\\EFI\\BOOT\\BOOTAA64.EFI&quot;

for file systems located.


I did a quick search within the UDF 2.6 spec, and found that the FileIdentifier Lookup process is env(OS)-dependent when it comes to case sensitivity.

So do you aware of something I that I was missing? And do you think the current implementation of the UdfDxe driver aligns with the spec and we should ensure file with correct name should be ensured when we perform the boot from Boot Manager test?

Thanks in advance.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5253</commentid>
    <comment_count>4</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-10-13 10:49:21 +0000</bug_when>
    <thetext>Hi,

(In reply to Hao Wu from comment #3)
&gt; (In reply to Paulo Alcantara from comment #2)
&gt; &gt; I&apos;ll have a look as soon as I can.
&gt; After looking into this, I found that the fail to boot from a UDF-formatted
&gt; USB drive within Boot Manager is related with case sensitivity.

Oh, good catch!

&gt; For current implementation of the UdfDxe driver, the locating of a file is
&gt; case-sensitive. That means only when there exists a file named:
&gt; 
&gt; X64:  \EFI\BOOT\BOOTX64.EFI
&gt; IA32: \EFI\BOOT\BOOTIA32.EFI
&gt; 
&gt; then the boot from Boot Manager will work. Since Boot Manager will use path
&gt; strings like:
&gt; 
&gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_IA32    L&quot;\\EFI\\BOOT\\BOOTIA32.EFI&quot;
&gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_IA64    L&quot;\\EFI\\BOOT\\BOOTIA64.EFI&quot;
&gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_X64     L&quot;\\EFI\\BOOT\\BOOTX64.EFI&quot;
&gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_ARM     L&quot;\\EFI\\BOOT\\BOOTARM.EFI&quot;
&gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_AARCH64 L&quot;\\EFI\\BOOT\\BOOTAA64.EFI&quot;
&gt; 
&gt; for file systems located.
&gt; 
&gt; 
&gt; I did a quick search within the UDF 2.6 spec, and found that the
&gt; FileIdentifier Lookup process is env(OS)-dependent when it comes to case
&gt; sensitivity.

Yes - you&apos;re right.

&gt; So do you aware of something I that I was missing? And do you think the
&gt; current implementation of the UdfDxe driver aligns with the spec and we
&gt; should ensure file with correct name should be ensured when we perform the
&gt; boot from Boot Manager test?

I also did a quick search on UDF 2.60 spec and it doesn&apos;t seem to _enforce_ case-sensitivity for filename lookups.

IMHO, upon file creation -- which actually we don&apos;t support in UdfDxe -- we should preserve the original case of the file, but for file name lookups, I think we should do it with case insensitive.

We can see in the spec that it covers a few *optional* algorithms that some operating systems might follow, however it still doesn&apos;t enforce anything. That said, I think we&apos;re safe doing it :-)

Thank you very much!

Paulo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5255</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-14 21:16:58 +0000</bug_when>
    <thetext>(In reply to Paulo Alcantara from comment #4)
&gt; Hi,
&gt; 
&gt; (In reply to Hao Wu from comment #3)
&gt; &gt; (In reply to Paulo Alcantara from comment #2)
&gt; &gt; &gt; I&apos;ll have a look as soon as I can.
&gt; &gt; After looking into this, I found that the fail to boot from a UDF-formatted
&gt; &gt; USB drive within Boot Manager is related with case sensitivity.
&gt; 
&gt; Oh, good catch!
&gt; 
&gt; &gt; For current implementation of the UdfDxe driver, the locating of a file is
&gt; &gt; case-sensitive. That means only when there exists a file named:
&gt; &gt; 
&gt; &gt; X64:  \EFI\BOOT\BOOTX64.EFI
&gt; &gt; IA32: \EFI\BOOT\BOOTIA32.EFI
&gt; &gt; 
&gt; &gt; then the boot from Boot Manager will work. Since Boot Manager will use path
&gt; &gt; strings like:
&gt; &gt; 
&gt; &gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_IA32    L&quot;\\EFI\\BOOT\\BOOTIA32.EFI&quot;
&gt; &gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_IA64    L&quot;\\EFI\\BOOT\\BOOTIA64.EFI&quot;
&gt; &gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_X64     L&quot;\\EFI\\BOOT\\BOOTX64.EFI&quot;
&gt; &gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_ARM     L&quot;\\EFI\\BOOT\\BOOTARM.EFI&quot;
&gt; &gt; #define EFI_REMOVABLE_MEDIA_FILE_NAME_AARCH64 L&quot;\\EFI\\BOOT\\BOOTAA64.EFI&quot;
&gt; &gt; 
&gt; &gt; for file systems located.
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I did a quick search within the UDF 2.6 spec, and found that the
&gt; &gt; FileIdentifier Lookup process is env(OS)-dependent when it comes to case
&gt; &gt; sensitivity.
&gt; 
&gt; Yes - you&apos;re right.
&gt; 
&gt; &gt; So do you aware of something I that I was missing? And do you think the
&gt; &gt; current implementation of the UdfDxe driver aligns with the spec and we
&gt; &gt; should ensure file with correct name should be ensured when we perform the
&gt; &gt; boot from Boot Manager test?
&gt; 
&gt; I also did a quick search on UDF 2.60 spec and it doesn&apos;t seem to _enforce_
&gt; case-sensitivity for filename lookups.
&gt; 
&gt; IMHO, upon file creation -- which actually we don&apos;t support in UdfDxe -- we
&gt; should preserve the original case of the file, but for file name lookups, I
&gt; think we should do it with case insensitive.

Hi Paulo,

If there is no enforcement for the case-sensitivity in UDF. My concern is that
if the content on a UDF media does created with in a case sensitive manner,
such as files TESTFILE.TXT &amp; testfile.txt both exist on the file system. Then
if we lookup the file case-insensitively, only one file can be accessed.

What do you think?

Best Regards,
Hao Wu

&gt; 
&gt; We can see in the spec that it covers a few *optional* algorithms that some
&gt; operating systems might follow, however it still doesn&apos;t enforce anything.
&gt; That said, I think we&apos;re safe doing it :-)
&gt; 
&gt; Thank you very much!
&gt; 
&gt; Paulo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5299</commentid>
    <comment_count>6</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-10-17 17:08:37 +0000</bug_when>
    <thetext>(In reply to Hao Wu from comment #5)
&gt;
&gt; If there is no enforcement for the case-sensitivity in UDF. My concern is
&gt; that
&gt; if the content on a UDF media does created with in a case sensitive manner,
&gt; such as files TESTFILE.TXT &amp; testfile.txt both exist on the file system. Then
&gt; if we lookup the file case-insensitively, only one file can be accessed.
&gt; 
&gt; What do you think?

Yeah, your comment makes perfect sense, and I think we should enforce                                                                    
case-sensitive lookups. If you look at the spec, there are some cases                                                                    
where *2* lookups are performed for e.g. OS/2: 1) lookup the file name                                                                   
case-sensitively, and if it&apos;s not done or fails, then perform another                                                                    
lookup case-insensitevly.                                                                                                                
                                                                                                                                         
IMHO, these two lookups are unnecessary for our case, so I think we                                                                      
should go with a single case-sensitive lookup. Although, this should be                                                                  
documented elsewhere so that the user takes care of creating the                                                                         
appropriate files with the expected case-sensitiveness.

Thanks,
Paulo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5301</commentid>
    <comment_count>7</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-17 20:50:40 +0000</bug_when>
    <thetext>(In reply to Paulo Alcantara from comment #6)
&gt; (In reply to Hao Wu from comment #5)
&gt; &gt;
&gt; &gt; If there is no enforcement for the case-sensitivity in UDF. My concern is
&gt; &gt; that
&gt; &gt; if the content on a UDF media does created with in a case sensitive manner,
&gt; &gt; such as files TESTFILE.TXT &amp; testfile.txt both exist on the file system. Then
&gt; &gt; if we lookup the file case-insensitively, only one file can be accessed.
&gt; &gt; 
&gt; &gt; What do you think?
&gt; 
&gt; Yeah, your comment makes perfect sense, and I think we should enforce       
&gt; 
&gt; case-sensitive lookups. If you look at the spec, there are some cases       
&gt; 
&gt; where *2* lookups are performed for e.g. OS/2: 1) lookup the file name      
&gt; 
&gt; case-sensitively, and if it&apos;s not done or fails, then perform another       
&gt; 
&gt; lookup case-insensitevly.                                                   
&gt; 
&gt;                                                                             
&gt; 
&gt; IMHO, these two lookups are unnecessary for our case, so I think we         
&gt; 
&gt; should go with a single case-sensitive lookup. Although, this should be     
&gt; 
&gt; documented elsewhere so that the user takes care of creating the            
&gt; 
&gt; appropriate files with the expected case-sensitiveness.
&gt; 

Thanks Paulo,

Good suggestion for documenting the case sensitivity characteristic. I will
co-work with the issue reporter for this.

Based on the above disscussion, I will mark this one as &quot;RESOLVED&quot; via
&quot;WONTFIX&quot;.

Best Regards,
Hao Wu

&gt; Thanks,
&gt; Paulo</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1083</bug_id>
          
          <creation_ts>2018-08-13 09:46:08 +0000</creation_ts>
          <short_desc>MinnowBoard 3 UEFI firmware can&apos;t boot Yocto 2.0 kernel</short_desc>
          <delta_ts>2018-08-26 22:40:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard 3</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ursula">ursula.maplehurst</reporter>
          <assigned_to name="Stephano Cetola">stephano</assigned_to>
          <cc>brian.richardson</cc>
    
    <cc>david.wei</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>Linux</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4573</commentid>
    <comment_count>0</comment_count>
    <who name="Ursula">ursula.maplehurst</who>
    <bug_when>2018-08-13 09:46:08 +0000</bug_when>
    <thetext>Raised at the request of Brian Richardson.

Using the v0.70 Minnowboard 3 UEFI firmware image [1] on Leaf Hill CRB it is not possible to boot a Yocto 2.0 Linux kernel [2]. The kernel hangs at some point during boot, before console output is initialized. If the kernel is booted with &quot;acpi=off&quot; on the kernel command-line, it boots up, which suggests that there is something not quite right with the ACPI tables in the firmware image. The same kernel boots reliably with no issues using the Leaf Hill CRB IAFW Reference BIOS. Booting the Yocto 2.2 kernel binary [3] with the Minnowboard 3 BIOS image [1] works okay, so there is something different in the newer kernel which seems to not get tripped-up. We are currently tied to the older kernel version at the moment, and it would be good to resolve the issue in the firmware that is causing the boot problem.

[1] https://firmware.intel.com/sites/default/files/leafhill-0.70-firmwareimages.zip
[2] http://downloads.yoctoproject.org/releases/yocto/yocto-2.0/machines/intel-corei7-64/bzImage-intel-corei7-64.bin
[3] http://downloads.yoctoproject.org/releases/yocto/yocto-2.2/machines/intel-corei7-64/bzImage-intel-corei7-64.bin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4603</commentid>
    <comment_count>1</comment_count>
    <who name="Ursula">ursula.maplehurst</who>
    <bug_when>2018-08-16 09:30:56 +0000</bug_when>
    <thetext>We bisected between the 2.0 and 2.2 kernels and the necessary commit for making the 2.0 kernel boot successfully is &quot;x86/cpu: Add workaround for MONITOR instruction erratum on Goldmont based CPUs&quot; (08e237fa56a1d95c1372033bc29c4a2517b3c0fa).

Still unclear what the difference is between the Leaf Hill CRB IAFW Reference BIOS &amp; the Minnowboard 3 UEFI firmware image which means that the kernel patch is required for the latter but not the former.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4608</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-16 20:07:45 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4684</commentid>
    <comment_count>3</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-08-23 06:31:41 +0000</bug_when>
    <thetext>Monitored cached line may not wake up CPU from MWAIT C state on certain Goldmont based CPUs.

Leaf Hill CRB BIOS disables MONITOR/MWAIT and use IO registers for C State instead.

Minnowboard 3 BIOS will align with Leaf Hill CRB BIOS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4712</commentid>
    <comment_count>4</comment_count>
    <who name="">david.wei</who>
    <bug_when>2018-08-26 22:40:13 +0000</bug_when>
    <thetext>The patch has been committed to github: 

https://github.com/tianocore/edk2-platforms/commit/d13df53f9f1369f0c0d2a112cd44625c3359e9fa

0.71 open source release will include this fix.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1385</bug_id>
          
          <creation_ts>2018-12-09 08:29:34 +0000</creation_ts>
          <short_desc>[BaseTool] PcdNvStoreDefaultValueBuffer Vpd offset is incorrect</short_desc>
          <delta_ts>2018-12-17 21:52:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5797</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-09 08:29:34 +0000</bug_when>
    <thetext>PcdNvStoreDefaultValueBuffer value is update to Vpd Info File, but it is not update into a internal cache. That will cause PcdNvStoreDefaultValueBuffer VpdOffset incorrect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5851</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 00:24:58 +0000</bug_when>
    <thetext>Patch mail: https://lists.01.org/pipermail/edk2-devel/2018-December/033775.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5907</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-17 21:52:44 +0000</bug_when>
    <thetext>Fixed at SHA-1: 5695877ec8f636bd4ad873ef50eceb9da7a0f382</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1821</bug_id>
          
          <creation_ts>2019-05-16 14:57:17 +0000</creation_ts>
          <short_desc>OpensslLib: Missing local header files in [Sources] section of .INFs</short_desc>
          <delta_ts>2019-08-14 10:49:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1089</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Rodriguez">christian.rodriguez</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ting.ye</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7584</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-16 14:57:17 +0000</bug_when>
    <thetext>Update OpenSSL autogeneration script for .INFs because the following OpenSSL local headers are missing from [Sources] section of OpensslLib.inf and OpensslLibCrypto.inf:

buildinf.h
openssl\crypto\aes\aes_locl.h
openssl\crypto\arm_arch.h
openssl\crypto\asn1\asn1_locl.h
openssl\crypto\asn1\charmap.h
openssl\crypto\async\arch\async_null.h
openssl\crypto\async\arch\async_posix.h
openssl\crypto\async\arch\async_win.h
openssl\crypto\async\async_locl.h
openssl\crypto\bio\bio_lcl.h
openssl\crypto\bn\bn_lcl.h
openssl\crypto\bn\bn_prime.h
openssl\crypto\bn\rsaz_exp.h
openssl\crypto\comp\comp_lcl.h
openssl\crypto\conf\conf_def.h
openssl\crypto\conf\conf_lcl.h
openssl\crypto\des\des_locl.h
openssl\crypto\des\rpc_des.h
openssl\crypto\des\spr.h
openssl\crypto\dh\dh_locl.h
openssl\crypto\dso\dso_locl.h
openssl\crypto\evp\evp_locl.h
openssl\crypto\hmac\hmac_lcl.h
openssl\crypto\include\internal\asn1_int.h
openssl\crypto\include\internal\async.h
openssl\crypto\include\internal\bn_dh.h
openssl\crypto\include\internal\bn_int.h
openssl\crypto\include\internal\bn_srp.h
openssl\crypto\include\internal\chacha.h
openssl\crypto\include\internal\cryptlib.h
openssl\crypto\include\internal\cryptlib_int.h
openssl\crypto\include\internal\engine.h
openssl\crypto\include\internal\err_int.h
openssl\crypto\include\internal\evp_int.h
openssl\crypto\include\internal\lhash.h
openssl\crypto\include\internal\md32_common.h
openssl\crypto\include\internal\objects.h
openssl\crypto\include\internal\poly1305.h
openssl\crypto\include\internal\rand.h
openssl\crypto\include\internal\x509_int.h
openssl\crypto\lhash\lhash_lcl.h
openssl\crypto\md4\md4_locl.h
openssl\crypto\md5\md5_locl.h
openssl\crypto\modes\modes_lcl.h
openssl\crypto\objects\obj_dat.h
openssl\crypto\objects\obj_lcl.h
openssl\crypto\objects\obj_xref.h
openssl\crypto\ocsp\ocsp_lcl.h
openssl\crypto\pkcs12\p12_lcl.h
openssl\crypto\ppc_arch.h
openssl\crypto\rand\rand_lcl.h
openssl\crypto\rc4\rc4_locl.h
openssl\crypto\rsa\rsa_locl.h
openssl\crypto\sha\sha_locl.h
openssl\crypto\sparc_arch.h
openssl\crypto\vms_rms.h
openssl\crypto\x509\x509_lcl.h
openssl\crypto\x509v3\ext_dat.h
openssl\crypto\x509v3\pcy_int.h
openssl\include\internal\asn1t.h
openssl\include\internal\bio.h
openssl\include\internal\comp.h
openssl\include\internal\conf.h
openssl\include\internal\constant_time_locl.h
openssl\include\internal\dane.h
openssl\include\internal\dso.h
openssl\include\internal\err.h
openssl\include\internal\numbers.h
openssl\include\internal\o_dir.h
openssl\include\internal\o_str.h
openssl\include\internal\sslconf.h
openssl\include\internal\thread_once.h
openssl\include\openssl\aes.h
openssl\include\openssl\asn1.h
openssl\include\openssl\asn1t.h
openssl\include\openssl\async.h
openssl\include\openssl\bio.h
openssl\include\openssl\blowfish.h
openssl\include\openssl\bn.h
openssl\include\openssl\buffer.h
openssl\include\openssl\camellia.h
openssl\include\openssl\cast.h
openssl\include\openssl\cmac.h
openssl\include\openssl\cms.h
openssl\include\openssl\comp.h
openssl\include\openssl\conf.h
openssl\include\openssl\conf_api.h
openssl\include\openssl\crypto.h
openssl\include\openssl\ct.h
openssl\include\openssl\des.h
openssl\include\openssl\dh.h
openssl\include\openssl\dsa.h
openssl\include\openssl\e_os2.h
openssl\include\openssl\ebcdic.h
openssl\include\openssl\ec.h
openssl\include\openssl\engine.h
openssl\include\openssl\err.h
openssl\include\openssl\evp.h
openssl\include\openssl\hmac.h
openssl\include\openssl\idea.h
openssl\include\openssl\kdf.h
openssl\include\openssl\lhash.h
openssl\include\openssl\md2.h
openssl\include\openssl\md4.h
openssl\include\openssl\md5.h
openssl\include\openssl\mdc2.h
openssl\include\openssl\modes.h
openssl\include\openssl\obj_mac.h
openssl\include\openssl\objects.h
openssl\include\openssl\ocsp.h
openssl\include\openssl\opensslv.h
openssl\include\openssl\ossl_typ.h
openssl\include\openssl\pem.h
openssl\include\openssl\pem2.h
openssl\include\openssl\pkcs12.h
openssl\include\openssl\pkcs7.h
openssl\include\openssl\rand.h
openssl\include\openssl\rc2.h
openssl\include\openssl\rc4.h
openssl\include\openssl\rc5.h
openssl\include\openssl\ripemd.h
openssl\include\openssl\rsa.h
openssl\include\openssl\safestack.h
openssl\include\openssl\seed.h
openssl\include\openssl\sha.h
openssl\include\openssl\srp.h
openssl\include\openssl\stack.h
openssl\include\openssl\symhacks.h
openssl\include\openssl\ts.h
openssl\include\openssl\txt_db.h
openssl\include\openssl\ui.h
openssl\include\openssl\whrlpool.h
openssl\include\openssl\x509.h
openssl\include\openssl\x509_vfy.h
openssl\include\openssl\x509v3.h
openssl\ms\uplink.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7595</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:31:02 +0000</bug_when>
    <thetext>build tool doesn&apos;t depend on those head files, no functional issue. We can enhance the script to list them.

Christian Rodriguez, could you help to send the patch ? thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7724</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 15:08:14 +0000</bug_when>
    <thetext>Link to patch in mailing list:
https://edk2.groups.io/g/devel/message/41165</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7727</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 17:14:27 +0000</bug_when>
    <thetext>Link to patch in mailing list:
https://edk2.groups.io/g/devel/message/41170</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9002</commentid>
    <comment_count>4</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-08-14 10:49:04 +0000</bug_when>
    <thetext>Fixed with addition to BZ 1804 to also check .DEC file includes recursively. CryptoPkg.dec has necessary include paths.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1288</bug_id>
          
          <creation_ts>2018-10-30 03:43:46 +0000</creation_ts>
          <short_desc>[BaseTool] Suggestions for improving building performance</short_desc>
          <delta_ts>2018-12-14 00:40:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>derek.lin2</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5431</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-10-30 03:43:46 +0000</bug_when>
    <thetext>1. &quot;&quot;.join(string list) is faster than string + string + string. string + string style is used broadly in TemplateString class. Convert string + string to &quot;&quot;.join(string list) will improve build performance for AutoGen phase.

2. Build tool uses sqlite database to help parsing the metadata files. Since there is only simple query statement used, the data stores in sqlite can be stored in python array. As such, there is no need to interpreter sql statement and read/write database file(if the build option --no-cache is disabled). 

3. In Expression.py, copy.deepcopy is used for avoiding change the parameter SymbolTable.  SymbolTableis a dict and the dict comprehension is faster than copy.deepcopy. 

4. In UniClassObject.py, UniToHexList function evaluate the same string redundantly such as the same key word of a uni string in different uni file. So adding a cache for this function will help to improve performance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5498</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 03:22:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5737</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-04 21:41:39 +0000</bug_when>
    <thetext>I collected the build performance data for the patches. 
Test Environment:
Processor: i7-6700 CPU @ 3.40GHz 3.41GHz
RAM: 16 GB
OS: Windows 10 64-bit
Python: 2.7.15
Target platform: OvmfPkg
ToolChain: VS2015x86
build command: build -p OvmfPkg\OvmfPkgIa32X64.dsc -a IA32 -a X64 t VS2015x86 -y report.txt

Clean build for each testing. These patches will effect the AutoGen/GenFds phase performance.

The current build performance data:
Build Duration:       00:02:26
AutoGen Duration:     00:00:39
Make Duration:        00:01:18
GenFds Duration:      00:00:29

The performance data after applying the following 2 patches.
remove sqlite usage patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032140.html
share data between GenFds and AutoGen patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032769.html

Build Duration:       00:02:08
AutoGen Duration:     00:00:17
Make Duration:        00:01:25
GenFds Duration:      00:00:24

The performance data after applying the following patch.
string cat patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032154.html
Build Duration:       00:01:59
AutoGen Duration:     00:00:15
Make Duration:        00:01:18
GenFds Duration:      00:00:24

The customized deepcopy patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032147.html
Adding cache for Uni file parser:
https://lists.01.org/pipermail/edk2-devel/2018-November/032148.html
Build Duration:       00:02:01
AutoGen Duration:     00:00:15
Make Duration:        00:01:21
GenFds Duration:      00:00:24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5788</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-06 21:56:03 +0000</bug_when>
    <thetext>fixed at edk2 master
SHA-1: b3497bad1221704a5dbc5da0b10f42625f1ad2ed
SHA-1: 2f818ed0fb57d98985d151781a2ce9b8683129ee
SHA-1: 4e375707392e4f9085e2d2342e41aee9d4df2b0a
SHA-1: bf9e636605188e291d33ab694ff1c5926b6f0800</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5824</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-11 03:20:36 +0000</bug_when>
    <thetext>add additional performance data.
Target platform: MinKabylake
https://github.com/tianocore/edk2-platforms/tree/devel-MinPlatform

Test Environment:
Processor: i7-6700 CPU @ 3.40GHz 3.41GHz
RAM: 16 GB
OS: Windows 10 64-bit
Python: 2.7.15
Target platform: OvmfPkg
ToolChain: VS2015x86

The original build performance data:
Build Duration:       00:02:23
AutoGen Duration:     00:00:42
Make Duration:        00:01:12
GenFds Duration:      00:00:27

The performance data after applying the following 2 patches.
remove sqlite usage patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032140.html
share data between GenFds and AutoGen patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032769.html

Build Duration:       00:01:59
AutoGen Duration:     00:00:24
Make Duration:        00:01:13
GenFds Duration:      00:00:21

The performance data after applying the following patch.
string cat patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032154.html
Build Duration:       00:01:57
AutoGen Duration:     00:00:23
Make Duration:        00:01:12
GenFds Duration:      00:00:21

The customized deepcopy patch:
https://lists.01.org/pipermail/edk2-devel/2018-November/032147.html
Adding cache for Uni file parser:
https://lists.01.org/pipermail/edk2-devel/2018-November/032148.html
Build Duration:       00:01:56
AutoGen Duration:     00:00:21
Make Duration:        00:01:12
GenFds Duration:      00:00:22</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5890</commentid>
    <comment_count>5</comment_count>
    <who name="Derek Lin">derek.lin2</who>
    <bug_when>2018-12-14 00:40:55 +0000</bug_when>
    <thetext>This improve a lot of performance in our code base!
Thanks for the improvement, especially the sqlite db to python list change.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1620</bug_id>
          
          <creation_ts>2019-03-13 18:04:37 +0000</creation_ts>
          <short_desc>Support disabling include path check</short_desc>
          <delta_ts>2019-03-19 20:43:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6711</commentid>
    <comment_count>0</comment_count>
      <attachid>272</attachid>
    <who name="">jiewen.yao</who>
    <bug_when>2019-03-13 18:04:37 +0000</bug_when>
    <thetext>Created attachment 272
patch

In current EDKII build, we have check to make sure EDK II
modules must not reference header files outside of the packages
they depend on or within the module&apos;s directory tree.

However, we do see the usage to build EDKII as executable running
in the operating system which requires include path to outside.
For example, EmulatorPkg. The current solution (soft link) is
weird hack - EmulatorPkg\Unix\Host\X11IncludeHack.

We also have internal test which requires OS library to link.

So I proposal to add --disable-include-path-check build option.
If this option is specified, the build tool can skip include path check.
As such, the above case can be supported easily, by adding the include path as override.

At same time, if the user does not use --disable-include-path-check, the build tool keeps current behavior to do the check to make sure no violation in current package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6714</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-14 05:57:50 +0000</bug_when>
    <thetext>The build spec and build tool User Manual need to update for this change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6729</commentid>
    <comment_count>2</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-03-15 01:31:20 +0000</bug_when>
    <thetext>git: d868846a4ecc1f3ec28f68e05519960275138771</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6757</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-19 20:43:53 +0000</bug_when>
    <thetext>update the status to resolved since the patch already be pushed.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>272</attachid>
            <date>2019-03-13 18:04:37 +0000</date>
            <delta_ts>2019-03-13 18:04:37 +0000</delta_ts>
            <desc>patch</desc>
            <filename>0001-BaseTool-Build-Add-disable-include-path-check.patch</filename>
            <type>application/octet-stream</type>
            <size>4353</size>
            <attacher>jiewen.yao</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1103</bug_id>
          
          <creation_ts>2018-08-22 12:09:01 +0000</creation_ts>
          <short_desc>delete EdkCompatibilityPkg from edk2/master</short_desc>
          <delta_ts>2019-03-27 03:01:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1132</dependson>
          <blocked>1104</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkCompatibilityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4668</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-08-22 12:09:01 +0000</bug_when>
    <thetext>Customers that want to continue to use the package will be able to do so from an existing UDK release branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4698</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:29:28 +0000</bug_when>
    <thetext>bug scrub: assign to Liming to discuss first. final result may depend on the community discussion result.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6779</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-20 20:51:59 +0000</bug_when>
    <thetext>Shenglei will remove it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6791</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:54:29 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6923</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-03-27 03:01:30 +0000</bug_when>
    <thetext>Fixed at:
c455bc8c8d78ad51c24426a500914ea32504bf06
5bca07268acabe7f31407358e875ccf89cb5e386
fdebdc961bfdc600d4040213ef4e757f3fff3574</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1408</bug_id>
          
          <creation_ts>2018-12-17 18:02:16 +0000</creation_ts>
          <short_desc>Add report status code calls to failed NVME operations so that the system can process issues</short_desc>
          <delta_ts>2020-03-06 16:45:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>macarl</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5901</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-17 18:02:16 +0000</bug_when>
    <thetext>When NVME fails or has errors it is often a critical issue for a platform.  The NVME driver was written without many calls to ReportStatusCode for those errors and therefore it is hard for the system to collect boot issues.  
  

Please add ReportStatusCode calls to major Device Errors in the NVME driver.

At least these places. 
https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L494

https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L573

https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L1241</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5937</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:10:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6235</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-01-29 21:02:46 +0000</bug_when>
    <thetext>(In reply to Sean Brogan from comment #0)
&gt; When NVME fails or has errors it is often a critical issue for a platform. 
&gt; The NVME driver was written without many calls to ReportStatusCode for those
&gt; errors and therefore it is hard for the system to collect boot issues.  
&gt;   
&gt; 
&gt; Please add ReportStatusCode calls to major Device Errors in the NVME driver.
&gt; 
&gt; At least these places. 
&gt; https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/
&gt; Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L494
&gt; 
&gt; https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/
&gt; Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L573
&gt; 
&gt; https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/
&gt; Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L1241

Hi,

For the below 2 places, I totally agree that they are controller/device failures during the NVME initialization:

Timeout happens when disabling the NVME controller:
&gt; https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/
&gt; Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L494

Timeout happens when enabling the NVME controller:
&gt; https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/
&gt; Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L573


But for:

Upon entry of function NvmeUnregisterShutdownNotification():
&gt; https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/
&gt; Bus/Pci/NvmExpressDxe/NvmExpressHci.c#L1241

I do not see the entry of this function is related with the error happens in controller/device.
Actually, NvmeUnregisterShutdownNotification() is called within the BindingStop() service of the NvmExpressDxe driver, which I think is part of the flow of a UEFI Driver Model driver.

Could you help to provide some more information for the third place where a ReportStatusCode call is suggested? Thanks.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6252</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-01-31 03:11:12 +0000</bug_when>
    <thetext>RFC V1 patch has been sent for review:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg50734.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6255</commentid>
    <comment_count>4</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-01-31 23:59:51 +0000</bug_when>
    <thetext>Agree. The 3rd usage L1241 doesn&apos;t look like a valid hardware error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6312</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-10 19:07:07 +0000</bug_when>
    <thetext>V1 (official) of the patch has been sent out for review:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg51112.html

The patch is also available at:
https://github.com/hwu25/edk2/tree/nvme_status_code</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6344</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-12 22:32:37 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/63d8431a49cb5a900406e8d09a5dd10080dc818e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11596</commentid>
    <comment_count>7</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2020-03-06 16:45:18 +0000</bug_when>
    <thetext>*** Bug 2573 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1031</bug_id>
          
          <creation_ts>2018-07-18 21:20:26 +0000</creation_ts>
          <short_desc>GenerateCapsule: document to describe current&apos;s limitation</short_desc>
          <delta_ts>2018-08-09 13:40:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4321</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-18 21:20:26 +0000</bug_when>
    <thetext>current the GenerateCapsule tool doesn&apos;t support to generate a capsule file that have optional driver,  have multiple payload files, have vendor code file, so please help to document this limitation.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4342</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 01:27:09 +0000</bug_when>
    <thetext>Assign to Mike first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4461</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-07-29 14:13:22 +0000</bug_when>
    <thetext>Patch email for review:

https://lists.01.org/pipermail/edk2-devel/2018-July/027707.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4537</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-08-09 13:40:16 +0000</bug_when>
    <thetext>Commit

https://github.com/tianocore/edk2/commit/d6f079b600cc88367c20b5eec5a28d28d3ceaca8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1663</bug_id>
          
          <creation_ts>2019-03-25 18:20:48 +0000</creation_ts>
          <short_desc>EDK_TOOLS_PATH instead of BASE_TOOLS_PATH</short_desc>
          <delta_ts>2020-03-06 17:31:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Max Knutsen">maknutse</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6913</commentid>
    <comment_count>0</comment_count>
    <who name="Max Knutsen">maknutse</who>
    <bug_when>2019-03-25 18:20:48 +0000</bug_when>
    <thetext>In tools_def.template, GCC_DLINK2_FLAGS_COMMON uses EDK_TOOLS_PATH  to refer to BaseTools/Scripts. The requirements EDK_TOOLS_PATH are that $(EDK_TOOLS_PATH)/bin points to build executable. BASE_TOOLS_PATH should be used to refer to the root of the BaseTools directory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7290</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 22:02:47 +0000</bug_when>
    <thetext>Bob, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10483</commentid>
    <comment_count>2</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-19 22:21:30 +0000</bug_when>
    <thetext>this can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11600</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-06 17:31:30 +0000</bug_when>
    <thetext>not broken</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1542</bug_id>
          
          <creation_ts>2019-02-19 23:48:30 +0000</creation_ts>
          <short_desc>Add shell application to dump bios image</short_desc>
          <delta_ts>2019-05-15 02:16:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6416</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-19 23:48:30 +0000</bug_when>
    <thetext>Plan to add an shell application to dump bios image, command like below:
  DumpBIOSImage &lt;FileName&gt;

it&apos;s valuable for debug purpose.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6428</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:05:04 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7543</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-05-15 02:16:10 +0000</bug_when>
    <thetext>There is no requirement on this application. Close it first, and open when there is the real request.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1974</bug_id>
          
          <creation_ts>2019-07-12 05:48:56 +0000</creation_ts>
          <short_desc>SnpDxe: ExitBootServices notification function uses UNDI functions</short_desc>
          <delta_ts>2019-10-21 02:57:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Maciej Rabeda">maciej.rabeda</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>stephano</cc>
    
    <cc>tpilar</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>edk2-stable201905</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8435</commentid>
    <comment_count>0</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2019-07-12 05:48:56 +0000</bug_when>
    <thetext>In its ExitBootServices event notification function, SnpDxe interfaces UNDI-&gt;Shutdown() and UNDI-&gt;Stop() functions.

As per UEFI specification (v2.8, page 146, EVT_SIGNAL_EXIT_BOOT_SERVICES description):
&quot;The notification function for this event is not allowed to (...) call any functions that use the Memory Allocation Services&quot;.

UEFI specification (v2.8, page 2277, E.4.9 Shutdown) specifies that:
&quot;The memory buffer assigned in the Initialize command can be released or reassigned&quot;.

As a result, memory map will be altered in ExitBootServices phase and, as per UEFI spec (v2.8, section 7.4, EFI_BOOT_SERVICES.ExitBootServices()), this should cause the gBS-&gt;ExitBootServices to return EFI_INVALID_PARAMETER.

Since UNDI drivers during ExitBootServices phase are expected to put the adapter to such a state that it will not perform any DMA operations, calling UNDI-&gt;Shutdown() and UNDI-&gt;Stop() by SnpDxe driver does not make sense.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8591</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:46:42 +0000</bug_when>
    <thetext>Bug Triage: We like this idea but we are unsure what side effects it might have. Please evaluate if there are any concerns from the compatibility perspective with other UNDI drivers. If there are no concerns, this change is rather simple.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9771</commentid>
    <comment_count>2</comment_count>
    <who name="Maciej Rabeda">maciej.rabeda</who>
    <bug_when>2019-09-24 04:30:58 +0000</bug_when>
    <thetext>From Intel driver perspective, this is a desired change. During ExitBootServices phase, UNDI drivers are expected to shut down all DMA activity so no additional Stop/Shutdown commands from upper layers of network stack are necessary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9976</commentid>
    <comment_count>3</comment_count>
    <who name="Tomas Pilar">tpilar</who>
    <bug_when>2019-10-09 05:32:30 +0000</bug_when>
    <thetext>The Solarflare cards are SNP-based, not UNDI-based. 

However, I expect this will cause a problem with at least one of the other network cards out there and the bugs due to DMA during OS load are very tricky to diagnose.

Is there a way we can try and disseminate info about this change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10144</commentid>
    <comment_count>4</comment_count>
    <who name="sfu5">siyuan.fu</who>
    <bug_when>2019-10-21 02:57:34 +0000</bug_when>
    <thetext>A new PCD has been added to NetworkPkg for control this fix enable/disable.

  ## Indicates whether SnpDxe driver will create an event that will be notified
  # upon gBS-&gt;ExitBootServices() call.
  # TRUE - Event being triggered upon ExitBootServices call will be created
  # FALSE - Event being triggered upon ExitBootServices call will NOT be created
  # @Prompt Indicates whether SnpDxe creates event for ExitBootServices() call.
  gEfiNetworkPkgTokenSpaceGuid.PcdSnpCreateExitBootServicesEvent|TRUE|BOOLEAN|0x1000000C

Patch committed to 61bb6eeb4d93c0a34c1995d87914ab41398f9550</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1346</bug_id>
          
          <creation_ts>2018-11-20 04:53:42 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Universal/FirmwareVolume/UpdateDriverDxe</short_desc>
          <delta_ts>2019-07-03 01:51:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5653</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 04:53:42 +0000</bug_when>
    <thetext>The two components in this directory FwVolDxe and UpdateDriverDxe provide support of the old capsule update solution.
Now since the signed capsule update is recommended to use, this directory can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5664</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-21 05:30:38 +0000</bug_when>
    <thetext>Talked with Liming Gao offline. He suggested to merge IntelFrameworkModulePkg\Universal\FirmwareVolume\FwVolDxe\ and IntelFrameworkModulePkg\Universal\SectionExtractionDxe to one new driver in MdeModulePkg (GUIDed section extraction capability can be directed to GUIDED_SECTION_EXTRACTION protocol).
DXE CORE only provides Firmware Volume read capability.
The new driver provides Firmware Volume read/write capability.

Let&apos;s focus on the removal of UpdateDriverDxe in this bugzilla.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6422</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:02:55 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7403</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:54:21 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8354</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:51:36 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1157</bug_id>
          
          <creation_ts>2018-09-06 19:01:33 +0000</creation_ts>
          <short_desc>FAT will double allocate clusters on long writes when the disk is full</short_desc>
          <delta_ts>2018-10-24 01:30:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Herbie Robinson">Herbie.Robinson</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FatPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4874</commentid>
    <comment_count>0</comment_count>
    <who name="Herbie Robinson">Herbie.Robinson</who>
    <bug_when>2018-09-06 19:01:33 +0000</bug_when>
    <thetext>The problem is in FileSpace.c.  The problem is that FatGrowEof calls FatAllocateCluster multiple times without marking the clusters allocated as it gets them.  I will be submitting a patch for this as soon as I can figure out how to submit patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4884</commentid>
    <comment_count>1</comment_count>
    <who name="Herbie Robinson">Herbie.Robinson</who>
    <bug_when>2018-09-07 20:52:14 +0000</bug_when>
    <thetext>I&apos;ve been the patch to the edk2-devel mailing list.  Let me know if it should go somewhere else.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4961</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 20:08:28 +0000</bug_when>
    <thetext>bug scrub: Ray please help to review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5376</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-10-24 01:30:34 +0000</bug_when>
    <thetext>fixed in add1310df55ee.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1569</bug_id>
          
          <creation_ts>2019-02-27 15:19:38 +0000</creation_ts>
          <short_desc>UEFI SCT crash on SerialIoProtocolTest</short_desc>
          <delta_ts>2019-09-25 18:55:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>supreeth.venkatesh</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6561</commentid>
    <comment_count>0</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:19:38 +0000</bug_when>
    <thetext>Migrated from mantis 1915 (https://mantis.uefi.org/mantis/view.php?id=1915).

Description	100% - reproducible crash very early on running SerialIOProtocolTest.
The crash has nothing to do to the test itself.
Platform: armv8 64-bit, no graphics console, terminal only; UEFI v2.7, Shell ver. 2.2
 
edk2 Tree hash: f3100a1a2f575e1a0ce4744cb2722e780135b1cf
Sct Tree hash: c25f3260415aab31fd671b21d1ac9201cddec33f
 
Here is the issue in the nutshell.
 
1.	The Execute.c ExecuteTestCase calls ExecuteBbTestCase, which in turn opens gEfiSerialIoProtocol exclusively (hardcoded attributes 0x00000020).
2.	CoreOpenProtocol finds out that attributes are “By driver”, so it forces disconnection of the protocol and calls CoreDisconnectController.
3.	CoreDisconnectController finds the driver used to own the protocol, and forces it to stop binding. In this case it is TerminalDriverBindingStop.
4.	TerminalDriverBindingStop frees memory pool where real console output protocol details (function pointers) were stored (at FreePool (TerminalDevice on line 986 Terminal.c)
5.	ExecuteBbTestCase tries to print (line 1205 Execute.c: SctPrint (L&quot; Protocol test: %s\n&quot;, ExecuteInfo-&gt;TestCase-&gt;Name));
6.	This gets down to ConsoleLogger of Shell app which tries to use invalid real console output() pointer destroyed at step 4.
7.	UEFI crashes at ConsoleLogger.c, line 611, function ConsoleLoggerOutputStringSplit trying to use invalid OutputString method 
Status = ConsoleInfo-&gt;OldConOut-&gt;OutputString (ConsoleInfo-&gt;OldConOut, (CHAR16*)String);

Steps To Reproduce	
cd sct
sct -u
unselect everything (if selected), then enter ConsoleSupportTest and check &quot;SerialIOProtocolTest&quot;. Hit F9 to run.
Expect UEFI crash very early at common test preparation phase on attempt to print a string, due to Terminal protocol was unbound, and function pointers are invalid by the moment when Execute.c wants to SctPrint some initial info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6857</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:25:52 +0000</bug_when>
    <thetext>supreeth.venkatesh@arm.com, please help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9816</commentid>
    <comment_count>2</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-25 18:55:45 +0000</bug_when>
    <thetext>This issue is not reproducible with edk2-test-stable201904.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1065</bug_id>
          
          <creation_ts>2018-07-27 02:34:51 +0000</creation_ts>
          <short_desc>Dead code and inf redundant definitions in SecurityPkg</short_desc>
          <delta_ts>2019-05-17 15:53:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>chen.a.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch>f4c8c1bbf1698ddc0939178dddd7587cbdbb29c7</cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4439</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:34:51 +0000</bug_when>
    <thetext>Uefi-aware compiler found many modules have dead code and redundant definitions in the SecurityPkg. Please see the detail info in the attachment log. We need to clean them.

Because the module number is big, I report them all together by package in this tracker and don&apos;t by modules separately. 

Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and wrongly report it as dead code. Please verify them carefully if the module have assemble code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4440</commentid>
    <comment_count>1</comment_count>
      <attachid>193</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:35:45 +0000</bug_when>
    <thetext>Created attachment 193
X64 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4441</commentid>
    <comment_count>2</comment_count>
      <attachid>194</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:36:52 +0000</bug_when>
    <thetext>Created attachment 194
IA32 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4498</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 21:47:10 +0000</bug_when>
    <thetext>bug scrub: assign it to Chao</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5808</commentid>
    <comment_count>4</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2018-12-10 03:09:26 +0000</bug_when>
    <thetext>Already fix, commit-id: f4c8c1bbf1698ddc0939178dddd7587cbdbb29c7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5810</commentid>
    <comment_count>5</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2018-12-10 03:10:42 +0000</bug_when>
    <thetext>*** Bug 1038 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5812</commentid>
    <comment_count>6</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2018-12-10 03:11:23 +0000</bug_when>
    <thetext>*** Bug 1037 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5946</commentid>
    <comment_count>7</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2018-12-24 01:41:36 +0000</bug_when>
    <thetext>The patch already check-in, commit-id: f4c8c1bbf1698ddc0939178dddd7587cbdbb29c7

BZ1037 and BZ1038 are duplicated from this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7614</commentid>
    <comment_count>8</comment_count>
      <attachid>194</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:08:20 +0000</bug_when>
    <thetext>Comment on attachment 194
IA32 build log for dead code and inf redundant definitions

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7615</commentid>
    <comment_count>9</comment_count>
      <attachid>193</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:08:22 +0000</bug_when>
    <thetext>Comment on attachment 193
X64 build log for dead code and inf redundant definitions

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7616</commentid>
    <comment_count>10</comment_count>
      <attachid>193</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:08:40 +0000</bug_when>
    <thetext>Comment on attachment 193
X64 build log for dead code and inf redundant definitions

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7617</commentid>
    <comment_count>11</comment_count>
      <attachid>194</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:08:49 +0000</bug_when>
    <thetext>Comment on attachment 194
IA32 build log for dead code and inf redundant definitions

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7619</commentid>
    <comment_count>12</comment_count>
      <attachid>326</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:09:16 +0000</bug_when>
    <thetext>Created attachment 326
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7626</commentid>
    <comment_count>13</comment_count>
      <attachid>326</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:10:29 +0000</bug_when>
    <thetext>Comment on attachment 326
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7627</commentid>
    <comment_count>14</comment_count>
      <attachid>326</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:10:36 +0000</bug_when>
    <thetext>Comment on attachment 326
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7678</commentid>
    <comment_count>15</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 15:53:24 +0000</bug_when>
    <thetext>change back to chao.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>193</attachid>
            <date>2018-07-27 02:35:45 +0000</date>
            <delta_ts>2019-05-17 13:08:40 +0000</delta_ts>
            <desc>X64 build log for dead code and inf redundant definitions</desc>
            <filename>John</filename>
            <type>text/plain</type>
            <size>1480</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>194</attachid>
            <date>2018-07-27 02:36:52 +0000</date>
            <delta_ts>2019-05-17 13:08:49 +0000</delta_ts>
            <desc>IA32 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_IA32.txt</filename>
            <type>text/plain</type>
            <size>1480</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>326</attachid>
            <date>2019-05-17 13:09:16 +0000</date>
            <delta_ts>2019-05-17 13:10:36 +0000</delta_ts>
            <desc>data</desc>
            <filename>John</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1366</bug_id>
          
          <creation_ts>2018-11-29 11:03:27 +0000</creation_ts>
          <short_desc>Remove usage of deprecated macros CPU_FEATURE_BEFORE and CPU_FEATURE_AFTER</short_desc>
          <delta_ts>2020-03-04 00:07:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5722</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-29 11:03:27 +0000</bug_when>
    <thetext>Since the introduction of CPU_FEATURE_THREAD_BEFORE and CPU_FEATURE_THREAD_AFTER, the same value but deprecated macro CPU_FEATURE_BEFORE and CPU_FEATURE_AFTER should be avoided to be used in UefiCpuPkg code.
And better to update all non-UefiCpuPkg code to avoid using this two deprecated macros as well. So that the two macros can be removed completely to avoid confusion, providing a clean/easy-to-understand API interfaces.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5771</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:12:56 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8320</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-07-02 04:57:28 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11514</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2020-03-04 00:07:59 +0000</bug_when>
    <thetext>Fixed @ 707e6be745e6e00ea60aa57651fc64cc312e10bb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1804</bug_id>
          
          <creation_ts>2019-05-13 22:47:25 +0000</creation_ts>
          <short_desc>BaseTools: Add a checking for Sources section in INF file</short_desc>
          <delta_ts>2019-08-14 10:35:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1875</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7517</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-13 22:47:25 +0000</bug_when>
    <thetext>In the EdkII INF spec 3.9, it states, All HII Unicode format files must be listed in this section as well as any other &quot;source&quot; type
file, such as local module header files, Vfr files, etc.

BaseTool need to add a check function to check if [Sources] section lists all the &quot;source&quot; type files of a module.

Create a new script under BaseTools/Scripts to do this check would be fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7535</commentid>
    <comment_count>1</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-14 17:52:59 +0000</bug_when>
    <thetext>Assigned to me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7536</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-14 17:54:31 +0000</bug_when>
    <thetext>I have an implementation that can be done in BaseTools during build that has a minimal impact to performance. I will send patch to mailing list once done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7721</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:57:03 +0000</bug_when>
    <thetext>Commit # a7ef158b07524f9afd0cefa3180aeac0fcb6e436</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7723</commentid>
    <comment_count>4</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:58:52 +0000</bug_when>
    <thetext>Moved wrong bug to resolved, reopening. Ignore commit hash above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7725</commentid>
    <comment_count>5</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 15:09:18 +0000</bug_when>
    <thetext>Link to patch in mailing list:
https://edk2.groups.io/g/devel/message/41150</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8165</commentid>
    <comment_count>6</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-06-24 13:16:12 +0000</bug_when>
    <thetext>Commited:
[1/2] 48b0bf6476a215a8e399af3c5905c17f94f2c63d
[2/2] 1fa6699e6cd4ff7c8f830958f8c26d1eb368a4a7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8646</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-30 21:36:58 +0000</bug_when>
    <thetext>I find some wrong report for CryptoPkg\Library\OpensslLib\OpensslLib.inf. The below message is reported to build OpensslLib. But, Library/OpensslLib/openssl/include directory is defined in CryptoPkg\CryptoPkg.dec in [Includes.Common.Private] section. The files in the package level include directory are not required to be specified in [Sources] section in module INF. So, this warning message is not required. 

    Local Header: d:\allpkg\edk2\cryptopkg\library\openssllib\openssl\include\openssl\rsaerr.h not found in d:\allpkg\edk2\CryptoPkg\Library\OpensslLib\OpensslLib.inf
build: : warning: Module MetaFile [Sources] is missing local header!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8670</commentid>
    <comment_count>8</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-07-31 13:43:56 +0000</bug_when>
    <thetext>I wrongly assumed that Package Includes were included in the meta file sources list. I will send a patch that excludes headers covered by the package includes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8671</commentid>
    <comment_count>9</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-07-31 14:02:19 +0000</bug_when>
    <thetext>Patch for fix: https://edk2.groups.io/g/devel/message/44691</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8685</commentid>
    <comment_count>10</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-08-01 11:35:03 +0000</bug_when>
    <thetext>New Patch: https://edk2.groups.io/g/devel/message/44799</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8958</commentid>
    <comment_count>11</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-08-12 11:34:48 +0000</bug_when>
    <thetext>New Patch v3: https://edk2.groups.io/g/devel/message/45460</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9001</commentid>
    <comment_count>12</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-08-14 10:35:14 +0000</bug_when>
    <thetext>Commit Hash: 82407bd129dca8ec6d96e85f541b0974c8d7e087</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1175</bug_id>
          
          <creation_ts>2018-09-14 03:55:31 +0000</creation_ts>
          <short_desc>UDF partition show No file system info in Bios Setup</short_desc>
          <delta_ts>2018-10-23 02:28:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi.Jiang">wenyi.jiang</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>paulo</cc>
    
    <cc>pcacjr</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4970</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-09-14 03:55:31 +0000</bug_when>
    <thetext>Because USB disk with UDF 2.50 file system cannot be mapped in shell,  I run this test with UDF 2.01 file system.


The method of creating UDF USB disk is as follows:

1). Plug a USB disk in the client computer;

2).Open CMD as an administrator under  Windows OS environment.The command is :&quot;format e: /fs:UDF /q&quot;

Reproduce Steps:
1. Copy an Shell 1.0  &quot;Shell_Full.efi&quot; from &quot;EdkShellBinPkg\FullShell&quot; 
  to the USB disk (you can choose the .efi for IA32 or X64 test)
  and creat directory &quot;\EFI\Boot\&quot; in the root directory of USB disk. 
  Rename the Shell_Full.efi (X64 or IA32 version) to be BootX64.efi (or BootIA32.efi) and copy it to &quot;\EFI\Boot\&quot;
2. Plug the UDF USB disk into test machine.
3. Boot to Setup, Enter Boot Maintenance Manager &gt; Advanced boot option &gt; 
Boot from file.
4. Find that it show NO File System info of UDF partition.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5028</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:28:46 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5061</commentid>
    <comment_count>2</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-09-24 09:20:58 +0000</bug_when>
    <thetext>I&apos;ll have a look as soon as I can.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5241</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-12 01:41:09 +0000</bug_when>
    <thetext>(In reply to Paulo Alcantara from comment #2)
&gt; I&apos;ll have a look as soon as I can.

Hi Paulo,

Turns out that for this issue, the UdfGetInfo() needs to handle the case when &quot;InformationType&quot; equals &quot;gEfiFileSystemVolumeLabelInfoIdGuid&quot;.

For this case, the GetInfo() service needs to return the &quot;Volume Label&quot; for the media. The &quot;Volume Label&quot; actually is just the part of the information provided when &quot;InformationType&quot; is &quot;gEfiFileSystemInfoGuid&quot; (already handled by UdfGetInfo()). So the fix should be straight-forward.

I think I will handle this. 

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5252</commentid>
    <comment_count>4</comment_count>
    <who name="Paulo Alcantara">paulo</who>
    <bug_when>2018-10-13 10:25:13 +0000</bug_when>
    <thetext>Hi,

(In reply to Hao Wu from comment #3)
&gt; (In reply to Paulo Alcantara from comment #2)
&gt; &gt; I&apos;ll have a look as soon as I can.
&gt; Turns out that for this issue, the UdfGetInfo() needs to handle the case
&gt; when &quot;InformationType&quot; equals &quot;gEfiFileSystemVolumeLabelInfoIdGuid&quot;.

Cool! Didn&apos;t know about that GUID.

&gt; For this case, the GetInfo() service needs to return the &quot;Volume Label&quot; for
&gt; the media. The &quot;Volume Label&quot; actually is just the part of the information
&gt; provided when &quot;InformationType&quot; is &quot;gEfiFileSystemInfoGuid&quot; (already handled
&gt; by UdfGetInfo()). So the fix should be straight-forward.

Looks good to me.

&gt; I think I will handle this. 

Great.

Thanks!
Paulo</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5356</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-23 02:28:54 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/32698a8f013140b8f77f18a03c64c40ba04c2e18</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1599</bug_id>
          
          <creation_ts>2019-03-07 20:56:35 +0000</creation_ts>
          <short_desc>bld_vlv.sh isn&apos;t `set -e` and doesn&apos;t check if commands completed successfully</short_desc>
          <delta_ts>2019-07-12 20:42:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard Max</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>michael.d.kinney</cc>
    
    <cc>yi.qian</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zailiang.sun</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6646</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-03-07 20:56:35 +0000</bug_when>
    <thetext>bld_vlv.sh tries to keep going despite previous commands failing: it&apos;s not `set -e` and doesn&apos;t check that commands succeed. For example, if &apos;build&apos; fails, &apos;cat&apos; will still run:

cp -f $WORKSPACE/$BUILD_PATH/FV/VLV.fd  $WORKSPACE/$BIOS_Name

echo &gt; $WORKSPACE/$BUILD_PATH/FV/SYSTEMFIRMWAREUPDATECARGO.Fv
build -p $PLATFORM_PACKAGE/PlatformCapsuleGcc.dsc
SEC_VERSION=1.0.2.1060v5
cat $IFWI_HEADER_FILE $SILICON_PATH/Vlv2MiscBinariesPkg/SEC/$SEC_VERSION/VLV_SEC_REGION.bin $SILICON_PATH/Vlv2MiscBinariesPkg/SEC/$SEC_VERSION/Vacant.bin $WORKSPACE/$BIO</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6883</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-22 02:16:14 +0000</bug_when>
    <thetext>zailiang, please help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8445</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-07-12 20:40:00 +0000</bug_when>
    <thetext>Patch email for review for Build_IFWI.sh

https://edk2.groups.io/g/devel/message/43495

Patch email for review for bld_vlv.sh

https://edk2.groups.io/g/devel/message/43503</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8446</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-07-12 20:42:07 +0000</bug_when>
    <thetext>Part of series commit 369c177357..0aed7db096

Build_IFWI.sh:
https://github.com/tianocore/edk2-platforms/commit/0ccf138fd92a03107aafb2108d29d7498ed3520a

bld_vlv.sh:
https://github.com/tianocore/edk2-platforms/commit/535abcb819f1404b7bc9224e4c4565e592e70457</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1085</bug_id>
          
          <creation_ts>2018-08-14 01:19:12 +0000</creation_ts>
          <short_desc>[BaseTools-build_rule]: Add $(INC)-like support when compiling .nasm files</short_desc>
          <delta_ts>2018-12-18 23:54:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1091</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4575</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-08-14 01:19:12 +0000</bug_when>
    <thetext>Within the current \edk2\BaseTools\Conf\build_rule.template, the compile of nasm source files does not have the $(INC) support:

&quot;$(NASM)&quot; -I${s_path}(+) $(NASM_FLAGS) -o $dst ${d_path}(+)${s_base}.iii

The &apos;-I&apos; option only includes the directory of the nasm source file (${s_path}(+)). Hence, it will be impossible for nasm files to include files outside of the nasm source file directory.

As a comparison, the compile of both .s and .asm have $(INC) support in their compile commands.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4588</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-08-15 21:05:50 +0000</bug_when>
    <thetext>assign to Yong hong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4600</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-16 08:38:17 +0000</bug_when>
    <thetext>When this BZ is fixed, the following patches should be completed / extended (incrementally, with new patches) to take advantage of it:

[PATCH v2 0/2] UefiCpuPkg: Add RSB stuffing before RSM instruction

https://lists.01.org/pipermail/edk2-devel/2018-August/028621.html
https://lists.01.org/pipermail/edk2-devel/2018-August/028622.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4613</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-08-16 20:46:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; When this BZ is fixed, the following patches should be completed / extended
&gt; (incrementally, with new patches) to take advantage of it:
&gt; 
&gt; [PATCH v2 0/2] UefiCpuPkg: Add RSB stuffing before RSM instruction
&gt; 
&gt; https://lists.01.org/pipermail/edk2-devel/2018-August/028621.html
&gt; https://lists.01.org/pipermail/edk2-devel/2018-August/028622.html

Thanks Laszlo,

Really appreciate creating the new BZ and creating the dependency here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5464</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:32:50 +0000</bug_when>
    <thetext>change to bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5917</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-18 23:54:07 +0000</bug_when>
    <thetext>the fix already be pushed:
SHA-1: 073a76e662934e0115c6931c4b5d60fa88d933d9 and SHA-1: 7c3a1efd15243df7783c4a5a6be412e99402f5a0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1386</bug_id>
          
          <creation_ts>2018-12-09 08:31:54 +0000</creation_ts>
          <short_desc>[BaseTool] Build failed when there are duplicate structure pcd field value assignment in dsc</short_desc>
          <delta_ts>2018-12-17 21:52:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5798</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-09 08:31:54 +0000</bug_when>
    <thetext>If there are duplicate structure pcd field value assignment in dsc, the build will fail.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5852</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 00:25:25 +0000</bug_when>
    <thetext>patch mail: https://lists.01.org/pipermail/edk2-devel/2018-December/033774.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5906</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-17 21:52:16 +0000</bug_when>
    <thetext>Fixed at SHA-1: 48e890457b06263c1faf04de67652816402f8e06</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1387</bug_id>
          
          <creation_ts>2018-12-09 08:34:08 +0000</creation_ts>
          <short_desc>[BaseTool] Build failed when there are DynamicHii structured PCD.</short_desc>
          <delta_ts>2018-12-17 21:49:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5799</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-09 08:34:08 +0000</bug_when>
    <thetext>If there are DynamicHii Structure PCD used in Dsc file, build will fail.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5853</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 00:25:54 +0000</bug_when>
    <thetext>patch mail: https://lists.01.org/pipermail/edk2-devel/2018-December/033773.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5904</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2018-12-17 21:49:41 +0000</bug_when>
    <thetext>Fixed at 643556fc484397364f92fcfe7aed8abe1c082de0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1822</bug_id>
          
          <creation_ts>2019-05-19 18:38:10 +0000</creation_ts>
          <short_desc>Fix Table Width in Minimum Platform Specification PDF</short_desc>
          <delta_ts>2022-02-15 19:38:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WORKSFORME</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Isaac">isaac.w.oram</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II Minimum Platform Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7701</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-19 18:38:10 +0000</bug_when>
    <thetext>The PDF generated of the EDK II Minimum Platform Specification has some table widths that do not fit on the page. Prior to publication, the PDF formatting was reviewed using a Gitbook PDF generated locally and all the table contents fit in that PDF.

The table contents should be modified such that the tables fit within the width of the document. This will likely involve adding line breaks to force wrapping content in some wide columns.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7756</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-22 23:28:36 +0000</bug_when>
    <thetext>Hi Mike. This needs an owner. I was going to move it to Isaac Oram but I could not find a matching account at this time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9069</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-08-19 17:30:25 +0000</bug_when>
    <thetext>Assign to Isaac Oram</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18372</commentid>
    <comment_count>3</comment_count>
    <who name="Isaac">isaac.w.oram</who>
    <bug_when>2022-02-15 19:38:09 +0000</bug_when>
    <thetext>All of the tables seem to be displaying correctly with Foxit PDF viewer and Chrome browser PDF viewer.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1289</bug_id>
          
          <creation_ts>2018-10-30 11:24:44 +0000</creation_ts>
          <short_desc>[SourceLevelDebugPkg] readme has bad link to UDK Debugger</short_desc>
          <delta_ts>2018-11-07 23:01:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Brian Richardson (Intel)">brian.richardson</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SourceLevelDebugPkg</cf_package>
          
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5437</commentid>
    <comment_count>0</comment_count>
    <who name="Brian Richardson (Intel)">brian.richardson</who>
    <bug_when>2018-10-30 11:24:44 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/tree/master/SourceLevelDebugPkg 

readme.txt still points to uefidk.com (expired domain). Use firmware.intel.com link instead:

https://firmware.intel.com/develop/intel-uefi-tools-and-utilities/intel-uefi-development-kit-debugger-tool</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5497</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 03:22:22 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5537</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-11-07 23:01:54 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/3eacb4751a6879ab2d2a4c1c1b9243fe50b0194c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1722</bug_id>
          
          <creation_ts>2019-04-16 00:43:44 +0000</creation_ts>
          <short_desc>Share code for BaseUefiDecompressLib in MdePkg and BaseUefiTianoCustomDecompressLib in MdeModulePkg</short_desc>
          <delta_ts>2019-05-15 22:44:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-17</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7139</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-04-16 00:43:44 +0000</bug_when>
    <thetext>Currently there are lots of common codes in BaseUefiDecompressLib in MdePkg and BaseUefiTianoCustomDecompressLib in MdeModulePkg. We may merger these two Libs to reduce codes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7190</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:08:13 +0000</bug_when>
    <thetext>Liming, please help to send the RFC to community with the propose.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7373</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-05 02:19:30 +0000</bug_when>
    <thetext>Will base on the proposal in the RFC to share the code.

RFC:
https://edk2.groups.io/g/devel/message/39832</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7438</commentid>
    <comment_count>3</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-08 21:12:25 +0000</bug_when>
    <thetext>Plan to fix it in Q2 stable tag</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7575</commentid>
    <comment_count>4</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-05-15 22:44:42 +0000</bug_when>
    <thetext>1. Merge the one in MdeModulePkg to MdePkg via following commit:
 https://github.com/tianocore/edk2/commit/3f0055c8de8ada9f84bb908be9565ebc04a4bfb7

2. Update consumer in edk2 repo via following commit:
https://github.com/tianocore/edk2/commit/805313dbac3aef3e9c5b9a81f1fcfc89d75df731

3. Update consumer in edk2-platform repo via following commits:
https://github.com/tianocore/edk2-platforms/commit/f1b814e443fb670ad4a873c35a18706732e2c629
https://github.com/tianocore/edk2-platforms/commit/7c49034b6e388e94f50b62feede21de7ce2ef3be

4. Remove the one in MdeMoudlePkg via following commit:
https://github.com/tianocore/edk2/commit/bf502ae44919a564d5a51d1b7b000cd9496c7ecf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1104</bug_id>
          
          <creation_ts>2018-08-22 12:10:29 +0000</creation_ts>
          <short_desc>remove EDK build support from BaseTools</short_desc>
          <delta_ts>2019-01-13 20:46:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1103</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4669</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-08-22 12:10:29 +0000</bug_when>
    <thetext>Customers that desire this functionality can use existing BaseTools from a UDK branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4674</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-08-22 21:13:53 +0000</bug_when>
    <thetext>bug scrub: has some dependency with EDKcompatibility package</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4752</commentid>
    <comment_count>2</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-08-29 21:04:29 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5463</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 02:32:36 +0000</bug_when>
    <thetext>change to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6065</commentid>
    <comment_count>4</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-13 20:46:08 +0000</bug_when>
    <thetext>Fixed at
8daa4278e80c70e6caabc525cd122744488253f5
39879ef2677fa5677ecffb1149a4d87372b90ba5
822925013278733ac7f03c35fece2df3e8bc3614</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1016</bug_id>
          
          <creation_ts>2018-07-17 04:27:28 +0000</creation_ts>
          <short_desc>Redundant library class is defined in PiSmmCpuDxeSmm module INF</short_desc>
          <delta_ts>2018-09-21 03:25:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4291</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 04:27:28 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant library class, which is CpuLib, defined in PiSmmCpuDxeSmm module INF file. Need to remove it.

Below is the fix reference:
--- a/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.inf
+++ b/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.inf
@@ -97,7 +97,6 @@
   CpuExceptionHandlerLib
   UefiLib
   DxeServicesTableLib
-  CpuLib
   ReportStatusCodeLib
   SmmCpuFeaturesLib
   PeCoffGetEntryPointLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4330</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 22:34:11 +0000</bug_when>
    <thetext>There is one more redundant library class and guid which are UefiLib and gEfiGlobalVariableGuid. Below is the fix reference:

--- a/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.inf
+++ b/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.inf
@@ -95,9 +95,7 @@
   UefiCpuLib
   SmmCpuPlatformHookLib
   CpuExceptionHandlerLib
-  UefiLib
   DxeServicesTableLib
-  CpuLib
   ReportStatusCodeLib
   SmmCpuFeaturesLib
   PeCoffGetEntryPointLib
@@ -113,7 +111,6 @@

 [Guids]
   gEfiAcpiVariableGuid                     ## SOMETIMES_CONSUMES ## HOB # it is used for S3 boot.
-  gEfiGlobalVariableGuid                   ## SOMETIMES_PRODUCES ## Variable:L&quot;SmmProfileData&quot;
   gEfiAcpi20TableGuid                      ## SOMETIMES_CONSUMES ## SystemTable
   gEfiAcpi10TableGuid                      ## SOMETIMES_CONSUMES ## SystemTable
   gEdkiiPiSmmMemoryAttributesTableGuid     ## CONSUMES ## SystemTable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4360</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:58:25 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4383</commentid>
    <comment_count>3</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 03:42:12 +0000</bug_when>
    <thetext>There is one more redundant library class which is CacheMaintenanceLib. Below is the fix reference:

--- a/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.inf
+++ b/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.inf
@@ -77,7 +77,6 @@
 [LibraryClasses]
   UefiDriverEntryPoint
   UefiRuntimeServicesTableLib
-  CacheMaintenanceLib
   PcdLib
   DebugLib
   BaseLib
@@ -95,9 +94,7 @@
   UefiCpuLib
   SmmCpuPlatformHookLib
   CpuExceptionHandlerLib
-  UefiLib
   DxeServicesTableLib
-  CpuLib
   ReportStatusCodeLib
   SmmCpuFeaturesLib
   PeCoffGetEntryPointLib
@@ -113,7 +110,6 @@

 [Guids]
   gEfiAcpiVariableGuid                     ## SOMETIMES_CONSUMES ## HOB # it is used for S3 boot.
-  gEfiGlobalVariableGuid                   ## SOMETIMES_PRODUCES ## Variable:L&quot;SmmProfileData&quot;
   gEfiAcpi20TableGuid                      ## SOMETIMES_CONSUMES ## SystemTable
   gEfiAcpi10TableGuid                      ## SOMETIMES_CONSUMES ## SystemTable
   gEdkiiPiSmmMemoryAttributesTableGuid     ## CONSUMES ## SystemTable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4501</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-08-03 01:43:33 +0000</bug_when>
    <thetext>The library classses, CpuLib and UefiCpuLib, should not be removed. 
Some necessary functions denfined in CpuLib.h and UefiCpuLib.h are required in the sources.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5050</commentid>
    <comment_count>5</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 03:25:46 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/997731e796f51df57c113dfd966e818622c3d4aa</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1526</bug_id>
          
          <creation_ts>2019-02-12 21:16:46 +0000</creation_ts>
          <short_desc>PatchCheck.py: catch stray space before semicolon</short_desc>
          <delta_ts>2020-05-05 19:08:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6343</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-12 21:16:46 +0000</bug_when>
    <thetext>Commit ade71c52a49d (&quot;IntelFrameworkModulePkg: Fix UEFI and Tiano Decompression logic issue&quot;, 2018-11-11) added the following hunk to &quot;IntelFrameworkModulePkg/Library/BaseUefiTianoCustomDecompressLib/BaseUefiTianoCustomDecompressLib.c&quot;:

+      if (Sd-&gt;mOutBuf &gt;= Sd-&gt;mOrigSize) {
+        goto Done ;

The space character before the semicolon should not be there. &quot;PatchCheck.py&quot; doesn&apos;t catch it however, as of 1a35dd723bbf (&quot;MdeModulePkg/CapsuleApp: Fix potential NULL pointer dereference issue&quot;, 2019-02-12):

$ python BaseTools/Scripts/PatchCheck.py ade71c52a49d
&gt; Checking git commit: ade71c52a49d
&gt; The commit message format is not valid:
&gt;  * Line 5 of commit message is too long.
&gt; https://github.com/tianocore/tianocore.github.io/wiki/Commit-Message-Format
&gt; The code passed all checks.

Please extend &quot;PatchCheck.py&quot; to catch this. Thanks.

Reported-by: Eric Blake &lt;eblake@redhat.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6491</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:20:28 +0000</bug_when>
    <thetext>Assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12388</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:08:17 +0000</bug_when>
    <thetext>Nobody cared enough for 1+ years, closing as WONTFIX due to capacity.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1955</bug_id>
          
          <creation_ts>2019-07-02 17:22:23 +0000</creation_ts>
          <short_desc>pci command for gen 4 devices displays incorrect info</short_desc>
          <delta_ts>2019-09-04 04:00:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Oleksiy">oleksiyy</reporter>
          <assigned_to name="Oleksiy">oleksiyy</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellBinPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8328</commentid>
    <comment_count>0</comment_count>
      <attachid>361</attachid>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-07-02 17:22:23 +0000</bug_when>
    <thetext>Created attachment 361
pci command output for gen 4 device

If use pci command to display information about gen 4 device &quot;Maximum Link Speed&quot; and &quot;Current Link Speed&quot; displayed incorrectly. 

In my particular case bit value of 4 translated into &quot;Unknown&quot; for &quot;Maximum Link Speed&quot; and into &quot;Reserved&quot; for &quot;Current Link Speed&quot; fields.

See attached output.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8422</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:32:00 +0000</bug_when>
    <thetext>Bug Triage: please track this and confirm with the submitter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9398</commentid>
    <comment_count>2</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-08-29 11:14:24 +0000</bug_when>
    <thetext>Can you please update status for this bug?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-09-04 04:00:04 +0000</bug_when>
    <thetext>fixed at adb59b633c12eae334540295092da94736bffa33</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>361</attachid>
            <date>2019-07-02 17:22:23 +0000</date>
            <delta_ts>2019-07-02 17:22:23 +0000</delta_ts>
            <desc>pci command output for gen 4 device</desc>
            <filename>PciGen4.txt</filename>
            <type>text/plain</type>
            <size>55652</size>
            <attacher name="Oleksiy">oleksiyy</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1032</bug_id>
          
          <creation_ts>2018-07-18 21:39:41 +0000</creation_ts>
          <short_desc>Redundant PPI is defined in S3Resume2Pei module INF</short_desc>
          <delta_ts>2018-09-21 03:27:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4322</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 21:39:41 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant PPI, which is gEfiPeiReadOnlyVariable2PpiGuid, defined in S3Resume2Pei module INF file. Need to remove it.


Below is the fix reference:
--- a/UefiCpuPkg/Universal/Acpi/S3Resume2Pei/S3Resume2Pei.inf
+++ b/UefiCpuPkg/Universal/Acpi/S3Resume2Pei/S3Resume2Pei.inf
@@ -79,7 +79,6 @@
   gEdkiiS3SmmInitDoneGuid

 [Ppis]
-  gEfiPeiReadOnlyVariable2PpiGuid               ## CONSUMES
   gEfiPeiS3Resume2PpiGuid                       ## PRODUCES
   gPeiSmmAccessPpiGuid                          ## SOMETIMES_CONSUMES
   gPeiPostScriptTablePpiGuid                    ## SOMETIMES_PRODUCES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4361</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:59:02 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4382</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 03:23:41 +0000</bug_when>
    <thetext>There are also two library classes, which are TimerLib and PrintLib, redundant defined in this INF. So the fix reference should be below:

--- a/UefiCpuPkg/Universal/Acpi/S3Resume2Pei/S3Resume2Pei.inf
+++ b/UefiCpuPkg/Universal/Acpi/S3Resume2Pei/S3Resume2Pei.inf
@@ -53,7 +53,6 @@
   HobLib
   PeiServicesLib
   PeimEntryPoint
-  TimerLib
   BaseLib
   DebugLib
   PcdLib
@@ -64,7 +63,6 @@
   LocalApicLib
   ReportStatusCodeLib
   LockBoxLib
-  PrintLib

 [Guids]
   gEfiBootScriptExecutorVariableGuid            ## SOMETIMES_CONSUMES ## UNDEFINED # LockBox
@@ -79,7 +77,6 @@
   gEdkiiS3SmmInitDoneGuid

 [Ppis]
-  gEfiPeiReadOnlyVariable2PpiGuid               ## CONSUMES
   gEfiPeiS3Resume2PpiGuid                       ## PRODUCES
   gPeiSmmAccessPpiGuid                          ## SOMETIMES_CONSUMES
   gPeiPostScriptTablePpiGuid                    ## SOMETIMES_PRODUCES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5049</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 03:25:14 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/997731e796f51df57c113dfd966e818622c3d4aa</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5052</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-21 03:27:33 +0000</bug_when>
    <thetext>Status:CONFIRMED to RESOLVED</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1427</bug_id>
          
          <creation_ts>2019-01-04 08:43:50 +0000</creation_ts>
          <short_desc>Need to remove code under SecurityPkg\UserIdentification\</short_desc>
          <delta_ts>2019-01-14 23:27:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="chao">chao.b.zhang</reporter>
          <assigned_to name="ChenChen">chen.a.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5986</commentid>
    <comment_count>0</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2019-01-04 08:43:50 +0000</bug_when>
    <thetext>1. UserIdentifyManagerDxe is used to provide UserManagerProtocol. Which are used by DeferImageHandler to decide whether to defer this image with specific Device Path Node. It is a implementation example.
2. UserProfileManagerDxe provide UI setting to manage user profile
3. PwdCredentialProviderDxe &amp; UsbCredentialProviderDxe provides 2 real credential sources. They are implementation examples</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6040</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-10 19:24:00 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6086</commentid>
    <comment_count>2</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2019-01-14 23:27:51 +0000</bug_when>
    <thetext>Fix in edk2 branch, commit-id: 514c55c18597c48e1648b67f85cf25b5984da5cc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1863</bug_id>
          
          <creation_ts>2019-05-30 17:06:00 +0000</creation_ts>
          <short_desc>Need better automation for configuring PCD values for flash addresses</short_desc>
          <delta_ts>2019-07-30 21:12:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Lavanya">lavanya.c.palakshareddy</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>dheeraj_varambally</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7870</commentid>
    <comment_count>0</comment_count>
    <who name="Lavanya">lavanya.c.palakshareddy</who>
    <bug_when>2019-05-30 17:06:00 +0000</bug_when>
    <thetext>Rather than creating hardcoded PCD values for each FSP FV during build time the python scripts should calculate these based on the sizes that are defined in the FspPkg.fdf and the FV offsets defined in PlatformPkg.fdf.Fewer hardcoded PCD values makes the code easier to maintain. There were few instances where these PCDs did not get updated correctly and system did not boot since the FSP baseoffsets were incorrect. 

There are also redundant PCD definitions as follows PcdFspmBaseAddress and PcdFixedFspmBaseAddress both have the same values. These types of multiple definitions that are error prone during integration and hence must be eliminated.All hardcoded FSP PCDs must be consolidated to one place such as FspPkg instead of defining them in multiple places like PlatformPkg.dsc,PlatformPkg.fdf etc.

It is also observed that the FSP build process updates the PlatformPkg.dsc to hardcode the Base Address and sizes for FSPT,FSPM and FSPS base addresses. PlatformPkg.dsc is in the source area and it is preferred that the files in source code directories are not modified.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7871</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 20:06:36 +0000</bug_when>
    <thetext>Lavanya, could you share us an example for us to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7918</commentid>
    <comment_count>2</comment_count>
    <who name="Lavanya">lavanya.c.palakshareddy</who>
    <bug_when>2019-06-03 18:10:22 +0000</bug_when>
    <thetext>Hello Dheeraj,

Can you please provide examples to Yonghong?

@Yonghong: Dheeraj is an engineer from Dell who raised this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7937</commentid>
    <comment_count>3</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-05 12:11:54 +0000</bug_when>
    <thetext>Dheeraj will add comments detailing some of the issues he is seeing and we can discuss further on Thursday&apos;s triage meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7938</commentid>
    <comment_count>4</comment_count>
    <who name="Dheeraj Varambally">dheeraj_varambally</who>
    <bug_when>2019-06-05 16:35:56 +0000</bug_when>
    <thetext>here are some example of PCD values (some of which are duplicates) that we need to make sure is set correctly before integrating FSP into our platform build. Its a maintenance overhead with every drop of Intel reference code to make sure the size and offset PCDs are set for every FSP specific FV. 

In PlatSamplePkg/PlatformPkg.dsc
gIntelFsp2WrapperTokenSpaceGuid.PcdFsptBaseAddress|0xFFEF0000
gIntelFsp2WrapperTokenSpaceGuid.PcdFspmBaseAddress|0xFFEA6000
gPlatformModuleTokenSpaceGuid.PcdFixedFspmBaseAddress|0xFFF00000

Instead of defining the above values the tools should pick them from the platformFlashMap.fdf which is defined by OEM based on the BIOS layout


#=======================================================================================#
DEFINE FLASH_BASE                                                         = 0xFF050000  #
DEFINE FLASH_SIZE                                                         = 0x00FB0000  #
DEFINE FLASH_BLOCK_SIZE                                                   = 0x00001000  #
DEFINE FLASH_NUM_BLOCKS                                                   = 0x00000FB0  #
#=======================================================================================#


SET gPlatformModuleTokenSpaceGuid.PcdFlashFvFspmtSize                     = 0x000E0000  #
SET gPlatformModuleTokenSpaceGuid.PcdFlashFvFspmtOffset                   = 0x00EA0000  # Flash addr (0xFFEF0000 =&gt; 0xFFFCFFFF)

SET gPlatformModuleTokenSpaceGuid.PcdFlashFvFspsSize                      = 0x00090000  #
SET gPlatformModuleTokenSpaceGuid.PcdFlashFvFspsOffset                    = 0x00B50000  # Flash addr (0xFFBA0000 =&gt; 0xFFC2FFFF)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8120</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-19 20:38:47 +0000</bug_when>
    <thetext>To support recovery some of the fixed flash address PCDs may have corresponding Dynamic PCDs so we can do runtime switching.

We will discuss how to make it better.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8627</commentid>
    <comment_count>6</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-07-29 21:04:52 +0000</bug_when>
    <thetext>working on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8644</commentid>
    <comment_count>7</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-07-30 21:12:26 +0000</bug_when>
    <thetext>
Below are commits for open boards to remove the platform DSC patching process.
Internal platforms will switch to this model too.


commit 0757f2ee0e30f37fcb5b02b40dc7daaf824821e0 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Jul 29 18:15:46 2019 +0800

    ClevoOpenBoardPkg: Auto configure Fsp*BaseAddress PCD

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1863

    PcdFsp*BaseAddress now will be updated in FDF basing
    on flash map.
    DSC will only define types of those PCDs and always
    having 0 as default.

    Test: internal platform booted with this patch.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Ankit Sinha &lt;ankit.sinha@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;

commit 4622edd6022a06de3f745693c7a36c536903102f
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Jul 29 17:12:51 2019 +0800

    KabylakeOpenBoardPkg: Auto configure Fsp*BaseAddress PCD

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1863

    PcdFsp*BaseAddress now will be updated in FDF basing
    on flash map.
    DSC will only define types of those PCDs and always
    having 0 as default.

    Test: internal platform booted with this patch.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;

commit cc4432f539bb0b9e48f1703a20ade79d5521b51e
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Jul 29 17:48:35 2019 +0800

    Platform/Intel: Auto configure Fsp*BaseAddress PCD

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1863

    Consume RebaseFspBinBaseAddress.py which will only rebase
    FSP binary without patching platform DSC.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;

commit 2ba762e83d52682574b923272e8d5ca8e00527a3
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Jul 29 17:03:43 2019 +0800

    MinPlatformPkg: Auto configure Fsp*BaseAddress PCD

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1863

    Add python script which will rebase FSP binary without
    patching platform DSC for Fsp*BaseAddress PCDs.
    Those base address PCD will be updated in FDF basing
    on flash map.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1323</bug_id>
          
          <creation_ts>2018-11-12 23:52:43 +0000</creation_ts>
          <short_desc>[Variable]Merge EmuVariable and Real variable driver</short_desc>
          <delta_ts>2019-02-19 05:06:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5571</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-12 23:52:43 +0000</bug_when>
    <thetext>Today there are two DXE variable drivers:
1. MdeModulePkg/Universal/Variable/EmuRuntimeDxe
2. MdeModulePkg/Universal/Variable/RuntimeDxe


Some of the implementations are duplicated. To remove the duplication, we could remove the EmuRuntimeDxe driver and let RuntimeDxe one run in EMU mode in certain environment.

After offline discussion with Star Zeng, we think PcdFlashNvStorageVariableBase(64) can be set to 0 as an indicator of requesting running in EMU mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5775</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:16:39 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5778</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:27:09 +0000</bug_when>
    <thetext>change status to confirmed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5822</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-10 20:12:05 +0000</bug_when>
    <thetext>After make the change, please adds the notes into the update Notes in 
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Notes</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6061</commentid>
    <comment_count>4</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-01-13 10:29:28 +0000</bug_when>
    <thetext>Purpose:
1. Add emulated variable NV mode support in
   MdeModulePkg\Universal\Variable\RuntimeDxe.
   Platform can configure PCD statically (build time) or
   dynamically (boot time) to support emulated variable NV mode.
2. Remove MdeModulePkg\Universal\Variable\EmuRuntimeDxe whose
   most codes are duplicated.

As the PcdFlashNvStorageVariableBase(64) is related to real variable NV storage, we prefer to add a new PCD (support both static and dynamic) to indicate emulated mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6062</commentid>
    <comment_count>5</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-01-13 10:39:10 +0000</bug_when>
    <thetext>Patches for edk2 repo have been sent out at https://lists.01.org/pipermail/edk2-devel/2019-January/034921.html.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6075</commentid>
    <comment_count>6</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-01-14 10:26:02 +0000</bug_when>
    <thetext>Patches for edk2 repo have been sent out at https://lists.01.org/pipermail/edk2-devel/2019-January/035015.html.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6096</commentid>
    <comment_count>7</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-01-15 05:32:31 +0000</bug_when>
    <thetext>V3 Patches for edk2 repo has been sent out at https://lists.01.org/pipermail/edk2-devel/2019-January/035139.html.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6188</commentid>
    <comment_count>8</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-01-23 22:01:28 +0000</bug_when>
    <thetext>There was discussion about ArmVirtXen test result at https://lists.01.org/pipermail/edk2-devel/2019-January/035537.html.
After that patches 1~16 have pushed at https://github.com/tianocore/edk2/compare/62a623...252904.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6189</commentid>
    <comment_count>9</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-01-23 22:11:00 +0000</bug_when>
    <thetext>Patches for edk2-platforms Repo had been set out at https://lists.01.org/pipermail/edk2-devel/2019-January/035203.html, https://lists.01.org/pipermail/edk2-devel/2019-January/035204.html and https://lists.01.org/pipermail/edk2-devel/2019-January/035205.html. And they have been pusehd at https://github.com/tianocore/edk2-platforms/commit/f7036b4af2db7ddb11105936d53b62bdcd9a0358, https://github.com/tianocore/edk2-platforms/commit/b4069053a8a69bddcf399bcbc2f2b79f2170adf3 and https://github.com/tianocore/edk2-platforms/commit/c42640997f97ed2d03cf203ac6ffa7719a32ef00.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6394</commentid>
    <comment_count>10</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-02-19 04:39:45 +0000</bug_when>
    <thetext>Patch 17 has been pushed at   https://github.com/tianocore/edk2/commit/4a7aa8d34a45011132c6fdb8aa903db7183371e2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6397</commentid>
    <comment_count>11</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-02-19 05:06:55 +0000</bug_when>
    <thetext>Add upgrade notes in https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Notes.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1664</bug_id>
          
          <creation_ts>2019-03-25 23:04:40 +0000</creation_ts>
          <short_desc>&quot;Plarform&quot; typo in user-visible string</short_desc>
          <delta_ts>2021-08-18 23:09:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>seth.arnold</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6915</commentid>
    <comment_count>0</comment_count>
    <who name="">seth.arnold</who>
    <bug_when>2019-03-25 23:04:40 +0000</bug_when>
    <thetext>Hello,

File AppPkg/Applications/Sockets/SetHostName/SetHostName.c has a typo:

        Print ( L&quot;WARNING - Plarform does not support permanent storage!\r\n&quot; );

&apos;Plarform&apos; should be &apos;Platform&apos;.

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7604</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:38:16 +0000</bug_when>
    <thetext>jaben, please help on it. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10600</commentid>
    <comment_count>2</comment_count>
    <who name="Philippe Mathieu-Daudé">f4bug</who>
    <bug_when>2019-12-03 01:42:14 +0000</bug_when>
    <thetext>Since commit 964f432b this typo has been moved to edk2-libc.
See https://bugzilla.tianocore.org/show_bug.cgi?id=1734.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16973</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 18:50:00 +0000</bug_when>
    <thetext>Reassign owner

Patch for review:

https://edk2.groups.io/g/devel/message/79542</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16985</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 23:09:25 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore/edk2-libc/commit/a5f02928b93b0706b4ecb73083ca3018dd9089bf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1976</bug_id>
          
          <creation_ts>2019-07-12 14:04:20 +0000</creation_ts>
          <short_desc>Incorrect test for EFI_EVENT_GROUP_MEMORY_MAP_CHANGE</short_desc>
          <delta_ts>2019-09-16 01:51:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Heinrich Schuchardt">xypron.glpk</reporter>
          <assigned_to name="Heinrich Schuchardt">xypron.glpk</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8441</commentid>
    <comment_count>0</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-07-12 14:04:20 +0000</bug_when>
    <thetext>This relates to the test identified by EFI_TEST_EVENTTIMERTASKPRIORITYSERVICESBBTESTCREATEEVENTEX_ASSERTION_007_GUID, implemented in BBTestCreateEventEx_Func_Sub3(), file SctPkg/TestCase/UEFI/EFI/BootServices/EventTimerTaskPriorityServices/BlackBoxTest/EventTimerTaskPriorityServicesBBTestCreateEventEx.c.

When an event is created with CreateEvent() or CreateEventEx() memory has to be allocated. Depending on the implementation in the firmware this may lead to a change of the memory map. In this case CreateEvent() will trigger an event of type EFI_EVENT_GROUP_MEMORY_MAP_CHANGE. The test function does not take this into account which may lead to false positives.

When implementing EVT_SIGNAL_VIRTUAL_ADDRESS_CHANGE in U-Boot I changed the memory allocation from using malloc() to using the boot service AlllocatePool() which allows me to assign EFI_RUNTIME_SERVICES_DATA or EFI_BOOT_SERVICES_DATA memory as needed. This in turn lead to the scenario with false positives as described above.

I suggest to move the initialization of the test buffer (Buffer[]) to after the creation of the events (Event[]).

Best regards

Heinrich Schuchardt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8590</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:41:34 +0000</bug_when>
    <thetext>Bug Triage: Eric or Supreeth, please have a look at this and comment if anything is unclear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9442</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-03 07:25:56 +0000</bug_when>
    <thetext>This commit already tried to fix the problem:

uefi-sct/SctPkg:Fix flaw in BBTestCreateEventEx_Func_Sub3
c093702f98ad3baa2fb9d8a8f8ea62c2c1d22500

But with that patch the system simply hangs while trying to execute the test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9445</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-03 09:28:23 +0000</bug_when>
    <thetext>[PATCH 1/1] uefi-sct/SctPkg: buffer overflow in NotifyFunctionTplEx() 
https://edk2.groups.io/g/devel/message/46708</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9528</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-09 04:46:53 +0000</bug_when>
    <thetext>Eric, could you, please, review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9558</commentid>
    <comment_count>5</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-09 20:24:18 +0000</bug_when>
    <thetext>(In reply to Heinrich Schuchardt from comment #4)
&gt; Eric, could you, please, review the patch.

Yes, I am reviewing on it. and will give you response asap.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9569</commentid>
    <comment_count>6</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-10 04:30:18 +0000</bug_when>
    <thetext>Rework of patch requested:
https://edk2.groups.io/g/devel/message/47063

Heinrich,

Good catch. 
How about to check the notify order before the operation to close all the events created and Free the pages ? 
It doesn&apos;t impact the result because the patch already enhances the index check against the buffer limits. But it will ensure correct execution sequence in the sub3 even the Notification change later. 

With that:  Reviewed-by: Eric Jin &lt;eric.jin@intel.com&gt;

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9624</commentid>
    <comment_count>7</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-11 15:43:09 +0000</bug_when>
    <thetext>Revised patch

https://edk2.groups.io/g/devel/message/47137
[edk2-test] [PATCH v2 1/1] uefi-sct/SctPkg: buffer overflow in NotifyFunctionTplEx()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9666</commentid>
    <comment_count>8</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2019-09-16 01:51:57 +0000</bug_when>
    <thetext>https://edk2.groups.io/g/devel/message/47137
[edk2-test] [PATCH v2 1/1] uefi-sct/SctPkg: buffer overflow in NotifyFunctionTplEx() 
was merged as 7c812553bfe69906b773d08c1e869044683c69a6

https://edk2.groups.io/g/devel/message/47247</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1049</bug_id>
          
          <creation_ts>2018-07-25 04:34:52 +0000</creation_ts>
          <short_desc>Redundant info is defined in MdeModulePkg AcpiPlatformDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:09:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4390</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:34:52 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are two redundant library classes, which are DxeServicesLib and BaseMemoryLib, defined in AcpiPlatformDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Universal/Acpi/AcpiPlatformDxe/AcpiPlatformDxe.inf
+++ b/MdeModulePkg/Universal/Acpi/AcpiPlatformDxe/AcpiPlatformDxe.inf
@@ -36,15 +36,14 @@

 [LibraryClasses]
   UefiLib
-  DxeServicesLib
   PcdLib
-  BaseMemoryLib
   DebugLib
   UefiBootServicesTableLib
   UefiDriverEntryPoint

 [Protocols]
   gEfiAcpiTableProtocolGuid                     ## CONSUMES
+  gEfiFirmwareVolume2ProtocolGuid

 [Pcd]
   gEfiMdeModulePkgTokenSpaceGuid.PcdAcpiTableStorageFile    ## CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4421</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:02 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4930</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:08:43 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4931</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:09:45 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1880</bug_id>
          
          <creation_ts>2019-06-05 01:30:34 +0000</creation_ts>
          <short_desc>QemuVideoDxe driver has a bug that it shouldn’t assume that system is running in VGA alias mode.</short_desc>
          <delta_ts>2020-02-24 12:03:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2555</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marc Chen">marc.w.chen</reporter>
          <assigned_to name="Marc Chen">marc.w.chen</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>marc.w.chen</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7931</commentid>
    <comment_count>0</comment_count>
    <who name="Marc Chen">marc.w.chen</who>
    <bug_when>2019-06-05 01:30:34 +0000</bug_when>
    <thetext>QemuVideoDxe driver has a bug that it shouldn’t assume that system is running in VGA alias mode and enable EFI_PCI_IO_ATTRIBUTE_VGA_IO attribute in QemuVideoControllerDriverStart.

The correct way to do is firstly query the supported attributes, then AND (&amp;&amp;) both VGA_IO and VGA_IO_16. Since the supported attributes should only have VGA_IO or VGA_IO_16 set, the result of AND (&amp;&amp;) is either VGA_IO or VGA_IO_16.
Then the result can be passed to PciIo-&gt;Attributes() to set the attributes.

refer to IntelFrameworkModulePkg/Csm/BiosThunk/VideoDxe/BiosVideo.c: BiosVideoDriverBindingStart() for the correct way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7934</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-05 07:42:13 +0000</bug_when>
    <thetext>v1 patch on the list:
[PATCH] OvmfPkg/QemuVideoDxe: Shouldn&apos;t assume system in VGA alias mode.
http://mid.mail-archive.com/20190605111410.73564-1-marc.w.chen@intel.com
https://edk2.groups.io/g/devel/message/41938

(I&apos;m not setting the status to IN_PROGRESS just yet because I&apos;m not convinced ATM that there is an actual problem with the driver. We&apos;ll discuss that on the list, in the patch thread.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7942</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-06 03:58:07 +0000</bug_when>
    <thetext>v2 patch on the list:
[PATCH v2] OvmfPkg/QemuVideoDxe: Shouldn&apos;t assume system in VGA alias mode.
http://mid.mail-archive.com/20190606074237.81492-1-marc.w.chen@intel.com
https://edk2.groups.io/g/devel/message/41984</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7943</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-06 06:35:40 +0000</bug_when>
    <thetext>Fixed in commit 662bd0da7fd7.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1347</bug_id>
          
          <creation_ts>2018-11-20 04:59:20 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg\Universal\(SectionExtractionDxe|FirmwareVolume\UpdateDriverDxe)</short_desc>
          <delta_ts>2019-07-03 01:51:49 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5654</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-20 04:59:20 +0000</bug_when>
    <thetext>IntelFrameworkModulePkg\Universal\SectionExtractionDxe produces the framework section extraction protocol which is replaced by MdeModulePkg\Universal\SectionExtractionDxe.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5663</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-21 05:27:28 +0000</bug_when>
    <thetext>I had a misunderstanding. The two drivers cannot replace each other.
The one in MdeModulePkg provides GUIDed section extraction capability.
The one in IntelFrameworkModulePkg provides non-GUIDed section extraction capability.
Talked with Liming Gao offline. He suggested to merge IntelFrameworkModulePkg\Universal\FirmwareVolume\FwVolDxe\ and IntelFrameworkModulePkg\Universal\SectionExtractionDxe to one new driver in MdeModulePkg (GUIDed section extraction capability can be directed to GUIDED_SECTION_EXTRACTION protocol).
DXE CORE only provides Firmware Volume read capability.
The new driver provides Firmware Volume read/write capability.

Or we could just remove the FwVolDxe and SectionExtractionDxe in IntelFrameworkModulePkg if we think there is no need of FV write capability.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6421</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:02:40 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7401</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:54:00 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8355</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:51:49 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1686</bug_id>
          
          <creation_ts>2019-04-08 04:33:45 +0000</creation_ts>
          <short_desc>Emulator CPU frequency information displays 0.00 GHZ</short_desc>
          <delta_ts>2019-06-16 20:52:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1877</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Fan Xu">fanx.xu</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>fanx.xu</cc>
    
    <cc>haiyanx.a.li</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>rebecca</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhiguang.liu</cc>
    
    <cc>zhiqiangx.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7016</commentid>
    <comment_count>0</comment_count>
    <who name="Fan Xu">fanx.xu</who>
    <bug_when>2019-04-08 04:33:45 +0000</bug_when>
    <thetext>Boot emulator to setup page.The CPU frequency information displays 0.00 GHZ.
Expected result:don&apos;t display CPU frequency information 0.00 GHZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7019</commentid>
    <comment_count>1</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-04-08 10:35:19 +0000</bug_when>
    <thetext>I&apos;ve also seen this happen under OVMF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7038</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-09 04:06:38 +0000</bug_when>
    <thetext>Hi Rebecca,

under OVMF I see &quot;2.00 GHz&quot;, and I&apos;m surprised that you don&apos;t.

The UpdateFrontPageBannerStrings() function in &quot;MdeModulePkg/Application/UiApp/FrontPage.c&quot; processes, among other things, the Type-4 (processor information) SMBIOS table that it finds first, and translates the CurrentSpeed field to the GHz string you see on the screen with the ConvertProcessorToString() function.

In turn, QEMU&apos;s SMBIOS generator, in function smbios_build_type_4_table(), file &quot;hw/smbios/smbios.c&quot;, sets the &quot;current_speed&quot; field to 2000 MHz.

The QEMU logic dates back to commit 07d01c9c1929 (&quot;smbios: Don&apos;t report unknown CPU speed (fix SVVP regression)&quot;, 2015-01-27), which is part of QEMU v2.3.0. It&apos;s possible that you remember the &quot;0.00 GHz&quot; string from QEMU v2.2.*.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7049</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-04-09 15:59:05 +0000</bug_when>
    <thetext>Laszlo,

I possibly remember it from old Qemu versions, though it also happens now with Bhyve, which I guess doesn&apos;t yet care about filling in all the SMBios tables. I didn&apos;t realize it&apos;s a value that&apos;s provided by the hypervisor.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7199</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:23:51 +0000</bug_when>
    <thetext>Ray, please help to investigate first. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7328</commentid>
    <comment_count>5</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-04-28 21:55:13 +0000</bug_when>
    <thetext>Take this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7481</commentid>
    <comment_count>6</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-09 23:04:07 +0000</bug_when>
    <thetext>bug fixed
https://github.com/tianocore/edk2/commit/ad9df9377028c90154608de5efef628454cb6f83</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7902</commentid>
    <comment_count>7</comment_count>
    <who name="Fan Xu">fanx.xu</who>
    <bug_when>2019-06-02 23:36:03 +0000</bug_when>
    <thetext>The emulator CPU frequency is shown as 1.23 GHz, but it is not expected to display it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7925</commentid>
    <comment_count>8</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-04 14:35:15 +0000</bug_when>
    <thetext>Reopening.

Commit ad9df9377028 (&quot;EmulatorPkg: Change the cpu frequency to a non-zero value&quot;, 2019-05-10) attempted to fix the issue, but it was not sufficient (see comment 7).

Commit 7cea4d71a8a8 (&quot;EmulatorPkg: don&apos;t display the cpu current speed&quot;, 2019-06-04) also references this TianoCore BZ. That commit must me reverted immediately however (I&apos;m about to send a patch for that), because it broke MdeModulePkg/UiApp, regressing a number of platforms.

Therefore this TianoCore BZ has to be fixed after edk2-stable201905 is tagged. The changes may affect both EmulatorPkg and MdeModulePkg (for example a new FeaturePCD sounds plausible), but they must not regress platforms different from EmulatorPkg.

Finally, changing the Status of a BZ from RESOLVED|FIXED to RESOLVED|INVALID only makes sense in the *extraordinarily* special case when (a) we decide that the bug or feature request does not actually apply, *AND* (b) patches already committed for the BZ are irrelevant to the point that they need not even be reverted. In all other cases, some different action must be taken, for example (1) reopening the bug for further changes (which is what I&apos;m doing now) and/or (2) opening a new bug for reverting prior changes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8072</commentid>
    <comment_count>9</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-06-16 20:44:15 +0000</bug_when>
    <thetext>Because Emulator is not a real machine, showing a fake cpu speed is just indicating the function. I don&apos;t think it is necessary to delete it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8073</commentid>
    <comment_count>10</comment_count>
    <who name="xueminyu">xuemin.yuan</who>
    <bug_when>2019-06-16 20:52:29 +0000</bug_when>
    <thetext>OK. Let&apos;s make this issue as known issue. because as Zhiguang&apos;s comment Emulator is virtual platform and we don&apos;t need to configure this info as actual data. QA side will note this behaviour.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1570</bug_id>
          
          <creation_ts>2019-02-27 15:23:05 +0000</creation_ts>
          <short_desc>EFI_AUTHENTICATION_INFO_PROTOCOL test is incomparable with UEFI Spec</short_desc>
          <delta_ts>2021-11-11 09:37:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>supreeth.venkatesh</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6562</commentid>
    <comment_count>0</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:23:05 +0000</bug_when>
    <thetext>Migrated from Mantis 1748 (https://mantis.uefi.org/mantis/view.php?id=1748)

 
Description	
EFI_AUTHENTICATION_INFO_PROTOCOL test in UEFI 2.4B SCT II
is incomparable with UEFI Spec, may cause platform hang.

In UEFI Spec, only Get/Set are defined as below.

typedef struct _EFI_AUTHENTICATION_INFO_PROTOCOL {
EFI_AUTHENTICATION_INFO_PROTOCOL_GET Get;
EFI_AUTHENTICATION_INFO_PROTOCOL_SET Set;
} EFI_AUTHENTICATION_INFO_PROTOCOL;

But in the test code, some undefined interfaces are called.

AuthenticationProtocol-&gt;DumpAll(AuthenticationProtocol); 
AuthenticationProtocol-&gt;CleanAll(AuthenticationProtocol); 

Does anybody know the history of this part in the UEFI Spec? Does Spec have the incomparable change?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6836</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 09:01:20 +0000</bug_when>
    <thetext>change status to confirmed, Eric help to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15873</commentid>
    <comment_count>2</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:53:44 +0000</bug_when>
    <thetext>The bug report refers to UEFI spec 2.4B. Is this still relevant?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17585</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-10-20 04:26:21 +0000</bug_when>
    <thetext>The EFI_AUTHENTICATION_INFO_PROTOCOL is required for handles with the EFI_ISCSI_INITIATOR_NAME_PROTOCOL.

A service DumpAll() is not needed as the Get() service already provides access to a buffer with all authentication nodes and the test framework can dump the nodes if needed.

A service ClearAll() is not needed as the at the end of the test the Set() service can be used to set the authentication information to the original state.

The EDK II implementation of the EFI_AUTHENTICATION_INFO_PROTOCOL just returns EFI_DEVICE_ERROR and EFI_UNSUPPORTED. So this implementation is non-conformant.

According to the UEFI specification the buffer with the authentication information may contain multiple authentication nodes. It does not define how the end of the buffer is marked.

A clarification in the specification is necessary before the EFI_AUTHENTICATION_INFO_PROTOCOL can be correctly implemented and tested at all.

In a change to the specification a GUID for the end node should be defined (possibly 00000000-0000-0000-0000-000000000000). The size of the end node should be defined as 18 (GUID + length field) as no specific authentication data is needed for the end node.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17612</commentid>
    <comment_count>4</comment_count>
    <who name="Samer El-Haj-Mahmoud">samer.el-haj-mahmoud</who>
    <bug_when>2021-10-26 09:59:55 +0000</bug_when>
    <thetext>Submitted UEFI Spec &quot;Code First&quot; bug at: https://bugzilla.tianocore.org/show_bug.cgi?id=3707

Heinrich, can you please put together a proposal for the UEFI spec ECR, based on your last comment?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17730</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:37:36 +0000</bug_when>
    <thetext>Closing after verification.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1066</bug_id>
          
          <creation_ts>2018-07-27 02:41:06 +0000</creation_ts>
          <short_desc>Dead code and inf redundant definitions in ShellPkg</short_desc>
          <delta_ts>2018-09-13 04:46:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4442</commentid>
    <comment_count>0</comment_count>
      <attachid>195</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:41:06 +0000</bug_when>
    <thetext>Created attachment 195
X64 build log for dead code and inf redundant definitions

Uefi-aware compiler found many modules have dead code and redundant definitions in the ShellPkg. Please see the detail info in the attachment log. We need to clean them.

Because the module number is big, I report them all together by package in this tracker and don&apos;t by modules separately. 

Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and wrongly report it as dead code. Please verify them carefully if the module have assemble code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4443</commentid>
    <comment_count>1</comment_count>
      <attachid>196</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:42:29 +0000</bug_when>
    <thetext>Created attachment 196
IA32 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4491</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 20:30:25 +0000</bug_when>
    <thetext>bug scrub: assign it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4526</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-08-09 01:35:12 +0000</bug_when>
    <thetext>The library class PerformanceLib should not be removed because it is used in Dp.C.
Below is the reference:
ShellPkg\DynamicCommand\DpDynamicCommand\Dp.c

Dp uses the &quot;PerformanceLib&quot; to read the measurement records.  line 8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4953</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 04:46:28 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/22cf747fcf75dbfe51e5524ce1f9cf17b19914cd
https://github.com/tianocore/edk2/commit/98257f9820723d81d57548fb193afe41c3da179c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>195</attachid>
            <date>2018-07-27 02:41:06 +0000</date>
            <delta_ts>2018-07-27 02:41:06 +0000</delta_ts>
            <desc>X64 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_X64.txt</filename>
            <type>text/plain</type>
            <size>578</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>196</attachid>
            <date>2018-07-27 02:42:29 +0000</date>
            <delta_ts>2018-07-27 02:42:29 +0000</delta_ts>
            <desc>IA32 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_IA32.txt</filename>
            <type>text/plain</type>
            <size>578</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1486</bug_id>
          
          <creation_ts>2019-01-23 01:52:07 +0000</creation_ts>
          <short_desc>Update TCG spec support info into SecurityPkg</short_desc>
          <delta_ts>2019-01-28 09:53:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="chao">chao.b.zhang</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6181</commentid>
    <comment_count>0</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2019-01-23 01:52:07 +0000</bug_when>
    <thetext>TCG released a series of specs and erratas. 
  Errata for TCG PC Client Platform Firmware Profile Specification for TPM family 2.0 Level 00   --  Version 1.0  Mar 30, 2016
  Errata for TCG EFI Protocol Specification for Family 2.0 level 00
                      --  Version 0.5
TCG ACPI specification -- Version 1.2 revision 8  Aug 18, 2017
  Errata for Physical Presence Interface Specification  
                       -- Version 0.4 Sep 29, 2017

Per investigation, only TCG ACPI spec requires header file update. Others only need to update file header.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6203</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-25 01:16:56 +0000</bug_when>
    <thetext>Assign to Chao.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6218</commentid>
    <comment_count>2</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2019-01-28 09:53:55 +0000</bug_when>
    <thetext>upgrade spec version
SHA-1: 9a00a7164a39467efe7e934e2777377714655e13
SHA-1: b909b8b91d60af91a71e7350089589e905f275e2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1824</bug_id>
          
          <creation_ts>2019-05-20 14:09:12 +0000</creation_ts>
          <short_desc>Add fspapi parameter to Python build scripts</short_desc>
          <delta_ts>2019-05-28 22:05:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7709</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-20 14:09:12 +0000</bug_when>
    <thetext>A parameter called &quot;fspapi&quot; mode is needed to indicate whether the build should use FSP API mode (fspapi == 1) or FSP Dispatch mode (fspapi == 0).

This parameter should set “--pcd gIntelFsp2WrapperTokenSpaceGuid.PcdFspModeSelection”.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7764</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-23 10:27:42 +0000</bug_when>
    <thetext>change to confirmed status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7834</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-28 22:05:10 +0000</bug_when>
    <thetext>commit 44b7a3618a38bf2c1649ebe7a60cb31eb374ae95 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue May 28 15:16:30 2019 +0800

    Platform/Intel: Add fspapi build parameter

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1824

    Going forward FSP Dispatch mode will be default in
    KabylakeOpenBoardPkg and requires fspapi build parameter
    to switch back to FSP API mode.
    When --fspapi given to build python script it will set
    gIntelFsp2WrapperTokenSpaceGuid.PcdFspModeSelection to
    1, otherwise the PCD will be the default value defined
    by each *BoardPkg.

    Test: verified the PCD PcdFspModeSelection can be
          overridden by new build parameter.

    Cc: Agyeman Prince &lt;prince.agyeman@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1723</bug_id>
          
          <creation_ts>2019-04-16 01:27:23 +0000</creation_ts>
          <short_desc>Build cache of binary files fails on MinPlatform Kabylake windows build</short_desc>
          <delta_ts>2022-02-10 21:53:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>steven.shi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7141</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-16 01:27:23 +0000</bug_when>
    <thetext>Reproduce steps:
1. Follow the steps in below link to checkout Kabylake code in workspace: https://github.com/tianocore/edk2-platforms/tree/devel-MinPlatform

2. copy the bld.bat to bld1.bat and append the --hash --binary-destination as below:

        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;copy bld.bat bld1.bat
        --- a/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/bld1.bat
        +++ b/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/bld1.bat
        @@ -109,7 +109,7 @@ goto BUILD_FLAGS_LOOP

         @if %SILENT_MODE% EQU TRUE goto BldSilent

        -call build -n %NUMBER_OF_PROCESSORS% %REBUILD_MODE% %EXT_BUILD_FLAGS%
        +call build -n %NUMBER_OF_PROCESSORS% %REBUILD_MODE% %EXT_BUILD_FLAGS% --hash --binary-destination=C:\steven\BINCACHEDEST

         @if %ERRORLEVEL% NEQ 0 goto BldFail
         @echo.

3. copy the bld.bat to bld2.bat and append the --hash --binary-destination as below:

        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;copy bld.bat bld2.bat
        --- a/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/bld2.bat
        +++ b/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/bld2.bat
        @@ -109,7 +109,7 @@ goto BUILD_FLAGS_LOOP

         @if %SILENT_MODE% EQU TRUE goto BldSilent

        -call build -n %NUMBER_OF_PROCESSORS% %REBUILD_MODE% %EXT_BUILD_FLAGS%
        +call build -n %NUMBER_OF_PROCESSORS% %REBUILD_MODE% %EXT_BUILD_FLAGS% --hash --binary-source=C:\steven\BINCACHEDEST

         @if %ERRORLEVEL% NEQ 0 goto BldFail
         @echo.

4. Clean build with bld1.bat firstly:

        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;cln.bat
        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;GitEdk2MinKabylake.bat
        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;prep.bat
        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;bld1.bat

5. Clean build with bld2.bat again:

        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;cln.bat
        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;GitEdk2MinKabylake.bat
        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;prep.bat
        C:\steven\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;bld2.bat
        ... ...
        Generating FVMICROCODE FV
        #Return Value = 2
        GenFfs: ERROR 0001: Error opening file
          c:\steven\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\X64\MicrocodeUpdates.bin

        ### [&apos;GenFfs&apos;, &apos;-t&apos;, &apos;EFI_FV_FILETYPE_RAW&apos;, &apos;-g&apos;, &apos;197DB236-F856-4924-90F8-CDF12FB875F3&apos;, &apos;-o&apos;, &apos;c:\\steven\\Build\\KabylakeOpenBoardPkg\\KabylakeRvp3\\DEBUG_VS2015x86\\FV\\Ffs\\197DB236-F856-4924-90F8-CDF12FB875F3FVMICROCODE\\197DB236-F856-4924-90F8-CDF12FB875F3.ffs&apos;, &apos;-i&apos;, &apos;c:\\steven\\Build\\KabylakeOpenBoardPkg\\KabylakeRvp3\\DEBUG_VS2015x86\\X64\\MicrocodeUpdates.bin&apos;]
        build.py...
         : error 7000: Failed to generate FFS
        build.py...
         : error 7000: Failed to execute command
        - Failed -</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7143</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-16 03:29:44 +0000</bug_when>
    <thetext>This build failure direct reason is the --binary-destination only save the module level built outputs and not save the platform level output file: C:\steven\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\X64\MicrocodeUpdates.bin. But the Kabylake fdf file edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkg.fdf defines the FV.FvMicrocode to depende on the platform level output file X64/MicrocodeUpdates.bin as below. So when the --binary-source try to recovery the build output files from cache, the FV.FvMicrocode build fail because the X64/MicrocodeUpdates.bin is missing.

        FILE RAW = 197DB236-F856-4924-90F8-CDF12FB875F3 {
          $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/X64/MicrocodeUpdates.bin
        }

If you continue to debug, you will see the the X64/MicrocodeUpdates.bin actually is copied from MicrocodeUpdates module build output folder $(OUTPUT_DIR):

        D:\Project\Edk2Git\workspace\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3&gt;call build -n 4   --hash --binary-destination=C:\steven\BINCACHEDEST -m D:\Project\Edk2Git\workspace\edk2-non-osi\Silicon\Intel\KabylakeSiliconBinPkg\Microcode\MicrocodeUpdates.inf
        Build environment: Windows-10-10.0.16299-SP0
        Build start time: 14:38:57, Apr.16 2019

        WORKSPACE        = d:\project\edk2git\workspace
        PACKAGES_PATH    = d:\project\edk2git\workspace\edk2-platforms\platform\intel;d:\project\edk2git\workspace\edk2-platforms\silicon\intel;d:\project\edk2git\workspace\edk2-non-osi\silicon\intel;d:\project\edk2git\workspace\fsp;d:\project\edk2git\workspace\edk2;d:\project\edk2git\workspace
        EDK_TOOLS_PATH   = d:\project\edk2git\workspace\edk2\basetools
        CONF_PATH        = d:\project\edk2git\workspace\conf
        PYTHON_COMMAND   = py -3
        Architecture(s)  = IA32 X64
        Build target     = DEBUG
        Toolchain        = VS2015x86
        Active Platform          = d:\project\edk2git\workspace\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkg.dsc
        Active Module            = d:\project\edk2git\workspace\edk2-non-osi\Silicon\Intel\KabylakeSiliconBinPkg\Microcode\MicrocodeUpdates.inf
        Flash Image Definition   = d:\project\edk2git\workspace\edk2-platforms\Platform\Intel\KabylakeOpenBoardPkg\KabylakeRvp3\OpenBoardPkg.fdf
        Processing meta-data ................ done!
        Generating code . done!
        Generating makefile . done!
        Building ... d:\project\edk2git\workspace\edk2-non-osi\Silicon\Intel\KabylakeSiliconBinPkg\Microcode\MicrocodeUpdates.inf [X64]
                &quot;GenFw&quot; -o d:\project\edk2git\workspace\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\X64\KabylakeSiliconBinPkg\Microcode\MicrocodeUpdates\OUTPUT\MicrocodeUpdates.bin -j d:\project\edk2git\workspace\edk2-non-osi\Silicon\Intel\KabylakeSiliconBinPkg\Microcode\mC0406E3_000000A0.mcb  d:\project\edk2git\workspace\edk2-non-osi\Silicon\Intel\KabylakeSiliconBinPkg\Microcode\m80406E8_00000026.mcb  d:\project\edk2git\workspace\edk2-non-osi\Silicon\Intel\KabylakeSiliconBinPkg\Microcode\mC0806E9_00000030.mcb
                copy /y d:\project\edk2git\workspace\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\X64\KabylakeSiliconBinPkg\Microcode\MicrocodeUpdates\OUTPUT\MicrocodeUpdates.bin d:\project\edk2git\workspace\Build\KabylakeOpenBoardPkg\KabylakeRvp3\DEBUG_VS2015x86\X64\MicrocodeUpdates.bin
                1 file(s) copied.
        - Done -
        Build end time: 14:39:16, Apr.16 2019
        Build total time: 00:00:20

You might continue to ask why not change the Kabylake fdf file and let the FV.FvMicrocode depende on the OUTPUT\MicrocodeUpdates.bin file in the module output folder? This way can also remove the extra copy action in the build_rule.template:

        [Microcode-Binary-File]
            &lt;InputFile&gt;
                *.mcb
            &lt;ExtraDependency&gt;
                $(MAKE_FILE)
            &lt;OutputFile&gt;
                $(OUTPUT_DIR)(+)$(MODULE_NAME).bin
            &lt;Command&gt;
                &quot;$(GENFW)&quot; -o ${dst} -j $(MICROCODE_BINARY_FILES) $(GENFW_FLAGS)
                -$(CP) ${dst} $(BIN_DIR)(+)$(MODULE_NAME_GUID).bin

All is because of a fdf file limitation that fdf file doesn&apos;t support generally specify a path file to module level, like the $(OUTPUT_DIR) in build_rule.template. In this case, the $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/X64/MicrocodeUpdates.bin in fdf has to been changed to like below:

      FILE RAW = 197DB236-F856-4924-90F8-CDF12FB875F3 {
       $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/X64/KabylakeSiliconBinPkg/Microcode/MicrocodeUpdates/OUTPUT/MicrocodeUpdates.bin
      }

You can see above file path is very ugly and hardcode the &apos;OUTPUT&apos; name of temp build folder in fdf file. So, we need support the Macros like $(OUTPUT_DIR),$(DEBUG_DIR),$(BUILD_DIR),$(BIN_DIR),$(FV_DIR) in fdf or even dsc files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7144</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-16 04:10:07 +0000</bug_when>
    <thetext>Anyway, below patch can fix this issue:

diff --git a/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.fdf b/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.fdf
index dc2a5d7e12..86feef6773 100644
--- a/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.fdf
+++ b/Platform/Intel/KabylakeOpenBoardPkg/KabylakeRvp3/OpenBoardPkg.fdf
@@ -210,7 +210,7 @@ READ_LOCK_CAP      = TRUE
 READ_LOCK_STATUS   = TRUE

 FILE RAW = 197DB236-F856-4924-90F8-CDF12FB875F3 {
-  $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/X64/MicrocodeUpdates.bin
+  $(OUTPUT_DIRECTORY)/$(TARGET)_$(TOOL_CHAIN_TAG)/X64/KabylakeSiliconBinPkg/Microcode/MicrocodeUpdates/OUTPUT/MicrocodeUpdates.bin
 }

 [FV.FvPreMemory]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7168</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-17 20:47:37 +0000</bug_when>
    <thetext>Steven will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7322</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-28 03:40:26 +0000</bug_when>
    <thetext>Because Kabylake microcode file is .mcb type, e.g. m80406E8_00000026.mcb. We can also enhance the BaseTool AutoGen to add .mcb as binary type to fix this issue. Below is a reference fix:

diff --git a/BaseTools/Source/Python/AutoGen/AutoGen.py b/BaseTools/Source/Python/AutoGen/AutoGen.py

@@ -3925,9 +3925,9 @@ class ModuleAutoGen(AutoGen):
         # If library or Module is binary do not skip by hash
         if self.IsBinaryModule:
             return False
-        # .inc is contains binary information so do not skip by hash as well
+        # .inc and .mcb is contains binary information so do not skip by hash as well
         for f_ext in self.SourceFileList:
-            if &apos;.inc&apos; in str(f_ext):
+            if &apos;.inc&apos; in str(f_ext) or &apos;.mcb&apos; in str(f_ext):
                 return False
         FileDir = path.join(GlobalData.gBinCacheSource, self.PlatformInfo.Name, self.BuildTarget + &quot;_&quot; + self.ToolChain, self.Arch, self.SourceDir, self.MetaFile.BaseName)
         HashFile = path.join(FileDir, self.Name + &apos;.hash&apos;)
@@ -4138,9 +4138,9 @@ class ModuleAutoGen(AutoGen):
         # If library or Module is binary do not skip by hash
         if self.IsBinaryModule:
             return False
-        # .inc is contains binary information so do not skip by hash as well
+        # .inc or &apos;.mcb&apos; is contains binary information so do not skip by hash as well
         for f_ext in self.SourceFileList:
-            if &apos;.inc&apos; in str(f_ext):
+            if &apos;.inc&apos; in str(f_ext) or &apos;.mcb&apos; in str(f_ext):
                 return False
         if GlobalData.gUseHashCache:
             # If there is a valid hash or function generated a valid hash; function will return False</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7574</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-15 22:14:48 +0000</bug_when>
    <thetext>some dependences:

https://bugzilla.tianocore.org/show_bug.cgi?id=1768 
https://bugzilla.tianocore.org/show_bug.cgi?id=1765</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7664</commentid>
    <comment_count>6</comment_count>
      <attachid>349</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:16:22 +0000</bug_when>
    <thetext>Created attachment 349
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7670</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 15:47:25 +0000</bug_when>
    <thetext>change it back to steven</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18323</commentid>
    <comment_count>8</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2022-02-10 21:53:14 +0000</bug_when>
    <thetext>No need to fix it. Pls reopen it if there is new need.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>349</attachid>
            <date>2019-05-17 13:16:22 +0000</date>
            <delta_ts>2019-05-17 13:16:22 +0000</delta_ts>
            <desc>data</desc>
            <filename>file_1723.txt</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1622</bug_id>
          
          <creation_ts>2019-03-14 10:43:52 +0000</creation_ts>
          <short_desc>Basetool: Do Make cleanall command under Basetools/Source/C folder failed</short_desc>
          <delta_ts>2019-04-09 01:45:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6719</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-14 10:43:52 +0000</bug_when>
    <thetext>nmake cleanall

Microsoft (R) Program Maintenance Utility Version 14.00.24210.0
Copyright (C) Microsoft Corporation.  All rights reserved.

C:\Python37\python.exe: can&apos;t open file &apos;py&apos;: [Errno 2] No such file or directory
NMAKE : fatal error U1077: &apos;if&apos; : return code &apos;0x2&apos;
Stop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6783</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 21:11:31 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7031</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-09 01:45:35 +0000</bug_when>
    <thetext>Fixed at dbe05cb1c0386b6c6abc32b771499acc28a27520</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1105</bug_id>
          
          <creation_ts>2018-08-22 12:12:16 +0000</creation_ts>
          <short_desc>Remove FatBinPkg from edk2/master</short_desc>
          <delta_ts>2018-10-24 02:06:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>FatBinPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4670</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-08-22 12:12:16 +0000</bug_when>
    <thetext>This is no longer required because FatPkg license is same as rest of EDK II</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4697</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:29:18 +0000</bug_when>
    <thetext>bug scrub: assign to Liming to discuss first. final result may depend on the community discussion result.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5378</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-10-24 02:06:10 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/8a2794f6f3a42bcc878a30565e1db9ac96fdc7cd
https://github.com/tianocore/edk2-platforms/commit/172f4e11b7c29325cb2ddf4f9feeb63f7ccc8f64
https://github.com/tianocore/edk2-platforms/commit/31ffbca1db414dd9b4e0aafb8297e8501a69310d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1507</bug_id>
          
          <creation_ts>2019-02-01 06:02:49 +0000</creation_ts>
          <short_desc>[Vlv2TbltDevicePkg] LIBRARY_CLASS is not correct within Vlv2TbltDevicePkg\Library\I2CLibPei</short_desc>
          <delta_ts>2020-10-28 18:55:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Zailiang Sun">zailiang.sun</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6270</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-01 06:02:49 +0000</bug_when>
    <thetext>The LIBRARY_CLASS field within file \edk2\Vlv2TbltDevicePkg\Library\I2CLibPei\I2CLibPei.inf is not correct.

Should be &apos;I2CLib&apos; rather than &apos;LockBoxLib&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6352</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-13 03:52:09 +0000</bug_when>
    <thetext>Assign to zailiang</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14142</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-10-28 18:55:04 +0000</bug_when>
    <thetext>This library is no longer present.

Closing the issue.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1937</bug_id>
          
          <creation_ts>2019-06-25 23:36:12 +0000</creation_ts>
          <short_desc>Enable new MM MP Protocol</short_desc>
          <delta_ts>2019-11-28 08:50:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2388</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8194</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-06-25 23:36:12 +0000</bug_when>
    <thetext>PI spec 1.5 introduced new MM MP protocol. This protocol fixes some gap in the current code base. Submit this feature request to enable this feature in EDK2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8244</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:19:02 +0000</bug_when>
    <thetext>Eric, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8534</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-22 03:50:12 +0000</bug_when>
    <thetext>SHA-1: 51dd408ae1022e5c9378492451a62b38d5b101c5

* UefiCpuPkg/PiSmmCpuDxeSmm: Enable MM MP Protocol

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1937

Add MM Mp Protocol in PiSmmCpuDxeSmm driver.

Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Regression-tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1017</bug_id>
          
          <creation_ts>2018-07-17 04:30:47 +0000</creation_ts>
          <short_desc>Redundant library class are defined in PiSmmCore module INF</short_desc>
          <delta_ts>2018-09-13 02:19:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4292</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 04:30:47 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant library class, which is DxeServicesLib, defined in PiSmmCore module INF file. Need to remove them.


Below is the fix reference:
--- a/MdeModulePkg/Core/PiSmmCore/PiSmmCore.inf
+++ b/MdeModulePkg/Core/PiSmmCore/PiSmmCore.inf
@@ -66,7 +66,6 @@
   TimerLib
   HobLib
   SmmMemLib
-  DxeServicesLib

 [Protocols]
   gEfiDxeSmmReadyToLockProtocolGuid             ## UNDEFINED # SmiHandlerRegister</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4329</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 22:22:23 +0000</bug_when>
    <thetext>There is also a redundant  protocol defined in the INF.Below is the fix reference:

--- a/MdeModulePkg/Core/PiSmmCore/PiSmmCore.inf
+++ b/MdeModulePkg/Core/PiSmmCore/PiSmmCore.inf
@@ -66,7 +66,6 @@
   TimerLib
   HobLib
   SmmMemLib
-  DxeServicesLib

 [Protocols]
   gEfiDxeSmmReadyToLockProtocolGuid             ## UNDEFINED # SmiHandlerRegister
@@ -90,7 +89,6 @@
   gEfiSmmGpiDispatch2ProtocolGuid               ## SOMETIMES_CONSUMES
   gEfiSmmIoTrapDispatch2ProtocolGuid            ## SOMETIMES_CONSUMES
   gEfiSmmUsbDispatch2ProtocolGuid               ## SOMETIMES_CONSUMES
-  gEfiSmmCpuProtocolGuid                        ## SOMETIMES_CONSUMES
   gEdkiiSmmMemoryAttributeProtocolGuid          ## CONSUMES
   gEfiSmmSxDispatch2ProtocolGuid                ## SOMETIMES_CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4368</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 22:39:11 +0000</bug_when>
    <thetext>bug scrub: assign to module owner to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4942</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:19:56 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1649</bug_id>
          
          <creation_ts>2019-03-21 21:23:45 +0000</creation_ts>
          <short_desc>Need to boot into UEFI Internal Shell directly when run the emulator</short_desc>
          <delta_ts>2019-05-13 00:55:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6869</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-03-21 21:23:45 +0000</bug_when>
    <thetext>Build EmulatorPkg and then boot. The emulator will thrown information &quot;F2 to enter Setup.\n F7 to enter Boot Manager Menu.\n Enter to boot directly.&quot; It will boot into &quot;Boot Manager Menu&quot; even if nothing is done, just like we have already pressed F7. 
Expected result: When we start the emulator, can boot into the first boot option without manual intervention. If the first boot option is UEFI Internal Shell, it will be convenient to user.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6887</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-22 02:29:56 +0000</bug_when>
    <thetext>Ray, please help to check. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7204</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:32:46 +0000</bug_when>
    <thetext>Ray please help to investigate . thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7333</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-04-29 01:23:16 +0000</bug_when>
    <thetext>take this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7482</commentid>
    <comment_count>4</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-09 23:05:23 +0000</bug_when>
    <thetext>bug fixed
https://github.com/tianocore/edk2/commit/0e92957eaa50be08ebbd8f0fd4e989b380704466</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7498</commentid>
    <comment_count>5</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-05-13 00:55:06 +0000</bug_when>
    <thetext>Boot directly to Shell without pressing any buttons.
Enter Setup if press F2.
Enter Boot Manager Menu if press F7.
Boot directly if press ENTER.

edk2: 4ff689d98277c7cb15859e9e922ad5d67e05122e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1527</bug_id>
          
          <creation_ts>2019-02-13 21:02:46 +0000</creation_ts>
          <short_desc>Operands in a bitwise operation have different size in Baselib/String.c</short_desc>
          <delta_ts>2019-02-19 20:22:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6356</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-13 21:02:46 +0000</bug_when>
    <thetext>Operands in a bitwise operation have different size
C:\Klocwork\Source\edk2\MdePkg\Library\BaseLib\String.c:2073 | Base64Decode()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6357</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-13 21:04:00 +0000</bug_when>
    <thetext>Assigned to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6358</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-13 21:35:42 +0000</bug_when>
    <thetext>Ref:
edk2\MdePkg\Library\BaseLib\String.c:2073
  Value |= Chr;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6409</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-19 20:22:18 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/e5bc83f5e7a6c5f48dc10e69fca377d1478fc4dc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1956</bug_id>
          
          <creation_ts>2019-07-02 23:00:16 +0000</creation_ts>
          <short_desc>add a new MODULE_TYPE HOST_APPLICATION in BaseTool</short_desc>
          <delta_ts>2019-08-12 04:40:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1952</dependson>
          <blocked>1962</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Xiaoyu Lu">xiaoyux.lu</reporter>
          <assigned_to name="Xiaoyu Lu">xiaoyux.lu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8329</commentid>
    <comment_count>0</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-07-02 23:00:16 +0000</bug_when>
    <thetext>REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1952

After spec updated, add MODULE_TYPE HOST_APPLICATION to BaseTools.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8419</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:27:50 +0000</bug_when>
    <thetext>Bug Triage: submitter is working on a patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8853</commentid>
    <comment_count>2</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-08-08 00:10:55 +0000</bug_when>
    <thetext>patch v1: https://edk2.groups.io/g/devel/message/43110</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8854</commentid>
    <comment_count>3</comment_count>
    <who name="Xiaoyu Lu">xiaoyux.lu</who>
    <bug_when>2019-08-08 00:11:55 +0000</bug_when>
    <thetext>Push @a79841a0244ab2afd1efc3b9d4cc91e27fa90d71</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8939</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 00:55:03 +0000</bug_when>
    <thetext>This is new feature.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8949</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-12 04:40:08 +0000</bug_when>
    <thetext>This is a feature in BaseTools.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1033</bug_id>
          
          <creation_ts>2018-07-18 21:48:34 +0000</creation_ts>
          <short_desc>Redundant Protocol is defined in DxeMain module INF</short_desc>
          <delta_ts>2018-09-13 02:20:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4323</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 21:48:34 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant Protocol, which is gEfiBlockIoProtocolGuid, defined in DxeMain module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Core/Dxe/DxeMain.inf
+++ b/MdeModulePkg/Core/Dxe/DxeMain.inf
@@ -163,7 +163,6 @@
   gEfiHiiPackageListProtocolGuid                ## SOMETIMES_PRODUCES
   gEfiEbcProtocolGuid                           ## SOMETIMES_CONSUMES
   gEfiSmmBase2ProtocolGuid                      ## SOMETIMES_CONSUMES
-  gEfiBlockIoProtocolGuid                       ## SOMETIMES_CONSUMES

   # Arch Protocols
   gEfiBdsArchProtocolGuid                       ## CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4370</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 22:40:15 +0000</bug_when>
    <thetext>bug scrub: assign to module owner to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4944</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:20:58 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1324</bug_id>
          
          <creation_ts>2018-11-13 09:24:18 +0000</creation_ts>
          <short_desc>tftp download using 65464 block size doesn&apos;t always succeed</short_desc>
          <delta_ts>2019-07-21 00:18:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shaileshwar">smahadevabatla</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>rocky.ni</cc>
    
    <cc>siyuan.fu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-17</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5573</commentid>
    <comment_count>0</comment_count>
    <who name="Shaileshwar">smahadevabatla</who>
    <bug_when>2018-11-13 09:24:18 +0000</bug_when>
    <thetext>-&gt; I was trying tftp download of a 50 MB file using 65464 block size with the following two network scenarios.


1)

FS0:\&gt; ifconfig -l eth1

-----------------------------------------------------------------

name         : eth1
Media State  : Media present
policy       : dhcp
mac addr     : 68:05:CA:0E:78:1A

ipv4 address : 10.7.10.166

subnet mask  : 255.255.252.0

default gateway: 10.7.8.1

  Routes (2 entries):
    Entry[0]
     Subnet : 10.7.8.0
     Netmask: 255.255.252.0
     Gateway: 0.0.0.0
    Entry[1]
     Subnet : 0.0.0.0
     Netmask: 0.0.0.0
     Gateway: 10.7.8.1

DNS server   : 
      10.17.5.10

     192.168.16.10


-----------------------------------------------------------------
 

 
FS0:\&gt; tftp -i eth1 -s 65464 10.18.105.41 50mbfile.txt
Downloading the file &apos;50mbfile.txt&apos;

Unable to download the file &apos;50mbfile.txt&apos; on &apos;eth1&apos; - Time out
 

2) This time both my client and TFTP server are in 10.7.x.x network as opposed to the first case.

      50 MB file download was successful with 65464 block size. 


FS0:\&gt; ifconfig -l eth1

-----------------------------------------------------------------

name         : eth1
Media State  : Media present
policy       : dhcp
mac addr     : 68:05:CA:0E:78:1A

ipv4 address : 10.7.10.166

subnet mask  : 255.255.252.0

default gateway: 10.7.8.1

  Routes (2 entries):
    Entry[0]
     Subnet : 10.7.8.0
     Netmask: 255.255.252.0
     Gateway: 0.0.0.0
    Entry[1]
     Subnet : 0.0.0.0
     Netmask: 0.0.0.0
     Gateway: 10.7.8.1

DNS server   : 
      10.17.5.10

     192.168.16.10


-----------------------------------------------------------------
 


 
FS0:\&gt; tftp -i eth1 -s 65464 10.7.8.81 50mb.txt       
Downloading the file &apos;50mb.txt&apos;
[=======================================&gt;]   50000 Kb


-&gt; Why is that the tftp driver was timing out (for anything above 64 KB for that matter from what I saw) in the first case?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5767</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:09:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5859</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-12-13 03:15:19 +0000</bug_when>
    <thetext>Rocky,

Please try whether we can reproduce the issue.

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5860</commentid>
    <comment_count>3</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2018-12-13 03:30:33 +0000</bug_when>
    <thetext>Jiaxin/Shaileshwar,

We try to reproduce this issue today and the issue can not be reproduced with cross subnet and we transferred a 48.8MB file, we also tried more than 5 times. the file can be downloaded successfully every time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5897</commentid>
    <comment_count>4</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2018-12-17 01:55:06 +0000</bug_when>
    <thetext>Jiaxin/Shaileshwar,

We retried this issue with Windows Server and the issue can be reproduced every time after set block sise to &apos;65464&apos;, seems a bug in TFTP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5898</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-17 01:56:50 +0000</bug_when>
    <thetext>Assign to Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6742</commentid>
    <comment_count>6</comment_count>
    <who name="Shaileshwar">smahadevabatla</who>
    <bug_when>2019-03-18 01:45:03 +0000</bug_when>
    <thetext>Any progress on this?


Thanks,
Shaileshwar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6743</commentid>
    <comment_count>7</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-03-18 04:28:28 +0000</bug_when>
    <thetext>Hi Shaileshwar,

We are planning to resolve the issue before 2019-05-17 (Soft Feature Freeze of edk2-stable201905 tag). 

Rocky, 

Since you can reproduce the issue, can you provide the wireshark package here for the failure case? 

Thanks,
Jiaxin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6744</commentid>
    <comment_count>8</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2019-03-18 04:34:02 +0000</bug_when>
    <thetext>Sure, I will send email to you later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6951</commentid>
    <comment_count>9</comment_count>
    <who name="Rocky">rocky.ni</who>
    <bug_when>2019-04-01 02:05:05 +0000</bug_when>
    <thetext>Hi Shaileshwar,

Can you take a try with latest code base? we can not reproduce this issue in our local test env for now, thanks!

Local env:
TFTP Server： Windows server 2012r2
Router          ：CISCO 1812
Switch           ：TP-link(TL-SQ024T) and Huawei switch(S5720s-28X-LI-AC)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7028</commentid>
    <comment_count>10</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2019-04-08 22:41:37 +0000</bug_when>
    <thetext>Closed since we can&apos;t reproduce the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7125</commentid>
    <comment_count>11</comment_count>
    <who name="Shaileshwar">smahadevabatla</who>
    <bug_when>2019-04-14 00:01:13 +0000</bug_when>
    <thetext>Hi Rocky/Jiaxin,

   Could you please elaborate the fix?



Thanks, 
Shaileshwar</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8523</commentid>
    <comment_count>12</comment_count>
    <who name="Shaileshwar">smahadevabatla</who>
    <bug_when>2019-07-21 00:18:33 +0000</bug_when>
    <thetext>Hi Rocky/Jiaxin,


&gt;&gt; Jiaxin/Shaileshwar,

&gt;&gt; We retried this issue with Windows Server and the issue can be reproduced &gt;&gt; every time after set block sise to &apos;65464&apos;, seems a bug in TFTP.

&gt;&gt; Closed since we can&apos;t reproduce the issue.


   Could you please clarify if you were able to reproduce this issue or not?




Thanks,
Shaileshwar</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1767</bug_id>
          
          <creation_ts>2019-04-29 12:34:15 +0000</creation_ts>
          <short_desc>Replace use of &apos;STATIC&apos; with &apos;static&apos;</short_desc>
          <delta_ts>2020-02-27 12:55:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1766</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
    
    <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>BaseTools</cf_package>
    
    <cf_package>BeagleBoardPkg</cf_package>
    
    <cf_package>CorebootModulePkg</cf_package>
    
    <cf_package>CorebootPayloadPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>DuetPkg</cf_package>
    
    <cf_package>EdkCompatibilityPkg</cf_package>
    
    <cf_package>EdkShellBinPkg</cf_package>
    
    <cf_package>EdkShellPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatBinPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>FmpDevicePkg</cf_package>
    
    <cf_package>IntelFrameworkModulePkg</cf_package>
    
    <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>IntelFspPkg</cf_package>
    
    <cf_package>IntelFspWrapperPkg</cf_package>
    
    <cf_package>IntelSiliconPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>Nt32Pkg</cf_package>
    
    <cf_package>Omap35xxPkg</cf_package>
    
    <cf_package>OptionRomPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>PerformancePkg</cf_package>
    
    <cf_package>QuarkPlatformPkg</cf_package>
    
    <cf_package>QuarkSocPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellBinPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SignedCapsulePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>StandaloneMmPkg</cf_package>
    
    <cf_package>StdLib</cf_package>
    
    <cf_package>StdLibPrivateInternalFiles</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
    
    <cf_package>UnixPkg</cf_package>
    
    <cf_package>Vlv2DeviceRefCodePkg</cf_package>
    
    <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7342</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-29 12:34:15 +0000</bug_when>
    <thetext>Update C code in all packages to use &apos;static&apos; instead of &apos;STATIC&apos;.

This is based on the following email thread:

https://edk2.groups.io/g/devel/topic/patch_v2_3_8/31318888

This C code update also depends on an update to the EDK II C Coding Standard Specification that removes the use of the &apos;STATIC&apos; macro.

This code change is not a high priority, and should be done package at a time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7344</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-29 12:44:57 +0000</bug_when>
    <thetext>Also review all functions and global variables.  If they are not referenced
outside the current C file, then make them &apos;static&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7351</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-29 23:35:12 +0000</bug_when>
    <thetext>zhiguang will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11463</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-27 12:55:08 +0000</bug_when>
    <thetext>The latest commit on the edk2-CCS master branch is f5ad35ec2c6d (&quot;must comment: add rule for documenting spurious variable assignments&quot;, 2019-09-18); as of that commit, the CCS still has two instances of &quot;STATIC&quot;. This means we&apos;ve had no capacity for pre-requisite bug 1766 in 8-9 months, or for this bug. Closing as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1665</bug_id>
          
          <creation_ts>2019-03-26 05:30:34 +0000</creation_ts>
          <short_desc>Build fail when the structure pcd has member of flexible size array</short_desc>
          <delta_ts>2019-04-28 01:32:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6916</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-26 05:30:34 +0000</bug_when>
    <thetext>Build fail when the structure pcd has member of flexible size array. For example

In .h
typedef struct {
  UINT8 Byte;
} TEST_STRUCT;

typedef struct {
  TEST_STRUCT AttributeA[];
} TEST_STRUCT_ARRAY;


In Dec:
  gEfiNt32PkgTokenSpaceGuid.PcdA|{0}|TEST_STRUCT_ARRAY|0x00001018 {
     ...
  }

In Dsc
  gEfiNt32PkgTokenSpaceGuid.PcdA|{0x0}
  gEfiNt32PkgTokenSpaceGuid.PcdA.AttributeA[99].Byte|0x0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6937</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-28 02:46:29 +0000</bug_when>
    <thetext>Assign Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7030</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-09 01:44:22 +0000</bug_when>
    <thetext>change to confirmed since Bob already took it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7313</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-28 01:32:47 +0000</bug_when>
    <thetext>fixed at a004d17d01a9fa5275e902085cc1860c8c18d0f6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1141</bug_id>
          
          <creation_ts>2018-09-03 06:39:17 +0000</creation_ts>
          <short_desc>OVMF fails to boot systemrescuecd / gentoo livecd and many other live cds</short_desc>
          <delta_ts>2018-09-04 15:47:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>pshirshov</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4813</commentid>
    <comment_count>0</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 06:39:17 +0000</bug_when>
    <thetext>The following commands fail (boot process stops in GRUB minimal shell):

sudo qemu-system-x86_64 --enable-kvm -bios ~/edk2/Build/OvmfX64/DEBUG_GCC46/FV/OVMF.fd -m 1G -cdrom /srv/iso/systemrescuecd-x86-5.2.2.iso

sudo qemu-system-x86_64 --enable-kvm -bios ~/edk2/Build/OvmfX64/DEBUG_GCC46/FV/OVMF.fd -m 1G -cdrom /srv/iso/install-amd64-minimal-20180830T214502Z.iso

While these work:

sudo qemu-system-x86_64 --enable-kvm -bios /usr/share/ovmf/OVMF.fd -m 1G -cdrom /srv/iso/ubuntu-18.04.1-live-server-amd64.iso 

sudo qemu-system-x86_64 --enable-kvm -bios /usr/share/ovmf/OVMF.fd -m 1G -cdrom /srv/iso/ubuntu-18.04.1-live-server-amd64.iso 

At the same time all these images work with qemu BIOS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4815</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-03 08:33:26 +0000</bug_when>
    <thetext>Sorry, there&apos;s nothing for me to do, based on the information you gave.

(1) First, you use &quot;-bios&quot;. &quot;-bios&quot; should never be used for launching OVMF on QEMU.

(2) You provide two sets of test cases. From set#1 to set#2, you modify multiple variables: you modify the OVMF firmware image, *and* the installer ISOs.

Namely, in set#1, you seem to be using a hand-built OVMF image -- at an unpsecified commit in the upstream tree at that --, with a &quot;system rescue CD&quot; and a (presumably) Gentoo install CD.

Then in set#2, you use a distro-provided OVMF image (what distro? what version?), with an Ubuntu install CD.

When trying to narrow down an issue, the idea is to perturb as few variables as possible per test, so as to eliminate those variables from the picture that prove irrelevant for the outcome (i.e. which the outcome is independent of).

(3) It&apos;s perfectly possible that the ISO images are not correctly built for UEFI booting. Such mis-built ISO images are quite common. In particular, for UEFI booting, it&apos;s irrelevant what you see in the ISO9660 filesystem when you mount the ISO under Linux or Windows; what matters is the FAT filesystem in the ElTorito boot image that&apos;s embedded in the ISO9660 filesystem.

Anyway, I&apos;ve now downloaded &quot;systemrescuecd-x86-5.2.2.iso&quot; from &lt;http://www.system-rescue-cd.org/Download/&gt; (sha256 sum = 148bfbc16837d3e7ac13556f11b6a600bd6a88e98a8eb3a899d0fe243d826a3f). I can boot it just fine -- the boot process doesn&apos;t stop in GRUB minimal shell. (It stops with  failure to locate &quot;/sysrcd.dat&quot;, but that&apos;s way after the guest kernel has booted.)

I&apos;ve also tried &quot;install-amd64-minimal-20180902T214502Z.iso&quot; from &lt;https://www.gentoo.org/downloads/&gt; (sha256 sum = 6f751ee45af6874e502312107f09ec7779e6bfdec0969039ce8a536feb722c5a). This installer ISO gets past grub just fine as well. It doesn&apos;t seem to run into errors later either; it lands at the LiveCD root shell prompt.

For these I&apos;ve used OVMF as built at 1e57188216b1 (&quot;EmulatorPkg: IoThunk-&gt;Close() is called too early, may causing hang&quot;, 2018-08-31).

I didn&apos;t use your QEMU command lines for testing; instead I&apos;ve added the ISOs to one of my long-standing UEFI domains (that are all managed by libvirt). I suggest retrying with more guest RAM (e.g. 2GB). Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4816</commentid>
    <comment_count>2</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 08:44:19 +0000</bug_when>
    <thetext>&gt; First, you use &quot;-bios&quot;. &quot;-bios&quot; should never be used for launching OVMF on QEMU.


I&apos;ve taken that from official OVMF docs.

Also I&apos;m experiencing exactly the same issue while using any launch method, even virt-manager.

&gt; Then in set#2, you use a distro-provided OVMF image (what distro? what version?), with an Ubuntu install CD.

All the combinations are not functional. I&apos;ve tried both distro-provided ovmf (latest ubuntu one) and handbuilt one. 

Distro one:

ovmf/bionic,now 0~20180205.c0d9813c-2 all [installed]
  UEFI firmware for 64-bit x86 virtual machines

Handbuilt one has been built from revision 1e57188216b1bf8de3473a0e03e422815f8f53d6.

Systemrescuecd/gentoo install cd hashes are the same as yours.

&gt; more RAM
Will try.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4817</commentid>
    <comment_count>3</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 08:52:10 +0000</bug_when>
    <thetext>Tried with 2GB RAM, doesn&apos;t work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4818</commentid>
    <comment_count>4</comment_count>
      <attachid>214</attachid>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 08:52:34 +0000</bug_when>
    <thetext>Created attachment 214
install media uefi issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4819</commentid>
    <comment_count>5</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 08:55:28 +0000</bug_when>
    <thetext>&gt; It&apos;s perfectly possible that the ISO images are not correctly built for UEFI booting. Such mis-built ISO images are quite common. In particular, for UEFI booting, it&apos;s irrelevant what you see in the ISO9660 filesystem when you mount the ISO under Linux or Windows; what matters is the FAT filesystem in the ElTorito boot image that&apos;s embedded in the ISO9660 filesystem.

These images work:

- on all the real machines
- in VMWare ESXi
- in HyperV
- Under Zalman ZM-VE HDD emulator

Seems like Tianocore is the only thing which fails to handle them.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4820</commentid>
    <comment_count>6</comment_count>
      <attachid>215</attachid>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 09:05:09 +0000</bug_when>
    <thetext>Created attachment 215
install media uefi issue: no -bios</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4821</commentid>
    <comment_count>7</comment_count>
      <attachid>216</attachid>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 09:05:25 +0000</bug_when>
    <thetext>Created attachment 216
install media uefi issue: no -bios</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4822</commentid>
    <comment_count>8</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 09:05:44 +0000</bug_when>
    <thetext>Attached two more screenshots, without -bios option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4823</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-03 11:34:42 +0000</bug_when>
    <thetext>(In reply to pshirshov from comment #5)
&gt; &gt; It&apos;s perfectly possible that the ISO images are not correctly built for UEFI booting. Such mis-built ISO images are quite common. In particular, for UEFI booting, it&apos;s irrelevant what you see in the ISO9660 filesystem when you mount the ISO under Linux or Windows; what matters is the FAT filesystem in the ElTorito boot image that&apos;s embedded in the ISO9660 filesystem.
&gt; 
&gt; These images work:
&gt; 
&gt; - on all the real machines
&gt; - in VMWare ESXi
&gt; - in HyperV
&gt; - Under Zalman ZM-VE HDD emulator
&gt; 
&gt; Seems like Tianocore is the only thing which fails to handle them.

We haven&apos;t narrowed it down to TianoCore just yet. First, the images do work on my end; second, in your environment, it&apos;s not just OVMF that differs from the other vendors&apos; guest firmwares, but the platform (QEMU+KVM) on your end also differs from the other tested platforms (bare metal and different VMMs).

What is your host distro, kernel version, and QEMU version? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4824</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-03 11:35:31 +0000</bug_when>
    <thetext>Also, what is your host CPU model?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4825</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-03 11:41:48 +0000</bug_when>
    <thetext>(I see &apos;host doesn&apos;t support requested feature: ... &quot;svm&quot;)&apos;, which is never a good sign. I don&apos;t claim it&apos;s the root cause of the issue, but it suggests you are running on an AMD host CPU, and for some reason QEMU tries to enable nested virtualization (= expose svm to the guest), without you specifying a guest CPU model, or guest CPU flags, explicitly. That looks strange.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4826</commentid>
    <comment_count>12</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 11:55:01 +0000</bug_when>
    <thetext>&gt; What is your host distro, kernel version, and QEMU version? Thanks.

So, this is ubuntu 18.04 LTS with latest updates.

Kernel: Linux vm 4.15.0-33-generic #36-Ubuntu SMP Wed Aug 15 16:00:05 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux

qemu: 

QEMU emulator version 2.11.1(Debian 1:2.11+dfsg-1ubuntu7.4)
Copyright (c) 2003-2017 Fabrice Bellard and the QEMU Project developers

CPU:

processor	: 15
vendor_id	: GenuineIntel
cpu family	: 6
model		: 85
model name	: Intel(R) Xeon(R) Silver 4110 CPU @ 2.10GHz
stepping	: 4
microcode	: 0x200004d
cpu MHz		: 800.048
cache size	: 11264 KB
physical id	: 0
siblings	: 16
core id		: 4
cpu cores	: 8
apicid		: 9
initial apicid	: 9
fpu		: yes
fpu_exception	: yes
cpuid level	: 22
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch cpuid_fault epb cat_l3 cdp_l3 invpcid_single pti intel_ppin ssbd mba ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm cqm mpx rdt_a avx512f avx512dq rdseed adx smap clflushopt clwb intel_pt avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local dtherm ida arat pln pts hwp hwp_act_window hwp_epp hwp_pkg_req pku ospke flush_l1d
bugs		: cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf
bogomips	: 4200.00
clflush size	: 64
cache_alignment	: 64
address sizes	: 46 bits physical, 48 bits virtual
power management:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4827</commentid>
    <comment_count>13</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 11:55:53 +0000</bug_when>
    <thetext>&gt; but it suggests you are running on an AMD host CPU, and for some reason QEMU tries to enable nested virtualization (= expose svm to the guest), without you specifying a guest CPU model, or guest CPU flags, explicitly. That looks strange.)

Nope, this is a mid-level Xeon on brand-new Dell r540 chassis.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4828</commentid>
    <comment_count>14</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 11:57:08 +0000</bug_when>
    <thetext>&gt; without you specifying a guest CPU model, or guest CPU flags, explicitly. That looks strange.)

Same issue when I specify -cpu host</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4829</commentid>
    <comment_count>15</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 11:59:05 +0000</bug_when>
    <thetext>To be more precise, when I specify -cpu host there are no warnings but boot process terminates in the same minimal grub shell :/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4830</commentid>
    <comment_count>16</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 12:24:38 +0000</bug_when>
    <thetext>Maybe something is very wrong with Ubuntu&apos;s qemu or it&apos;s a multi-factor issue.

I&apos;ve tried to install Fedora with qemu onto a virtual machine and boot these ISOs. They worked (without kvm acceleration though).

Will try the same on physical host.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4831</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-03 13:18:10 +0000</bug_when>
    <thetext>(In reply to pshirshov from comment #16)
&gt; Maybe something is very wrong with Ubuntu&apos;s qemu or it&apos;s a multi-factor
&gt; issue.
&gt; 
&gt; I&apos;ve tried to install Fedora with qemu onto a virtual machine and boot these
&gt; ISOs. They worked (without kvm acceleration though).

Right, this is basically a nested virt config, IIUC; L0: Ubuntu, L1: Fedora (with KVM accel from L0), L2: OVMF boot test (with TCG accel from L1).

&gt; Will try the same on physical host.

Thanks!

Another thing that comes to mind and might be worth trying: I notice your QEMU command lines specify &quot;-cdrom&quot;, for launching the ISOs, and that your QEMU version is 2.11.1. Can you try with upstream QEMU 3.0.0, or else (using your current QEMU version) with a virtio-scsi CD-ROM (rather than an IDE CD-ROM)? Maybe there&apos;s an issue in IDE/ATAPI emulation that prevents grub from loading the kernel or initrd. (Such bugs have been found sporadically before.)

Replace &quot;-cdrom blah.iso&quot; with the following:

  -drive id=boot-iso-image,if=none,readonly,format=raw,file=blah.iso \
  -device virtio-scsi-pci,id=scsi0 \
  -device scsi-cd,bus=scsi0.0,drive=boot-iso-image,bootindex=0 \

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4832</commentid>
    <comment_count>18</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 13:25:55 +0000</bug_when>
    <thetext>iSCSI doesn&apos;t work.

Will try 3.0 later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4833</commentid>
    <comment_count>19</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-03 14:30:34 +0000</bug_when>
    <thetext>FWIW, I&apos;ve now built qemu-2.11.1 from the upstream tree, and have tried both &quot;install-amd64-minimal-20180902T214502Z.iso&quot; and &quot;systemrescuecd-x86-5.2.2.iso&quot;, via virtio-scsi CD-ROMs. Both worked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4834</commentid>
    <comment_count>20</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-03 15:08:32 +0000</bug_when>
    <thetext>I guess it&apos;s an ubuntu specific problem. Installing fedora on the same host atm, will report results.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4840</commentid>
    <comment_count>21</comment_count>
    <who name="">pshirshov</who>
    <bug_when>2018-09-04 07:29:20 +0000</bug_when>
    <thetext>So, works on Fedora. Okay, something is broken in ubuntu, such a surprise.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4842</commentid>
    <comment_count>22</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-04 07:44:24 +0000</bug_when>
    <thetext>Thank you for confirming!

I&apos;m updating the BZ resolution to INVALID.

(My preference would be NOTABUG, as the reported issue is not-a-bug in OVMF. However, the TianoCore Bugzilla installation does not offer the NOTABUG resolution. The closest one is INVALID.

FIXED would mean that a patch was submitted and merged, for addressing the issue.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4843</commentid>
    <comment_count>23</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-09-04 15:47:11 +0000</bug_when>
    <thetext>Just for the record:

(1) On my RHEL-7.5 laptop, I installed Ubuntu LTS 18.04.01, from &quot;ubuntu-18.04.1-live-server-amd64.iso&quot;, in a new guest (managed by libvirt).

(2) On my laptop, I enabled nested virtualization (&quot;/etc/modprobe.d/kvm.conf&quot;: &quot;options kvm_intel nested=1&quot;); also added the following to the domain XML:

  &lt;cpu mode=&apos;custom&apos; match=&apos;exact&apos; check=&apos;partial&apos;&gt;
    &lt;model fallback=&apos;allow&apos;&gt;Haswell-noTSX&lt;/model&gt;
    &lt;topology sockets=&apos;1&apos; cores=&apos;3&apos; threads=&apos;1&apos;/&gt;
    &lt;feature policy=&apos;require&apos; name=&apos;vmx&apos;/&gt;
    &lt;feature policy=&apos;require&apos; name=&apos;pcid&apos;/&gt;
    &lt;feature policy=&apos;require&apos; name=&apos;spec-ctrl&apos;/&gt;
    &lt;feature policy=&apos;require&apos; name=&apos;pdpe1gb&apos;/&gt;
  &lt;/cpu&gt;

(&quot;vmx&quot; being the main point here). The RAM size for the guest is 5GB.

(3) The Ubuntu guest installed fine, although OVMF complained about a mis-formatted MBR on &quot;ubuntu-18.04.1-live-server-amd64.iso&quot;:

&gt; PartitionValidMbr: Bad MBR partition size EndingLBA(1856C7) &gt; LastLBA(657FF)

(4) In the domain XML for the Ubuntu guest, I added the Gentoo installer ISO as another virtio-scsi CD-ROM:

    &lt;disk type=&apos;file&apos; device=&apos;cdrom&apos;&gt;
      &lt;driver name=&apos;qemu&apos; type=&apos;raw&apos; cache=&apos;writeback&apos;/&gt;
      &lt;source file=&apos;/mnt/data/isos/iso-other/install-amd64-minimal-20180902T214502Z.iso&apos;/&gt;
      &lt;target dev=&apos;sdc&apos; bus=&apos;scsi&apos;/&gt;
      &lt;readonly/&gt;
      &lt;shareable/&gt;
      &lt;address type=&apos;drive&apos; controller=&apos;0&apos; bus=&apos;0&apos; target=&apos;0&apos; unit=&apos;2&apos;/&gt;
    &lt;/disk&gt;

(5) In the guest OS (Ubuntu), I upgraded the packages (a handful were updated).

(6) Launched QEMU as follows, within the Ubuntu (L1) guest:

qemu-system-x86_64 \
  -nodefaults \
  -no-user-config \
  -nographic \
  \
  -m 2560 \
  -smp 2 \
  -machine pc,accel=kvm \
  \
  -drive if=pflash,format=raw,file=OVMF.4m.fd \
  \
  -debugcon file:ovmf.log \
  -global isa-debugcon.iobase=0x402 \
  \
  -chardev stdio,signal=off,mux=on,id=char0 \
  -mon chardev=char0,mode=readline \
  -serial chardev:char0 \
  \
  -drive id=cdrom,if=none,readonly,cache=none,file=/dev/sr0 \
  -device virtio-scsi,id=scsi0 \
  -device scsi-block,bus=scsi0.0,drive=cdrom,bootindex=1

Here OVMF was built at upstream e3b9ab433aac, and QEMU is &quot;2.11.1(Debian 1:2.11+dfsg-1ubuntu7.4)&quot;.

Notably, in the L1 (Ubuntu) guest, the Gentoo installer ISO from the host (L0) shows up as /dev/sr0, and that virtio-scsi CD-ROM is passed to the L2 guest (Gentoo) with &quot;scsi-block&quot; -- &quot;SCSI block device passthrough&quot;.

(7) In L2, grub2 launched fine.

(8) I modified the &quot;Boot LiveCD (kernel: gentoo)&quot; option (with the &quot;e&quot; key), appending &quot;console=ttyS0,115200,8n1&quot; at the end of the &quot;linux&quot; options. Launched the grub2 command list with Ctrl-x.

(9) The Gentoo guest (in L2) booted successfully to the &quot;livecd ~ #&quot; prompt.

This is just to say that I can&apos;t reproduce the issue in a nested virt setup (L0: RHEL-7.5, L1: Ubuntu 18.04.01, L2: Gentoo 20180902T214502Z), where the Gentoo ISO is launched by Ubuntu&apos;s qemu.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>214</attachid>
            <date>2018-09-03 08:52:34 +0000</date>
            <delta_ts>2018-09-03 08:52:34 +0000</delta_ts>
            <desc>install media uefi issue</desc>
            <filename>Screenshot 2018-09-03 at 13.51.23.png</filename>
            <type>image/png</type>
            <size>637235</size>
            <attacher>pshirshov</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>215</attachid>
            <date>2018-09-03 09:05:09 +0000</date>
            <delta_ts>2018-09-03 09:05:09 +0000</delta_ts>
            <desc>install media uefi issue: no -bios</desc>
            <filename>Screenshot 2018-09-03 at 14.03.40.jpg</filename>
            <type>image/jpeg</type>
            <size>348963</size>
            <attacher>pshirshov</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>216</attachid>
            <date>2018-09-03 09:05:25 +0000</date>
            <delta_ts>2018-09-03 09:05:25 +0000</delta_ts>
            <desc>install media uefi issue: no -bios</desc>
            <filename>Screenshot 2018-09-03 at 14.03.25.jpg</filename>
            <type>image/jpeg</type>
            <size>429095</size>
            <attacher>pshirshov</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1544</bug_id>
          
          <creation_ts>2019-02-20 06:49:53 +0000</creation_ts>
          <short_desc>The BaseTool causes build failure for a module with type as BASE or USER_DEFINED</short_desc>
          <delta_ts>2019-08-27 19:14:33 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>jiewen.yao</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6455</commentid>
    <comment_count>0</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-02-20 06:49:53 +0000</bug_when>
    <thetext>The root-cause is below:
1) The GenC tool does not include the constructor/destructor for USER_DEFINED module. It should be included.

2) The GenC tool includes the UnloadImage code for BASE module. It should NOT be included.

3) The GenC tool uses EFI_STATUS and ASSERT_EFI_ERROR for BASE type. It should use RETURN_STATUS and ASSERT_RETURN_ERROR.

4) The GenC tool miss DebugLib.h for BASE or USER_DEFINED module AutoGen.c. Only Base.h is there. It should add Library/DebugLib.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6488</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:12:02 +0000</bug_when>
    <thetext>Assign to Jiewen, he already sent patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9308</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:13:10 +0000</bug_when>
    <thetext>(In reply to Yonghong Zhu from comment #1)
&gt; Assign to Jiewen, he already sent patch.

Thanks, very informative. Subject line? Mailing list reference?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9309</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:14:33 +0000</bug_when>
    <thetext>Fixed in commit 4247c24fba94 (&quot;BaseTool/GenC: Fix build error when type is BASE or USER_DEFINED.&quot;, 2019-02-22). I guess.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1348</bug_id>
          
          <creation_ts>2018-11-21 00:07:05 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Universal/Acpi/AcpiSupportDxe</short_desc>
          <delta_ts>2019-07-03 01:52:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5657</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-21 00:07:05 +0000</bug_when>
    <thetext>This driver produces frame work protocol AcpiSupport.
MdeModulePkg/Universal/Acpi/AcpiTableDxe producing AcpiTable protocol should be used.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6420</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:02:28 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7400</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:53:49 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8356</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:52:01 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1787</bug_id>
          
          <creation_ts>2019-05-08 19:09:54 +0000</creation_ts>
          <short_desc>BaseTools: Include headers not mentioned in inf are not hashed</short_desc>
          <delta_ts>2019-05-14 17:51:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Rodriguez">christian.rodriguez</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7434</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-08 19:09:54 +0000</bug_when>
    <thetext>If an include header is used in a C file for a lib or module locally and not mentioned in the inf for that lib or module, then the hashing will fail for that lib or module if and only if only one of those include headers was changed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7435</commentid>
    <comment_count>1</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-08 19:13:42 +0000</bug_when>
    <thetext>Assigned to me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7534</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-14 17:51:39 +0000</bug_when>
    <thetext>See BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1804.

Scope has changed, this BZ is rejected.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1687</bug_id>
          
          <creation_ts>2019-04-08 11:56:55 +0000</creation_ts>
          <short_desc>Add multiple console with multi monitor support to EmulatorPkg as Nt32Pkg has</short_desc>
          <delta_ts>2019-05-08 04:39:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laurie Jarlstrom">laurie</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhiguang.liu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7027</commentid>
    <comment_count>0</comment_count>
    <who name="Laurie Jarlstrom">laurie</who>
    <bug_when>2019-04-08 11:56:55 +0000</bug_when>
    <thetext>After trying the EmulatorPkg it seems to work but it does not support multiple consoles like the Nt32Pkg has. In Nt32Pkg there are 2 GOP windows where the console Input / output is duplicated on both. So if so a user can type in one window emulation it is duplicated on both.  If the EmulatorPkg PCD  (gEmulatorPkgTokenSpaceGuid.PcdEmuGop|L&quot;GOP Window 1!GOP Window
 2&quot;)  is changed the underlying driver only manages the first Window and the 
other &quot;GOP Window 2&quot; only has the message: &quot;Graphics Console Started&quot;  The Console I/O should happen on both.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7198</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:22:48 +0000</bug_when>
    <thetext>Ray will help on it. try to do it in Q2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7329</commentid>
    <comment_count>2</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-04-28 22:29:35 +0000</bug_when>
    <thetext>Take this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7430</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-08 04:39:27 +0000</bug_when>
    <thetext>Fixed at
https://github.com/tianocore/edk2/commit/792f0d4f12ad5c01afdf9c92df8c479ff0f19a79</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1571</bug_id>
          
          <creation_ts>2019-02-27 15:25:28 +0000</creation_ts>
          <short_desc>Incorrect gBlackBoxEfiSimplePointerProtocolGuid GUID in UEFI.DEC</short_desc>
          <delta_ts>2019-08-21 22:48:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>supreeth.venkatesh</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6563</commentid>
    <comment_count>0</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:25:28 +0000</bug_when>
    <thetext>Migrated from Mantis 1912. (https://mantis.uefi.org/mantis/view.php?id=1912)

Description	
SctPkg\UEFI\UEFI.dec defines two GUID variables with the same GUID value:
  gBlackBoxEfiSimpleNetworkProtocolGuid = { 0xA19832B9, 0xAC25, 0x11D3, 0x9A, 0x2D, 0x00, 0x90, 0x27, 0x3F, 0xC1, 0x4D }
  gBlackBoxEfiSimplePointerProtocolGuid = { 0xA19832B9, 0xAC25, 0x11D3, 0x9A, 0x2D, 0x00, 0x90, 0x27, 0x3F, 0xC1, 0x4D }

gBlackBoxEfiSimplePointerProtocolGuid GUID is incorrect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6687</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-03-11 04:47:20 +0000</bug_when>
    <thetext>The correct EFI_SIMPLE_POINTER_PROTOCOL_GUID defined in UEFI 2.7 Spec is listed below

#define EFI_SIMPLE_POINTER_PROTOCOL_GUID \
{0x31878c87,0xb75,0x11d5,\
{0x9a,0x4f,0x00,0x90,0x27,0x3f,0xc1,0x4d}}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6835</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 09:00:42 +0000</bug_when>
    <thetext>change status to confirmed, Eric will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9140</commentid>
    <comment_count>3</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-21 22:48:25 +0000</bug_when>
    <thetext>It has been fixed with 81007316f3c9ecd102b66dd40c38e7d6a796b420</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1067</bug_id>
          
          <creation_ts>2018-07-27 02:49:55 +0000</creation_ts>
          <short_desc>Dead code and inf redundant definitions in SignedCapsulePkg</short_desc>
          <delta_ts>2018-09-13 02:03:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SignedCapsulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4445</commentid>
    <comment_count>0</comment_count>
      <attachid>197</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:49:55 +0000</bug_when>
    <thetext>Created attachment 197
X64 build log for dead code and inf redundant definitions

Uefi-aware compiler found many modules have dead code and redundant definitions in the SignedCapsulePkg. Please see the detail info in the attachment log. We need to clean them.

Because the module number is big, I report them all together by package in this tracker and don&apos;t by modules separately. 

Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and wrongly report it as dead code. Please verify them carefully if the module have assemble code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4446</commentid>
    <comment_count>1</comment_count>
      <attachid>198</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-27 02:50:53 +0000</bug_when>
    <thetext>Created attachment 198
IA32 build log for dead code and inf redundant definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4490</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 20:29:55 +0000</bug_when>
    <thetext>Bug scrub: Assign it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4926</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:03:55 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/90b3f171a76cde0d824d17895d6ff7f434afe29c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>197</attachid>
            <date>2018-07-27 02:49:55 +0000</date>
            <delta_ts>2018-07-27 02:49:55 +0000</delta_ts>
            <desc>X64 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_X64.txt</filename>
            <type>text/plain</type>
            <size>538</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>198</attachid>
            <date>2018-07-27 02:50:53 +0000</date>
            <delta_ts>2018-07-27 02:50:53 +0000</delta_ts>
            <desc>IA32 build log for dead code and inf redundant definitions</desc>
            <filename>inflog_IA32.txt</filename>
            <type>text/plain</type>
            <size>538</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1368</bug_id>
          
          <creation_ts>2018-11-30 13:31:52 +0000</creation_ts>
          <short_desc>spelling error for define in UefiTcgPlatform.h</short_desc>
          <delta_ts>2019-02-01 00:40:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5725</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-11-30 13:31:52 +0000</bug_when>
    <thetext>UefiTcgPlatform.h
EFI_RETURNING_FROM_EFI_APPLICATOIN

see https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Include/IndustryStandard/UefiTcgPlatform.h#L52</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5739</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-05 00:18:52 +0000</bug_when>
    <thetext>Agree this is typo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6257</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-01 00:40:39 +0000</bug_when>
    <thetext>Fixed at edk2/master:
41dfc44dc63b766ff5e7e39db3d5bbbeae605db5
341d442c0b0775be86b5896d7a0a40bc79328c1f
5f3b0250d008a3f421ea67e46d5f103ab6e67e99</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1177</bug_id>
          
          <creation_ts>2018-09-14 04:22:16 +0000</creation_ts>
          <short_desc>A INF path is missing in MdePkg DSC.</short_desc>
          <delta_ts>2018-09-24 21:54:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4972</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-14 04:22:16 +0000</bug_when>
    <thetext>A module INF path is missing in MdePkg.dsc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4974</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-14 04:36:00 +0000</bug_when>
    <thetext>*** Bug 1176 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5032</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:30:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5078</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-24 21:54:12 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/d5b28edd63f4d0fab087c5d6c9db773e5b5adc7d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1391</bug_id>
          
          <creation_ts>2018-12-11 19:38:14 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Create a function to retrieve boot loader stack address</short_desc>
          <delta_ts>2019-01-28 02:29:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>knifeeight22</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5825</commentid>
    <comment_count>0</comment_count>
    <who name="">knifeeight22</who>
    <bug_when>2018-12-11 19:38:14 +0000</bug_when>
    <thetext>To better support stack arrangement between boot loader and FSP, the assumption of memory map inside FSP should be removed so FSP needs to know the stack base address when boot loader calling FSP-M Entry API. This can be done by retrieving first input parameter address so creating a function for FSP SEC phase code to use.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5878</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:25:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6214</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-01-28 02:29:42 +0000</bug_when>
    <thetext>commit 35897da27ed289f086d2b528800fa60d6ef2407d (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Wed Jan 23 12:07:45 2019 +0800

    IntelFsp2Pkg: Add function to get bootloader stack pointer

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1391

    FSP on-going enhancement for stack utilization required
    to know bootloader stack pointer and this pointer can be
    retrieved by first input parameter address when FSP-M
    entry API invoked by bootloader.

    Test: Verified on internal platform and booting successfully

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Contributed-under: TianoCore Contribution Agreement 1.1
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1825</bug_id>
          
          <creation_ts>2019-05-20 14:17:30 +0000</creation_ts>
          <short_desc>All Minimum Platform Python Scripts Should Support Python 3</short_desc>
          <delta_ts>2019-09-19 12:29:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7710</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-20 14:17:30 +0000</bug_when>
    <thetext>A user should be able to build the firmware using a Python 3 environment.

https://docs.python.org/3/howto/pyporting.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7763</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-23 10:27:16 +0000</bug_when>
    <thetext>change to confirmed status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9174</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-22 17:46:36 +0000</bug_when>
    <thetext>Prince, please follow up on latest status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9723</commentid>
    <comment_count>3</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-09-19 11:24:50 +0000</bug_when>
    <thetext>Currently all platforms but PurleyOpenBoardPkg builds on python3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9724</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-09-19 12:29:21 +0000</bug_when>
    <thetext>PurleyOpenBoardPkg is given an exception. We can close this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1725</bug_id>
          
          <creation_ts>2019-04-17 02:20:25 +0000</creation_ts>
          <short_desc>Bin Cache wrongly cache hit for CLANG38 build with the GCC5 build cache result</short_desc>
          <delta_ts>2019-05-31 04:43:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7154</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-17 02:20:25 +0000</bug_when>
    <thetext>If the Bin Cache is built by GCC5 toolchain, the CLANG38 toolchain can directly use it as below. I believe this is not correct. Below is the reproduce steps:

First, build the Bin Cache with GCC5:
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ rm Conf/tools_def.txt
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ rm Conf/build_rule.txt
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ rm Conf/target.txt
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ source edksetup.sh
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ make -C BaseTools/ clean
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ make -C BaseTools/
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -a IA32 -a X64 -b DEBUG -t GCC5 --hash --binary-destination=BINCACHEDEST
Build total time: 00:00:53

Second, test the Bin Cache can cache hit for GCC5 clean build again:
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ rm Build/Ovmf3264/ -r -f
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -a IA32 -a X64 -b DEBUG -t GCC5 --hash --binary-source=BINCACHEDEST
Build total time: 00:00:11

Third, test whether the Bin Cache can cache miss for CLANG38 clean build:
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ rm Build/Ovmf3264/ -r -f
jshi19@ub2-uefi-b01:~/wksp_efi/edk2$ build -p OvmfPkg/OvmfPkgIa32X64.dsc -a IA32 -a X64 -b DEBUG -t CLANG38 --hash --binary-source=BINCACHEDEST
Build total time: 00:00:11

You can see the CLANG38 build wrongly cache hit and use with GCC5 build result.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7167</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-17 20:47:14 +0000</bug_when>
    <thetext>Steven will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7891</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-31 04:43:27 +0000</bug_when>
    <thetext>This issue has been fixed with below BZ1806 together.

Different platform caches might overlay each other inside Binary Cache database if they use same platform name
https://bugzilla.tianocore.org/show_bug.cgi?id=1806</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1508</bug_id>
          
          <creation_ts>2019-02-01 21:38:27 +0000</creation_ts>
          <short_desc>tracehub and system debugger couldn&apos;t work on UP2 board</short_desc>
          <delta_ts>2019-02-02 00:47:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>Minnowboard 3</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yi Qian">yi.qian</reporter>
          <assigned_to name="Yi Qian">yi.qian</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6274</commentid>
    <comment_count>0</comment_count>
    <who name="Yi Qian">yi.qian</who>
    <bug_when>2019-02-01 21:38:27 +0000</bug_when>
    <thetext>Some customers have reported tracehub and system debugger couldn&apos;t work on up2 board. we should fix it in minnow3 bios code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6275</commentid>
    <comment_count>1</comment_count>
    <who name="Yi Qian">yi.qian</who>
    <bug_when>2019-02-01 21:40:43 +0000</bug_when>
    <thetext>This issue can be reproduced in 0.71 bios version</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6276</commentid>
    <comment_count>2</comment_count>
    <who name="Yi Qian">yi.qian</who>
    <bug_when>2019-02-02 00:47:39 +0000</bug_when>
    <thetext>fixed version: 7a13db913810bfe8dc90d73ea10555dfed2831b7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1018</bug_id>
          
          <creation_ts>2018-07-17 04:33:37 +0000</creation_ts>
          <short_desc>Redundant library class are defined in TlsDxe module INF</short_desc>
          <delta_ts>2018-10-21 21:16:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4293</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-17 04:33:37 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant library class, which is NetLib, defined in TlsDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/NetworkPkg/TlsDxe/TlsDxe.inf
+++ b/NetworkPkg/TlsDxe/TlsDxe.inf
@@ -52,7 +52,6 @@
   BaseLib
   UefiLib
   DebugLib
-  NetLib
   BaseCryptLib
   TlsLib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4359</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:56:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5342</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-10-21 21:16:37 +0000</bug_when>
    <thetext>Commit version:

https://github.com/tianocore/edk2/commit/1682cc9353ecf688aa928fa102280c1d807ba3c5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1307</bug_id>
          
          <creation_ts>2018-11-07 11:18:02 +0000</creation_ts>
          <short_desc>[CpuSmm] Allow access-out when static paging is disabled.</short_desc>
          <delta_ts>2018-11-08 08:16:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5529</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-07 11:18:02 +0000</bug_when>
    <thetext>When static paging is disabled, page table for below 4GB is created
and page table for above 4GB is created dynamically in page fault
handler.

Today&apos;s implementation only allows SMM access-out to below types of
memory address no matter static paging is enabled or not:
1. Reserved, run time and ACPI NVS type
2. MMIO

But certain platform feature like RAS may need to access other types
of memory from SMM. Today&apos;s code blocks these platforms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5530</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-07 11:18:41 +0000</bug_when>
    <thetext>Fixed @ c60d36b4d1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5540</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-08 08:14:57 +0000</bug_when>
    <thetext>On-list discussion with a wealth of information:

* [edk2] [PATCH]
  UefiCpuPkg/SmmCpu: Block SMM read-out only when static paging is used
  https://lists.01.org/pipermail/edk2-devel/2018-November/031933.html

* [edk2] [PATCH v2]
  UefiCpuPkg/SmmCpu: Block access-out only when static paging is used
  https://lists.01.org/pipermail/edk2-devel/2018-November/032067.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5541</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-11-08 08:16:28 +0000</bug_when>
    <thetext>On 11/08/18 07:16, Yao, Jiewen wrote:
&gt; when memory error happens, a platform may generate SMI or SCI redirect to
&gt; SMI.
&gt; Then SMI code may choose to analyze, recovery, or backup DIMM for OS
&gt; memory. As such, RAS SMI handler may need access OS memory, and/or
&gt; interactive with OS handler via ASL code.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1650</bug_id>
          
          <creation_ts>2019-03-21 23:51:43 +0000</creation_ts>
          <short_desc>Restart the emulator, the boot order will sometimes restore the default</short_desc>
          <delta_ts>2019-05-15 05:08:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to>zhiguang.liu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6874</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-03-21 23:51:43 +0000</bug_when>
    <thetext>Boot emulator to setup page, enter menu Boot Maintenance Manager-&gt;Boot Options-&gt;Change Boot Order, change the boot order and save. Check the boot order in boot menu, sometimes it is saved, sometimes it is default order. 
Expected result: Save the modified order after rebooting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6886</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-22 02:29:36 +0000</bug_when>
    <thetext>Ray, please help to check. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7203</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:32:35 +0000</bug_when>
    <thetext>Ray please help to investigate . thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7334</commentid>
    <comment_count>3</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-04-29 01:24:00 +0000</bug_when>
    <thetext>take this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7483</commentid>
    <comment_count>4</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-09 23:06:32 +0000</bug_when>
    <thetext>bug fixed
https://github.com/tianocore/edk2/commit/68cafc7bf0571195d14602382165369a74dec936</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7506</commentid>
    <comment_count>5</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-05-13 04:03:55 +0000</bug_when>
    <thetext>Options other than the UEFI Shell can be set successfully. But the UEFI Shell is in the first boot order no matter how you modify it.

Verified version: 4ff689d98277c7cb15859e9e922ad5d67e05122e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7507</commentid>
    <comment_count>6</comment_count>
    <who name="">zhiguang.liu</who>
    <bug_when>2019-05-13 04:27:37 +0000</bug_when>
    <thetext>Hello, Haiyan, thanks for the comment.
this is because of the modification with bug 1649. 
https://bugzilla.tianocore.org/show_bug.cgi?id=1649
what do you think is the right way to arrange the boot order.
(In reply to haiyan.li from comment #5)
&gt; Options other than the UEFI Shell can be set successfully. But the UEFI
&gt; Shell is in the first boot order no matter how you modify it.
&gt; 
&gt; Verified version: 4ff689d98277c7cb15859e9e922ad5d67e05122e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7508</commentid>
    <comment_count>7</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-13 05:30:26 +0000</bug_when>
    <thetext>Haiyan, what&apos;s the behavior of Nt32? We can align EmulatorPkg behavior to that of Nt32.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7548</commentid>
    <comment_count>8</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-05-15 03:10:21 +0000</bug_when>
    <thetext>Nt32 behaves the same as emulator</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7552</commentid>
    <comment_count>9</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-15 05:08:27 +0000</bug_when>
    <thetext>If Nt32 and Emulator behaves the same, I don&apos;t think it&apos;s a high priority task to fix.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1528</bug_id>
          
          <creation_ts>2019-02-13 21:41:10 +0000</creation_ts>
          <short_desc>Should do index check for shell command &quot;-delay&quot;</short_desc>
          <delta_ts>2019-02-21 21:10:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhichao.gao</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6359</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-02-13 21:41:10 +0000</bug_when>
    <thetext>While load new shell image in shell environment with option &quot;-delay&quot;, it would cause exception.
&quot;shell.efi -delay&quot; command would run a new shell with default 5 second delay. But it lacks of index check for shell parameters. That would cause a illegal pointer reference.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6361</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-02-13 21:49:29 +0000</bug_when>
    <thetext>bug scrub: assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6452</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 03:47:24 +0000</bug_when>
    <thetext>Add deadline info</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6500</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-02-21 21:10:54 +0000</bug_when>
    <thetext>fixed at:
https://github.com/tianocore/edk2/commit/d3912eb99e88fa1d797e06881fc6589eae831859</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1325</bug_id>
          
          <creation_ts>2018-11-14 07:20:09 +0000</creation_ts>
          <short_desc>Build fails if file extension exist in path before the end</short_desc>
          <delta_ts>2019-02-26 22:31:18 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Erik Botö">erik.boto</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5593</commentid>
    <comment_count>0</comment_count>
    <who name="Erik Botö">erik.boto</who>
    <bug_when>2018-11-14 07:20:09 +0000</bug_when>
    <thetext>There&apos;s a line in BaseTools/Source/Python/AutoGen/AutoGen.py that reads:

key = SingleFile.Path.split(SingleFile.Ext)[0]

This breaks the build if the SingleFile.Path contains SingleFile.Ext before the actual end of the file. E.g. if SingleFile.Path = &quot;/foo/bar.Sap/yada/source.S&quot; and SingleFile.Ext = &quot;.S&quot;. Then key would end up &quot;/foo/bar&quot; instead of &quot;/foo/bar.Sap/yada/source&quot; as intended.

Changing it to the line below seems to solve my issues, but this is based on an older version and I don&apos;t have the possibility to verify that all is good in current master. The idea is to split at the first occurrence from the right.

key = SingleFile.Path.rsplit(SingleFile.Ext, 1)[0]

Maybe you can have a look at if this seems safe for all use-cases, and if so perform the fix in master.

Cheers,
Erik</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5603</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-15 19:46:57 +0000</bug_when>
    <thetext>assign to Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6020</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-09 06:10:14 +0000</bug_when>
    <thetext>change owner to Zhiju.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6544</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-02-26 22:31:18 +0000</bug_when>
    <thetext>fix it in SHA-1: dd1988cf019050395575d57703b64186ba930711</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1768</bug_id>
          
          <creation_ts>2019-04-29 20:49:28 +0000</creation_ts>
          <short_desc>FDF FFS Rule doesn&apos;t support GUID value format</short_desc>
          <delta_ts>2019-06-18 01:27:53 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7348</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-29 20:49:28 +0000</bug_when>
    <thetext>Per FDF spec, FFS Rule can specify the hard code FILE Guid value. But， BaseTools reports the build failure. It should be fixed. The below FFS rule will cause build failure. 

[Rule.Common.USER_DEFINED.MicroCode]
  FILE RAW = 197DB236-F856-4924-90F8-CDF12FB875F3 {
    RAW BIN $(INF_OUTPUT)/$(MODULE_NAME).bin
  }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7349</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-29 20:50:09 +0000</bug_when>
    <thetext>Zhiju will look it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8086</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-06-18 01:27:53 +0000</bug_when>
    <thetext>fixed in 6b74ccf0f8b53256b696ce921d50b873f6f9db57</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1545</bug_id>
          
          <creation_ts>2019-02-20 09:03:30 +0000</creation_ts>
          <short_desc>Add new driver to provide user authentication before enter setup page</short_desc>
          <delta_ts>2019-07-02 03:26:39 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6458</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-20 09:03:30 +0000</bug_when>
    <thetext>Add new Driver to provides 
1. Setup Form to set/change/disable password
2. Does user authentication before entering Setup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6487</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:11:14 +0000</bug_when>
    <thetext>Assign to Liming, if we need some test , please help to file a test request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8319</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-07-02 03:26:39 +0000</bug_when>
    <thetext>Fixed via https://github.com/tianocore/edk2-platforms/commit/fa878613fef54875fd1a3f300a59b60889ec651b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1978</bug_id>
          
          <creation_ts>2019-07-15 10:22:22 +0000</creation_ts>
          <short_desc>DxeMain: Fix for missing MAT update when code uses  AllocateAddress after ReadyToBoot.</short_desc>
          <delta_ts>2019-09-10 23:10:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8455</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-07-15 10:22:22 +0000</bug_when>
    <thetext>The Fpdt driver (FirmwarePerformanceDxe) saves a memory address across reboots, and then does an AllocatePage for that memory address. If, on this boot, that memory comes from a Runtime memory bucket, the MAT table is not updated. This causes Windows to boot into Recovery.

This patch blocks the memory manager from changing the page from a special bucket to a different memory type.  Once the buckets are allocated, we freeze the memory ranges for the OS, and fragmenting the special buckets will cause errors resuming from hibernate.

Code change is from Project Mu:
https://github.com/microsoft/mu_basecore/commit/a9be767d9be96af94016ebd391ea6f340920735a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8587</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:34:38 +0000</bug_when>
    <thetext>Bug Triage: Liming will handle this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9592</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 23:10:44 +0000</bug_when>
    <thetext>Fix it on edk2 ada905ab5c0e7ea7017e71d52219aaec1abd8dcb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1051</bug_id>
          
          <creation_ts>2018-07-25 04:41:06 +0000</creation_ts>
          <short_desc>Redundant info is defined in FirmwarePerformanceDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:12:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4392</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:41:06 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are two redundant guids, which are gEfiEventReadyToBootGuid and gEfiEventLegacyBootGuid, defined in FirmwarePerformanceDxe module INF file. Need to remove them.


Below is the fix reference:
--- a/MdeModulePkg/Universal/Acpi/FirmwarePerformanceDataTableDxe/FirmwarePerformanceDxe.inf
+++ b/MdeModulePkg/Universal/Acpi/FirmwarePerformanceDataTableDxe/FirmwarePerformanceDxe.inf
@@ -61,8 +61,6 @@

 [Guids]
   gEfiEventExitBootServicesGuid                 ## CONSUMES             ## Event
-  gEfiEventReadyToBootGuid                      ## CONSUMES             ## Event
-  gEfiEventLegacyBootGuid                       ## SOMETIMES_CONSUMES   ## Event
   ## SOMETIMES_CONSUMES   ## HOB
   ## SOMETIMES_CONSUMES   ## Variable:L&quot;FirmwarePerformance&quot;
   ## PRODUCES             ## Variable:L&quot;FirmwarePerformance&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4422</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:08 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4932</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:09:54 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4935</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:12:24 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1349</bug_id>
          
          <creation_ts>2018-11-21 09:38:23 +0000</creation_ts>
          <short_desc>Remove IPF specific BaseTools\Source\C\GenVtf</short_desc>
          <delta_ts>2018-12-04 22:00:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5667</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-21 09:38:23 +0000</bug_when>
    <thetext>GenVtf C tool is IPF specific. IPF support has been removed from edk2 trunk. This tool can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5668</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-21 09:39:02 +0000</bug_when>
    <thetext>Shenglei will follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5669</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-21 09:39:44 +0000</bug_when>
    <thetext>Assign it to Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5738</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-12-04 22:00:43 +0000</bug_when>
    <thetext>Fixed at：
https://github.com/tianocore/edk2/commit/64ab2c82e8f61e881eb16849e1b188361b00c4a7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1788</bug_id>
          
          <creation_ts>2019-05-08 19:18:27 +0000</creation_ts>
          <short_desc>BaseTools: Library hashing fix and optimization for --hash feature</short_desc>
          <delta_ts>2019-06-06 14:42:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Rodriguez">christian.rodriguez</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7436</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-08 19:18:27 +0000</bug_when>
    <thetext>Library hashing seems to fall short from the makefile side. It should not have to rebuild all the libraries for each module if it doesn&apos;t have to be rebuilt.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7437</commentid>
    <comment_count>1</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-08 19:19:09 +0000</bug_when>
    <thetext>Assigned to me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7493</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-12 11:14:56 +0000</bug_when>
    <thetext>Hi Christian,
I&apos;m trying to add the library cache support in current binary cache as below BZ. Maybe the library cache support can help to mitigate the problem here, FYI. 

Extend the binary cache to support library cache: https://bugzilla.tianocore.org/show_bug.cgi?id=1797</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7720</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:56:53 +0000</bug_when>
    <thetext>I think this adds the cache support you were looking for Steven. And bug 1804 implementation will solve the problem with the timestamps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7722</commentid>
    <comment_count>4</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:57:37 +0000</bug_when>
    <thetext>Commit # a7ef158b07524f9afd0cefa3180aeac0fcb6e436</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7800</commentid>
    <comment_count>5</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-27 01:42:22 +0000</bug_when>
    <thetext>This patch commit cause library not to rebuild if cache miss happen and overall build fail. This is a regression bug. Below are simple reproduce steps:

•	Produce the cache:
&gt;build -p OvmfPkg\OvmfPkgIa32.dsc -a IA32 -b DEBUG -t VS2015x86 --hash --binary-destination=BinCache  -m MdeModulePkg\Core\Pei\PeiMain.inf

•	Remove the Build folder to clean build
&gt;rmdir Build /s /q

•	Change the file MdeModulePkg\Core\Pei\PeiMain.h by adding a blank in it

•	Clean build again:
&gt;build -p OvmfPkg\OvmfPkgIa32.dsc -a IA32 -b DEBUG -t VS2015x86 --hash --binary-source=BinCache  -m MdeModulePkg\Core\Pei\PeiMain.inf
Building ... d:\project\edk2git\workspace\edk2\MdeModulePkg\Core\Pei\PeiMain.inf [IA32]
NMAKE : fatal error U1073: don&apos;t know how to make &apos;d:\project\edk2git\workspace\edk2\Build\OvmfIa32\DEBUG_VS2015x86\IA32\MdePkg\Library\BasePcdLibNull\BasePcdLibNull\OUTPUT\BasePcdLibNull.lib&apos;
Stop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7949</commentid>
    <comment_count>6</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-06-06 14:42:50 +0000</bug_when>
    <thetext>Resolved for in place library hashing.

See BZ 1797 for Library hashing fix in cache. https://bugzilla.tianocore.org/show_bug.cgi?id=1797</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1572</bug_id>
          
          <creation_ts>2019-02-27 15:27:59 +0000</creation_ts>
          <short_desc>Add the new protocol test for HII Font EX and EFI HII Font Glyph Generator protocols in UEFI 2.6 SCT</short_desc>
          <delta_ts>2021-09-25 22:20:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>supreeth.venkatesh</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6564</commentid>
    <comment_count>0</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:27:59 +0000</bug_when>
    <thetext>Migrated over from Mantis 1697 (https://mantis.uefi.org/mantis/view.php?id=1697)


Description
The ECR 1408 is introduced in UEFI 2.6 Spec, so the corresponding request is to add the new protocols test in the UEFI 2.6 SCT.

Anoop TK from HPE will contribute the test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6686</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-03-11 04:38:21 +0000</bug_when>
    <thetext>HII Font EX protocol test has been implemented by Anoop TK in UEFI 2.6A SCT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6786</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 21:18:32 +0000</bug_when>
    <thetext>change status to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15871</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:48:59 +0000</bug_when>
    <thetext>@Eric:
Can this be closed as resolved?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17380</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2021-09-25 22:20:25 +0000</bug_when>
    <thetext>Hi Heinrich Schuchardt 

I close this as it is implemented, thanks. 

Best Regards
Eric</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1369</bug_id>
          
          <creation_ts>2018-11-30 13:40:13 +0000</creation_ts>
          <short_desc>Promote CharToUpper and AsciiToUpper to public functions in baselib</short_desc>
          <delta_ts>2019-02-01 00:44:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5726</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-11-30 13:40:13 +0000</bug_when>
    <thetext>There are numerous places throughout the edk2 codebase that use CharToUpper and AsciiToUpper.  These functions are copied and pasted because there is no library with this functionality.  CharToUpper/AsciiToUpper are internal functions in baselib.c but again not public.  

Promote them to public and remove all duplicate code throughout the edk2 codebase. 

https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Include/Library/BaseLib.h#L2773</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5740</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-05 00:28:00 +0000</bug_when>
    <thetext>Sean,
There is no upper case for all CHAR16/Unicode characters, for example, all Chinese characters.
So It seems to me that having an API CharToUpper() is not proper.

I see this function is used by BaseLib when converting Unicode number string to the integer.
Can you kindly explain why you also need this API to be public?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5779</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:27:58 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5815</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-10 18:56:31 +0000</bug_when>
    <thetext>I would suggest the api is targeted at characters that support upper and lower case.  If it doesn&apos;t apply to the character string then it is skipped just like &quot;.&quot; or &quot;7&quot; is handled today.  

There are multiple copies throughout the code base and eliminating duplication and leveraging one well tested library is a better path forward.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5830</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-12 01:50:17 +0000</bug_when>
    <thetext>Assign it to Shenglei for update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5840</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-12-12 16:46:20 +0000</bug_when>
    <thetext>To be very clear, the only range that should be used for CharToUpper() are Unicode characters in the ASCII range 0..127.  If the Unicode character is larger than 128, then it should not be modified by this function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6259</commentid>
    <comment_count>6</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-01 00:44:38 +0000</bug_when>
    <thetext>Fixed at edk2/master:
cecbecb71d6baad7b55ab59bb9bc7dd7de1efc4b
5dbfa01e2ec18a255904c98030b7a18420d4bb85
8c9b49500d59d9e9d24a2ab595b5e1e7de0676c1
357fc11c35b71f232cfb6317534a02fba1baa770
62cdd1f5ab2bbad5f4615077ab8cead2e3892f3f
3eaf5e8cf64c14d1371d6226d35d1afea5c98ca6
3d086fed730e7958d1d9486749a72f0da1c08e91</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1179</bug_id>
          
          <creation_ts>2018-09-16 12:06:35 +0000</creation_ts>
          <short_desc>error: all paths through this function will call itself when build standard C project</short_desc>
          <delta_ts>2019-07-27 08:10:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="fbwang">273412544</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>Mac OS</cf_target_os>
          <cf_package>StdLib</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4980</commentid>
    <comment_count>0</comment_count>
    <who name="fbwang">273412544</who>
    <bug_when>2018-09-16 12:06:35 +0000</bug_when>
    <thetext>Error occurs when build standard C project.
for example, build AppPkg\Applications\Main
edk2/StdLib/LibC/StdLib/Environs.c:118:1: error: all paths through this function will call itself [-Werror,-Winfinite-recursion]
{
^
1 error generated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5140</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-27 20:20:59 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8610</commentid>
    <comment_count>2</comment_count>
    <who name="fbwang">273412544</who>
    <bug_when>2019-07-27 08:10:06 +0000</bug_when>
    <thetext>Already fix in edk2-libc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1920</bug_id>
          
          <creation_ts>2019-06-17 22:57:17 +0000</creation_ts>
          <short_desc>Platform exception when callback function was destroyed by unconnected controller in setup browser.</short_desc>
          <delta_ts>2019-07-09 22:05:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Greg">gregx.yeh</reporter>
          <assigned_to name="Greg">gregx.yeh</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8084</commentid>
    <comment_count>0</comment_count>
    <who name="Greg">gregx.yeh</who>
    <bug_when>2019-06-17 22:57:17 +0000</bug_when>
    <thetext>In setup browser. Hii package and callback function will be destroyed when  controller has unconnected. Setup browser still call callback function then into exception mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8252</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:30:15 +0000</bug_when>
    <thetext>Greg, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8392</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-07-09 22:05:52 +0000</bug_when>
    <thetext>Patch pushed at https://bugzilla.tianocore.org/show_bug.cgi?id=1920
Patch reviewed at https://edk2.groups.io/g/devel/message/43449</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1726</bug_id>
          
          <creation_ts>2019-04-17 02:46:56 +0000</creation_ts>
          <short_desc>Enhance Bin Cache database to support save the cache for multiple platforms with multiple tool-chains and targets</short_desc>
          <delta_ts>2019-05-21 09:52:51 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7157</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-17 02:46:56 +0000</bug_when>
    <thetext>Current --binary-destination and --binary-source specify the Bin Cache database directory. But current database directory can only save build result of one platform with one tool-chain and one target. It is better to add more level sub-directories in the database to support save the cache for multiple platforms with multiple tool-chains and targets, just like edk2 Build output. E.g. WhitleyRp\DEBUG_VS2015x86, KabylakeRvp3\RELEASE_VS2015x86.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7164</commentid>
    <comment_count>1</comment_count>
      <attachid>303</attachid>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-17 15:22:37 +0000</bug_when>
    <thetext>Created attachment 303
Proposed patch change

I attached a proposed change for Steven. It should handle adding the build target and the tool-chain. With that should be more granularity to how the build folder is setup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7165</commentid>
    <comment_count>2</comment_count>
      <attachid>304</attachid>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-17 19:09:52 +0000</bug_when>
    <thetext>Created attachment 304
V2 Proposed Patch Change

Attached is V2 of the proposed patch change that adds the platform name to the previous patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7166</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-17 20:46:47 +0000</bug_when>
    <thetext>Steven will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7170</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-04-18 00:07:15 +0000</bug_when>
    <thetext>Assign to Christian. 

Hi Christian,
Please check-in your patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7178</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-18 06:29:50 +0000</bug_when>
    <thetext>No, please don&apos;t.

The subject line of the patch, from comment 2, seems to be:

[Patch V2] BaseTools: Enhance Bin Cache database to support save the cache

I don&apos;t see it on &lt;devel@edk2.groups.io&gt; / &lt;https://edk2.groups.io/g/devel/topics&gt;.

Please don&apos;t push the patch to the git repository until it has been reviewed on the mailing list. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7179</commentid>
    <comment_count>6</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-18 10:22:57 +0000</bug_when>
    <thetext>I just sent the patch to the mailing list. Please make sure to review it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7187</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-18 16:35:45 +0000</bug_when>
    <thetext>Hi Christian -- I can&apos;t promise reviewing it (I don&apos;t co-maintain BaseTools). The reason I requested that the patch be posted to the list is because the edk2 development process requires that. The BaseTools maintainers should review the patch -- on the list. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7227</commentid>
    <comment_count>8</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-22 15:25:54 +0000</bug_when>
    <thetext>Commit# 452b5ad61ddd360f0e784fd5f0eac83654a8b5c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7719</commentid>
    <comment_count>9</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:52:51 +0000</bug_when>
    <thetext>See commit above.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>303</attachid>
            <date>2019-04-17 15:22:37 +0000</date>
            <delta_ts>2019-04-17 19:09:52 +0000</delta_ts>
            <desc>Proposed patch change</desc>
            <filename>0001-BaseTools-Enhance-Bin-Cache-database-to-support-save.patch</filename>
            <type>text/plain</type>
            <size>2934</size>
            <attacher name="Christian Rodriguez">christian.rodriguez</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>304</attachid>
            <date>2019-04-17 19:09:52 +0000</date>
            <delta_ts>2019-04-17 19:09:52 +0000</delta_ts>
            <desc>V2 Proposed Patch Change</desc>
            <filename>0001-BaseTools-Enhance-Bin-Cache-database-to-support-save.patch</filename>
            <type>text/plain</type>
            <size>3025</size>
            <attacher name="Christian Rodriguez">christian.rodriguez</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1624</bug_id>
          
          <creation_ts>2019-03-14 21:59:28 +0000</creation_ts>
          <short_desc>Delete User Manuals that no longer apply to BaseTools</short_desc>
          <delta_ts>2019-03-24 01:50:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6724</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-14 21:59:28 +0000</bug_when>
    <thetext>The following tools are obsolete. 
 Fpd2Dsc
 Msa2Inf
 Spd2Dec

Delete the corresponding rtf files from BaseTools\UserManuals.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6804</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 23:08:16 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6900</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-24 01:50:04 +0000</bug_when>
    <thetext>fixed on 210bd16aff81f6746033dfc0c4cc7c463349bce0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1107</bug_id>
          
          <creation_ts>2018-08-22 12:14:09 +0000</creation_ts>
          <short_desc>Remove EdkShellPkg from edk2/master</short_desc>
          <delta_ts>2018-11-19 01:43:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4672</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-08-22 12:14:09 +0000</bug_when>
    <thetext>customers who need the EDK version of shell code can get it from a UDK branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4696</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:28:50 +0000</bug_when>
    <thetext>bug scrub: assign to Liming to discuss first. final result may depend on the community discussion result.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5627</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-11-19 01:43:16 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/6caf954c1bf9f6c209f70cfa92604c83ec0c3cf7
https://github.com/tianocore/edk2/commit/238fe4ded4fb71dc1aec4323f66f8e96f95268e0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1940</bug_id>
          
          <creation_ts>2019-06-26 16:56:17 +0000</creation_ts>
          <short_desc>ACPI DATA being measured after table patch</short_desc>
          <delta_ts>2020-01-08 19:26:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Spottswood">jason.spottswood</reporter>
          <assigned_to>jiewen.yao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiewen.yao</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8211</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Spottswood">jason.spottswood</who>
    <bug_when>2019-06-26 16:56:17 +0000</bug_when>
    <thetext>EDK2 discussion reference:
https://edk2.groups.io/g/devel/topic/tpm_acpi_hid_creation/32205028?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,32205028

TCG Platform Firmware Profile specification states:
ACPI flash data prior to any modifications. This requirement may be met by eithermeasuring the compressed image in flash or by measuring the in-memory
expansion before fix-ups; however, the measurements MUST be made the same
way across every boot cycle. (SHOULD be the event field string of “ACPI DATA” in all caps.)

EDK2 needs to measure the ACPI tables *before* the fix ups to be compliant with the spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8241</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:15:56 +0000</bug_when>
    <thetext>chao, please clarify this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9909</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Spottswood">jason.spottswood</who>
    <bug_when>2019-10-02 11:25:44 +0000</bug_when>
    <thetext>Any update from the module owner on this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10655</commentid>
    <comment_count>3</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2019-12-10 21:23:57 +0000</bug_when>
    <thetext>Fixed in 3a63c17ebc853cbb27d190729d01e27f68e65b94 and 7e55cf6b48dcd43de46d008b2f12caaad2554503.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10806</commentid>
    <comment_count>4</comment_count>
    <who name="">jiewen.yao</who>
    <bug_when>2020-01-08 19:26:08 +0000</bug_when>
    <thetext>Fixed in 3a63c17ebc853cbb27d190729d01e27f68e65b94 and 7e55cf6b48dcd43de46d008b2f12caaad2554503</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1412</bug_id>
          
          <creation_ts>2018-12-18 21:54:47 +0000</creation_ts>
          <short_desc>ConSplitter should not perform TextOut SetMode during device add flow if the required mode is already set</short_desc>
          <delta_ts>2019-06-16 22:03:45 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dmitry Antipov">dmanti</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5914</commentid>
    <comment_count>0</comment_count>
    <who name="Dmitry Antipov">dmanti</who>
    <bug_when>2018-12-18 21:54:47 +0000</bug_when>
    <thetext>During boot, when ConSplitter adds a ConOut device it will call SetMode on each device already registered. With GraphicsConsole it means the screen will be cleared. This is not a desired behavior when booting a consumer device as it clears the boot logo.

See commit with a potential fix: https://github.com/dmitryantipov/mu_basecore/commit/93f9d6b739f134bda2b39ae8cc4165d189900987</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5935</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:08:54 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6243</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-30 04:21:50 +0000</bug_when>
    <thetext>Agree with this change. But maybe the code can be refined into use a field in PrivateData instead of a global variable. If a change can avoid using a field in PrivateData, that will be the best.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6788</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-20 21:57:42 +0000</bug_when>
    <thetext>Zhichao will follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8078</commentid>
    <comment_count>4</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-16 22:03:45 +0000</bug_when>
    <thetext>fixed at e85cfa2fa4..0a35997643.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1308</bug_id>
          
          <creation_ts>2018-11-07 11:55:01 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Add support for FSP 1.x binaries to SplitFspBin.py</short_desc>
          <delta_ts>2019-06-11 03:16:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc>https://github.com/IntelFsp/FSP/issues/7</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Nathaniel L DeSimone">nathaniel.l.desimone</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5531</commentid>
    <comment_count>0</comment_count>
    <who name="Nathaniel L DeSimone">nathaniel.l.desimone</who>
    <bug_when>2018-11-07 11:55:01 +0000</bug_when>
    <thetext>SplitFspBin.py currently only supports FSP 2.x binaries. Consequently, the only way to rebase a FSP 1.x binary is to use BCT. BCT does not have a command line feature, so it is currently not possible to rebase a FSP 1.x binary during an automated build process.

At a minimum, &quot;SplitFspBin.py rebase&quot; should function with FSP 1.x binaries, &quot;SplitFspBin.py genhdr&quot; &amp; &quot;SplitFspBin.py info&quot; would be nice-to-have. &quot;SplitFspBin.py split&quot; does not make any sense for FSP 1.x and should not be supported.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5782</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:31:28 +0000</bug_when>
    <thetext>Assign to module owner to investigate first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7618</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-17 13:09:00 +0000</bug_when>
    <thetext>customer request: https://github.com/IntelFsp/FSP/issues/7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7886</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-31 02:04:08 +0000</bug_when>
    <thetext>commit 591b8cb7f3d026d2fa4483c59f3d5fb14be181bf (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue May 28 21:51:39 2019 +0800

    IntelFsp2Pkg/SplitFspBin.py: Support rebasing 1.x binary.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1308

    Support rebasing FSP 1.x binary.
    FSP 1.x has single component in binary so not supported
    by split command and rebase can be done with the same
    command for rebasing FSP-T component in FSP 2.x image.

    Test: both FSP 2.x (Kabylake) and FSP 1.x (BroadwellDE) binary
          can be rebased successfully.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7887</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-31 03:14:50 +0000</bug_when>
    <thetext>Patch reverted and will re-submit after freeze period completed.

commit 9d73c5608d228413d999f9148ba3012491c1d995 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri May 31 14:46:41 2019 +0800

    IntelFsp2Pkg/SplitFspBin.py: Revert FSP 1.x support.

    This reverts commit:
      591b8cb7f3d026d2fa4483c59f3d5fb14be181bf.
    Will submit again after freeze done.

    Cc: Liming Gao &lt;liming.gao@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7974</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-11 03:16:21 +0000</bug_when>
    <thetext>commit 8349b8683640cc73522e5728d6f9ea2a45487be8 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue May 28 21:51:39 2019 +0800

    IntelFsp2Pkg/SplitFspBin.py: Support rebasing 1.x binary.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1308

    Support rebasing FSP 1.x binary.
    FSP 1.x has single component in binary so not supported
    by split command and rebase can be done with the same
    command for rebasing FSP-T component in FSP 2.x image.

    Test: both FSP 2.x (Kabylake) and FSP 1.x (BroadwellDE) binary
          can be rebased successfully.

    Cc: Maurice Ma &lt;maurice.ma@intel.com&gt;
    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1651</bug_id>
          
          <creation_ts>2019-03-22 06:30:05 +0000</creation_ts>
          <short_desc>Feature Request:Add Support to device handle filtering in UEFISCT</short_desc>
          <delta_ts>2022-01-13 09:07:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mitesh">mitesh.prajapati</reporter>
          <assigned_to name="Sunny Wang">Sunny.Wang</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>mitesh.prajapati</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>stephano</cc>
    
    <cc>xypron.glpk</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6891</commentid>
    <comment_count>0</comment_count>
      <attachid>282</attachid>
    <who name="Mitesh">mitesh.prajapati</who>
    <bug_when>2019-03-22 06:30:05 +0000</bug_when>
    <thetext>Created attachment 282
In SctPkg\TestInfrastructure\SCT\Framework\Execute.c

UEFISCT is not having Device Handle filtering mechanism. this filtering mechanism can help the user to select a particular device and run the UEFISCT tests.

This mechanism is already implemented in IHVSCT.

For UEFISCT case: In ExecuteBbTestCase () need to supply &quot;IhvInterfaceFilter&quot; argument which is the function to filter device handles.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6978</commentid>
    <comment_count>1</comment_count>
    <who name="Mitesh">mitesh.prajapati</who>
    <bug_when>2019-04-02 06:22:53 +0000</bug_when>
    <thetext>(In reply to Mitesh from comment #0)
&gt; Created attachment 282 [details]
&gt; In SctPkg\TestInfrastructure\SCT\Framework\Execute.c
&gt; 
&gt; UEFISCT is not having Device Handle filtering mechanism. this filtering
&gt; mechanism can help the user to select a particular device and run the
&gt; UEFISCT tests.
&gt; 
&gt; This mechanism is already implemented in IHVSCT.
&gt; 
&gt; For UEFISCT case: In ExecuteBbTestCase () need to supply
&gt; &quot;IhvInterfaceFilter&quot; argument which is the function to filter device handles.

 	
Hi Michael Kinney,

Any Update on reported feature request?

Thanks,
Mitesh</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8114</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-06-19 12:16:43 +0000</bug_when>
    <thetext>Bug Triage: assign to maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9817</commentid>
    <comment_count>3</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-09-25 18:57:20 +0000</bug_when>
    <thetext>Acknowledged. Queued for future release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15870</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:45:19 +0000</bug_when>
    <thetext>@Mitesh:
The assignee does not work on SCT anymore. Could you provide a patch?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18118</commentid>
    <comment_count>5</comment_count>
    <who name="Sunny Wang">Sunny.Wang</who>
    <bug_when>2022-01-11 17:24:16 +0000</bug_when>
    <thetext>After further checking, I still don&apos;t understand why we need this feature. I don&apos;t see an obvious reason why we can&apos;t just use IHVSCT to test a particular device handle. If the reason is a test case for testing a particular device handle only in UEFISCT (not in IHVSCT), it will make more sense to port the test case from UEFISCT to IHVSCT than adding device selection support to UEFISCT.
     
Moreover, since we have neither seen this request from others nor seen any push from Microchip in the past two years. I think the need may longer exist.

Furthermore, I also sent an email to Mitesh, but haven&apos;t got his reply. Checked Linkedin. It looks like he left Microchip 2.x years ago.   

Therefore, let&apos;s close this bug for now. Once we get the clarification or request from Microchip or others, We can re-open it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18126</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2022-01-13 09:07:44 +0000</bug_when>
    <thetext>No comments received from the defect-raiser.
For a similar request, we will re-look this area again.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>282</attachid>
            <date>2019-03-22 06:30:05 +0000</date>
            <delta_ts>2019-03-22 06:30:05 +0000</delta_ts>
            <desc>In SctPkg\TestInfrastructure\SCT\Framework\Execute.c</desc>
            <filename>patch</filename>
            <type>text/plain</type>
            <size>138</size>
            <attacher name="Mitesh">mitesh.prajapati</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1529</bug_id>
          
          <creation_ts>2019-02-14 20:09:14 +0000</creation_ts>
          <short_desc>[ATA] Add Security feature set support for ATA devices</short_desc>
          <delta_ts>2019-02-21 20:17:22 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-21</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6364</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-14 20:09:14 +0000</bug_when>
    <thetext>This request is filed for adding the &apos;Security feature set&apos; support for
ATA devices.

According to the AT Attachment 8 - ATA/ATAPI Command Set (ATA8-ACS)
specification, the Security feature set is an optional feature. In
summary, the feature is a password system that restricts access to user
data stored on an ATA device. A more detailed introduction of this feature
can be referred from the ATA8-ACS spec:

http://www.t13.org/documents/UploadedDocuments/docs2007/D1699r4a-ATA8-ACS.pdf

More specifically, the support of the &apos;Security feature set&apos; feature will
include:
* HII GUI page that will provide the user with the ability to
  set/update/disable the password for ATA devices that support this
  feature;
* When device(s) is set with password, A popup windows during boot
  requesting the user to input password in order to unlock the device;
* Device auto-unlock during the S3 resume.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6369</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-14 21:52:11 +0000</bug_when>
    <thetext>Version 1 patch has been send for review:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg51373.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6499</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-02-21 20:17:22 +0000</bug_when>
    <thetext>Completed via the below commit:

https://github.com/tianocore/edk2/commit/e8959f81003ccd80317b820f00287897191796ee</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1959</bug_id>
          
          <creation_ts>2019-07-03 17:06:49 +0000</creation_ts>
          <short_desc>BaseLib.h linked list macros should define &quot;delete safe iterator loop&quot; instead of having EFI_LIST_FOR_EACH_SAFE defined numerous places in edk2 code</short_desc>
          <delta_ts>2020-04-20 23:58:14 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Michael Kubacki">michael.kubacki</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.kubacki</cc>
    
    <cc>stephano</cc>
    
    <cc>zhiguang.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8364</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-07-03 17:06:49 +0000</bug_when>
    <thetext>Lots of copy and paste of list iterator macros and none in a common/logical place like BaseLib.h.  
  

Search code tree for EFI_LIST_FOR_EACH_SAFE and find that it is defined in numerous places.  

Ehci (dxe and pei), xhci, ufs, ramdisk



Also EFI_LIST_FOR_EACH is also copied numerous places.  

HddPasswordSmm, HddPasswordDxe, RamDisk, Ehci (dxe and PEI).  


If this macro is a good iterator pattern then we should remove private macro definitions and create it in BaseLib.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8592</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:49:37 +0000</bug_when>
    <thetext>Discussing this in Design Meeting today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8604</commentid>
    <comment_count>2</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 22:25:31 +0000</bug_when>
    <thetext>Design Meeting: Liming, please have a look at this feature and see if there is someone who&apos;d be a good fit for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9585</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 22:30:56 +0000</bug_when>
    <thetext>EFI_LIST_FOR_EACH_SAFE is not function. It is common logic macro. I agree to define it in common place for the code share. Base.h may be better place.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11890</commentid>
    <comment_count>4</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2020-03-28 19:40:52 +0000</bug_when>
    <thetext>Base.h works...

Should we submit a patch? Liming currently owns the bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11898</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-03-29 20:34:17 +0000</bug_when>
    <thetext>Bret, you can take it. I have no resource to work on it recently. 

After further investigation, LIST macro and APIs are defined in BaseLib.h. So, I agree Sean proposal to add it into BaseLib.h. Because it is base, its name can&apos;t be prefix with EFI_.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12166</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-08 23:26:17 +0000</bug_when>
    <thetext>I&apos;ll go ahead and take ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12167</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-09 01:10:43 +0000</bug_when>
    <thetext>How about EFI_LIST_CONTAINER?

#define EFI_LIST_CONTAINER(Entry, Type, Field) BASE_CR(Entry, Type, Field)

A smaller subset of EFI_LIST_FOR_EACH users are using it to get a pointer to the data structure that contains the head node.

I&apos;m thinking to move it to BaseLib.h as well but in a new BZ in a separate patch series as the use case differs from EFI_LIST_FOR_EACH and the changes can be made independently.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12175</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-09 16:07:36 +0000</bug_when>
    <thetext>V1 series on the mailing list - https://edk2.groups.io/g/devel/message/57143</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12185</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-10 16:03:49 +0000</bug_when>
    <thetext>V2 series on the mailing list - https://edk2.groups.io/g/devel/message/57233</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12242</commentid>
    <comment_count>10</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-17 14:38:33 +0000</bug_when>
    <thetext>Fork with R-bs: https://github.com/makubacki/edk2/tree/bz1959_consolidate_efi_list_for_each_in_base_lib</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12263</commentid>
    <comment_count>11</comment_count>
    <who name="Michael Kubacki">michael.kubacki</who>
    <bug_when>2020-04-20 23:58:14 +0000</bug_when>
    <thetext>Submitted to edk2 in the following commits (patch series):

https://github.com/tianocore/edk2/commit/3b5a58c5f0056c0dd93ffaa3b1d51d23eec0692b
https://github.com/tianocore/edk2/commit/e33d3e7f564c7196fefa35b114e5f06b76267a40
https://github.com/tianocore/edk2/commit/309809455abef8bde99993f157ae5f3b9a1a05f6
https://github.com/tianocore/edk2/commit/dc528558c99406c811d19f598c4f3303e8953160
https://github.com/tianocore/edk2/commit/d189a3f9b68e4c8a6258adffc180cfbe4899db53
https://github.com/tianocore/edk2/commit/9c463f6f59d44afca386f63c70aabc751263a4a7
https://github.com/tianocore/edk2/commit/3571e1360e812e6963db0e7aad0304d11e889041

I&apos;ll add a common macro for EFI_LIST_CONTAINER in an upcoming series.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1035</bug_id>
          
          <creation_ts>2018-07-18 22:02:04 +0000</creation_ts>
          <short_desc>Redundant GUID is defined in AtaBusDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:20:25 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4326</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 22:02:04 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant guid, which is gEfiDiskInfoIdeInterfaceGuid, defined in AtaBusDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Bus/Ata/AtaBusDxe/AtaBusDxe.inf
+++ b/MdeModulePkg/Bus/Ata/AtaBusDxe/AtaBusDxe.inf
@@ -60,7 +60,6 @@
   ReportStatusCodeLib

 [Guids]
-  gEfiDiskInfoIdeInterfaceGuid                  ## SOMETIMES_PRODUCES ## UNDEFINED
   gEfiDiskInfoAhciInterfaceGuid                 ## SOMETIMES_PRODUCES ## UNDEFINED

 [Protocols]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4369</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-22 22:39:50 +0000</bug_when>
    <thetext>bug scrub: assign to module owner to fix</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4943</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:20:25 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1430</bug_id>
          
          <creation_ts>2019-01-04 17:17:23 +0000</creation_ts>
          <short_desc>Incorrect Flags used in S3Resume.c</short_desc>
          <delta_ts>2019-01-16 01:25:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Oleksiy">oleksiyy</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5989</commentid>
    <comment_count>0</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-01-04 17:17:23 +0000</bug_when>
    <thetext>S3ResumeBootOs function, as well as IsLongModeWakingVector contains incorrect line of code:

((Facs-&gt;Flags &amp; EFI_ACPI_4_0_OSPM_64BIT_WAKE__F) != 0))


Facs-&gt;OspmFlags should be used instead. EFI_ACPI_4_0_OSPM_64BIT_WAKE__F is a bit in OSPM Enabled Firmware Control Structure Flags field, not in Firmware Control Structure Feature Flags.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6045</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-10 19:44:03 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to investigate first. Eric, please help to investigate it ASAP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6055</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-01-10 22:22:36 +0000</bug_when>
    <thetext>Confirmed this is an true issue and i will follow up to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6067</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-13 21:38:48 +0000</bug_when>
    <thetext>(In reply to Oleksiy from comment #0)
&gt; S3ResumeBootOs function, as well as IsLongModeWakingVector contains
&gt; incorrect line of code:
&gt; 
&gt; ((Facs-&gt;Flags &amp; EFI_ACPI_4_0_OSPM_64BIT_WAKE__F) != 0))
&gt; 
&gt; 
&gt; Facs-&gt;OspmFlags should be used instead. EFI_ACPI_4_0_OSPM_64BIT_WAKE__F is a
&gt; bit in OSPM Enabled Firmware Control Structure Flags field, not in Firmware
&gt; Control Structure Feature Flags.

Oleksiy, we found Win10 is still using 16bit waking up vector.
Can you kindly tell us which OS resume depends on this bug fix? So that we can verify the logic using that OS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6071</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-14 04:52:23 +0000</bug_when>
    <thetext>(In reply to Ray Ni from comment #3)

&gt; Oleksiy, we found Win10 is still using 16bit waking up vector.

Yes, I noticed that too, in my testing of the patch (&lt;http://mid.mail-archive.com/91711939-5a5e-11d3-691b-830cb8062584@redhat.com&gt;).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6073</commentid>
    <comment_count>5</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-01-14 09:51:24 +0000</bug_when>
    <thetext>I don&apos;t know which OS uses this field. 
I mention the mistake, based on the EFI_ACPI_4_0_OSPM_64BIT_WAKE__F containing OSPM part.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6103</commentid>
    <comment_count>6</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-01-16 01:25:17 +0000</bug_when>
    <thetext>Fixed this issue by below two changes:

1. SHA-1: 306a58365a89d9266d278c82e099f7052603ef54

* MdeModulePkg/BootScriptExecuteorDxe: check 64BIT_WAKE_F in FACS.OSPMFlags

((Facs-&gt;Flags &amp; EFI_ACPI_4_0_OSPM_64BIT_WAKE__F) != 0))

In above code, Facs-&gt;OspmFlags should be used instead.
EFI_ACPI_4_0_OSPM_64BIT_WAKE__F is a bit in OSPM Enabled Firmware
Control Structure Flags field, not in Firmware Control Structure
Feature Flags.

BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1430

Cc: Aleksiy &lt;oleksiyy@ami.com&gt;
Cc: Jian Wang &lt;jian.j.wang@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Regression-tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;



2. SHA-1: de228fb1354d667436670aa9860a0e213622649b

* UefiCpuPkg/S3Resume2Pei: check 64BIT_WAKE_F in FACS.OSPMFlags.

((Facs-&gt;Flags &amp; EFI_ACPI_4_0_OSPM_64BIT_WAKE__F) != 0))

In above code, Facs-&gt;OspmFlags should be used instead.
EFI_ACPI_4_0_OSPM_64BIT_WAKE__F is a bit in OSPM Enabled Firmware
Control Structure Flags field, not in Firmware Control Structure
Feature Flags.

BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1430

Cc: Aleksiy &lt;oleksiyy@ami.com&gt;
Cc: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;
Regression-tested-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1769</bug_id>
          
          <creation_ts>2019-04-29 23:07:45 +0000</creation_ts>
          <short_desc>Incorrect failed item in DevicePathFromText after adopting edk2 tree hash: 9343d0a1cd09544686b14dba5b428d7bc811f6b9</short_desc>
          <delta_ts>2019-08-20 23:17:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nick.wang">nick75227</reporter>
          <assigned_to name="nick.wang">nick75227</assigned_to>
          <cc>eric.jin</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7350</commentid>
    <comment_count>0</comment_count>
      <attachid>314</attachid>
    <who name="nick.wang">nick75227</who>
    <bug_when>2019-04-29 23:07:45 +0000</bug_when>
    <thetext>Created attachment 314
Patch file to correct DebugPort device path node for both DevicePathFromText and DevicePathToText

There is an incorrect failed item in DevicePathFromText (Convert DebugPort()) after adopting edk2 tree hash: 9343d0a1cd09544686b14dba5b428d7bc811f6b9.

edk2 use VENDOR_DEVICE_PATH to create the Debug port device node, but edk2-test use VENDOR_DEFINED_MESSAGING_DEVICE_PATH structure for Debug port device node.
It makes edk2-test report fail by unmatched device path size.

edk2-test should adopt edk2 solution to fix this issue.
Attached file is the patch file to correct DebugPort device path node for both DevicePathFromText and DevicePathToText. 
Please help to check it. Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7603</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:37:45 +0000</bug_when>
    <thetext>nick, could you help to create the patch and send to community devel@edk2.groups.io for review ? thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9102</commentid>
    <comment_count>2</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-20 23:17:04 +0000</bug_when>
    <thetext>It has been fixed on Jun 13 with 
2e32b635dccf39cd7cae12b11da33617348f4949</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>314</attachid>
            <date>2019-04-29 23:07:45 +0000</date>
            <delta_ts>2019-04-29 23:07:45 +0000</delta_ts>
            <desc>Patch file to correct DebugPort device path node for both DevicePathFromText and DevicePathToText</desc>
            <filename>Patch-CorrectDebugPortDeviceNode.7z</filename>
            <type>application/octet-stream</type>
            <size>21753</size>
            <attacher name="nick.wang">nick75227</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1546</bug_id>
          
          <creation_ts>2019-02-20 18:20:57 +0000</creation_ts>
          <short_desc>[ScsiDiskDxe] Support the Storage Security Command Protocol</short_desc>
          <delta_ts>2019-11-14 22:17:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christopher Zurcher">christopher.j.zurcher</reporter>
          <assigned_to name="Christopher Zurcher">christopher.j.zurcher</assigned_to>
          <cc>christopher.j.zurcher</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6460</commentid>
    <comment_count>0</comment_count>
    <who name="Christopher Zurcher">christopher.j.zurcher</who>
    <bug_when>2019-02-20 18:20:57 +0000</bug_when>
    <thetext>The ScsiDiskDxe driver currently does not support EFI_STORAGE_SECURITY_COMMAND_PROTOCOL. This is required for RPMB access for UFS devices.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6461</commentid>
    <comment_count>1</comment_count>
      <attachid>258</attachid>
    <who name="Christopher Zurcher">christopher.j.zurcher</who>
    <bug_when>2019-02-20 18:30:29 +0000</bug_when>
    <thetext>Created attachment 258
Proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6486</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:09:59 +0000</bug_when>
    <thetext>Assign to submitter, he already have patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9873</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-09-29 04:48:01 +0000</bug_when>
    <thetext>Resolved by Christopher J Zurcher &lt;christopher.j.zurcher@intel.com&gt; via commits:

https://github.com/tianocore/edk2/commit/9b14509b16a90ebe5d418d403295efaff76d95d4
https://github.com/tianocore/edk2/commit/43bb4e379b20759284ea499d17c8f503a127b666
https://github.com/tianocore/edk2/commit/1ff7ed2cfa64ba9870221f1eee72b05905e0a0b5
https://github.com/tianocore/edk2/commit/ac81789c3b3093a1efffc82333a7c13b8d814222</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10450</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-11-14 22:17:35 +0000</bug_when>
    <thetext>This is a feature, not bug.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>258</attachid>
            <date>2019-02-20 18:30:29 +0000</date>
            <delta_ts>2019-02-20 18:30:29 +0000</delta_ts>
            <desc>Proposed patch</desc>
            <filename>0001-MdeModulePkg-ScsiDiskDxe-Support-Storage-Security-Co.patch</filename>
            <type>text/plain</type>
            <size>68833</size>
            <attacher name="Christopher Zurcher">christopher.j.zurcher</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1052</bug_id>
          
          <creation_ts>2018-07-25 04:45:46 +0000</creation_ts>
          <short_desc>Redundant info is defined in EsrtDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:12:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4393</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:45:46 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is one redundant library class, which is PrintLib, defined in EsrtDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/MdeModulePkg/Universal/EsrtDxe/EsrtDxe.inf
+++ b/MdeModulePkg/Universal/EsrtDxe/EsrtDxe.inf
@@ -49,7 +49,6 @@
   DxeServicesTableLib
   UefiBootServicesTableLib
   UefiRuntimeServicesTableLib
-  PrintLib

 [Guids]
   gEfiSystemResourceTableGuid             ## PRODUCES             ## SystemTable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4423</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4936</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:12:50 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1453</bug_id>
          
          <creation_ts>2019-01-13 19:11:40 +0000</creation_ts>
          <short_desc>Remove EDK module type and IPF arch in EDKII INF/DEC/DSC/FDF spec</short_desc>
          <delta_ts>2019-03-24 01:52:58 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          <deadline>2019-03-08</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>EDK II Build Specification</cf_documents>
    
    <cf_documents>EDK II DEC Specification</cf_documents>
    
    <cf_documents>EDK II DSC Specification</cf_documents>
    
    <cf_documents>EDK II FDF Specification</cf_documents>
    
    <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6063</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-13 19:11:40 +0000</bug_when>
    <thetext>Code change https://bugzilla.tianocore.org/show_bug.cgi?id=1350 will be done. The spec change is also required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6064</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-13 19:12:17 +0000</bug_when>
    <thetext>Assign it to the owner.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6901</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-24 01:52:58 +0000</bug_when>
    <thetext>build spec: b474f277729d05fd4387096054bd41124db6b55b
dsc spec: 65582b1dd07b90a435ee79b65c4cc094c532bb3e
fdf spec: 4db702c71101aba22479d92e45071960bc1c9e04
inf spec: 3e7a2946f120656a7d43b2d3149fa461c59a0fbf
dec spec: b417219abe46edd31cc829d4160e711fb7697857</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1883</bug_id>
          
          <creation_ts>2019-06-06 02:04:26 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: add TempRamExitPpi.h per FSP 2.1 spec.</short_desc>
          <delta_ts>2019-06-20 00:13:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7941</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-06 02:04:26 +0000</bug_when>
    <thetext>The definition of TempRamExitPpi should be added to IntelFsp2Pkg because it is defined by FSP 2.1 spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8053</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:31:54 +0000</bug_when>
    <thetext>Chasel, please follow up it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8123</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-20 00:13:01 +0000</bug_when>
    <thetext>commit 4c12dcace99dba96a9d4f7d0e259c0231e8fe6f1 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Fri Jun 14 17:39:34 2019 +0800

    IntelFsp2Pkg: add TempRamExitPpi.h.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1883

    Add header file for FSP_TEMP_RAM_EXIT_PPI which is
    defined by FSP 2.1 spec.

    Test: Build successfully.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1689</bug_id>
          
          <creation_ts>2019-04-09 06:34:50 +0000</creation_ts>
          <short_desc>New OvmfXen platform with Xen PVH support</short_desc>
          <delta_ts>2019-08-23 08:32:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=386</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>2122</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter>anthony</reporter>
          <assigned_to>anthony</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7039</commentid>
    <comment_count>0</comment_count>
    <who name="">anthony</who>
    <bug_when>2019-04-09 06:34:50 +0000</bug_when>
    <thetext>The goal is to have a firmware that can be use in both Xen HVM and Xen PVH guests.

A description of the boot ABI of PVH can be found here:
https://xenbits.xenproject.org/docs/unstable/misc/pvh.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7040</commentid>
    <comment_count>1</comment_count>
    <who name="">anthony</who>
    <bug_when>2019-04-09 07:10:23 +0000</bug_when>
    <thetext>Mailing list threads:

Initial proposal:
https://edk2.groups.io/g/devel/topic/30902086

Patch series v1:
https://edk2.groups.io/g/devel/topic/30904017

Patch series v2:
https://edk2.groups.io/g/devel/topic/30964532#38711</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7077</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-11 02:24:17 +0000</bug_when>
    <thetext>anthony.perard@citrix.com is working on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8370</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-04 12:10:00 +0000</bug_when>
    <thetext>V3 series from Anthony:

[edk2-devel] [PATCH v3 00/35]
Specific platform to run OVMF in Xen PVH and HVM guests

http://mid.mail-archive.com/20190704144233.27968-1-anthony.perard@citrix.com
https://edk2.groups.io/g/devel/message/43279</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8640</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-07-30 05:39:10 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v4 00/35]
Specific platform to run OVMF in Xen PVH and HVM guests

http://mid.mail-archive.com/20190729153944.24239-1-anthony.perard@citrix.com
https://edk2.groups.io/g/devel/message/44529</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9006</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-14 16:49:00 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v5 00/35]
Specific platform to run OVMF in Xen PVH and HVM guests

http://mid.mail-archive.com/20190813113119.14804-1-anthony.perard@citrix.com
https://edk2.groups.io/g/devel/message/45526</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9127</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-21 12:17:08 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #5)
&gt; [edk2-devel] [PATCH v5 00/35]
&gt; Specific platform to run OVMF in Xen PVH and HVM guests
&gt; 
&gt; http://mid.mail-archive.com/20190813113119.14804-1-anthony.perard@citrix.com
&gt; https://edk2.groups.io/g/devel/message/45526

Pushed in commit range 30781febe210..1237517b2130.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1573</bug_id>
          
          <creation_ts>2019-02-27 15:29:37 +0000</creation_ts>
          <short_desc>Add the new protocol test for HII ImageEX and EFI HII Image Decoder protocols in UEFI 2.6 SCT</short_desc>
          <delta_ts>2021-11-11 09:52:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>supreeth.venkatesh</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6565</commentid>
    <comment_count>0</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:29:37 +0000</bug_when>
    <thetext>Migrated over from Mantis 1696 (https://mantis.uefi.org/mantis/view.php?id=1696)

Description	
The ECR 1409/1536 are introduced in UEFI 2.6 Spec, so the corresponding request is to add the new protocols test in the UEFI 2.6 SCT.

Anoop Tk from HPE will contribute the test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6685</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-03-11 04:34:43 +0000</bug_when>
    <thetext>HII_IMAGE_EX protocol test has been implemented by Anoop TK in UEFI 2.6A SCT.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6785</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 21:18:07 +0000</bug_when>
    <thetext>change status to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15872</commentid>
    <comment_count>3</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:51:06 +0000</bug_when>
    <thetext>@Eric:
Can this be closed as resolved?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17381</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2021-09-25 22:27:09 +0000</bug_when>
    <thetext>Hi Heinrich Schuchardt 

HII ImageEX test is implemented.
If you want, we may close this and open a new one to track EFI HII Image Decoder protocol test

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17735</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-11-11 09:52:05 +0000</bug_when>
    <thetext>Closing the ticket as the test is now implemented.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1472</bug_id>
          
          <creation_ts>2019-01-17 00:48:11 +0000</creation_ts>
          <short_desc>BaseTools: Build report generation fail when structure Pcd enabled</short_desc>
          <delta_ts>2019-02-17 20:53:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6119</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-01-17 00:48:11 +0000</bug_when>
    <thetext>When structure pcd enabled, build report generation failed with the message as following.
1. 
edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 1213, in ParseStruct
    if Values[1] and Values[1].endswith(&apos;.dsc&apos;):
KeyError: 1

2. edk2\BaseTools\Source\Python\build\BuildReport.py&quot;, line 1438, in PrintStructureInfo
    if Value[1] and &apos;build command options&apos; in Value[1]:
KeyError: 1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6122</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 01:37:00 +0000</bug_when>
    <thetext>assign to Bob to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6380</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-17 20:53:15 +0000</bug_when>
    <thetext>fixed at 5f094268e068949b0e0a0275fa2d4a9a6cc04c2d</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1901</bug_id>
          
          <creation_ts>2019-06-11 20:28:07 +0000</creation_ts>
          <short_desc>Set the returned buffer to null while fail to create HOB in PeiAllocatePool</short_desc>
          <delta_ts>2019-06-23 22:44:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>nobody</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7992</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-11 20:28:07 +0000</bug_when>
    <thetext>The original logic is ASSERT if fail to create HOB. But that would make no sense for release version. Set the Buffer to null to indicate the failure is required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7993</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-11 20:28:46 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8046</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:24:45 +0000</bug_when>
    <thetext>Zhi chao, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8152</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-23 22:44:19 +0000</bug_when>
    <thetext>fixed at 8797683f96</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1370</bug_id>
          
          <creation_ts>2018-11-30 13:45:15 +0000</creation_ts>
          <short_desc>Add Base64Encode / Decode to Baselib</short_desc>
          <delta_ts>2019-02-10 19:25:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5727</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-11-30 13:45:15 +0000</bug_when>
    <thetext>Base64 Encode/Decode functionality should be provided by Edk2.  

We have added it to BaseLib.h

Func def here: 
https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Include/Library/BaseLib.h#L2831 

Implementation here:
https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Library/BaseLib/String.c#L1763

Unit Test here: (this unit test is incorrectly named and in the wrong package but the unit test content is good)

https://github.com/Microsoft/mu_plus/tree/release/201808/DfciPkg/UnitTests/XmlB64Test</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5752</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-06 09:03:37 +0000</bug_when>
    <thetext>https://tools.ietf.org/html/rfc4648 lists Base16, Base32, and Base64 Data Encodings. Could you add the reason why needs Data Encodings in UEFI BIOS code? What driver will use it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5766</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:08:38 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to discuss first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5816</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-10 18:59:23 +0000</bug_when>
    <thetext>I have usage in a feature but again it is about providing a common library set with well tested and validated functions.  If you want Base16/32 then that is fine but i have no need so i would suggest adding when needed.  Baes64 seems to be a more common encoding than the other two.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5831</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-12 01:57:14 +0000</bug_when>
    <thetext>Could you share more information on what firmware feature depends on Baes64 encoding/decoding?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5841</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-12-12 16:51:20 +0000</bug_when>
    <thetext>I agree some background on potential usage would be good to add to the BZ and may be useful for the commit message to explain the FW use case for this API.

However, I would like to see this feature added to BaseLib and let others comment on adding a new BaseLib function in the patch review.

I also agree that Base64 is sufficient.  We can wait for a request for Base16 or Base32.   This is a clear request for Base64, so let&apos;s focus on Base64 for this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5843</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-12 21:43:53 +0000</bug_when>
    <thetext>Assign it to Shenglei to add these two APIs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6313</commentid>
    <comment_count>7</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-10 19:25:47 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/1f7af69d10fa3c88e996d38179d5f985f6c7dfe5</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1808</bug_id>
          
          <creation_ts>2019-05-14 22:31:14 +0000</creation_ts>
          <short_desc>CpuCommonFeaturesLib ProcTrace.c has bug about register table write for RTIT_OUTPUT_BASE and RTIT_OUTPUT_MASK_PTRS</short_desc>
          <delta_ts>2019-06-06 06:59:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7538</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-14 22:31:14 +0000</bug_when>
    <thetext>OutputBaseReg.Bits.Base = (TopaTableBaseAddr &gt;&gt; 7) &amp; 0x01FFFFFF;
    OutputBaseReg.Bits.BaseHi = RShiftU64 ((UINT64) TopaTableBaseAddr, 32) &amp; 0xFFFFFFFF;
    CPU_REGISTER_TABLE_WRITE64 (
      ProcessorNumber,
      Msr,
      MSR_IA32_RTIT_OUTPUT_BASE,
      OutputBaseReg.Uint64
      );

    OutputMaskPtrsReg.Bits.MaskOrTableOffset = 0;
    OutputMaskPtrsReg.Bits.OutputOffset = 0;
    CPU_REGISTER_TABLE_WRITE64 (
      ProcessorNumber,
      Msr,
      MSR_IA32_RTIT_OUTPUT_MASK_PTRS,
      OutputMaskPtrsReg.Uint64
      );

The values to register table write for RTIT_OUTPUT_BASE and RTIT_OUTPUT_MASK_PTRS are not been initialized in whole, the reserved bits in them will be random that will cause GP fault when setting register based on register table.

And the code should get MSR values for all processors in ProcTraceSupport(), and then ProcTraceInitialize() to update fields for register table write.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7597</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:33:21 +0000</bug_when>
    <thetext>Eric, please help on it. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7790</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-25 02:57:44 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7946</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-06-06 06:59:38 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/49fb605709796488589c6f282522283911a575f6.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1275</bug_id>
          
          <creation_ts>2018-10-25 09:20:47 +0000</creation_ts>
          <short_desc>CryptoPkg/RuntimeCryptLib: Potential integer overflow issue in RuntimeMemAllocation implementation</short_desc>
          <delta_ts>2018-10-30 23:25:50 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Qin Long">qin.long</reporter>
          <assigned_to name="Qin Long">qin.long</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5389</commentid>
    <comment_count>0</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2018-10-25 09:20:47 +0000</bug_when>
    <thetext>In light-weight runtime memory management in RuntimeCryptLib instance, the implementation on free memory lookup routine may introduce integer overflow issue. 

CryptoPkg\Library\BaseCryptLib\SysCall\ RuntimeMemAllocation.c

/**
  Look-up Free memory Region for object allocation.

  @param[in]  AllocationSize  Bytes to be allocated.

  @return  Return available page offset for object allocation.

**/
UINTN
LookupFreeMemRegion (
  IN  UINTN  AllocationSize
  )
{
  for (Index = StartPageIndex; Index &lt;= (mRTPageTable-&gt;PageCount - ReqPages); ) { 
  ......
  --&gt; mRTPageTable-&gt;PageCount – ReqPages maybe integer overflow
  }


  for (Index = 0; Index &lt; (StartPageIndex - ReqPages); ) { 
  ......
  --&gt; StartPageIndex – ReqPages maybe integer overflow
  }

}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5434</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-30 04:09:40 +0000</bug_when>
    <thetext>assign to owner to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5442</commentid>
    <comment_count>2</comment_count>
    <who name="Qin Long">qin.long</who>
    <bug_when>2018-10-30 23:25:50 +0000</bug_when>
    <thetext>fixed by commit#: 269f3b51803685eb3f4f4cd4415dc833d375efba</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1706</bug_id>
          
          <creation_ts>2019-04-11 09:17:28 +0000</creation_ts>
          <short_desc>IntelFspPkg: Coverity scan flags multiple issues in edk2-stable201903</short_desc>
          <delta_ts>2020-02-13 04:30:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>f4bug</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>vincent.zimmer</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFspPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7092</commentid>
    <comment_count>0</comment_count>
      <attachid>294</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-11 09:17:28 +0000</bug_when>
    <thetext>Created attachment 294
archive of Coverity reports for this package, categorized by issue type

This is a Coverity defect report against edk2-stable201903, detected by
Coverity in edk2 modules while they were built as parts of OVMF. This
issue is being filed as a security BZ so that the maintainers of this
package can evaluate whether any of the issues flagged by coverity have
security impact.

If none of the issues have security impact, please simply re-classify
this BZ as a normal bug report.

If there is at least one issue with security impact, then please filter
those out of the logs in the attachment, and create a new (public) BZ
for this same package, with just the normal issues. This way normal
bugfixing can proceed while the security problems are under embargo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10673</commentid>
    <comment_count>1</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2019-12-11 11:53:51 +0000</bug_when>
    <thetext>jian to work w/ respective maintainers on disposition</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11071</commentid>
    <comment_count>2</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 12:17:57 +0000</bug_when>
    <thetext>2/5/2020 - since this is found by a tool anyone can run, recommend the tranch of coverity issues be moved to un-embargo.  a.r. for v.z. to do after 2/5 meeting</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11102</commentid>
    <comment_count>3</comment_count>
    <who name="Vincent Zimmer">vincent.zimmer</who>
    <bug_when>2020-02-05 13:19:28 +0000</bug_when>
    <thetext>infosec meeting 2/5/2020 - for classes of issues found by public tool, move to the open to finish characterization, assignment, and potential fix

since this package has been removed from the upstream, consider just closing this issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11161</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-02-07 02:49:41 +0000</bug_when>
    <thetext>Yes, IntelFspPkg has been removed from latest EDK2, currently I closed this as WONTFIX, please re-open it when we still need to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11242</commentid>
    <comment_count>5</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-02-13 04:30:05 +0000</bug_when>
    <thetext>Similar issues filed for IntelFsp2Pkg as below and we have fixed those issues:
https://bugzilla.tianocore.org/show_bug.cgi?id=1705</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>294</attachid>
            <date>2019-04-11 09:17:28 +0000</date>
            <delta_ts>2019-04-11 09:17:28 +0000</delta_ts>
            <desc>archive of Coverity reports for this package, categorized by issue type</desc>
            <filename>IntelFspPkg.zip</filename>
            <type>application/octet-stream</type>
            <size>847</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1492</bug_id>
          
          <creation_ts>2019-01-27 22:49:06 +0000</creation_ts>
          <short_desc>Open Source Wi-Fi Connection Manager for UEFI Wi-Fi connections</short_desc>
          <delta_ts>2019-02-28 21:49:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>fan.wang</reporter>
          <assigned_to>fan.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-20</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6213</commentid>
    <comment_count>0</comment_count>
    <who name="">fan.wang</who>
    <bug_when>2019-01-27 22:49:06 +0000</bug_when>
    <thetext>UEFI Spec defines a set of protocols for UEFI Wi-Fi stack but there is no open source code in EDKII. Considering it is a fundamental technology may benefit many users, we need a driver to enable this. The Wi-Fi connection manager driver needs to provide UI for users to scan networks, connect or disconnect to networks, and may support more operations needed for UEFI network boot. 

This connection manager won&apos;t include the UNDI driver, supplicant driver, or other device specific drivers and is therefor not a complete solution stack for UEFI Wi-Fi, users can seek help for Wireless card vendors.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6351</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-13 03:46:34 +0000</bug_when>
    <thetext>Assign to Fan.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6593</commentid>
    <comment_count>2</comment_count>
    <who name="">fan.wang</who>
    <bug_when>2019-02-28 21:49:30 +0000</bug_when>
    <thetext>Commit in https://github.com/tianocore/edk2/commit/90b24889f9ced53c18b73266d507e45fbd94fab0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1393</bug_id>
          
          <creation_ts>2018-12-11 21:22:27 +0000</creation_ts>
          <short_desc>[OpenSSL] Update version to 1.1.0j</short_desc>
          <delta_ts>2018-12-20 21:21:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5829</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-11 21:22:27 +0000</bug_when>
    <thetext>BZ#1089 (https://bugzilla.tianocore.org/show_bug.cgi?id=1089) requests to upgrade the OpenSSL to the latest 1.1.1 release. Since OpenSSL-1.1.1 has many changes, more porting efforts and feature evaluation are needed. This might lead to a situation that it cannot catch the Q1&apos;19 stable tag.

One of the solution is upgrade current version (1.1.0h) to 1.1.0j. According to following web page in openssl.org, all security issues solved in 1.1.1 have been 
 also back-ported to 1.1.0.j. This can make sure that no security vulnerabilities left in edk2 master before 1.1.1.

https://www.openssl.org/news/vulnerabilities-1.1.1.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5881</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:56:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5940</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-12-20 21:21:16 +0000</bug_when>
    <thetext>Push @ a18f784cfdbe17855ec4376e80db927e1a81aaca
Reviewed @ https://lists.01.org/pipermail/edk2-devel/2018-December/034295.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1727</bug_id>
          
          <creation_ts>2019-04-17 03:52:41 +0000</creation_ts>
          <short_desc>GenFw doesn&apos;t work correctly when convert ELF image to EFI image with -e PEIM -z option both</short_desc>
          <delta_ts>2019-09-10 23:03:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7160</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-17 03:52:41 +0000</bug_when>
    <thetext>GenFw tool can convert ELF image to PE image with -e PEIM option. GenFw also supports -z option to zero debug entry. When -e and -z option is used together, the generate EFI image will be wrong. This should be an issue in GenFw tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7161</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-17 03:53:05 +0000</bug_when>
    <thetext>Assign it to Liming to check first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9588</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 23:03:21 +0000</bug_when>
    <thetext>Fix it at edk2 fa5e184327519e2ff367538b1cade1e5687e8795</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1627</bug_id>
          
          <creation_ts>2019-03-15 03:58:53 +0000</creation_ts>
          <short_desc>Delete the obsolete file FrameworkDatabase.template from BaseTools/Conf</short_desc>
          <delta_ts>2019-08-27 18:38:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6733</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-15 03:58:53 +0000</bug_when>
    <thetext>Delete the obsolete file FrameworkDatabase.template from BaseTools/Conf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6801</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 23:06:56 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9299</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:36:57 +0000</bug_when>
    <thetext>Fixed in:

c648e9058717 BaseTools: Fix the issue that build report missing Module Size
51e9be0cc3d1 Vlv2TbltDevicePkg:Delete FrameworkDatabase from Vlv2TbltDevicePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9300</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:38:52 +0000</bug_when>
    <thetext>Sorry, incorrect commit references in comment 2.

Fixed in:

- 7d83e9e84793 (&quot;BaseTools:Delete FrameworkDatabase from BaseTools/Conf&quot;, 2019-05-09)

- 51e9be0cc3d1 (&quot;Vlv2TbltDevicePkg:Delete FrameworkDatabase from Vlv2TbltDevicePkg&quot;, 2019-05-09)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1108</bug_id>
          
          <creation_ts>2018-08-22 12:15:05 +0000</creation_ts>
          <short_desc>Remove EdkShellBinPkg from edk2/master</short_desc>
          <delta_ts>2018-11-19 01:45:31 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EdkShellBinPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4673</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2018-08-22 12:15:05 +0000</bug_when>
    <thetext>Customers who need this EDK version of shell can get it from a UDK branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4693</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 20:16:29 +0000</bug_when>
    <thetext>bug scrub: assign to Liming to discuss first. final result may depend on the community discussion result.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5628</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-11-19 01:45:31 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/cc5c08f9d630b17a3a052aa397b835868d9f0261
https://github.com/tianocore/edk2/commit/f07afa3e266354be9e194368d15d2db6a4c5d4a4
https://github.com/tianocore/edk2/commit/4b888334d2346567d821d07fd81b079983173731
https://github.com/tianocore/edk2/commit/2840bb51040bb79c1ad53b1eb1cbb86e5edf80ca
https://github.com/tianocore/edk2/commit/6c15371695d4db55936c4d087765b4fbe4f059ab
https://github.com/tianocore/edk2/commit/238fe4ded4fb71dc1aec4323f66f8e96f95268e0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1941</bug_id>
          
          <creation_ts>2019-06-26 17:19:39 +0000</creation_ts>
          <short_desc>drivers command issue</short_desc>
          <delta_ts>2019-08-29 15:17:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Oleksiy">oleksiyy</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8212</commentid>
    <comment_count>0</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-06-26 17:19:39 +0000</bug_when>
    <thetext>In ShellCommandRunDrivers function arrays ChildCountStr and DeviceCountStr declared with size of 3. This is not enough, taking to account that it should include null terminator.
If shell will be build in debug mode and number of Devices, or/and number of Child will be bigger than 99 (which is real for PCI, for example), assert will be triggered in PrintLibInternal.c(441): (BufferSize &gt;= (Width + 1) * Increment). In release mode &quot;Buffer to small&quot; status will be ignored in  ShellCommandRunDrivers -&gt; UnicodeValueToStringS and number/s from previous driver will be displayed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8240</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:13:01 +0000</bug_when>
    <thetext>zhichao, please investigate it firstly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9280</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 17:50:07 +0000</bug_when>
    <thetext>Apparently fixed at commit 811328172841ce3f7ec1fe7033c130726ad189b7 -- can you close the bug as RESOLVED|FIXED if that&apos;s the case?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9328</commentid>
    <comment_count>3</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-08-27 20:26:49 +0000</bug_when>
    <thetext>Thanks for the reminder.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1961</bug_id>
          
          <creation_ts>2019-07-05 00:05:26 +0000</creation_ts>
          <short_desc>CpuCommonFeaturesLib Ppin.c Enhance the code to disable and lock</short_desc>
          <delta_ts>2019-07-16 04:10:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8373</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-07-05 00:05:26 +0000</bug_when>
    <thetext>Current code only handles enable/disable bit, but not lock bit. The code needs to be enhanced to disable and lock. Note, enable and lock bits could be not set both.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8421</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:29:05 +0000</bug_when>
    <thetext>Bug Triage: assign to submitter.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8461</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-07-16 04:10:07 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/84a459472075d94963463bffaa5dc6eee47f14c3.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1036</bug_id>
          
          <creation_ts>2018-07-18 22:09:28 +0000</creation_ts>
          <short_desc>Redundant GUID is defined in IScsiDxe module INF</short_desc>
          <delta_ts>2018-09-26 23:17:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="jiaxinwu">jiaxin.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4327</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 22:09:28 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant guid, which is gEfiAcpi20TableGuid, defined in IScsiDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/NetworkPkg/IScsiDxe/IScsiDxe.inf
+++ b/NetworkPkg/IScsiDxe/IScsiDxe.inf
@@ -124,7 +124,6 @@
   gEfiIfrTianoGuid                              ## SOMETIMES_PRODUCES ## UNDEFINED
   gEfiAcpiTableGuid                             ## SOMETIMES_CONSUMES ## SystemTable
   gEfiAcpi10TableGuid                           ## SOMETIMES_CONSUMES ## SystemTable
-  gEfiAcpi20TableGuid                           ## SOMETIMES_CONSUMES ## SystemTable
   gEfiAdapterInfoNetworkBootGuid                ## SOMETIMES_CONSUMES ## UNDEFINED
   gEfiAdapterInfoUndiIpv6SupportGuid            ## SOMETIMES_CONSUMES ## GUID</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4358</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:56:04 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5122</commentid>
    <comment_count>2</comment_count>
    <who name="jiaxinwu">jiaxin.wu</who>
    <bug_when>2018-09-26 23:17:07 +0000</bug_when>
    <thetext>Commit version:
https://github.com/tianocore/edk2/commit/fafdb489a7120b45cf8bc0cc4aaa01358f7d70e8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1867</bug_id>
          
          <creation_ts>2019-05-31 23:36:56 +0000</creation_ts>
          <short_desc>Build cache cannot store the cache files for library package</short_desc>
          <delta_ts>2019-08-29 15:16:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>steven.shi</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7895</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-31 23:36:56 +0000</bug_when>
    <thetext>Current build cache cannot store the cache for library package. Below is the reproduce steps in my side:

Remove build cache folder if it exists and do the clean build for MdePkg library package:
D:\Project\Edk2Git\workspace\edk2&gt;rmdir Build /s /q
D:\Project\Edk2Git\workspace\edk2&gt;rmdir BinCache /s /q
D:\Project\Edk2Git\workspace\edk2&gt;build -p MdePkg\MdePkg.dsc -a IA32 -b DEBUG -t VS2015x86 --hash --binary-destination=BinCache

After build, the expected result is the BinCache folder is generated and the MdePkg build cache files (e.g. .hash and .lib) are stored in the BinCache folder. But the BinCache folder is not generated at all.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7896</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-31 23:38:30 +0000</bug_when>
    <thetext>Confirm and assign to Zhijun.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9292</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:23:06 +0000</bug_when>
    <thetext>Fixed at ede54e358817 (&quot;BaseTools:Build cache cannot store the cache files for library package&quot;, 2019-06-17)?

Take care of your friggin BZ tickets!!!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9341</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:39:15 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Fixed at ede54e358817 (&quot;BaseTools:Build cache cannot store the cache files
&gt; for library package&quot;, 2019-06-17)?

Again, the question is for Steven / Zhiju.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9361</commentid>
    <comment_count>4</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-08-27 21:32:56 +0000</bug_when>
    <thetext>Yes. This issue is fixed at ede54e3588173178ec054b5c4dc181d3c63872b2.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1053</bug_id>
          
          <creation_ts>2018-07-25 04:51:50 +0000</creation_ts>
          <short_desc>Redundant info is defined in CapsuleApp module INF</short_desc>
          <delta_ts>2018-09-13 02:13:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4395</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 04:51:50 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are three redundant guids, which are gEfiGlobalVariableGuid, gEfiCertTypeRsa2048Sha256Guid and gEfiCertPkcs7Guid, defined in CapsuleApp module INF file. Need to remove them.


Below is the fix reference:
--- a/MdeModulePkg/Application/CapsuleApp/CapsuleApp.inf
+++ b/MdeModulePkg/Application/CapsuleApp/CapsuleApp.inf
@@ -40,12 +40,9 @@
   MdeModulePkg/MdeModulePkg.dec

 [Guids]
-  gEfiGlobalVariableGuid                 ## CONSUMES   ## GUID
   gEfiCapsuleReportGuid                  ## CONSUMES   ## GUID
   gEfiFmpCapsuleGuid                     ## CONSUMES   ## GUID
   gWindowsUxCapsuleGuid                  ## CONSUMES   ## GUID
-  gEfiCertTypeRsa2048Sha256Guid          ## CONSUMES   ## GUID
-  gEfiCertPkcs7Guid                      ## CONSUMES   ## GUID
   gEfiSystemResourceTableGuid            ## CONSUMES   ## GUID

 [Protocols]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4424</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:22 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4482</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-08-02 03:52:02 +0000</bug_when>
    <thetext>Two GUIDs which are gEfiCertTypeRsa2048Sha256Guid and gEfiCertPkcs7Guid, should not be removed.

Below if the fix reference:
MdeModulePkg\Application\CapsuleApp\CapsuleDump.c

{
  EFI_FIRMWARE_IMAGE_AUTHENTICATION             *ImageAuthentication;

  ImageAuthentication = Image;
  if (CompareGuid(&amp;ImageAuthentication-&gt;AuthInfo.CertType, &amp;gEfiCertPkcs7Guid) ||
      CompareGuid(&amp;ImageAuthentication-&gt;AuthInfo.CertType, &amp;gEfiCertTypeRsa2048Sha256Guid)) {
    Print(L&quot;[ImageAuthentication]\n&quot;);
    Print(L&quot;  MonotonicCount   - 0x%lx\n&quot;, ImageAuthentication-&gt;MonotonicCount);
    Print(L&quot;WIN_CERTIFICATE:\n&quot;);
    Print(L&quot;  dwLength         - 0x%x\n&quot;, ImageAuthentication-&gt;AuthInfo.Hdr.dwLength);
    Print(L&quot;  wRevision        - 0x%x\n&quot;, ImageAuthentication-&gt;AuthInfo.Hdr.wRevision);
    Print(L&quot;  wCertificateType - 0x%x\n&quot;, ImageAuthentication-&gt;AuthInfo.Hdr.wCertificateType);
    Print(L&quot;  CertType         - %g\n&quot;, &amp;ImageAuthentication-&gt;AuthInfo.CertType);
    return sizeof(ImageAuthentication-&gt;MonotonicCount) + ImageAuthentication-&gt;AuthInfo.Hdr.dwLength;
  } else {
    return 0;
  }
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4937</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:13:22 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4938</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:13:41 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1454</bug_id>
          
          <creation_ts>2019-01-14 00:37:27 +0000</creation_ts>
          <short_desc>Update IGD_OPREGION_MBOX3 structure with two additional members as per latest Opregion spec</short_desc>
          <delta_ts>2019-08-27 19:28:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>digant.h.solanki</reporter>
          <assigned_to>digant.h.solanki</assigned_to>
          <cc>digant.h.solanki</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelSiliconPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6069</commentid>
    <comment_count>0</comment_count>
    <who name="">digant.h.solanki</who>
    <bug_when>2019-01-14 00:37:27 +0000</bug_when>
    <thetext>As per the new ACPI OpRegion Spec for IGD, need to update IGD Opregion Mailbox3 structure with Physical Address of Raw VBT Data (RVDA) and Size of Raw VBT Data (RVDS).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6136</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:20:15 +0000</bug_when>
    <thetext>bug scrub: assign to submitter, he provided the patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7659</commentid>
    <comment_count>2</comment_count>
      <attachid>345</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:14:38 +0000</bug_when>
    <thetext>Created attachment 345
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7672</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 15:49:12 +0000</bug_when>
    <thetext>change back to digant.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9314</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:28:32 +0000</bug_when>
    <thetext>Fixed in commit 34c5a69a2b08 (&quot;IntelSiliconPkg\Include\IndustryStandard: Update IGD_OPREGION_MBOX3 Structure&quot;, 2019-01-31). Likely.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>345</attachid>
            <date>2019-05-17 13:14:38 +0000</date>
            <delta_ts>2019-05-17 13:14:38 +0000</delta_ts>
            <desc>data</desc>
            <filename>file_1454.txt</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1792</bug_id>
          
          <creation_ts>2019-05-09 10:18:16 +0000</creation_ts>
          <short_desc>Deprecate HmacXxxGetContextSize in BaseCryptLib</short_desc>
          <delta_ts>2020-07-09 06:04:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>brian.delgado</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>CryptoPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7472</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-05-09 10:18:16 +0000</bug_when>
    <thetext>Hmac(Md5|Sha1|Sha256)GetContextSize() use a deprecated macro HMAC_MAX_MD_CBLOCK defined in openssl. They should be dropped to avoid misuses in the future. For context allocation and release, use HmacXxxNew() and HmacXxxFree() instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7601</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:35:21 +0000</bug_when>
    <thetext>Jian will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10798</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-01-08 02:31:15 +0000</bug_when>
    <thetext>The patch has been sent for review at https://edk2.groups.io/g/devel/message/53004
The patch can also be found at https://github.com/jwang36/edk2/tree/fix-bz1792-Deprecate-GetContextSize</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10801</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-08 07:19:39 +0000</bug_when>
    <thetext>IN_PROGRESS per comment 2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10883</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-01-14 01:29:08 +0000</bug_when>
    <thetext>v2 patch: https://edk2.groups.io/g/devel/message/53207
patch branch: https://github.com/jwang36/edk2/tree/fix-bz1792-Deprecate-GetContextSize-v2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10911</commentid>
    <comment_count>5</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-01-16 01:42:21 +0000</bug_when>
    <thetext>v3 patch review: https://edk2.groups.io/g/devel/message/53299
v3 patch branch: https://github.com/jwang36/edk2/tree/fix-bz1792-v3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10957</commentid>
    <comment_count>6</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2020-01-20 11:52:11 +0000</bug_when>
    <thetext>Reviewed at
    https://edk2.groups.io/g/devel/message/53304
    https://edk2.groups.io/g/devel/message/53382
    https://edk2.groups.io/g/devel/message/53305

Pushed at
    9a1f14ad721bbcd833ec5108944c44a502392f03, 
    a23fdff6fb99bcf7ac226f0a1095c0bdd26b0468</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13078</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-07-09 06:04:23 +0000</bug_when>
    <thetext>*** Bug 2095 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1690</bug_id>
          
          <creation_ts>2019-04-09 13:16:51 +0000</creation_ts>
          <short_desc>wrong appendix listed in inf spec</short_desc>
          <delta_ts>2019-05-07 21:58:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7043</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-04-09 13:16:51 +0000</bug_when>
    <thetext>On this page: 
https://edk2-docs.gitbooks.io/edk-ii-inf-specification/content/2_inf_overview/24_[defines]_section.html#24-defines-section

It says: 
Appendix G lists the available MODULE_TYPE values supported by EDK II INF files.

There is no appendix g.  I believe this should be appendix F?  

Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7075</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-11 02:09:21 +0000</bug_when>
    <thetext>Bob will help to update it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7311</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-04-27 23:54:59 +0000</bug_when>
    <thetext>patch review link
https://edk2.groups.io/g/devel/topic/patch_document_correct_the/31369390?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,31369390</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7413</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-07 21:58:35 +0000</bug_when>
    <thetext>fixed at 65582b1dd07b90a435ee79b65c4cc094c532bb3e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1162</bug_id>
          
          <creation_ts>2018-09-07 02:56:09 +0000</creation_ts>
          <short_desc>INF spec: Table 1 EDK II [Defines] Section need update to align with 3.4 section</short_desc>
          <delta_ts>2018-09-12 20:54:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II INF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4882</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-07 02:56:09 +0000</bug_when>
    <thetext>current the Table 1 EDK II [Defines] Section have some items are not align with 3.4 section.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4917</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-12 20:50:55 +0000</bug_when>
    <thetext>Patch email: 
https://lists.01.org/pipermail/edk2-devel/2018-September/029594.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4918</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-12 20:54:27 +0000</bug_when>
    <thetext>Commit:
INF spec: SHA-1: 6afb22979cc8ab2535bdcff0890f58f5de02ac12</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1070</bug_id>
          
          <creation_ts>2018-08-01 17:41:05 +0000</creation_ts>
          <short_desc>commit f15cb995bb38 adds unchecked PcdSet8S() calls to SecurityPkg/Library/Tpm2DeviceLibDTpm</short_desc>
          <delta_ts>2020-05-05 19:04:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4474</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-01 17:41:05 +0000</bug_when>
    <thetext>Commit f15cb995bb38 (&quot;SecurityPkg: Cache TPM interface type info&quot;, 2018-06-25) added unchecked PcdSet8S() calls to the following two functions:

- Tpm2DeviceLibConstructor()
  [SecurityPkg/Library/Tpm2DeviceLibDTpm/Tpm2DeviceLibDTpm.c]

- Tpm2InstanceLibDTpmConstructor()
  [SecurityPkg/Library/Tpm2DeviceLibDTpm/Tpm2InstanceLibDTpm.c]

PcdSetXxxS() calls should always be explicitly checked for failure; minimally with a local RETURN_STATUS variable and an ASSERT_RETURN_ERROR() macro invocation.

This will catch platforms (in debug builds at least) that don&apos;t yet provide a dynamic default for the PCD in question (for which reason the setting will never succeed on that platform).

Original issue report on the mailing list:
[edk2] Missing boot related measurements at TPM 2.0 PCRs 0-7 with OVMF
https://lists.01.org/pipermail/edk2-devel/2018-August/027840.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4488</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-02 20:09:24 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5123</commentid>
    <comment_count>2</comment_count>
    <who name="chao">chao.b.zhang</who>
    <bug_when>2018-09-26 23:34:18 +0000</bug_when>
    <thetext>The TPM PCR issue listed here was caused by a typo in INF.  It is not related to PCD set failure.
At present, these 2 PCDs are Dynamic &amp; DynamicEx. It is low risk to fail at SetPcdS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12385</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:04:01 +0000</bug_when>
    <thetext>(In reply to chao from comment #2)
&gt; The TPM PCR issue listed here was caused by a typo in INF.  It is not
&gt; related to PCD set failure.
&gt; At present, these 2 PCDs are Dynamic &amp; DynamicEx. It is low risk to fail at
&gt; SetPcdS.

I think that at least an ASSERT_RETURN_ERROR() should be there, for NOOPT / DEBUG builds, like in many other places in edk2. But I guess there&apos;s no capacity for this. Closing as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1473</bug_id>
          
          <creation_ts>2019-01-17 06:04:40 +0000</creation_ts>
          <short_desc>Build fail when enable FixedAtBuild (VOID*) PCD use in the [DEPEX] section of INF files</short_desc>
          <delta_ts>2019-02-26 22:34:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6128</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-01-17 06:04:40 +0000</bug_when>
    <thetext>[Depex]
gUefiOvmfPkgTokenSpaceGuid.test1

Build fail, and report error:
 : error C0DE: Unknown fatal error when processing 
AttributeError: &apos;ModuleAutoGen&apos; object has no attribute &apos;_FixedPcdVoidTypeDict&apos;

If add a PCD under [Depex] in the INF file, it will report the error</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6130</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 18:55:48 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6545</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-02-26 22:34:07 +0000</bug_when>
    <thetext>fix it in SHA-1: 3e1ab49481a719265abec84f3f56a3f9f2cd6190</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1372</bug_id>
          
          <creation_ts>2018-11-30 15:03:20 +0000</creation_ts>
          <short_desc>IsDevicePathValid needs better input parameter checking</short_desc>
          <delta_ts>2019-02-01 00:41:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5729</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-11-30 15:03:20 +0000</bug_when>
    <thetext>assert is not a safe way to check for NULL.

https://github.com/Microsoft/mu_basecore/blob/203f29c9ad95d845a20ff8f4321996f58b394c17/MdePkg/Library/UefiDevicePathLib/DevicePathUtilities.c#L64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5754</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-06 09:27:10 +0000</bug_when>
    <thetext>I agree this change. NULL device path is also invalid path. IsDevicePathValid() should return FALSE or TRUE, and not ASSERT(). This change needs to update IsDevicePathValid() API definition and implementation both.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5764</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:06:53 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5803</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-10 00:32:47 +0000</bug_when>
    <thetext>Assign it to owner to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6258</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-01 00:41:55 +0000</bug_when>
    <thetext>Fixed at edk2/master:
ca67441558cbe7d482ebf9506fee01b82447ddf1
fd02394228ee1dc2378cccfde6098c461f96dd42</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1809</bug_id>
          
          <creation_ts>2019-05-14 22:34:36 +0000</creation_ts>
          <short_desc>CpuCommonFeaturesLib ProcTrace.c could disable TraceEn at the beginning of ProcTraceInitialize(), but not the end</short_desc>
          <delta_ts>2019-06-06 07:00:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7539</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-14 22:34:36 +0000</bug_when>
    <thetext>CpuCommonFeaturesLib ProcTrace.c could disable TraceEn at the beginning of ProcTraceInitialize(), but not the end.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7596</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:32:54 +0000</bug_when>
    <thetext>Eric, please help on it. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7789</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-25 02:57:16 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7947</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-06-06 07:00:08 +0000</bug_when>
    <thetext>Fixed at
https://github.com/tianocore/edk2/commit/484dc05005ea80280e184b20a6b8a08636276777.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1606</bug_id>
          
          <creation_ts>2019-03-08 16:42:48 +0000</creation_ts>
          <short_desc>Function example has extraneous semicolon.</short_desc>
          <delta_ts>2020-12-11 14:46:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bret Barkelew">bret.barkelew</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>EDK II C Coding Standards</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6666</commentid>
    <comment_count>0</comment_count>
    <who name="Bret Barkelew">bret.barkelew</who>
    <bug_when>2019-03-08 16:42:48 +0000</bug_when>
    <thetext>https://github.com/tianocore-docs/edk2-CCodingStandardsSpecification/blob/master/5_source_files/57_c_programming.md

Section 5.7.1.10, there is a semicolon after the function paramters. Probably a copy-paste error from the header file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6853</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:22:05 +0000</bug_when>
    <thetext>Mike will help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14569</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-11 14:45:37 +0000</bug_when>
    <thetext>Patch review email

https://edk2.groups.io/g/devel/message/68551</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14570</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-12-11 14:46:19 +0000</bug_when>
    <thetext>Commit:

https://github.com/tianocore-docs/edk2-CCodingStandardsSpecification/commit/835ab88b06eb87261b98b4ff4cf57a80418302b0</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1092</bug_id>
          
          <creation_ts>2018-08-16 17:48:04 +0000</creation_ts>
          <short_desc>commit 241f914975d5 changed the file mode bits of &quot;PiSmmCpuDxeSmm.c&quot; from 100644 to 100755</short_desc>
          <delta_ts>2018-08-22 04:45:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4606</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-16 17:48:04 +0000</bug_when>
    <thetext>See commit 241f914975d5 (&quot;UefiCpuPkg/PiSmmCpuDxeSmm: Add support for PCD PcdPteMemoryEncryptionAddressOrMask&quot;, 2017-03-01):

$ git show 241f914975d5 -- UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c
[...]
diff --git a/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c b/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c
old mode 100644
new mode 100755
index fc7714a3b9f7..d5b89002bf3d
--- a/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c
+++ b/UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c
[...]

This makes &quot;PiSmmCpuDxeSmm.c&quot; like it&apos;s an executable or script file:

$ ls -go UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c 
-rwx------. 1 44336 2018-04-11 11:17:04 +0200 UefiCpuPkg/PiSmmCpuDxeSmm/PiSmmCpuDxeSmm.c

We should undo this file mode change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4616</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-16 21:14:49 +0000</bug_when>
    <thetext>Star, could you help on it ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4628</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-17 06:55:47 +0000</bug_when>
    <thetext>I can do the patch myself; I mainly filed the BZ as a reminder so I don&apos;t forget about it. (I didn&apos;t have time to submit the patch at once.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4632</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-17 10:37:31 +0000</bug_when>
    <thetext>Addressed by patch #4 in

  [edk2] [PATCH 0/4]
  {Mde,IntelFramework,Network,UefiCpu}Pkg: roundup for BZs 1074, 1090, 1092

  https://lists.01.org/pipermail/edk2-devel/2018-August/028730.html
  http://mid.mail-archive.com/20180817143534.28393-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4665</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-22 04:45:29 +0000</bug_when>
    <thetext>Fixed in commit 0442a9a9f42a (&apos;UefiCpuPkg/PiSmmCpuDxeSmm: clear exec file mode bits on &quot;PiSmmCpuDxeSmm.c&quot;&apos;, 2018-08-22).</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1922</bug_id>
          
          <creation_ts>2019-06-19 07:08:06 +0000</creation_ts>
          <short_desc>SMBIOS Type 4 Processor Voltage information can be various to reflect processor current voltage when Bit 7 is set</short_desc>
          <delta_ts>2019-07-01 07:39:30 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kuo, Donald">donald.kuo</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>donald.kuo</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>ray.ni</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8094</commentid>
    <comment_count>0</comment_count>
    <who name="Kuo, Donald">donald.kuo</who>
    <bug_when>2019-06-19 07:08:06 +0000</bug_when>
    <thetext>SMBIOS Type 4 Processor Voltage information can be various when Bit7 is set to reflect processor current voltage

More information from customer :
The key point is the MSR 0x198 was floating (details refer to the attached video)
• Once the MSR 0x198[47:32] value was less then 0x1666 during POST processor current voltage detection, the SMBIOS Type4 – Processor voltage offset will report 0x86. (Bit 7 always set to 1)
• Once the MSR 0x198[47:32] value was large then 0x1666 during POST processor current voltage detection, the SMBIOS Type4 – Processor voltage offset will report 0x87. (Bit 7 always set to 1)

Win10 RS5
The key point is the MSR 0x198 was floating (details refer to the attached video)
• Once the MSR 0x198[47:32] value was less then 0x1666 during POST processor current voltage detection, the SMBIOS Type4 – Processor voltage offset will report 0x86. (Bit 7 always set to 1)
• Once the MSR 0x198[47:32] value was large then 0x1666 during POST processor current voltage detection, the SMBIOS Type4 – Processor voltage offset will report 0x87. (Bit 7 always set to 1)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8251</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:29:41 +0000</bug_when>
    <thetext>donald, please provide the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8298</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-07-01 07:39:30 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/be0d1c17552d6a50d5321561810fb32871b54108.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1004</bug_id>
          
          <creation_ts>2018-07-09 14:49:47 +0000</creation_ts>
          <short_desc>Declaration of __builtin_return_address() breaks compilation with clang 7</short_desc>
          <delta_ts>2020-09-06 19:21:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Alex Richardson">arichardson</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jrtc27</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4251</commentid>
    <comment_count>0</comment_count>
    <who name="Alex Richardson">arichardson</who>
    <bug_when>2018-07-09 14:49:47 +0000</bug_when>
    <thetext>I recently tried to compile with the latest clang and after  LLVM commit https://reviews.llvm.org/rL330160 (will be included in Clang 7) this declaration will give a compilation error.

The reason I found this is that it breaks the FreeBSD build for me. I can easily patch the imported sources there but I thought it would be better to submit the patch upstream.

I also mentioned on the review that added this new clang diagnostic that it breaks the build (https://reviews.llvm.org/D47541) and this is the response from the person who added the new diagnostic:

&gt; I&apos;m curious why that file is declaring the builtin like that? The declaration doesn&apos;t seem like it is ever useful, builtins are available without any includes/etc as far back as I could go on all 3 compilers that I validated against.
&gt; Additionally, I believe that the declaration is actually prohibited by the standard, since it is declaring an identifier that is reserved for the implementation.
&gt; Is this a situation where the target project cannot be corrected? That line simply needs to be removed as far as I can tell.

Remove the declaration fixes the build. See https://github.com/tianocore/edk2/pull/129/files for the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4278</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-12 20:10:04 +0000</bug_when>
    <thetext>bug scrub: Liming help to review the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13124</commentid>
    <comment_count>2</comment_count>
    <who name="Jessica Clarke">jrtc27</who>
    <bug_when>2020-07-18 11:49:10 +0000</bug_when>
    <thetext>Ping. I just ran into this compiling upstream FreeBSD with our CHERI Clang/LLVM. This bug does not appear with a normal Clang/LLVM, because the upstream commit that introduced this error (https://github.com/llvm/llvm-project/commit/41af97137572ad6d4dafc872e7ecf6bbb08d4984) only did so for builtins with custom type-checking, as they are aware of too much broken code like this out there. However, for CHERI, we need to make __builtin_return_address return capabilities for pure-capability code, and thus need custom type-checking. Maybe there are better ways, but that&apos;s what the current implementation does.

The EDK2 code is currently, in my opinion, wrong, and I can see no reason why the prototype would ever be needed. I&apos;ve never heard of a compiler that provides a builtin but doesn&apos;t let you use it without providing a prototype, and even if such a compiler existed, surely in 2020 we&apos;re not still supporting such broken compilers? I think the line in question can and should just be deleted. Moreover, this is the only instance of a builtin being given a prototype that I can find. However, if there is a reason why __builtin_return_address is special and really does need a prototype for a compiler supported by EDK2 then we should special-case that, as it really should be highly exceptional, if it exists at all.

Note that this is becoming not just a purely academic issue. Arm&apos;s Morello platform (https://developer.arm.com/architectures/cpu-architecture/a-profile/morello) is bringing experimental CHERI support to their Neoverse N1 platform, and I assume that&apos;s going to be wanting to use EDK2 like the normal one does.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>13622</commentid>
    <comment_count>3</comment_count>
    <who name="Jessica Clarke">jrtc27</who>
    <bug_when>2020-09-06 19:21:44 +0000</bug_when>
    <thetext>Fixed by https://github.com/tianocore/edk2/commit/a44f558a84c67cd88b8215d4c076123cf58438f4.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1832</bug_id>
          
          <creation_ts>2019-05-22 02:25:39 +0000</creation_ts>
          <short_desc>Add FSP Dispatch mode switch</short_desc>
          <delta_ts>2019-05-28 21:39:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7743</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-22 02:25:39 +0000</bug_when>
    <thetext>Boot loader (FspWrapper/Platform code) now can switch to Dispatch mode defined by FSP 2.1 spec using PcdFspModeSelection. For backward compatibility different FspBinPkg may be consumed in each mode.

To support this switch, below are required changes in KabylakeOpenBoardPkg and KabylakeSiliconPkg:
1. In Dispatch mode AmberLakeFspBinPkg will be consumed and KabylakeFspBinPkg is for API mode for backward compatible.

2. Temporary memory arrangement will be different between each mode because in Dispatch mode FSP will share the same stack with boot loader.

3. For now default mode is still API before all implementation completed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7761</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-23 10:26:10 +0000</bug_when>
    <thetext>Chasel will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7831</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-05-28 21:39:56 +0000</bug_when>
    <thetext>commit 601c9427d373c95bd1dc457f9ad9c73f92ad3827 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue May 21 15:47:43 2019 +0800

    KabylakeOpenBoardPkg: Add FSP Dispatch switch.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1832

    Basing on PcdFspModeSelection setting either KabylakeFspBinPkg
    or AmberLakeFspBinPkg will be used and temporary memory
    arrangement will be different as AmberLakeFspBinPkg will share
    the same stack with boot loader. Also enlarged FSP-T size to
    support future larger FSP binary.

    Test: Booted Kabylake RVP3 to Windows successfully.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;

commit aa5ba6520705004101f38628b55374e617b923e2
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue May 21 16:01:43 2019 +0800

    KabylakeSiliconPkg: Add FSP Dispatch switch.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1832

    PcdFspModeSelection is used as switch for boot loader to
    consume FSP in API mode or Dispatch mode. For backward
    compatibility, if boot loader running in FSP API mode the
    KabylakeFspBinPkg will be used which does not have FSP 2.1
    changes. For FSP Dispatch mode AmberLakeFspBinPkg will be
    used with FSP 2.1 support.
    One INF was duplicate to include different DEC file in
    each build type.

    Test: Booted Kabylake RVP3 to Windows successfully.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1942</bug_id>
          
          <creation_ts>2019-06-26 17:49:05 +0000</creation_ts>
          <short_desc>SCT 2.7 RT.SetVariable invalid attribute combinbation</short_desc>
          <delta_ts>2019-09-24 04:41:07 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Oleksiy">oleksiyy</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>castro8583bennett</cc>
    
    <cc>eric.jin</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>stephano</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8213</commentid>
    <comment_count>0</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-06-26 17:49:05 +0000</bug_when>
    <thetext>To check EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS attribute deprecation, it is passed with a combination of different attributes taken one after another from Array[].
One of the case use EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS with EFI_VARIABLE_RUNTIME_ACCESS.

According to specification if EFI_VARIABLE_RUNTIME_ACCESS passed without EFI_VARIABLE_BOOTSERVICE_ACCESS - EFI_INVALID_PARAMETER should be returned.
SCT expects only EFI_UNSUPPORTED as valid respond on EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS | EFI_VARIABLE_RUNTIME_ACCESS combination. 

As to my knowledge error Status does not have any priorities one to another, so in this case both EFI_INVALID_PARAMETER or EFI_UNSUPPORTED can be returned.

In my understanding this case in SCT RT.SetVariable test should be modified to have EFI_VARIABLE_RUNTIME_ACCESS pared with EFI_VARIABLE_BOOTSERVICE_ACCESS in mentioned Array[] of attributes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8222</commentid>
    <comment_count>1</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-06-26 21:24:58 +0000</bug_when>
    <thetext>I agree that in the Status Codes Returned table, there are no priorities one to another.

But in UEFI spec, in the change to deprecate this attribute, it is explicit to say:
EFI_VARIABLE_AUTHENTICATED_WRITE_ACCESS is deprecated and should not be used.
Platforms should return EFI_UNSUPPORTED if a caller to SetVariable() specifies this attribute.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8239</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:10:55 +0000</bug_when>
    <thetext>Not sure it&apos;s a bug, still need to discussion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8278</commentid>
    <comment_count>3</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-06-28 10:03:02 +0000</bug_when>
    <thetext>UEFI specification:

&quot;Runtime access to a data variable implies boot service access. Attributes that have EFI_VARIABLE_RUNTIME_ACCESS set must also have EFI_VARIABLE_BOOTSERVICE_ACCESS set.&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8308</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-07-01 21:53:42 +0000</bug_when>
    <thetext>Hi Oleksiy,

Agree with you. :)
The AuthVariableDERConfTest() can be modified to follow spec well and meet the 2 descriptions in comments. 

Could you please send a patch? Thanks.

Best Regards
Eric</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8327</commentid>
    <comment_count>5</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-07-02 16:27:43 +0000</bug_when>
    <thetext>Just avoid using EFI_VARIABLE_RUNTIME_ACCESS without EFI_VARIABLE_BOOTSERVICE_ACCESS in AttrArray 
of AuthVariableDERConfTest. For example:

UINT32                              AttrArray[] = {
    //
    //  For 1 attribute.
    //
    EFI_VARIABLE_NON_VOLATILE,
    EFI_VARIABLE_BOOTSERVICE_ACCESS,
    EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,

    //
    //  For 2 attributes.
    //
    EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_BOOTSERVICE_ACCESS,
    EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,

    EFI_VARIABLE_RUNTIME_ACCESS | EFI_VARIABLE_BOOTSERVICE_ACCESS,
    EFI_VARIABLE_BOOTSERVICE_ACCESS| EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,

    EFI_VARIABLE_BOOTSERVICE_ACCESS | EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,

    //
    //  For 3 attributes.
    //
    EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_RUNTIME_ACCESS | EFI_VARIABLE_BOOTSERVICE_ACCESS,
    EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_BOOTSERVICE_ACCESS | EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,
    EFI_VARIABLE_RUNTIME_ACCESS | EFI_VARIABLE_BOOTSERVICE_ACCESS | EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,

    //
    //  For 4 attributes.
    //
    EFI_VARIABLE_NON_VOLATILE | EFI_VARIABLE_RUNTIME_ACCESS | EFI_VARIABLE_BOOTSERVICE_ACCESS | EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS,
  };</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8449</commentid>
    <comment_count>6</comment_count>
    <who name="Castrob">castro8583bennett</who>
    <bug_when>2019-07-13 07:14:33 +0000</bug_when>
    <thetext>(In reply to Oleksiy from comment #3)
&gt; &quot;Runtime access to a data variable implies boot service access. Attributes
&gt; that have EFI_VARIABLE_RUNTIME_ACCESS set must also have

If its okay can i also ask for the patch?
Thanks!

Castro B,
https://www.lasvegas.es/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8450</commentid>
    <comment_count>7</comment_count>
    <who name="Castrob">castro8583bennett</who>
    <bug_when>2019-07-13 07:15:28 +0000</bug_when>
    <thetext>(In reply to Oleksiy from comment #3)
&gt; &quot;Runtime access to a data variable implies boot service access. Attributes
&gt; that have EFI_VARIABLE_RUNTIME_ACCESS set must also have

If its okay can i also ask for the patch?
Thanks!

Castro B,
https://www.lasvegas.es/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8451</commentid>
    <comment_count>8</comment_count>
    <who name="Castrob">castro8583bennett</who>
    <bug_when>2019-07-13 07:15:59 +0000</bug_when>
    <thetext>Im sorry for duplicate comments

Castro B</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8456</commentid>
    <comment_count>9</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-07-15 11:18:23 +0000</bug_when>
    <thetext>(In reply to Castrob from comment #6)
&gt; (In reply to Oleksiy from comment #3)
&gt; &gt; &quot;Runtime access to a data variable implies boot service access. Attributes
&gt; &gt; that have EFI_VARIABLE_RUNTIME_ACCESS set must also have
&gt; 
&gt; If its okay can i also ask for the patch?
&gt; Thanks!
&gt; 
&gt; Castro B,
&gt; https://www.lasvegas.es/

Comment #5?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9376</commentid>
    <comment_count>10</comment_count>
    <who name="Oleksiy">oleksiyy</who>
    <bug_when>2019-08-28 11:52:43 +0000</bug_when>
    <thetext>Hi.

Status on this bug is still unconfirmed, while as I understood we agree on the fact that Error codes does not have priorities one on another?
Will this be addressed?

Regards, Oleksiy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9438</commentid>
    <comment_count>11</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-03 03:52:09 +0000</bug_when>
    <thetext>(In reply to Oleksiy from comment #10)
&gt; Hi.
&gt; 
&gt; Status on this bug is still unconfirmed, while as I understood we agree on
&gt; the fact that Error codes does not have priorities one on another?
&gt; Will this be addressed?
&gt; 
&gt; Regards, Oleksiy.

It is in the scope of coming stable tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9775</commentid>
    <comment_count>12</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-09-24 04:41:07 +0000</bug_when>
    <thetext>Has been resolved in 93a98df2609763cc162191bd5395617a621747fe</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1415</bug_id>
          
          <creation_ts>2018-12-19 16:19:05 +0000</creation_ts>
          <short_desc>VfrCompile: Integer overflow warning should probably be an error</short_desc>
          <delta_ts>2019-01-07 21:28:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Felix">felixp</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5920</commentid>
    <comment_count>0</comment_count>
    <who name="Felix">felixp</who>
    <bug_when>2018-12-19 16:19:05 +0000</bug_when>
    <thetext>When an integer constant specified in the .vfr file is too large for the varstore field it is being used with, the VFR compiler reports an overflow warning.
Something like this:
--
Test.vfr(693): WARNING: Overflow: Value 1024 is too large to store in a UINT8
  	: String to UINT* Overflow
--
The warning is reported by the EfiVfrParser::_STOU8/_STOU16/_STOU32/_STOU64 functions.

In my opinion, the compiler should return an error, not a warning because of the following:
 - Warning does not break the build process, and it is easy to miss it.
 - A warning typically implies that the code does not necessarily contain an error, but it looks suspicious and should be reviewed. In this particular case, I can&apos;t come up with a scenario when user might want to intentionally provide an out of range constant.

If it is preferable to keep treating this situation as a warning, please provide the justification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5933</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:07:18 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6009</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-07 21:28:26 +0000</bug_when>
    <thetext>Agree to report error for this case.
Fix it at:
https://github.com/tianocore/edk2/commit/9248a4717a9e269670be964b56bc1a1219cae2b2</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1748</bug_id>
          
          <creation_ts>2019-04-24 13:21:36 +0000</creation_ts>
          <short_desc>Migrate devel-MinPlatform branch to master branch</short_desc>
          <delta_ts>2019-06-24 21:25:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7259</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-24 13:21:36 +0000</bug_when>
    <thetext>The content on the devel-MinPlatform branch in the edk2-platforms repository
should be moved to the master branch in the edk2-platforms repository.

The devel-MinPlatform branch has been used for the initial development
of an EDK II based platform design referred to as &quot;Minimum Platform&quot;.
This design is intended to provide a structured approach to introducing
Intel platform code into open source in a consistent manner.

For more information about the EDK II Minimum Platform, please refer to
the Readme.md in devel-MinPlatform.

https://github.com/tianocore/edk2-platforms/blob/devel-MinPlatform/ReadMe.md

The following packages should be added in Platform/Intel:
  * Generic packages:
     * AdvancedFeaturePkg
     * MinPlatformPkg
  * Board-specific packages:
     * ClevoOpenBoardPkg
     * KabylakeOpenBoardPkg
     * PurleyOpenBoardPkg

The following packages should be added in Silicon/Intel:
 * KabylakeSiliconPkg
 * LewisburgPkg
 * PurleyRcPkg
 * PurleySktPkg

The following growth is expected over time:
 * Platform/Intel - Additional board packages for Intel reference boards
    including support for some pre-existing product releases
 * AdvancedFeaturePkg - Additional modular features capable of being used
    in board packages
 * Silicon/Intel - Additional silicon packages roughly keeping 1:1 parity
    with board packages</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7260</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-24 13:23:38 +0000</bug_when>
    <thetext>Moving owner to Liming.

Changes are staged here: https://github.com/lgao4/edk2-platforms</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7513</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-13 16:55:53 +0000</bug_when>
    <thetext>The code content of edk2-platforms/devel-MinPlatform was moved to edk2-platforms/master. However, the maintainers documents and Readme.md need to be updated. This is currently in an open patch series from Liming: https://edk2.groups.io/g/devel/message/40506.

Please wait to close this task until those changes are completed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8171</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-24 21:25:19 +0000</bug_when>
    <thetext>Done in edk2-platform</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1532</bug_id>
          
          <creation_ts>2019-02-18 03:15:49 +0000</creation_ts>
          <short_desc>UINT64 shouldn&apos;t be used as the base type for a struct bit field.</short_desc>
          <delta_ts>2019-03-19 03:50:26 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shao, Ming">ming.shao</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6384</commentid>
    <comment_count>0</comment_count>
    <who name="Shao, Ming">ming.shao</who>
    <bug_when>2019-02-18 03:15:49 +0000</bug_when>
    <thetext>edk2: c417c1b33d06ef6ae96adb373201a5a3c3b38772
MdePkg\Library\PciSegmentLibSegmentInfo\PciSegmentLibCommon.c line 19


typedef struct {
  UINT64  Register : 12;
  UINT64  Function : 3;
  UINT64  Device : 5;
  UINT64  Bus : 8;
  UINT64  Reserved1 : 4;
  UINT64  Segment : 16;
  UINT64  Reserved2 : 16;
} PCI_SEGMENT_LIB_ADDRESS_STRUCTURE;

This can lead to dependency on VC++ compiler support functions when build for &quot;IA32&quot; with &quot;/Od&quot; switch, such as _aullshr().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6437</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 01:43:13 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6753</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-03-19 03:50:26 +0000</bug_when>
    <thetext>Fixed at:
2ac896a67b8eb0c42a3c39dc7e4b39eac4ba8733</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1037</bug_id>
          
          <creation_ts>2018-07-18 22:16:50 +0000</creation_ts>
          <short_desc>Redundant GUID and protocol are defined in SecureBootConfigDxe module INF</short_desc>
          <delta_ts>2018-12-10 03:11:23 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1065</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>chen.a.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch>f4c8c1bbf1698ddc0939178dddd7587cbdbb29c7</cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4328</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 22:16:50 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are one redundant guid and protocol, which are gEfiFileInfoGuid and gEfiBlockIoProtocolGuid, defined in SecureBootConfigDxe module INF file. Need to remove it.


Below is the fix reference:
--- a/SecurityPkg/VariableAuthenticated/SecureBootConfigDxe/SecureBootConfigDxe.inf
+++ b/SecurityPkg/VariableAuthenticated/SecureBootConfigDxe/SecureBootConfigDxe.inf
@@ -105,7 +105,6 @@
   gEfiCertPkcs7Guid                             ## SOMETIMES_PRODUCES  ## GUID  # Unique ID for the type of the certificate.
   gEfiCertTypeRsa2048Sha256Guid                 ## SOMETIMES_CONSUMES  ## GUID  # Unique ID for the type of the certificate.
   gEfiFileSystemVolumeLabelInfoIdGuid           ## SOMETIMES_CONSUMES  ## GUID  # Indicate the information type
-  gEfiFileInfoGuid                              ## SOMETIMES_CONSUMES  ## GUID  # Indicate the information type

   gEfiCertX509Sha256Guid                        ## SOMETIMES_PRODUCES  ## GUID  # Unique ID for the type of the certificate.
   gEfiCertX509Sha384Guid                        ## SOMETIMES_PRODUCES  ## GUID  # Unique ID for the type of the certificate.
@@ -115,7 +114,6 @@
   gEfiHiiConfigAccessProtocolGuid               ## PRODUCES
   gEfiDevicePathProtocolGuid                    ## PRODUCES
   gEfiSimpleFileSystemProtocolGuid              ## SOMETIMES_CONSUMES
-  gEfiBlockIoProtocolGuid                       ## SOMETIMES_CONSUMES

 [Depex]
   gEfiHiiConfigRoutingProtocolGuid  AND</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4357</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:52:41 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5811</commentid>
    <comment_count>2</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2018-12-10 03:11:23 +0000</bug_when>
    <thetext>This issue included by 1065 and already fix.

*** This bug has been marked as a duplicate of bug 1065 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1054</bug_id>
          
          <creation_ts>2018-07-25 05:00:55 +0000</creation_ts>
          <short_desc>Redundant info is defined in EbcDebugger module INF</short_desc>
          <delta_ts>2018-09-13 02:13:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4397</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 05:00:55 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there are two redundant guids, which are gEfiFileSystemInfoGuid and gEfiFileSystemVolumeLabelInfoIdGuid, defined in EbcDebugger module INF file. Need to remove them.


Below is the fix reference:
--- a/MdeModulePkg/Universal/EbcDxe/EbcDebugger.inf
+++ b/MdeModulePkg/Universal/EbcDxe/EbcDebugger.inf
@@ -106,8 +106,6 @@

 [Guids]
   gEfiFileInfoGuid                              ## SOMETIMES_CONSUMES ## GUID
-  gEfiFileSystemInfoGuid                        ## SOMETIMES_CONSUMES ## GUID
-  gEfiFileSystemVolumeLabelInfoIdGuid           ## SOMETIMES_CONSUMES ## GUID
   gEfiDebugImageInfoTableGuid                   ## SOMETIMES_CONSUMES ## GUID

 [Depex]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4425</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:27 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4939</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:13:54 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1455</bug_id>
          
          <creation_ts>2019-01-14 16:09:03 +0000</creation_ts>
          <short_desc>Move SmiEntry.nasm into SmmCpuFeaturesLib as this is CPU and CPU features specific.</short_desc>
          <delta_ts>2020-06-26 11:02:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>need_info</keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Mark Wilson">mark.wilson</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>stephano</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
    
    <cf_release_observed>UDK 2008</cf_release_observed>
    
    <cf_release_observed>UDK 2010</cf_release_observed>
    
    <cf_release_observed>UDK 2010.SR1</cf_release_observed>
    
    <cf_release_observed>UDK 2014</cf_release_observed>
    
    <cf_release_observed>UDK 2014.SP1</cf_release_observed>
    
    <cf_release_observed>UDK 2015</cf_release_observed>
    
    <cf_release_observed>UDK 2017</cf_release_observed>
    
    <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6078</commentid>
    <comment_count>0</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2019-01-14 16:09:03 +0000</bug_when>
    <thetext>SmmInit.nasm has feature initialization, thus different CPUs or supported feature may need different initialization, so this should be in a library.

Due to using an unsupported AMD MSR, AMD processors get an exception when executing this code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6079</commentid>
    <comment_count>1</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2019-01-14 17:00:38 +0000</bug_when>
    <thetext>The file is SmiEntry.nasm not SmmInit.nasm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6135</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:19:37 +0000</bug_when>
    <thetext>bug scrub: assign to Eric to help to discuss first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6156</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-01-21 01:32:41 +0000</bug_when>
    <thetext>Hi Mark,

Current SmmCpuFeaturesLib already has two APIs SmmCpuFeaturesGetSmiHandlerSize and SmmCpuFeaturesInstallSmiHandler to let platform provide the its own smi handler. SmiEntry.nasm is just an default smi handler.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6184</commentid>
    <comment_count>4</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2019-01-23 16:41:58 +0000</bug_when>
    <thetext>The default SMI Entry does not work for all CPUs in general. I believe in general code bases are using a SmmCpuFeaturesLib for SMI Entry. And, having multiple handlers may increase debug time due starting to debug the wrong handler in PiSmmCpuDxeSmm instead SmmCpuFeaturesLib.

Thus, perhaps the SMI Entry in PiSmmCpuDxeSmm should be removed, and create a sample SMI Entry in the default SmmCpuFeaturesLib. Thus, when a different instance is used, it will be clear.

My recommendation is to remove. Thus, if you can keep this open to remove or close this issue if there is no intention to remove.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6244</commentid>
    <comment_count>5</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2019-01-30 23:12:27 +0000</bug_when>
    <thetext>I&apos;ve done some further review. SmmEntry.nasm calls into PiSmmCpuDxeSmm driver multiple times, so you can&apos;t abstract into a driver and library instance.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8429</commentid>
    <comment_count>6</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:53:49 +0000</bug_when>
    <thetext>Bug Triage: Mark, would you like any more discussion here or is this okay to close?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8555</commentid>
    <comment_count>7</comment_count>
    <who name="Mark Wilson">mark.wilson</who>
    <bug_when>2019-07-23 22:23:38 +0000</bug_when>
    <thetext>This was never resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9576</commentid>
    <comment_count>8</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-09-10 19:47:37 +0000</bug_when>
    <thetext>Eric, do you think this is something we can remove, or do we have to close this bug as WONTFIX?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9578</commentid>
    <comment_count>9</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-10 20:11:58 +0000</bug_when>
    <thetext>i prefer WONTFIX.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12949</commentid>
    <comment_count>10</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2020-06-26 11:02:12 +0000</bug_when>
    <thetext>Current SmmCpuFeaturesLib already has two APIs SmmCpuFeaturesGetSmiHandlerSize and SmmCpuFeaturesInstallSmiHandler to let platform provide the its own smi handler. Will not fix this issue now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1691</bug_id>
          
          <creation_ts>2019-04-09 16:44:52 +0000</creation_ts>
          <short_desc>RebaseAndPatchFspBinBaseAddress.py should take SplitFspBin.py path as an argument</short_desc>
          <delta_ts>2019-05-09 13:43:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7050</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-09 16:44:52 +0000</bug_when>
    <thetext>The file /Platform/Intel/MinPlatformPkg/Tools/Fsp/RebaseAndPatchFspBinBaseAddress.py currently has the path to the SplitFspBin.py script hardcoded in the script. This should be provided as an argument so it does not assume how the edk2 repository was clone into the user&apos;s local work space.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7051</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-09 16:49:03 +0000</bug_when>
    <thetext>Issue is confirmed as users have cloned the edk2 repo into a directory other than &quot;edk2&quot; (e.g. &quot;Edk2&quot;) and reproduced this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7473</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-09 13:42:14 +0000</bug_when>
    <thetext>Prince completed implementation for review:
https://edk2.groups.io/g/devel/message/39884</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7474</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-05-09 13:43:10 +0000</bug_when>
    <thetext>Patch committed:

https://github.com/tianocore/edk2-platforms/commit/7b58afacae91fd4f2f92087a422ff0b7dfb146ae</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1163</bug_id>
          
          <creation_ts>2018-09-07 03:42:47 +0000</creation_ts>
          <short_desc>Remove inline X86 assembly code in C code files.</short_desc>
          <delta_ts>2019-04-14 21:25:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4883</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-09-07 03:42:47 +0000</bug_when>
    <thetext>MdePkg BaseLib, BaseCpuLib and BaseSynchronizationLib still uses the inline X86 assembly code in C code files. They should be updated to consume nasm only.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4962</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 20:09:16 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6640</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-07 02:03:48 +0000</bug_when>
    <thetext>https://lists.01.org/pipermail/edk2-devel/2019-March/037598.html

Any new inline assembler *should also be simple and just be a function abstracting a CPU op-code* that is not available to C.

For now, inline SetJump/LongJump() can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7126</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-04-14 21:25:34 +0000</bug_when>
    <thetext>Fixed at:
174232fa9a90cfc224432ff5cb05872cb86daa3f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1373</bug_id>
          
          <creation_ts>2018-12-02 18:45:40 +0000</creation_ts>
          <short_desc>Replace BSD 2-Clause License with BSD + Patent License with SPDX-License-Identifier</short_desc>
          <delta_ts>2020-07-03 12:21:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2834</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1653</dependson>
          <blocked>1654</blocked>
    
    <blocked>1655</blocked>
    
    <blocked>1656</blocked>
    
    <blocked>1681</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>stephano</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>AppPkg</cf_package>
    
    <cf_package>ArmPkg</cf_package>
    
    <cf_package>ArmPlatformPkg</cf_package>
    
    <cf_package>ArmVirtPkg</cf_package>
    
    <cf_package>BaseTools</cf_package>
    
    <cf_package>BeagleBoardPkg</cf_package>
    
    <cf_package>CorebootModulePkg</cf_package>
    
    <cf_package>CorebootPayloadPkg</cf_package>
    
    <cf_package>CryptoPkg</cf_package>
    
    <cf_package>DuetPkg</cf_package>
    
    <cf_package>EdkCompatibilityPkg</cf_package>
    
    <cf_package>EdkShellBinPkg</cf_package>
    
    <cf_package>EdkShellPkg</cf_package>
    
    <cf_package>EmbeddedPkg</cf_package>
    
    <cf_package>EmulatorPkg</cf_package>
    
    <cf_package>FatBinPkg</cf_package>
    
    <cf_package>FatPkg</cf_package>
    
    <cf_package>FmpDevicePkg</cf_package>
    
    <cf_package>IntelFrameworkModulePkg</cf_package>
    
    <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>IntelFsp2Pkg</cf_package>
    
    <cf_package>IntelFsp2WrapperPkg</cf_package>
    
    <cf_package>IntelFspPkg</cf_package>
    
    <cf_package>IntelFspWrapperPkg</cf_package>
    
    <cf_package>IntelSiliconPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>Nt32Pkg</cf_package>
    
    <cf_package>Omap35xxPkg</cf_package>
    
    <cf_package>OptionRomPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
    
    <cf_package>PerformancePkg</cf_package>
    
    <cf_package>QuarkPlatformPkg</cf_package>
    
    <cf_package>QuarkSocPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellBinPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
    
    <cf_package>SignedCapsulePkg</cf_package>
    
    <cf_package>SourceLevelDebugPkg</cf_package>
    
    <cf_package>StdLib</cf_package>
    
    <cf_package>StdLibPrivateInternalFiles</cf_package>
    
    <cf_package>UefiCpuPkg</cf_package>
    
    <cf_package>UnixPkg</cf_package>
    
    <cf_package>Vlv2DeviceRefCodePkg</cf_package>
    
    <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5730</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2018-12-02 18:45:40 +0000</bug_when>
    <thetext>Replace BSD 2-clause License with Apache 2.0 License.

This change is based on the following email:

https://lists.01.org/pipermail/edk2-devel/2018-October/030385.html

RFC with detailed process for the license change:

https://lists.01.org/pipermail/edk2-devel/2018-November/033336.html

Sample license text to add with SPDX-License-Identifier statement
   ======================================================================
   SPDX-License-Identifier: Apache-2.0

   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   ======================================================================

A file can not be changed to Apache 2.0 until all copyright holders
have agreed to the change.  This bug can be referenced from all
patches associated with the license change and will be closed once
all license changes have been completed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5770</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:12:27 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6623</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-03-05 17:07:27 +0000</bug_when>
    <thetext>This RFC follows up on the proposal from Mark Doran to change the 
EDK II Project to a BSD+Patent License.

	https://lists.01.org/pipermail/edk2-devel/2019-February/036260.html

The review period for this license change is 30 days.  If there is no
unresolved feedback on April 9, 2019, then commits of the license change
patches will begin on April 9, 2019.  

  ** Please provide feedback on the proposal by Monday April 8, 2019. **

Feedback can be sent to edk2-devel@lists.01.org, the EDK II community
manager or any of the EDK II stewards.

  * Stephano Cetola &lt;stephano.cetola@intel.com&gt;   Community Manager
  * Leif Lindholm   &lt;leif.lindholm@linaro.org&gt;    Steward
  * Andrew Fish     &lt;afish@apple.com&gt;             Steward
  * Laszlo Ersek    &lt;lersek@redhat.com&gt;           Steward
  * Michael Kinney  &lt;michael.d.kinney@intel.com&gt;  Steward

The goal is to convert all of the files in the edk2 repository that are
currently covered by the BSD 2-Clause License and the TianoCore
Contribution Agreement to a BSD+Patent License.  

I will be following up with pointers to public GitHub branches that
contain the set of changes to the edk2 repository for review.

The proposal is to perform this change to edk2/master in the steps listed
below. The license change will not be applied to any of the other existing
branches in the edk2 repository.

1) Add a License-History.txt file to the root of the edk2 repository that
   contains the BSD 2-Clause License and the TianoCore Contribution
   Agreement along with the details on the license change to BSD+Patent.

2) Change all files currently covered by a BSD 2-Clause license and the 
   TianoCore Contribution Agreement to a BSD+Patent license and add an 
   SPDX-License-Identifier statement.  The link to the BSD+Patent license
   and the text for file headers is listed below. 

   https://opensource.org/licenses/BSDplusPatent

   ======================================================================
   SPDX-License-Identifier: BSD-2-Clause-Patent

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.

   2. Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.

   Subject to the terms and conditions of this license, each copyright holder
   and contributor hereby grants to those receiving rights under this license
   a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable
   (except for failure to satisfy the conditions of this license) patent
   license to make, have made, use, offer to sell, sell, import, and otherwise
   transfer this software, where such license applies only to those patent
   claims, already acquired or hereafter acquired, licensable by such copyright
   holder or contributor that are necessarily infringed by:

   (a) their Contribution(s) (the licensed copyrights of copyright holders and
       non-copyrightable additions of contributors, in source or binary form)
       alone; or

   (b) combination of their Contribution(s) with the work of authorship to
       which such Contribution(s) was added by such copyright holder or
       contributor, if, at the time the Contribution is added, such addition
       causes such combination to be necessarily infringed. The patent license
       shall not apply to any other combinations which include the
       Contribution.

   Except as expressly stated above, no rights or licenses from any copyright
   holder or contributor is granted under this license, whether expressly, by
   implication, estoppel or otherwise.

   DISCLAIMER

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE
   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
   POSSIBILITY OF SUCH DAMAGE.
   ======================================================================

3) Update Readme.md and License.txt in the root of the edk2 repository to
   state that content is covered by a BSD+Patent license.  Also state that
   BSD+Patent is the preferred license for the EDK II project.

4) Remove the Contributions.txt file in the root of the edk2 repository
   That contiants the TianoCore Contribution Agreement.

5) Update all documentation to state that content submitted under the 
   BSD+Patent license no longer requires the Tianocore Contribution
   Agreement which means the following line is not required in commit
   messages for changes to files that are covered by a BSD+Patent.

       Contributed-under: TianoCore Contribution Agreement 1.1

6) Create Wiki page(s) that provide the details of the BSD+Patent License
   change and provide the status of the license change for each TianoCore
   repository and package.

Once the conversion of the edk2 repository is complete, work will begin
on the other repositories in the TianoCore project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6709</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-03-13 13:11:53 +0000</bug_when>
    <thetext>Changes for V2
===============
* Replace 2-Clause BSD License in file headers with SPDX-License-Identifier
  statement.  This reduces the size of the file headers and the size
  of the patches for this change.  Based on the following post:

  https://01.org/blogs/jc415/2018/open-source-hacks-one-question-interviews-open-source-experts-how-use-spdx-headers

* Update License.txt in root of edk2 before changing file headers.
* Fix minor typos
===============

This RFC follows up on the proposal from Mark Doran to change the 
EDK II Project to a BSD+Patent License.

	https://lists.01.org/pipermail/edk2-devel/2019-February/036260.html

The review period for this license change is 30 days.  If there is no
unresolved feedback on April 9, 2019, then commits of the license change
patches will begin on April 9, 2019.  

  ** Please provide feedback on the proposal by Monday April 8, 2019. **

Feedback can be sent to edk2-devel@lists.01.org, the EDK II community
manager or any of the EDK II stewards.

  * Stephano Cetola &lt;stephano.cetola@intel.com&gt;   Community Manager
  * Leif Lindholm   &lt;leif.lindholm@linaro.org&gt;    Steward
  * Andrew Fish     &lt;afish@apple.com&gt;             Steward
  * Laszlo Ersek    &lt;lersek@redhat.com&gt;           Steward
  * Michael Kinney  &lt;michael.d.kinney@intel.com&gt;  Steward

The goal is to convert all of the files in the edk2 repository that are
currently covered by the 2-Clause BSD License and the TianoCore
Contribution Agreement to a BSD+Patent License.  

I will be following up with pointers to public GitHub branches that
contain the set of changes to the edk2 repository for review.

The proposal is to perform this change to edk2/master in the steps listed
below. The license change will not be applied to any of the other existing
branches in the edk2 repository.

1) Add a License-History.txt file to the root of the edk2 repository that
   contains the 2-Clause BSD License and the TianoCore Contribution
   Agreement along with the details on the change to the BSD+Patent License.

2) Change License.txt in the root of the edk2 repository from a 2-Clause
   BSD License to the BSD+Patent License. The following is the link to the
   BSD+Patent License and the new License.txt file contents.

   https://opensource.org/licenses/BSDplusPatent

   ======================================================================
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.

   2. Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.

   Subject to the terms and conditions of this license, each copyright holder
   and contributor hereby grants to those receiving rights under this license
   a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable
   (except for failure to satisfy the conditions of this license) patent
   license to make, have made, use, offer to sell, sell, import, and otherwise
   transfer this software, where such license applies only to those patent
   claims, already acquired or hereafter acquired, licensable by such copyright
   holder or contributor that are necessarily infringed by:

   (a) their Contribution(s) (the licensed copyrights of copyright holders and
       non-copyrightable additions of contributors, in source or binary form)
       alone; or

   (b) combination of their Contribution(s) with the work of authorship to
       which such Contribution(s) was added by such copyright holder or
       contributor, if, at the time the Contribution is added, such addition
       causes such combination to be necessarily infringed. The patent license
       shall not apply to any other combinations which include the
       Contribution.

   Except as expressly stated above, no rights or licenses from any copyright
   holder or contributor is granted under this license, whether expressly, by
   implication, estoppel or otherwise.

   DISCLAIMER

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE
   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
   POSSIBILITY OF SUCH DAMAGE.
   ======================================================================

3) Change all files currently covered by a 2-Clause BSD License and the 
   TianoCore Contribution Agreement to a BSD+Patent License using the 
   following SPDX-License-Identifier statement:

       SPDX-License-Identifier: BSD-2-Clause-Patent

   The use of SPDX-License-Identifier statement is based on the following:

        https://01.org/blogs/jc415/2018/open-source-hacks-one-question-interviews-open-source-experts-how-use-spdx-headers

4) Update Readme.md in the root of the edk2 repository to state that content
   is covered by a BSD+Patent License.  Also state that the BSD+Patent License
   is the preferred license for the EDK II project.

5) Remove the Contributions.txt file from the root of the edk2 repository
   that contains the TianoCore Contribution Agreement.

6) Update all documentation to state that content submitted under the 
   BSD+Patent License no longer requires the Tianocore Contribution
   Agreement which means the following line is not required in commit
   messages for changes to files that are covered by a BSD+Patent License.

       Contributed-under: TianoCore Contribution Agreement 1.1

7) Create Wiki page(s) that provide the details of the BSD+Patent License
   change and provides the status of the license change for each TianoCore
   repository and package.

Once the conversion of the edk2 repository is complete, work will begin
on the other repositories in the TianoCore project.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6710</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-03-13 13:20:10 +0000</bug_when>
    <thetext>Patch series posted for review on the following branch:

  https://github.com/mdkinney/edk2/tree/Bug_1373_BsdPatentLicense

The patch series has one patch per package along with a couple patches
to update the license information in the root of the edk2 repository
as described in the RFC V2.

84141eacac edk2: Remove Contributions.txt and update Readme.md
93b121ee79 StdLibPrivateInternalFiles: Replace BSD License with BSD+Patent License
91a1d41ccb StdLib: Replace BSD License with BSD+Patent License
a71c378242 AppPkg: Replace BSD License with BSD+Patent License
4eb2592e65 Vlv2TbltDevicePkg: Replace BSD License with BSD+Patent License
7b719f9c0a Vlv2DeviceRefCodePkg: Replace BSD License with BSD+Patent License
1472567223 UefiCpuPkg: Replace BSD License with BSD+Patent License
3001241ef7 StandaloneMmPkg: Replace BSD License with BSD+Patent License
e5dddf6e52 SourceLevelDebugPkg: Replace BSD License with BSD+Patent License
e83800c47a SignedCapsulePkg: Replace BSD License with BSD+Patent License
3a58ac55fd ShellPkg: Replace BSD License with BSD+Patent License
b16c29f4d9 ShellBinPkg: Replace BSD License with BSD+Patent License
bf4838b342 SecurityPkg: Replace BSD License with BSD+Patent License
2da66fa9f1 QuarkSocPkg: Replace BSD License with BSD+Patent License
f52f862821 QuarkPlatformPkg: Replace BSD License with BSD+Patent License
571f6e2af1 PcAtChipsetPkg: Replace BSD License with BSD+Patent License
837a3425bf OvmfPkg: Replace BSD License with BSD+Patent License
d548789dff OptionRomPkg: Replace BSD License with BSD+Patent License
88cbe4e446 Omap35xxPkg: Replace BSD License with BSD+Patent License
452a4e54da Nt32Pkg: Replace BSD License with BSD+Patent License
41704de255 NetworkPkg: Replace BSD License with BSD+Patent License
07716613d3 MdePkg: Replace BSD License with BSD+Patent License
bfd7b0e6aa MdeModulePkg: Replace BSD License with BSD+Patent License
9d991b5dff IntelSiliconPkg: Replace BSD License with BSD+Patent License
6c2833f076 IntelFspWrapperPkg: Replace BSD License with BSD+Patent License
c679ff1058 IntelFspPkg: Replace BSD License with BSD+Patent License
8623e16830 IntelFsp2WrapperPkg: Replace BSD License with BSD+Patent License
40e4b295f8 IntelFsp2Pkg: Replace BSD License with BSD+Patent License
36ea637247 IntelFrameworkPkg: Replace BSD License with BSD+Patent License
0c6f14fb2f IntelFrameworkModulePkg: Replace BSD License with BSD+Patent License
79ea5a27b9 FmpDevicePkg: Replace BSD License with BSD+Patent License
a8e09bbdac FatPkg: Replace BSD License with BSD+Patent License
81322a8327 EmulatorPkg: Replace BSD License with BSD+Patent License
88e68e0fbc EmbeddedPkg: Replace BSD License with BSD+Patent License
c3176994e5 EdkCompatibilityPkg: Replace BSD License with BSD+Patent License
06bca42822 DynamicTablesPkg: Replace BSD License with BSD+Patent License
5bdb990eb2 CryptoPkg: Replace BSD License with BSD+Patent License
40472d5724 CorebootPayloadPkg: Replace BSD License with BSD+Patent License
a87f66c6a6 CorebootModulePkg: Replace BSD License with BSD+Patent License
18a480540a BeagleBoardPkg: Replace BSD License with BSD+Patent License
908d82c3fd ArmVirtPkg: Replace BSD License with BSD+Patent License
4eb0a6b673 ArmPlatformPkg: Replace BSD License with BSD+Patent License
a376999cfd ArmPkg: Replace BSD License with BSD+Patent License
20b76852bb BaseTools: Replace BSD License with BSD+Patent License
15cfa51d6f edk2: Replace BSD License with BSD+Patent License
75c4e96f35 edk2: Change License.txt from 2-Clause BSD to BSD+Patent
1daf0f13e1 edk2: Add License-History.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6715</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-14 06:58:54 +0000</bug_when>
    <thetext>[edk2] PATCH] Change EDK II to BSD+Patent License
https://lists.01.org/pipermail/edk2-devel/2019-March/037741.html
http://mid.mail-archive.com/E92EE9817A31E24EB0585FDF735412F5B9C6850A@ORSMSX112.amr.corp.intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6795</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-20 22:55:41 +0000</bug_when>
    <thetext>Per edk2-stable201905 planning to add the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6910</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-25 08:02:05 +0000</bug_when>
    <thetext>[edk2] [RFC v3] Change EDK II to BSD+Patent License
https://lists.01.org/pipermail/edk2-devel/2019-March/038116.html
http://mid.mail-archive.com/E92EE9817A31E24EB0585FDF735412F5B9C705B4@ORSMSX112.amr.corp.intel.com

[edk2] [PATCH V2] Change EDK II to BSD+Patent License
https://lists.01.org/pipermail/edk2-devel/2019-March/038117.html
http://mid.mail-archive.com/E92EE9817A31E24EB0585FDF735412F5B9C705F9@ORSMSX112.amr.corp.intel.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6994</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-03 19:51:11 +0000</bug_when>
    <thetext>New in V3
=========
* Update the base of the patch series from edk2-stable201903 to
  7ed72121b7 that is after the file add/remove freeze:

  https://lists.01.org/pipermail/edk2-devel/2019-April/038574.html

* Replace copyright line in License.txt in root with a single copyright
  for &quot;TianoCore and contributors&quot;.
* Clarify commit message for changes to License.txt to state the text 
  differences are larger than expected due to differences in line breaks.
* There is one less patch in the series than V2 due to the retirement
  of the EdkCompatibilityPkg.
* The git feature &quot;git range-diff&quot; can be used to compare the V2 and
  V3 branches even though they have different bases.  If you have both
  the V2 and V3 branches in your local repo, you can use the following 
  command to see the changes.  Most are due to the removal of .S files
  in March.  If you pipe through grep looking for &quot;diff --git&quot; you will
  see the list of files with differences.

  git range-diff edk2-stable201903..Bug_1373_BsdPatentLicense_V2 7ed72121b7..Bug_1373_BsdPatentLicense_V3

New in V2
=========
* Remove Cc lines from commit messages
* Remove branch reference from commit messages
* Change license in 2 files missed in OvmfPkg
* Update OvmfPkg/License.txt to BSD+Patent as the default license
* Move the portions of Contributions.txt in the root of edk2 to
  Readme.md in the root of edk2 that describe how to contribute
  along with the commit message format.
* Add to Readme.md in the root of edk2 that Signed-off-by means that
  the contributor certifies compliance to the Developer&apos;s Certificate
  of Origin 1.1.  https://developercertificate.org
=========

BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1373

This change is based on the following emails:
  https://lists.01.org/pipermail/edk2-devel/2019-February/036260.html
  https://lists.01.org/pipermail/edk2-devel/2018-October/030385.html

RFCs with detailed process for the license change:
  V3: https://lists.01.org/pipermail/edk2-devel/2019-March/038116.html
  V2: https://lists.01.org/pipermail/edk2-devel/2019-March/037669.html
  V1: https://lists.01.org/pipermail/edk2-devel/2019-March/037500.html

I have posted the patch series for review on the following branch using
7ed72121b7 as the base for the patch series.

  https://github.com/mdkinney/edk2/tree/Bug_1373_BsdPatentLicense_V3

The commits in patch series can be viewed here:

  https://github.com/mdkinney/edk2/commits/Bug_1373_BsdPatentLicense_V3

The patch series has one patch per package along with a few patches
to update the license information in the root of the edk2 repository
as described in the RFC V3.

Due to the size of the patch series, I prefer to not send the
patch emails.  Instead, please perform code reviews using content
from the branch.

All EDK II package maintainers and package reviewers should provide
review feedback for their packages.  The critical part of the review
is:
1) Any changes that cause build breaks or logic changes.  These code
   changes are intended to only modify license contents in comment
   blocks.
2) Any file that has been changed to BSD+Patent, but should remain
   with the current license.
3) Any file that that has not changed to BSD+Patent, but should be
   changed to BSD+Patent. 

Feedback and Reviewed-by emails should identify the patch the feedback
applies using the patch summary listed below.  The goal is to complete
all reviews to support the commit of these patches on April 9, 2019.

eece5f8a6e edk2: Remove Contributions.txt and update Readme.md
224dce1ae5 OvmfPkg: Change License.txt from 2-Clause BSD to BSD+Patent
f3cbc2ffc7 StdLibPrivateInternalFiles: Replace BSD License with BSD+Patent License
845b945044 StdLib: Replace BSD License with BSD+Patent License
e55c8532c9 AppPkg: Replace BSD License with BSD+Patent License
a6df2af909 Vlv2TbltDevicePkg: Replace BSD License with BSD+Patent License
6360b3f3af Vlv2DeviceRefCodePkg: Replace BSD License with BSD+Patent License
a67328cbb4 UefiCpuPkg: Replace BSD License with BSD+Patent License
248d91c908 StandaloneMmPkg: Replace BSD License with BSD+Patent License
415927330c SourceLevelDebugPkg: Replace BSD License with BSD+Patent License
4cd6c3f31f SignedCapsulePkg: Replace BSD License with BSD+Patent License
9ffa4947d3 ShellPkg: Replace BSD License with BSD+Patent License
fdb6510955 ShellBinPkg: Replace BSD License with BSD+Patent License
dc5f8d93d9 SecurityPkg: Replace BSD License with BSD+Patent License
841d42a913 QuarkSocPkg: Replace BSD License with BSD+Patent License
75c3756e18 QuarkPlatformPkg: Replace BSD License with BSD+Patent License
657491e5a3 PcAtChipsetPkg: Replace BSD License with BSD+Patent License
4ac687248f OvmfPkg: Replace BSD License with BSD+Patent License
521b8139c7 OptionRomPkg: Replace BSD License with BSD+Patent License
ec339f8320 Omap35xxPkg: Replace BSD License with BSD+Patent License
ad1bf1a53a Nt32Pkg: Replace BSD License with BSD+Patent License
aa99b9adeb NetworkPkg: Replace BSD License with BSD+Patent License
88bdc989d7 MdePkg: Replace BSD License with BSD+Patent License
5628b5e5c7 MdeModulePkg: Replace BSD License with BSD+Patent License
505e36838d IntelSiliconPkg: Replace BSD License with BSD+Patent License
e1fecb94e7 IntelFspWrapperPkg: Replace BSD License with BSD+Patent License
d7347d7ef0 IntelFspPkg: Replace BSD License with BSD+Patent License
487741dd60 IntelFsp2WrapperPkg: Replace BSD License with BSD+Patent License
0e8d264faf IntelFsp2Pkg: Replace BSD License with BSD+Patent License
f4835e9508 IntelFrameworkPkg: Replace BSD License with BSD+Patent License
d9af7c1d3b IntelFrameworkModulePkg: Replace BSD License with BSD+Patent License
5a3c8a14ce FmpDevicePkg: Replace BSD License with BSD+Patent License
87d9ee37c5 FatPkg: Replace BSD License with BSD+Patent License
f336d7d7de EmulatorPkg: Replace BSD License with BSD+Patent License
5ea93a6088 EmbeddedPkg: Replace BSD License with BSD+Patent License
2afa7c0820 DynamicTablesPkg: Replace BSD License with BSD+Patent License
4768af6404 CryptoPkg: Replace BSD License with BSD+Patent License
9aecbee0a3 CorebootPayloadPkg: Replace BSD License with BSD+Patent License
e7716450b8 CorebootModulePkg: Replace BSD License with BSD+Patent License
04fb04e0aa BeagleBoardPkg: Replace BSD License with BSD+Patent License
c910bd4e91 ArmVirtPkg: Replace BSD License with BSD+Patent License
6f98d2f305 ArmPlatformPkg: Replace BSD License with BSD+Patent License
1ce858bf27 ArmPkg: Replace BSD License with BSD+Patent License
0fb7bd552b BaseTools: Replace BSD License with BSD+Patent License
bc61733285 edk2: Replace BSD License with BSD+Patent License
8ee83c5dcd edk2: Change License.txt from 2-Clause BSD to BSD+Patent
17a33094a9 edk2: Add License-History.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7046</commentid>
    <comment_count>9</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-09 14:36:31 +0000</bug_when>
    <thetext>The patch series has been pushed as f8113e2500..3806e1fd13</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1810</bug_id>
          
          <creation_ts>2019-05-14 22:44:00 +0000</creation_ts>
          <short_desc>CpuCommonFeaturesLib ClockModulation.c reduce writing MSR_IA32_CLOCK_MODULATION times</short_desc>
          <delta_ts>2019-06-06 06:58:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7540</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-14 22:44:00 +0000</bug_when>
    <thetext>CpuCommonFeaturesLib ClockModulation.c get CPUID values for all processors in ClockModulationSupport() as ClockModulationSupport() is executed by all processors, but ClockModulationInitialize() is only executed by BSP.

And now, there are three CPU_REGISTER_TABLE_WRITE_FIELD in ClockModulationInitialize(), they can be reduced to one by getting MSR MSR_IA32_CLOCK_MODULATION values for all processors in ClockModulationSupport() and then ClockModulationInitialize() to update fields for register table write.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7588</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:12:30 +0000</bug_when>
    <thetext>Eric, please help to investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7788</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-05-25 02:56:41 +0000</bug_when>
    <thetext>Take it.
V2 patch was sent at https://edk2.groups.io/g/devel/message/41119.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7944</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-06-06 06:58:34 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/fe0c2770a72af3a34f79c84676b7bf0c97090bda.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1607</bug_id>
          
          <creation_ts>2019-03-08 18:10:24 +0000</creation_ts>
          <short_desc>parallelism / dependency tracking inside (not between) modules is broken</short_desc>
          <delta_ts>2023-01-03 03:49:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jsnow</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6667</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-08 18:10:24 +0000</bug_when>
    <thetext>In the following message (two URLs provided):

  https://lists.01.org/pipermail/edk2-devel/2019-January/035895.html
  http://mid.mail-archive.com/abaa7b61-8623-8c16-0584-9c8f99d2b1f2@redhat.com

I tested the Python3 enablement in a number of scenarios, and it worked fine. To summarize those scenarios, I can list:

- on RHEL-7 with the system python 2,
- on RHEL-7 with python3.4 from EPEL-7,
- on RHEL-8 with python3.6,
- on RHEL-8 with platform-python.

My testing covered multi-threaded builds, that is, the &quot;-n&quot; option of the &quot;build&quot; utility. This option builds modules (INF files) in parallel to each other, but it does not parallelize the compilation of C files inside any single module.


However, in a separate thread, we discussed exactly that second kind of parallelization. This type of parallelization depends on full dependency tracking within the Makefile that the build utility generates for a single INF file:

  [edk2] parallelism in the module-level, generated GNUmakefile&apos;s
  https://lists.01.org/pipermail/edk2-devel/2019-January/035463.html
  http://mid.mail-archive.com/d2a83e60-50f1-33d9-4c9d-34d3d947ff42@redhat.com

Liming confirmed that the edk2 community was committed to sustaining the complete dependency tracking, and if that should regress at some point, I would be welcome to report a bug:

  https://lists.01.org/pipermail/edk2-devel/2019-January/035566.html
  http://mid.mail-archive.com/4A89E2EF3DFEDB4C8BFDE51014F606A14E3C14D1@SHSMSX104.ccr.corp.intel.com

My testing of the Python3 enablement did not cover this build mode (that is, the scenario described in the thread starter message &quot;parallelism in the module-level, generated GNUmakefile&apos;s&quot;.)

Now the issue is that the in-module parallelization continues to work fine with python2 (even at the edk2-stable201903 tag), but it does not work with python3. This is a simple reproducer command (please see &quot;Makefile.test&quot; attached):

  make -f Makefile.test -j4

This fails with the output attached in &quot;python3-fail.txt&quot;.

If we force Python2 however, it works fine -- both functionally, and with the expected in-module parallelization:

  PYTHON_COMMAND=python2 make -f Makefile.test -j4

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6668</commentid>
    <comment_count>1</comment_count>
      <attachid>268</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-08 18:11:08 +0000</bug_when>
    <thetext>Created attachment 268
Makefile.test</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6669</commentid>
    <comment_count>2</comment_count>
      <attachid>269</attachid>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-08 18:11:46 +0000</bug_when>
    <thetext>Created attachment 269
python3-fail.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6882</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-22 02:14:57 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9700</commentid>
    <comment_count>4</comment_count>
    <who name="John Snow">jsnow</who>
    <bug_when>2019-09-17 15:03:12 +0000</bug_when>
    <thetext>Greetings from upstream QEMU!

Unfortunately, Python2 has an EOL just a few months away and we are making preparations to drop all support from our codebase entirely.

The EDK2 build scripts use a hardcoded override for python2 that bypasses our own configuration process, so we will also need to drop this workaround from our build tree, which leaves the EDK2 build broken in that context.

Is there any additional information available on the problem as it stands, and is it reasonable to think it can be fixed by Python2 EOL in 3 months?

Thanks,
--js</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9704</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-18 03:24:18 +0000</bug_when>
    <thetext>Hi John,

I&apos;ve tried to look into this now, comparing the generated file tree in Build/, between python2 and python3. The amount of differences is discouraging.

However, the reproducer that I provided in comment#0 and comment#1 originally, now fails for me -- with edk2 master at 82c1a2120855 -- even when using python2. That seems to imply one of two things:

- even with python2, the concurrent edk2 build (using the job server in the outer &quot;make&quot;) has only ever worked in QEMU by chance,

- or the python2 stuff has regressed for our use case in QEMU since I reported this BZ.

Either way, I think we have no choice left but to force a single-threaded build in QEMU. I&apos;ll try to send a patch soon. And then we can drop the python2 dependency. :/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9708</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-18 11:24:19 +0000</bug_when>
    <thetext>Retitling this BZ to:

  parallelism / dependency tracking inside (not between) modules is broken

because the issue is not specific to Python3, per comment 5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9709</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-18 11:27:06 +0000</bug_when>
    <thetext>Bob,

if the issue cannot be solved quickly or easily, it would still be a significant help to the QEMU project if the following stop-gap measure could be implemented in BaseTools:

- please add the &quot;.NOTPARALLEL:&quot; target to *every* makefile that the &quot;build&quot; generates.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11624</commentid>
    <comment_count>8</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2020-03-08 23:03:49 +0000</bug_when>
    <thetext>Assign Zhiju</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12389</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-05-05 19:09:18 +0000</bug_when>
    <thetext>I&apos;m keeping this open. This remains a problem for other projects that build edk2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>20376</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2023-01-03 03:49:47 +0000</bug_when>
    <thetext>Nice, 3.5 years later, in spite of the express promise from Liming to look into parallel build issues triggered by other projects, this remains unfixed. I guess it cannot be helped.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>268</attachid>
            <date>2019-03-08 18:11:08 +0000</date>
            <delta_ts>2019-03-08 18:11:08 +0000</delta_ts>
            <desc>Makefile.test</desc>
            <filename>Makefile.test</filename>
            <type>text/plain</type>
            <size>120</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>269</attachid>
            <date>2019-03-08 18:11:46 +0000</date>
            <delta_ts>2019-03-08 18:11:46 +0000</delta_ts>
            <desc>python3-fail.txt</desc>
            <filename>python3-fail.txt</filename>
            <type>text/plain</type>
            <size>2765</size>
            <attacher name="Laszlo Ersek">laszlo.ersek</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1495</bug_id>
          
          <creation_ts>2019-01-28 23:20:28 +0000</creation_ts>
          <short_desc>Change OvmfPkg to stop using ISA drivers in framework pkg</short_desc>
          <delta_ts>2019-03-27 01:29:42 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6221</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-28 23:20:28 +0000</bug_when>
    <thetext>The framework ISA drivers used by OVMF include:
  INF  PcAtChipsetPkg/IsaAcpiDxe/IsaAcpi.inf
  INF  IntelFrameworkModulePkg/Bus/Isa/IsaBusDxe/IsaBusDxe.inf
  INF  IntelFrameworkModulePkg/Bus/Isa/IsaSerialDxe/IsaSerialDxe.inf
  INF  IntelFrameworkModulePkg/Bus/Isa/Ps2KeyboardDxe/Ps2keyboardDxe.inf
  INF  IntelFrameworkModulePkg/Bus/Isa/IsaFloppyDxe/IsaFloppyDxe.inf

We need to replace these with the ones in MdeModulePkg/Isa directory by writing a fake SIO BUS driver for OVMF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6228</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-29 07:04:01 +0000</bug_when>
    <thetext>Hi Ray,

* Quoting / extending
&lt;https://bugzilla.tianocore.org/show_bug.cgi?id=405#c2, this is what we have
in OVMF now:

  MdeModulePkg/Bus/Pci/PciBusDxe
    produces EfiPciIoProtocol ----------------------+
                                                    |
  PcAtChipsetPkg/IsaAcpiDxe                         |
    consumes EfiPciIoProtocol &lt;---------------------+

    produces EfiIsaAcpiProtocol --------------------+
                                                    |
  IntelFrameworkModulePkg/Bus/Isa/IsaBusDxe         |
    consumes EfiIsaAcpiProtocol &lt;-------------------+

    produces EfiIsaIoProtocol ----------------------+---+---+
                                                    |   |   |
  IntelFrameworkModulePkg/Bus/Isa/Ps2KeyboardDxe    |   |   |
    consumes EfiIsaIoProtocol &lt;---------------------+   |   |
                                                        |   |
    produces                                            |   |
      EfiSimpleTextInProtocol                           |   |
      EfiSimpleTextInputExProtocol                      |   |
                                                        |   |
  IntelFrameworkModulePkg/Bus/Isa/IsaSerialDxe          |   |
    consumes EfiIsaIoProtocol &lt;-------------------------+   |
                                                            |
    produces EfiSerialIoProtocol                            |
                                                            |
  IntelFrameworkModulePkg/Bus/Isa/IsaFloppyDxe              |
    consumes EfiIsaIoProtocol &lt;-----------------------------+

    produces EfiBlockIoProtocol


* Under MdeModulePkg/Bus/Isa, we have:

  MdeModulePkg/Bus/Isa/IsaBusDxe
    consumes (produces?) EfiIsaHcProtocol

    produces EfiIsaHcServiceBindingProtocol

  MdeModulePkg/Bus/Isa/Ps2KeyboardDxe
    consumes EfiSioProtocol

    produces
      EfiSimpleTextInProtocol
      EfiSimpleTextInputExProtocol

  MdeModulePkg/Bus/Isa/Ps2MouseDxe
    consumes EfiSioProtocol

    produces EfiSimplePointerProtocol


* When we compare both driver / protocol stacks, I find:

(1) &quot;MdeModulePkg/Bus/Isa/IsaBusDxe&quot; seems useless. Nothing consumes
    EfiIsaHcProtocol or EfiIsaHcServiceBindingProtocol. So I think we
    shouldn&apos;t include this driver.

(2) &quot;MdeModulePkg/Bus/Isa/Ps2KeyboardDxe&quot; consumes EfiSioProtocol, but
    nothing produces that in OVMF. I guess this is why you wrote  &quot;write a
    fake SIO BUS driver for OVMF&quot;.

(3) MdeModulePkg/Bus/Isa/Ps2MouseDxe is useless for OVMF. OVMF does not
    include a mouse / tablet driver at this point (which is fine).

(4) There is no replacement for
    &quot;IntelFrameworkModulePkg/Bus/Isa/IsaSerialDxe&quot; under
    &quot;MdeModulePkg/Bus/Isa&quot;. What will produce EfiSerialIoProtocol?

    Perhaps &quot;MdeModulePkg/Universal/SerialDxe&quot;, with
    PcAtChipsetPkg/Library/SerialIoLib?

(5) There is also no replacement for
    &quot;IntelFrameworkModulePkg/Bus/Isa/IsaFloppyDxe&quot;. (I think we could
    consider removing floppy support altogether.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6441</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 01:55:21 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6731</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-15 03:19:26 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Hi Ray,
&gt; 
&gt; * Quoting / extending
&gt; &lt;https://bugzilla.tianocore.org/show_bug.cgi?id=405#c2, this is what we have
&gt; in OVMF now:
&gt; 
&gt;   MdeModulePkg/Bus/Pci/PciBusDxe
&gt;     produces EfiPciIoProtocol ----------------------+
&gt;                                                     |
&gt;   PcAtChipsetPkg/IsaAcpiDxe                         |
&gt;     consumes EfiPciIoProtocol &lt;---------------------+
&gt; 
&gt;     produces EfiIsaAcpiProtocol --------------------+
&gt;                                                     |
&gt;   IntelFrameworkModulePkg/Bus/Isa/IsaBusDxe         |
&gt;     consumes EfiIsaAcpiProtocol &lt;-------------------+
&gt; 
&gt;     produces EfiIsaIoProtocol ----------------------+---+---+
&gt;                                                     |   |   |
&gt;   IntelFrameworkModulePkg/Bus/Isa/Ps2KeyboardDxe    |   |   |
&gt;     consumes EfiIsaIoProtocol &lt;---------------------+   |   |
&gt;                                                         |   |
&gt;     produces                                            |   |
&gt;       EfiSimpleTextInProtocol                           |   |
&gt;       EfiSimpleTextInputExProtocol                      |   |
&gt;                                                         |   |
&gt;   IntelFrameworkModulePkg/Bus/Isa/IsaSerialDxe          |   |
&gt;     consumes EfiIsaIoProtocol &lt;-------------------------+   |
&gt;                                                             |
&gt;     produces EfiSerialIoProtocol                            |
&gt;                                                             |
&gt;   IntelFrameworkModulePkg/Bus/Isa/IsaFloppyDxe              |
&gt;     consumes EfiIsaIoProtocol &lt;-----------------------------+
&gt; 
&gt;     produces EfiBlockIoProtocol
&gt; 
&gt; 
&gt; * Under MdeModulePkg/Bus/Isa, we have:
&gt; 
&gt;   MdeModulePkg/Bus/Isa/IsaBusDxe
&gt;     consumes (produces?) EfiIsaHcProtocol
&gt; 
&gt;     produces EfiIsaHcServiceBindingProtocol
&gt; 
&gt;   MdeModulePkg/Bus/Isa/Ps2KeyboardDxe
&gt;     consumes EfiSioProtocol
&gt; 
&gt;     produces
&gt;       EfiSimpleTextInProtocol
&gt;       EfiSimpleTextInputExProtocol
&gt; 
&gt;   MdeModulePkg/Bus/Isa/Ps2MouseDxe
&gt;     consumes EfiSioProtocol
&gt; 
&gt;     produces EfiSimplePointerProtocol
&gt; 
&gt; 
&gt; * When we compare both driver / protocol stacks, I find:
&gt; 
&gt; (1) &quot;MdeModulePkg/Bus/Isa/IsaBusDxe&quot; seems useless. Nothing consumes
&gt;     EfiIsaHcProtocol or EfiIsaHcServiceBindingProtocol. So I think we
&gt;     shouldn&apos;t include this driver.

Hello Laszlo,

Yes, you are right.

&gt; 
&gt; (2) &quot;MdeModulePkg/Bus/Isa/Ps2KeyboardDxe&quot; consumes EfiSioProtocol, but
&gt;     nothing produces that in OVMF. I guess this is why you wrote  &quot;write a
&gt;     fake SIO BUS driver for OVMF&quot;.
&gt; 
&gt; (3) MdeModulePkg/Bus/Isa/Ps2MouseDxe is useless for OVMF. OVMF does not
&gt;     include a mouse / tablet driver at this point (which is fine).

I will not add this one.

&gt; 
&gt; (4) There is no replacement for
&gt;     &quot;IntelFrameworkModulePkg/Bus/Isa/IsaSerialDxe&quot; under
&gt;     &quot;MdeModulePkg/Bus/Isa&quot;. What will produce EfiSerialIoProtocol?
&gt; 
&gt;     Perhaps &quot;MdeModulePkg/Universal/SerialDxe&quot;, with
&gt;     PcAtChipsetPkg/Library/SerialIoLib?

Actually, we plan to use the one under:
MdeModulePkg/Bus/Pci/PciSioSerialDxe

&gt; 
&gt; (5) There is also no replacement for
&gt;     &quot;IntelFrameworkModulePkg/Bus/Isa/IsaFloppyDxe&quot;. (I think we could
&gt;     consider removing floppy support altogether.)

We also prefer to drop the ISA Floppy devices support.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6732</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-15 03:20:16 +0000</bug_when>
    <thetext>V1 of the proposed patch has been sent for review:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg52456.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6905</commentid>
    <comment_count>5</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-25 02:00:56 +0000</bug_when>
    <thetext>V2 patch series has been sent for review:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg52769.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6922</commentid>
    <comment_count>6</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-27 01:29:42 +0000</bug_when>
    <thetext>Resolved via commits:
https://github.com/tianocore/edk2/commit/e259ad9b64528aab3840e7b7b50284ee5f5a4242
https://github.com/tianocore/edk2/commit/a5cc178aeb1a59e446bcd20f9dd8a53b475664d9
https://github.com/tianocore/edk2/commit/a068102296180b7e2481467080c84e02e89de980</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1395</bug_id>
          
          <creation_ts>2018-12-13 00:09:12 +0000</creation_ts>
          <short_desc>Add api to DebubLib to expose a print routine with VaList parameter</short_desc>
          <delta_ts>2019-05-20 01:39:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5844</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-13 00:09:12 +0000</bug_when>
    <thetext>Adding a print routine with VaList allows for a better/smaller/more optimized API when doing Protocol/PPI wrapper of debug lib.  

Header Code change: https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Include/Library/DebugLib.h#L152 

Lib Code change:
https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Library/PeiDxeDebugLibReportStatusCode/DebugLib.c#L52

https://github.com/Microsoft/mu_basecore/blob/release/201808/MdeModulePkg/Library/PeiDxeDebugLibReportStatusCode/DebugLib.c#L91

Use case is to allow a library to then produce the DebugPortPpi from the debug lib in a size efficient way.
DebugPortPpi (new PPI)
https://github.com/Microsoft/mu_plus/blob/release/201808/MsCorePkg/Include/Ppi/DebugPort.h
 
https://github.com/Microsoft/mu_plus/blob/release/201808/MsCorePkg/Library/DebugPortPei/DebugPortPei.c#L42

Library providing debuglib services in Pei leveraging the above PPI: https://github.com/Microsoft/mu_plus/tree/release/201808/MsCorePkg/Library/PeiDebugLib
 

this feature saves significant rom space for XIP uncompressed PEI which is usually a critical/limited resource</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5888</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 20:01:49 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5976</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-03 02:59:00 +0000</bug_when>
    <thetext>Assign it to the owner to prepare the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6523</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-02-25 11:04:20 +0000</bug_when>
    <thetext>Assign it to the owner to prepare the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6528</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-02-25 21:28:00 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #3)
&gt; Assign it to the owner to prepare the patch.

Liming,
I have some comments to Sean&apos;s change especially the new API name. Providing here in case I missed the community patch review.

In PrintLib we have API &quot;UnicodeVSPrint&quot;, I suggest we align the new API with the existing V-APIs defined already in edk2 code.

For example, maybe changing &quot;DebugPrintValist&quot; to &quot;DebugVPrint&quot; if it&apos;s using VA_LIST.
And I think we also need to check whether &quot;DebugBPrint&quot; is needed to support GCC build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6689</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-03-11 15:05:59 +0000</bug_when>
    <thetext>1. Agree to align BasePrintLib API name style. New API in DebugLib can be DebugVSPrint().

2. VA_LIST supports the different compiler. BASE_LIST is to include va list as the generic way so that it can be parsed in the different module, for example its message is included in status code data. DebugLib handles VA_LIST by itself. It doesn&apos;t need to support BASE_LIST version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6979</commentid>
    <comment_count>6</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-02 20:12:11 +0000</bug_when>
    <thetext>Finished at:
https://github.com/tianocore/edk2/commit/b87a9a76ebc3b8831cff9117a2640955be463641
https://github.com/tianocore/edk2/commit/b04bdd154add677dee001b290aab1ef237f83036
https://github.com/tianocore/edk2/commit/f13202874c9c53f30f7cfc8accae5f527cd27131
https://github.com/tianocore/edk2/commit/ec81dba51f0bd97e3b927a2d953ad3294027690b
https://github.com/tianocore/edk2/commit/8055c3d5ee3f25c0f8fe985ccd9fe70f8d552a6b
https://github.com/tianocore/edk2/commit/b22b4f5aeed97f26db016f44f1a8a44139b171f3
https://github.com/tianocore/edk2/commit/27d86bc12b1d2186e1da3b8ca3cd7fcbf1d831ee
https://github.com/tianocore/edk2/commit/92c0bbd18b8be748f5e0c30d48168e5db94f0217
https://github.com/tianocore/edk2/commit/2fe5f2f52918b63023f0dcb80eb291f67d5e5912
https://github.com/tianocore/edk2/commit/446be24d0bd2c060ee2d7233e44ab298338e5f52
https://github.com/tianocore/edk2/commit/0bb4eff6a0bb6d1ca56d82972dd4c1cc79844865
https://github.com/tianocore/edk2/commit/9fb1f7efc90acb2c30850331edd3a447bb3a596d
https://github.com/tianocore/edk2/commit/bd68cddc6b5f01cc3a1dc2dadd8ccd9463386696</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7300</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-27 23:31:18 +0000</bug_when>
    <thetext>Per edk2-stable201905 plan to add deadline info.
https://github.com/tianocore/tianocore.github.io/wiki/EDK-II-Release-Planning</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7702</commentid>
    <comment_count>8</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-05-20 01:36:11 +0000</bug_when>
    <thetext>Update the useage:
Using OvmfPkgX64 as an example
1. Add the PEIM PeiDebugLibDebugPpi to the platform dsc and fdf file and indicate the debuglib instance in [LibraryClasses.Common.PEIM]
dsc file:
[Components]
...
  MdeModulePkg/Universal/DebugServicePei/DebugServicePei.inf {
    &lt;LibraryClasses&gt;
!ifdef $(DEBUG_ON_SERIAL_PORT)
      DebugLib|MdePkg/Library/BaseDebugLibSerialPort/BaseDebugLibSerialPort.inf
!else
      DebugLib|OvmfPkg/Library/PlatformDebugLibIoPort/PlatformDebugLibIoPort.inf
!endif
  }
...

fdf file: put the driver in the same fv with PeiMain.inf
[FV.PEIFV]
...
INF  MdeModulePkg/Universal/DebugServicePei/DebugServicePei.inf
INF  MdeModulePkg/Core/Pei/PeiMain.inf
...

2. Indicate the PcdPeim&apos;s DebugLib instance to the same one with DebugServicePei in the dsc file
[Components]
...
  MdeModulePkg/Universal/PCD/Pei/Pcd.inf  {
    &lt;LibraryClasses&gt;
      PcdLib|MdePkg/Library/BasePcdLibNull/BasePcdLibNull.inf
!ifdef $(DEBUG_ON_SERIAL_PORT)
     DebugLib|MdePkg/Library/BaseDebugLibSerialPort/BaseDebugLibSerialPort.inf
!else
      DebugLib|OvmfPkg/Library/PlatformDebugLibIoPort/PlatformDebugLibIoPort.inf
!endif
  }
...

3. Replace the DebugLib instance with PeiDebugLibDebugPpi in the [LibraryClasses.Common.PEIM] in the dsc file

[LibraryClasses.Common.PEIM]
...
  DebugLib|MdeModulePkg/Library/PeiDebugLibDebugPpi/PeiDebugLibDebugPpi.inf
...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7703</commentid>
    <comment_count>9</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-05-20 01:39:28 +0000</bug_when>
    <thetext>(In reply to Zhichao Gao from comment #8)
&gt; Update the useage:
&gt; Using OvmfPkgX64 as an example
&gt; 1. Add the PEIM PeiDebugLibDebugPpi to the platform dsc and fdf file and
&gt; indicate the debuglib instance in [LibraryClasses.Common.PEIM]
&gt; dsc file:
&gt; [Components]
&gt; ...
&gt;   MdeModulePkg/Universal/DebugServicePei/DebugServicePei.inf {
&gt;     &lt;LibraryClasses&gt;
&gt; !ifdef $(DEBUG_ON_SERIAL_PORT)
&gt;      
&gt; DebugLib|MdePkg/Library/BaseDebugLibSerialPort/BaseDebugLibSerialPort.inf
&gt; !else
&gt;      
&gt; DebugLib|OvmfPkg/Library/PlatformDebugLibIoPort/PlatformDebugLibIoPort.inf
&gt; !endif
&gt;   }
&gt; ...
&gt; 
&gt; fdf file: put the driver in the same fv with PeiMain.inf
&gt; [FV.PEIFV]
&gt; ...
&gt; INF  MdeModulePkg/Universal/DebugServicePei/DebugServicePei.inf
&gt; INF  MdeModulePkg/Core/Pei/PeiMain.inf
&gt; ...
&gt; 
&gt; 2. Indicate the PcdPeim&apos;s DebugLib instance to the same one with
&gt; DebugServicePei in the dsc file
&gt; [Components]
&gt; ...
&gt;   MdeModulePkg/Universal/PCD/Pei/Pcd.inf  {
&gt;     &lt;LibraryClasses&gt;
&gt;       PcdLib|MdePkg/Library/BasePcdLibNull/BasePcdLibNull.inf
&gt; !ifdef $(DEBUG_ON_SERIAL_PORT)
&gt;     
&gt; DebugLib|MdePkg/Library/BaseDebugLibSerialPort/BaseDebugLibSerialPort.inf
&gt; !else
&gt;      
&gt; DebugLib|OvmfPkg/Library/PlatformDebugLibIoPort/PlatformDebugLibIoPort.inf
&gt; !endif
&gt;   }
&gt; ...
&gt; 
&gt; 3. Replace the DebugLib instance with PeiDebugLibDebugPpi in the
&gt; [LibraryClasses.Common.PEIM] in the dsc file
&gt; 
&gt; [LibraryClasses.Common.PEIM]
&gt; ...
&gt;   DebugLib|MdeModulePkg/Library/PeiDebugLibDebugPpi/PeiDebugLibDebugPpi.inf
&gt; ...
Ignore it. Update to the wrong tracker.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1833</bug_id>
          
          <creation_ts>2019-05-22 04:40:27 +0000</creation_ts>
          <short_desc>The python 3 version CParser in Ecc and Eot tools work incorrectly</short_desc>
          <delta_ts>2022-03-01 20:18:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>3206</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7746</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-05-22 04:40:27 +0000</bug_when>
    <thetext>The python 3 version CParser in Ecc and Eot tools can&apos;t parse the C file correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7760</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-23 10:25:34 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>18478</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2022-03-01 20:18:21 +0000</bug_when>
    <thetext>close this bug for it&apos;s not valid.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1204</bug_id>
          
          <creation_ts>2018-09-24 22:39:42 +0000</creation_ts>
          <short_desc>HTTPBoot might cause memory access overflow in AsciiStrStr</short_desc>
          <delta_ts>2018-10-10 01:37:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Li">aaron.li</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jiaxin.wu</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5085</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2018-09-24 22:39:42 +0000</bug_when>
    <thetext>The input param String of AsciiStrStr requires a pointer to Null-terminated string, however in HttpTcpReceiveHeader and HttpUtilitiesParse, the input param String of AsciiStrStr is not contains a Null-terminator (its length is equal with TCP header without Null-terminator). It might cause memory read access overflow.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5138</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-27 20:08:19 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5207</commentid>
    <comment_count>2</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2018-10-10 01:37:32 +0000</bug_when>
    <thetext>Commit version:
https://github.com/tianocore/edk2/commit/130e62928449ba35375282e045aecb8cc29697ec
https://github.com/tianocore/edk2/commit/2239ea71b65072ce3c76d56e7074d2ee60ba1762</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1629</bug_id>
          
          <creation_ts>2019-03-18 04:47:59 +0000</creation_ts>
          <short_desc>CpuCommonFeaturesLib C1e.c &quot;MSR_FEATURE_CONFIG&quot; should be &quot;MSR_NEHALEM_POWER_CTL&quot; in comment</short_desc>
          <delta_ts>2021-06-20 23:28:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6745</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-03-18 04:47:59 +0000</bug_when>
    <thetext>CpuCommonFeaturesLib C1E should be programmed at package scope, but not thread scope.

    ///
    /// [Bit 1] Package. C1E Enable (R/W)  When set to &apos;1&apos;, will enable the
    /// CPU to switch to the Minimum Enhanced Intel SpeedStep Technology
    /// operating point when all execution cores enter MWAIT (C1).
    ///
    UINT32  C1EEnable:1;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6817</commentid>
    <comment_count>1</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-03-21 02:52:35 +0000</bug_when>
    <thetext>Oh, the scope issue has been fixed at d28daaddb3e732468e930a809d3d3943a5de9558.

But there is still comment issue, &quot;MSR_FEATURE_CONFIG&quot; should be &quot;MSR_NEHALEM_POWER_CTL&quot; in comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6880</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-22 01:00:46 +0000</bug_when>
    <thetext>Eric will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16404</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2021-06-20 23:28:00 +0000</bug_when>
    <thetext>Has been handled by https://github.com/tianocore/edk2/commit/6cfeeb71c43173d657d86d4a38ed655b0fc5f277.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1110</bug_id>
          
          <creation_ts>2018-08-23 04:40:11 +0000</creation_ts>
          <short_desc>Build/DSC/FDF spec: Extend &quot;!include&quot;, &quot;!if&quot;, etc to not case-sensitive</short_desc>
          <delta_ts>2018-09-06 01:45:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          <cf_documents>EDK II DSC Specification</cf_documents>
    
    <cf_documents>EDK II FDF Specification</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4681</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 04:40:11 +0000</bug_when>
    <thetext>current in the DSC and FDF spec, the &quot;!include&quot;, &quot;!if&quot;, etc, keywords that start with &quot;!&quot; character is case-sensitive, but unfortunately, the BaseTools code to handle it is: in the DSC file those keywords are not case-sensitive, while in the FDF file those keywords are case-sensitive, and we found in some DSC file, some guys already used &quot;!INCLUDE&quot;, &quot;!IF&quot; format.

so I hope to update the DSC and FDF spec to extend the &quot;!include&quot;, &quot;!if&quot; etc to case-insensitive. and also update the FDF parser logic.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4753</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-08-29 21:05:15 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4837</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-03 20:54:12 +0000</bug_when>
    <thetext>Patch email:

https://lists.01.org/pipermail/edk2-devel/2018-September/029297.html

https://lists.01.org/pipermail/edk2-devel/2018-September/029298.html

https://lists.01.org/pipermail/edk2-devel/2018-September/029299.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4864</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-06 01:45:10 +0000</bug_when>
    <thetext>commit: 
build spec: SHA-1: 9b27835015fbae46d255ea3b057e78010e6d3591

DSC spec: SHA-1: 82a676f016c8992685047b711ff46b6cf53b755a
FDF spec: SHA-1: 9c027bfa2228a1fb5bb207fa58e0955ae278685a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1512</bug_id>
          
          <creation_ts>2019-02-04 08:31:12 +0000</creation_ts>
          <short_desc>OVMF RFE: VCPU hotplug with SMM</short_desc>
          <delta_ts>2020-12-21 09:39:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1515</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=2929</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1515</dependson>
          <blocked>3132</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>aaron.young</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ehabkost</cc>
    
    <cc>f4bug</cc>
    
    <cc>imammedo</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6283</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-04 08:31:12 +0000</bug_when>
    <thetext>QEMU and KVM support CPU hotplug and hot-unplug for virtual machines.

https://git.qemu.org/?p=qemu.git;a=blob;f=docs/cpu-hotplug.rst;h=1c268e00b41a6b4e5af37571031ec89250ec0229;hb=HEAD

https://git.qemu.org/?p=qemu.git;a=blob;f=docs/specs/acpi_cpu_hotplug.txt;h=ee219c8358088c72bcfb130c0e217fb71dc8f9b2;hb=HEAD

Normally, the guest firmware need not be involved in CPU hot(un)plug -- the coordination occurs between the hypervisor and the guest OS, using ACPI artifacts.

(The firmware is involved in setting up the ACPI objects, but that&apos;s a boot-time-only job, and the firmware is not enlightened about the ACPI specifics, it just executes QEMU&apos;s ACPI linker/loader script, for publishing the tables.)

This applies to SeaBIOS, and to OVMF when built without -D SMM_REQUIRE.

However, when OVMF is built with -D SMM_REQUIRE, there is a privilege barrier between virtual firmware and guest OS. If the guest OS could provide the startup routine for a newly hot-plugged VCPU, without the virtual firmware taking notice, then the guest OS could use this VCPU to attack the other VCPUs that execute privileged (SMM) code, the next time an SMI is raised. Thus, the firmware needs to grab the hot-added VCPU before the OS got control of it.

I believe the feature needs work in QEMU (-&gt; transfer control to the firmware upon VCPU hotplug), OvmfPkg (platform enablement), and in UefiCpuPkg/PiSmmCpuDxeSmm too. My understanding is that the open source PiSmmCpuDxeSmm driver operates at OS runtime with the fixed (V)CPU count that it fetches at boot. I assume the CPU hotplug logic exists in variants of PiSmmCpuDxeSmm that are built into physical platform firmware; this RFE is about  extracting and open sourcing a reference implementation of that logic.

Thank you very much for considering the request!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6284</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-04 09:02:12 +0000</bug_when>
    <thetext>For QEMU/KVM, the use case is that the virtual machine is started with a specific topology (sockets, cores/socket, threads/core). The topology may or may not be fully populated at VM launch.

If the virtual machine administrator (or a management application) decides that the VM needs more computational power, they hotplug a number of VCPUs. The topology cannot be changed dynamically, so whenever the hotplug occurs, the topology may not already be fully populated. (This means that the topology has to be sized by the admin in advance, in expectation of VCPU hotplug.)

If the virtual machine admin (or a management application) that the VM should be deprived of some computational power, they hotplug a number of VCPUs. The exact dance requires guest cooperation (see the links in comment#0). Regarding the topology, only such VCPUs may be hot-unplugged that were hot-plugged themselves earlier, or added right at VM launch as hot(un)pluggable.

VCPU#0 always exists and is not hot(un)pluggable. Furthermore, all non-hotpluggable VCPUs that are present at boot are clustered after VCPU#0 -- that is, in lexicographical (socket, core, thread) order, the initial non-pluggable sequence is contiguous, and there&apos;s a clear boundary between pluggable and non-pluggable. (To my understanding.)

I&apos;m unsure if QEMU currently enforces that hotplug / hot-unplug occur at the core level (as opposed to the logical VCPU -- i.e., thread -- level).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6285</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-04 09:04:08 +0000</bug_when>
    <thetext>QEMU and KVM support guests up to at least 384 VCPUs; and OVMF already uses X2APIC, at least in the resolution of the LocalApicLib class:

[LibraryClasses]
  LocalApicLib|UefiCpuPkg/Library/BaseXApicX2ApicLib/BaseXApicX2ApicLib.inf

We have successfully tested OVMF with 272+ VCPUs, multiple times (without hotplug). We had to grow the SMRAM for that (exposing the SMRAM size to the management applications / users):

  https://bugzilla.redhat.com/show_bug.cgi?id=1447027
  https://bugzilla.redhat.com/show_bug.cgi?id=1469338

With those fixed, domain configs with more than 255 VCPUs have been working. My most recent personal testing (with 272 VCPUs) was captured in

  https://bugzilla.redhat.com/show_bug.cgi?id=1447027#c24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6292</commentid>
    <comment_count>3</comment_count>
    <who name="Igor Mammedov">imammedo</who>
    <bug_when>2019-02-05 08:01:24 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; I&apos;m unsure if QEMU currently enforces that hotplug / hot-unplug occur at the
&gt; core level (as opposed to the logical VCPU -- i.e., thread -- level).

In QEMU x86 case hot(un)plug happens at logical CPU granularity and then handled by guest OS ACPI handler (where Processor element per ACPI specification is a logical CPU). As far as I&apos;m aware there is no plans for QEMU to hotplug x86 VCPUs at core (multiple threads) granularity.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6298</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-05 13:08:23 +0000</bug_when>
    <thetext>Staring a bit at &quot;UefiCpuPkg/UefiCpuPkg.dec&quot;, there are signs of support
for CPU hotplug:

(1) The PcdCpuHotPlugSupport Feature Flag determines whether the feature
    is enabled.

If the feature is enabled, then:

(2) The PiCpuSmmEntry() entry point function exposes the address of the
    &quot;mCpuHotPlugData&quot; SMRAM variable, in the dynamic PCD called
    PcdCpuHotPlugDataAddress. See the structure definition in
    &quot;UefiCpuPkg/Include/CpuHotPlugData.h&quot;.

    Unfortunately, nothing seems to consume PcdCpuHotPlugDataAddress.

    What module is supposed to access &quot;mCpuHotPlugData&quot; through
    PcdCpuHotPlugDataAddress? I presume it is a platform-specific
    module.

(3) PiCpuSmmEntry() requires PcdCpuSmmEnableBspElection to be TRUE. (&quot;A
    BSP will be dynamically elected among all processors in each SMI&quot;).

    I think we can short-circuit this requirement fairly easily in
    OVMF/QEMU, if we just clone
    &quot;UefiCpuPkg/Library/SmmCpuPlatformHookLibNull&quot; for OvmfPkg, and
    implement PlatformSmmBspElection() such that it returns TRUE if and
    only if it is called on VCPU#0.

    See the PlatformSmmBspElection() call in SmiRendezvous()
    [UefiCpuPkg/PiSmmCpuDxeSmm/MpService.c].

    (VCPU#0 is non-pluggable in QEMU, and OVMF needs no actual BSP
    election to take place. So the task is to determine, in
    PlatformSmmBspElection(), whether we are executing on VCPU#0 --
    possibly via initial APIC ID check, I&apos;m not sure.)

(4) The SmmAddProcessor() and SmmRemoveProcessor() functions will be
    un-gated [UefiCpuPkg/PiSmmCpuDxeSmm/CpuService.c].

    These functions implement the
    EFI_SMM_CPU_SERVICE_PROTOCOL.AddProcessor() and
    EFI_SMM_CPU_SERVICE_PROTOCOL.RemoveProcessor() members. In
    particular, they access the &quot;mCpuHotPlugData&quot; structure (see (2)
    above).

    Interestingly, SmmAddProcessor() carries the following comment:

&gt;   //
&gt;   // Check CPU hot plug data. The CPU RAS handler should have created the mapping
&gt;   // of the APIC ID to SMBASE.
&gt;   //

    Which makes me think that the &quot;CPU RAS handler&quot; is the
    platform-specific module that consumes PcdCpuHotPlugDataAddress
    (again, see (2)).

    However, nothing in edk2 seems to call these protocol members. Nor
    is &quot;gEfiSmmCpuServiceProtocolGuid&quot; ever looked up by any module in
    the SMM protocol database. So even if the AddProcessor() and
    RemoveProcessor() member functions are un-gated, how/when are they
    used?

    ... The protocol name EFI_SMM_CPU_SERVICE_PROTOCOL suggests that it
    is a standard protocol, so I tried to read up on the usage model in
    the PI spec (v1.6). However, the spec doesn&apos;t seem to know about the
    protocol (I searched the spec for the first component of the
    protocol GUID too, namely 0x1d202cab.) In the end the protocol
    appears to be edk2 specific.

    FWIW, the leading comments on the member function pointer types,
    i.e., EFI_SMM_ADD_PROCESSOR and EFI_SMM_REMOVE_PROCESSOR, look
    promising. See &quot;UefiCpuPkg/Include/Protocol/SmmCpuService.h&quot; --
    &quot;Notify that a new processor has been added to the system&quot;, &quot;Notify
    that a processor is hot-removed&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6299</commentid>
    <comment_count>5</comment_count>
    <who name="Igor Mammedov">imammedo</who>
    <bug_when>2019-02-06 03:16:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #4)
[...]
&gt;     (VCPU#0 is non-pluggable in QEMU, and OVMF needs no actual BSP
&gt;     election to take place. So the task is to determine, in
&gt;     PlatformSmmBspElection(), whether we are executing on VCPU#0 --
&gt;     possibly via initial APIC ID check, I&apos;m not sure.)
Perhaps checking for BSP flag in IA32_APIC_BASE?
[...]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6303</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-02-06 10:51:39 +0000</bug_when>
    <thetext>(In reply to Igor Mammedov from comment #5)
&gt; (In reply to Laszlo Ersek from comment #4)
&gt; [...]
&gt; &gt;     (VCPU#0 is non-pluggable in QEMU, and OVMF needs no actual BSP
&gt; &gt;     election to take place. So the task is to determine, in
&gt; &gt;     PlatformSmmBspElection(), whether we are executing on VCPU#0 --
&gt; &gt;     possibly via initial APIC ID check, I&apos;m not sure.)
&gt; Perhaps checking for BSP flag in IA32_APIC_BASE?
&gt; [...]

I don&apos;t know enough to definitely say &quot;yes&quot;, so, &quot;probably yes&quot;. :) Thanks for the idea. :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6863</commentid>
    <comment_count>7</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 20:36:17 +0000</bug_when>
    <thetext>Mike will help on the design.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7593</commentid>
    <comment_count>8</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:27:45 +0000</bug_when>
    <thetext>Mike will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8979</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-13 10:19:28 +0000</bug_when>
    <thetext>On-list discussion:

[edk2-devel] CPU hotplug using SMM with QEMU+OVMF

http://mid.mail-archive.com/8091f6e8-b1ec-f017-1430-00b0255729f4@redhat.com
https://edk2.groups.io/g/devel/message/45567
https://edk2.groups.io/g/rfc/message/29</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9776</commentid>
    <comment_count>10</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-24 07:37:53 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH wave 1 00/10]
support QEMU&apos;s &quot;SMRAM at default SMBASE&quot; feature

http://mid.mail-archive.com/20190924113505.27272-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/47924</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11003</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-01-29 16:46:23 +0000</bug_when>
    <thetext>[edk2-devel] [PATCH v2 00/11]
support QEMU&apos;s &quot;SMRAM at default SMBASE&quot; feature

http://mid.mail-archive.com/20200129214412.2361-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/53545</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11067</commentid>
    <comment_count>12</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-05 08:45:43 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #11)
&gt; [edk2-devel] [PATCH v2 00/11]
&gt; support QEMU&apos;s &quot;SMRAM at default SMBASE&quot; feature
&gt; 
&gt; http://mid.mail-archive.com/20200129214412.2361-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/53545

Pushed via &lt;https://github.com/tianocore/edk2/pull/332&gt;, commit range 422da35375c6..75839f977d37.

This TianoCore BZ should remain open, as the brunt of the work is commencing only now. (The next steps are outlined in the v1 blurb linked in comment 10.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11350</commentid>
    <comment_count>13</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-20 19:57:00 +0000</bug_when>
    <thetext>Using Igor&apos;s PoC patch for QEMU, I got hotplug/SMM working, both IA32 and IA32X64, including S3 suspend/resume. (Haven&apos;t tested X64 yet.)

Also haven&apos;t tested anything on SEV yet.

Un-plug is explicitly unsupported, for now -- it&apos;ll take a separate attack. (Currently I have 17 patches; 25 files changed, 2121 insertions(+), 32 deletions(-).) Hotplug/SMM is probably worth upstreaming now (I&apos;ll see soon how much more work SEV might need, for hotplug/SMM).

FWIW I&apos;ve never tested hotplug on SEV *without* SMM either, so I&apos;m not sure what the hotplug &quot;baseline&quot; is on SEV.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11386</commentid>
    <comment_count>14</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-21 07:29:22 +0000</bug_when>
    <thetext>(&quot;SMM_REQUIRE&quot; is included in all of the below:)

* X64:

CPU hotplug works (with S3 disabled, as per independent commit 5133d1f1d297).

* SEV+S3:

Resume doesn&apos;t seem to work regardless of VCPU hotplug.

* SEV (no S3):

Hotplug doesn&apos;t work. I think it&apos;s because SMBASE relocation goes wrong: the SMRAM Save State Map is a communication area between the guest and QEMU. And while I did write a patch to keep the area decrypted &quot;in advance&quot;, that doesn&apos;t work: I intentionally wrote the initial SMI handler for the hot-added CPUs in (big) real mode (no mode switches for simplicity&apos;s sake). When the guest writes to memory, what ends up in physical RAM is controlled by the guest-virt -&gt; guest-phys *mapping* through which the write occurs. There is no paging in real mode however, so the update to the SMBASE field in the save state map is bound to place encrypted data in phys RAM, for QEMU to read. I guess this can be avoided if the SMI handler in question switches to 64-bit mode first, establishes a &quot;plaintext&quot; mapping for the SMBASE field, and writes the new value through that.

The symptom is that the first hotplug &quot;seems&quot; to work fine, but then, once the new CPU would have to execute the PiSmmCpuDxeSmm-provided SMI handler at the *next* SMI (i.e. the handler *to which* the initial relocation occurred), things fall apart.

I guess this is going to be another wart to fix up later. Writing the SMI handler and the Post-SMM Pen for hot-added CPUs is by far the most difficult part of this work, which is why I absolutely wanted to keep it simple (and to stick in real mode). But maybe we can work from here later, incrementally. (Also this suggests separate SMI handlers would be necessary for IA32 and X64, with IA32 having no chance at working with SEV, as usual -- I&apos;ve been glad that I could manage with a single set of NASM sources, because real mode worked just fine under both qemu-system-i386 and -x86_64.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11387</commentid>
    <comment_count>15</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-21 07:51:18 +0000</bug_when>
    <thetext>(
In theory, there are four dimensions with 2 values in each (16 cases to test):
- hotplug / hot-unplug
- SEV enabled / SEV disabled
- normal boot only / S3 resume
- SMM required / no SMM
)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11407</commentid>
    <comment_count>16</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-23 12:28:50 +0000</bug_when>
    <thetext>Posted

[edk2-devel] [PATCH 00/16] OvmfPkg: support VCPU hotplug with -D SMM_REQUIRE
https://edk2.groups.io/g/devel/message/54734
http://mid.mail-archive.com/20200223172537.28464-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11445</commentid>
    <comment_count>17</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-02-26 17:13:21 +0000</bug_when>
    <thetext>Posted

* [edk2-devel] [PATCH v2 00/16]
  OvmfPkg: support VCPU hotplug with -D SMM_REQUIRE

http://mid.mail-archive.com/20200226221156.29589-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/54945</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11528</commentid>
    <comment_count>18</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2020-03-04 07:32:59 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #17)
&gt; Posted
&gt; 
&gt; * [edk2-devel] [PATCH v2 00/16]
&gt;   OvmfPkg: support VCPU hotplug with -D SMM_REQUIRE
&gt; 
&gt; http://mid.mail-archive.com/20200226221156.29589-1-lersek@redhat.com
&gt; https://edk2.groups.io/g/devel/message/54945

Merged as commit range 61d3b2d4279e..1158fc8e2c7b, via &lt;https://github.com/tianocore/edk2/pull/416/&gt;.

As stated earlier, this series does not contain SEV support, or hot-unplug support. I think I&apos;ll suggest separate BZs for those features.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1852</bug_id>
          
          <creation_ts>2019-05-28 10:12:43 +0000</creation_ts>
          <short_desc>Support Capsule On Disk</short_desc>
          <delta_ts>2019-06-28 00:38:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>wei6.xu</reporter>
          <assigned_to>wei6.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7824</commentid>
    <comment_count>0</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-05-28 10:12:43 +0000</bug_when>
    <thetext>Normally capsule image is delivered to BIOS thru persistent memory across system reset, but not all platforms support or function well across memory persistent reset.
Capsule On Disk is to deliver capsules via files on Mass Storage device.

For security reasons, depends on whether platform supports Capsule-In-Ram, Capsule On Disk feature is composed of 2 solutions:
Solution A): Load capsules out of TCB, rely on UpdateCapsule() runtime service to deliver Capsule-On-Disk.
Solution B): Relocate capsules into root directory on one EFI system partition, leverage existing storage stack in PEI to load all capsule on disk images and create capsule hobs for the capsules. This solution has bigger TCB but can work without Capsule-In-RAM support.

This feature was staged on the edk2-staging UEFI_CapsuleOnDisk branch:
https://github.com/tianocore/edk2-staging/tree/UEFI_CapsuleOnDisk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7881</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 21:00:41 +0000</bug_when>
    <thetext>wei6 will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8196</commentid>
    <comment_count>2</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-06-26 03:30:14 +0000</bug_when>
    <thetext>The feature is committed at:
https://github.com/tianocore/edk2/commit/1103ba946aee850686a23de2d5bf557a73a9d5a5
https://github.com/tianocore/edk2/commit/43311062a148666f9f8090dc134ae55197f8e41c
https://github.com/tianocore/edk2/commit/4ef0b0ac8e89633b8ad0475fa153c97a1dbe5905
https://github.com/tianocore/edk2/commit/e761d18f012421bf7d82da509483c2390798355b
https://github.com/tianocore/edk2/commit/28889a78988f5bcc016f1e1857837779a6e04eca
https://github.com/tianocore/edk2/commit/c1227348e3722be4862fea03e01ed9ee8a01d081</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8268</commentid>
    <comment_count>3</comment_count>
    <who name="">wei6.xu</who>
    <bug_when>2019-06-28 00:38:13 +0000</bug_when>
    <thetext>Add a bug fix to handle memory allocation failure case:
https://github.com/tianocore/edk2/commit/fda8482df707dd4f3880e5060979f8df86b86e12</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1311</bug_id>
          
          <creation_ts>2018-11-07 22:19:20 +0000</creation_ts>
          <short_desc>Mixed scope specifiers cause incorrect feature sorting result at PACKAGE/CORE level.</short_desc>
          <delta_ts>2018-11-11 21:15:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shao, Ming">ming.shao</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5536</commentid>
    <comment_count>0</comment_count>
    <who name="Shao, Ming">ming.shao</who>
    <bug_when>2018-11-07 22:19:20 +0000</bug_when>
    <thetext>Case 1:

[Input:]

	//1111
	Status = RegisterCpuFeature(
		&quot;DummyFeature1&quot;,
		DummyGetConfigData,
		NULL,
		DummyInitialize1,
		CPU_FEATURE_AESNI,
		CPU_FEATURE_END
	);

	//2222
	Status = RegisterCpuFeature(
		&quot;DummyFeature2&quot;,
		DummyGetConfigData,
		NULL,
		DummyInitialize2,
		CPU_FEATURE_ACPI,
		CPU_FEATURE_CORE_AFTER | CPU_FEATURE_AESNI,//core 1111 &gt; 2222
		CPU_FEATURE_END
	);

	//3333
	Status = RegisterCpuFeature(
		&quot;DummyFeature3&quot;,
		DummyGetConfigData,
		NULL,
		DummyInitialize3,
		CPU_FEATURE_MWAIT,
		CPU_FEATURE_PACKAGE_AFTER | CPU_FEATURE_AESNI,   //pkg 3333 &lt; 1111
		CPU_FEATURE_END
	);

[Expect:]

- package level: 1111 &gt; 3333  ( &quot;&gt;&quot; means precede)
- core level: 1111 &gt; 2222

[Actual:]

--- PACKAGE level output ---

	[TID = 1716731471600] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731472768] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731471600] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731472768] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731471600] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 1716731472768] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333 &lt;========= HERE, 3333 shouldn&apos;t precede 1111.
	[TID = 1716731474656] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731472048] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731474656] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731472048] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731474656] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 1716731472048] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 1716731476544] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731478432] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731478960] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731478960] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731478432] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731478960] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 1716731478432] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 1716731473936] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 1716731473936] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731476544] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 1716731473936] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 1716731476544] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333

-------------------------------------------------------------------------------

Case 2:

[Input:]

	//1111
	Status = RegisterCpuFeature(
		&quot;DummyFeature1&quot;,
		DummyGetConfigData,
		NULL,
		DummyInitialize1,
		CPU_FEATURE_AESNI,
		CPU_FEATURE_END
	);

	//2222
	Status = RegisterCpuFeature(
		&quot;DummyFeature2&quot;,
		DummyGetConfigData,
		NULL,
		DummyInitialize2,
		CPU_FEATURE_ACPI,
		CPU_FEATURE_CORE_BEFORE | CPU_FEATURE_AESNI,//core 2222 &gt; 1111
		CPU_FEATURE_END
	);

	//3333
	Status = RegisterCpuFeature(
		&quot;DummyFeature3&quot;,
		DummyGetConfigData,
		NULL,
		DummyInitialize3,
		CPU_FEATURE_MWAIT,
		CPU_FEATURE_PACKAGE_AFTER | CPU_FEATURE_AESNI, //pkg  1111 &gt; 3333
		CPU_FEATURE_END
	);

[Expect:]

- core level: 2222 &gt; 1111
- pkg level:  1111 &gt; 3333


[Actual:]

--- CORE level output ---


	[TID = 2569975064304] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 2569975065472] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 2569975065472] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 2569975064304] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 2569975064304] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 2569975065472] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333

	[TID = 2569975066640] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 2569975067808] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 2569975067808] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 2569975066640] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 2569975066640] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 2569975067808] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333

	[TID = 2569975070144] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 2569975070144] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111 &lt;====== HERE, 1111 shouldn&apos;t precede 2222.
	[TID = 2569975068976] MockAsmMsrBitFieldWrite64 Index = 2, Value = 2222
	[TID = 2569975068976] MockAsmMsrBitFieldWrite64 Index = 1, Value = 1111
	[TID = 2569975068976] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333
	[TID = 2569975070144] MockAsmMsrBitFieldWrite64 Index = 3, Value = 3333</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5538</commentid>
    <comment_count>1</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-11-08 00:34:57 +0000</bug_when>
    <thetext>Confirmed this is an issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5562</commentid>
    <comment_count>2</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2018-11-11 21:15:32 +0000</bug_when>
    <thetext>SHA-1: 91ff5bba02b2ba58d016c0503ecdd532b2e4be90

* UefiCpuPkg/RegisterCpuFeaturesLib: Separate semaphore container.

In current implementation, core and package level sync uses same semaphores.
Sharing the semaphore may cause wrong execution order.
For example:
1. Feature A has CPU_FEATURE_CORE_BEFORE dependency with Feature B.
2. Feature C has CPU_FEATURE_PACKAGE_AFTER dependency with Feature B.
The expected feature initialization order is A B C:
A ---- (Core Depends) ----&gt; B ---- (Package Depends) ----&gt; C

For a CPU has 1 package, 2 cores and 4 threads. The feature initialization
order may like below:

   Thread#1             Thread#2       Thread#3         Thread#4
   [A.Init]             [A.Init]                        [A.Init]
Release(S1, S2)        Release(S1, S2)                Release(S3, S4)
Wait(S1) * 2           Wait(S2) * 2  &lt;------------------------------- Core sync

   [B.Init]             [B.Init]
Release (S1,S2,S3,S4)
Wait (S1) * 4  &lt;----------------------------------------------------- Package sync
                                                      Wait(S4 * 2) &lt;- Core sync
                                                        [B.Init]

In above case, for thread#4, when it syncs in core level, Wait(S4) * 2 isn&apos;t
blocked and [B.Init] runs. But [A.Init] hasn&apos;t run in thread#3. It&apos;s wrong!
Thread#4 should execute [B.Init] after thread#3 executes [A.Init] because B
core level depends on A.

The reason of the wrong execution order is that S4 is released in thread#1
by calling Release (S1, S2, S3, S4) and in thread #4 by calling
Release (S3, S4).

To fix this issue, core level sync and package level sync should use separate
semaphores.

In above example, the S4 released in Release (S1, S2, S3, S4) should not be the
same semaphore as that in Release (S3, S4).

Related BZ: https://bugzilla.tianocore.org/show_bug.cgi?id=1311

Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;
Cc: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ruiyu Ni &lt;ruiyu.ni@intel.com&gt;
Acked-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1964</bug_id>
          
          <creation_ts>2019-07-05 14:52:50 +0000</creation_ts>
          <short_desc>TypeFileByHandle underflows buffer if 1st char is \r or \n</short_desc>
          <delta_ts>2019-07-22 03:00:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8378</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-07-05 14:52:50 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/blob/master/ShellPkg/Library/UefiShellLevel3CommandsLib/Type.c#L81

for (LoopVar = 0 ; LoopVar &lt; LoopSize ; LoopVar++) {
...
        if (AsciiChar == &apos;\r&apos; || AsciiChar == &apos;\n&apos;) {
          //
          // Allow Line Feed (LF) (0xA) &amp; Carriage Return (CR) (0xD)
          // characters to be displayed as is.
          //
          if (AsciiChar == &apos;\n&apos; &amp;&amp; ((CHAR8*)Buffer)[LoopVar-1] != &apos;\r&apos;) {


Buffer underflows if LoopVar == 0.

The code should also check for LoopVar &gt; 0.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8418</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:27:11 +0000</bug_when>
    <thetext>Bug Triage: assign to Zhichao. Please work with Andrew on this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8533</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-07-22 03:00:05 +0000</bug_when>
    <thetext>fixed at ef2360569d008c440c64d2afd77977861ed0a8df.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1038</bug_id>
          
          <creation_ts>2018-07-18 22:39:50 +0000</creation_ts>
          <short_desc>Redundant Protocol is defined in Tcg2Dxe module INF</short_desc>
          <delta_ts>2019-05-17 15:54:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1065</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="chao">chao.b.zhang</assigned_to>
          <cc>chen.a.chen</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>shala.arshi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>SecurityPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4331</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-18 22:39:50 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant Protocol, which is gEfiAcpiTableProtocolGuid, defined in Tcg2Dxe module INF file. Need to remove it.


Below is the fix reference:
--- a/SecurityPkg/Tcg/Tcg2Dxe/Tcg2Dxe.inf
+++ b/SecurityPkg/Tcg/Tcg2Dxe/Tcg2Dxe.inf
@@ -92,7 +92,6 @@
 [Protocols]
   gEfiTcg2ProtocolGuid                               ## PRODUCES
   gEfiTcg2FinalEventsTableGuid                       ## PRODUCES
-  gEfiAcpiTableProtocolGuid                          ## NOTIFY
   gEfiMpServiceProtocolGuid                          ## SOMETIMES_CONSUMES
   gEfiVariableWriteArchProtocolGuid                  ## NOTIFY
   gEfiResetNotificationProtocolGuid                  ## CONSUMES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4356</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-19 20:51:49 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner to clean up</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5809</commentid>
    <comment_count>2</comment_count>
    <who name="ChenChen">chen.a.chen</who>
    <bug_when>2018-12-10 03:10:42 +0000</bug_when>
    <thetext>This issue included by 1065 and already fix.

*** This bug has been marked as a duplicate of bug 1065 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7620</commentid>
    <comment_count>3</comment_count>
      <attachid>327</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:09:22 +0000</bug_when>
    <thetext>Created attachment 327
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7624</commentid>
    <comment_count>4</comment_count>
      <attachid>327</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:10:14 +0000</bug_when>
    <thetext>Comment on attachment 327
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7625</commentid>
    <comment_count>5</comment_count>
      <attachid>327</attachid>
    <who name="">shala.arshi</who>
    <bug_when>2019-05-17 13:10:22 +0000</bug_when>
    <thetext>Comment on attachment 327
data

comment</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7680</commentid>
    <comment_count>6</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-17 15:54:37 +0000</bug_when>
    <thetext>change back to chao.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>327</attachid>
            <date>2019-05-17 13:09:22 +0000</date>
            <delta_ts>2019-05-17 13:10:22 +0000</delta_ts>
            <desc>data</desc>
            <filename>John</filename>
            <type>text/plain</type>
            <size>4</size>
            <attacher>shala.arshi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1146</bug_id>
          
          <creation_ts>2018-09-05 01:18:43 +0000</creation_ts>
          <short_desc>Need to update the help information of ACPIVIEW</short_desc>
          <delta_ts>2019-03-21 23:12:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wenyi.Jiang">wenyi.jiang</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>evan.lloyd</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4851</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-09-05 01:18:43 +0000</bug_when>
    <thetext>+++++ lihaiyax 8/16/2018 10:19:32 PM

1.Boot to shell and run command &quot;acpiview -?&quot;
2.Not all signature types listed would be installed, such as DBG2/GTDT/IORT/SRAT. It is better to add description to this.
3.Help information list the following table type:
       APIC  - Multiple APIC Description Table (MADT)
       BGRT  - Boot Graphics Resource Table
       DBG2  - Debug Port Table 2
       FACP  - Fixed ACPI Description Table (FADT)
       GTDT  - Generic Timer Description Table
       IORT  - IO Remapping Table
       MCFG  - Memory Mapped Config Space Base Address Description Table
       RSDP  - Root System Description Pointer
       SLIT  - System Locality Information Table
       SPCR  - Serial Port Console Redirection Table
       SRAT  - System Resource Affinity Table
       XSDT  - Extended System Description Table</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4866</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-06 02:46:57 +0000</bug_when>
    <thetext>*** Bug 1151 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5165</commentid>
    <comment_count>2</comment_count>
    <who name="Evan Lloyd">evan.lloyd</who>
    <bug_when>2018-10-01 10:07:50 +0000</bug_when>
    <thetext>I&apos;m not certain that I follow what is actually seen as a problem here, nor what solution is expected.
The help explicitly states (several times) that it reports &quot;installed&quot; tables.

The list quoted under 3. explicitly identifies those tables for which &quot;formatted display and checking is provided&quot;;  i.e. those tables for which code is installed to display details should they happen to be present.  That list does not depend on what is actually installed, only on the code present.

The best guess I can make is that you want some processor specific condition to remove from the list any table type not used for the processor type.  Is that it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5216</commentid>
    <comment_count>3</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-10-11 02:32:22 +0000</bug_when>
    <thetext>If more explanation be added into help to describe that the table type installed in shell is not match with the type in the help list, user may be more clearly understand two things:
1.Types which is not on the list may be installed into shell.
2.Types on the list is not 100 percent installed into shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5801</commentid>
    <comment_count>4</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-12-09 21:23:37 +0000</bug_when>
    <thetext>Not all listed types would be installed to the current UEFI Internal Shell.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6443</commentid>
    <comment_count>5</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 01:59:47 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to zhichao.  Please discuss with ShellPkg owner and Submitter (xuemin.yuan@intel.com) to resolve it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6873</commentid>
    <comment_count>6</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-03-21 23:12:04 +0000</bug_when>
    <thetext>Finished at:
https://github.com/tianocore/edk2/commit/b2a0a4ffd4d601c2ceac74fc6c0921522fd653f7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1983</bug_id>
          
          <creation_ts>2019-07-17 05:54:48 +0000</creation_ts>
          <short_desc>Two libraries are using the same FILE_GUID.</short_desc>
          <delta_ts>2019-08-08 13:58:16 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>MinPlatformPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>amy.chan</reporter>
          <assigned_to name="Michael Kubacki">michael.a.kubacki</assigned_to>
          <cc>michael.a.kubacki</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8468</commentid>
    <comment_count>0</comment_count>
    <who name="">amy.chan</who>
    <bug_when>2019-07-17 05:54:48 +0000</bug_when>
    <thetext>The following libraries using the same FILE_GUID.
 
edk2-platforms \Platform\Intel\MinPlatformPkg\Library\PeiLib\PeiLib.inf
edk2-platforms\Platform\Intel\MinPlatformPkg\Test\Library\TestPointCheckLibNull\TestPointCheckLibNull.inf
 
FILE_GUID = 657A478B-16B9-4B6D-9C41-BEF86197BDF4

Please help to correct it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8586</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:33:43 +0000</bug_when>
    <thetext>Bug Triage: Since Kubacki is on vacation, please have a look at this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8775</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-02 13:11:09 +0000</bug_when>
    <thetext>I&apos;m back from vacation - I&apos;ll take ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8802</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-06 16:34:59 +0000</bug_when>
    <thetext>Code sent to mailing list - https://edk2.groups.io/g/devel/message/44957</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8867</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-08-08 13:58:16 +0000</bug_when>
    <thetext>Fixed in commit 7598e5078f27298477fee4e71420404721ea9fa7

https://github.com/tianocore/edk2-platforms/commit/7598e5078f27298477fee4e71420404721ea9fa7</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1055</bug_id>
          
          <creation_ts>2018-07-25 05:05:49 +0000</creation_ts>
          <short_desc>Redundant info is defined in SmiHandlerProfileInfo module INF</short_desc>
          <delta_ts>2018-09-13 02:14:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4398</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 05:05:49 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant library class, which is PeCoffGetEntryPointLib, defined in SmiHandlerProfileInfo module INF file. Need to remove them.


Below is the fix reference:
--- a/MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.inf
+++ b/MdeModulePkg/Application/SmiHandlerProfileInfo/SmiHandlerProfileInfo.inf
@@ -42,7 +42,6 @@
   UefiLib
   PrintLib
   DevicePathLib
-  PeCoffGetEntryPointLib
   DxeServicesLib

 [Protocols]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4426</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:33 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4940</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:14:27 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1887</bug_id>
          
          <creation_ts>2019-06-07 17:09:21 +0000</creation_ts>
          <short_desc>Cannot build Sct using the latest master edk2 tree</short_desc>
          <delta_ts>2019-08-20 11:22:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vladimir Olovyannikov">vladimir.olovyannikov</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>ashishsingha</cc>
    
    <cc>eric.jin</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>supreeth.venkatesh</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7953</commentid>
    <comment_count>0</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2019-06-07 17:09:21 +0000</bug_when>
    <thetext>Since EdkCompatibilityPkg was removed from the master edk2 tree, I can no longer build Sct:

~/uefi$ ./SctPkg/build.sh AARCH64 GCC
In file included from /home/volovyan/work/stingray/uefi/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasLib/EntsLib.c:27:0:
/home/volovyan/work/stingray/uefi/SctPkg/Include/Library/EntsLib.h:72:46: fatal error: Guid/SalSystemTable.h: No such file or directory
GNUmakefile:330: recipe for target &apos;/home/volovyan/work/stingray/uefi/Build/UefiSct/DEBUG_GCC49/AARCH64/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasDispatcher/Eas/OUTPUT/Core/Eas.obj&apos; failed
Building ... /home/volovyan/work/stingray/uefi/MdePkg/Library/BaseLib/BaseLib.inf [AARCH64]
GNUmakefile:400: recipe for target &apos;/home/volovyan/work/stingray/uefi/Build/UefiSct/DEBUG_GCC49/AARCH64/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasLib/EntsLib/OUTPUT/EntsLib.obj&apos; failed
make: *** [/home/volovyan/work/stingray/uefi/Build/UefiSct/DEBUG_GCC49/AARCH64/SctPkg/TestInfrastructure/SCT/Framework/ENTS/EasDispatcher/Eas/OUTPUT/Core/Eas.obj] Error 1
 #include EFI_GUID_DEFINITION (SalSystemTable)

Sorry if it is a known issue - I cannot find any bug report on it.

Thank you,
Vladimir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8027</commentid>
    <comment_count>1</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-06-12 15:29:52 +0000</bug_when>
    <thetext>*** Bug 1899 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8049</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 20:28:26 +0000</bug_when>
    <thetext>Vladimir, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8064</commentid>
    <comment_count>3</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-13 23:24:10 +0000</bug_when>
    <thetext>Venkatesh please work on it, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8067</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-06-14 03:29:30 +0000</bug_when>
    <thetext>The build failure has been fixed, and validated on the edk2-stable201905.
Please try the build with edk2-test commit -  3d46aaa2630cd1f5c6a502f967d6a07ac1c1868f. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9074</commentid>
    <comment_count>5</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-19 21:35:16 +0000</bug_when>
    <thetext>I would like to close this ticket next week if no objection is received.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9096</commentid>
    <comment_count>6</comment_count>
    <who name="Vladimir Olovyannikov">vladimir.olovyannikov</who>
    <bug_when>2019-08-20 11:22:57 +0000</bug_when>
    <thetext>It builds now. Thanks.

Vladimir</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1354</bug_id>
          
          <creation_ts>2018-11-22 05:39:33 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Universal/Acpi/AcpiS3SaveDxe</short_desc>
          <delta_ts>2019-07-03 01:52:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-08-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5689</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-22 05:39:33 +0000</bug_when>
    <thetext>This driver is no longer be used for S3 resume because the recommended way to save S3 context is to use LockBox instead of UEFI variable due to security concern.

The new way of S3 boot support is as below:

====Normal boot path
	1. MRC cuts out 1 page from SMRAM, marked it as ALLOCATED in GUIDed HOB
	2. MRC creates a gEfiAcpiVariableGuid HOB, saves the ALLOCATED 1 page location.
	3. Silicon module SmmAccessPei/Dxe consumes the GUIDed HOB, reports the SMRAM range for SmmIpl to use
	
	4. UefiCpuPkg/PiSmmCpuDxeSmm driver puts SMM_S3_RESUME_STATE  in the 1 SMRAM page for S3 usage.
	
	SMM_S3_RESUME_STATE  
	  UINT64                Signature;
	  EFI_PHYSICAL_ADDRESS  SmmS3ResumeEntryPoint; --&gt; PiSmmCpuDxeSmm::SmmRestoreCpu()
	  EFI_PHYSICAL_ADDRESS  SmmS3StackBase; --&gt; 32KB SMRAM for stack
	  UINT64                SmmS3StackSize;
	  UINT64                SmmS3Cr0;
	  UINT64                SmmS3Cr3;
	  UINT64                SmmS3Cr4;
	-------------------------------------------------------------- 
	// Above and Smst are initialized by PiSmmCpuDxeSmm::InitSmmS3ResumeState()
	// Below except Smst are initialized by S3Resume2Pei::S3RestoreConfig2()
	  UINT16                ReturnCs;
	  EFI_PHYSICAL_ADDRESS  ReturnEntryPoint; --&gt; S3Resume2Pei::S3ResumeExecuteBootScript()
	  EFI_PHYSICAL_ADDRESS  ReturnContext1; --&gt; AcpiS3Context
	  EFI_PHYSICAL_ADDRESS  ReturnContext2; --&gt; EfiBootScriptExecutorVariable
	  EFI_PHYSICAL_ADDRESS  ReturnStackPointer;
	  EFI_PHYSICAL_ADDRESS  Smst; --&gt; SMST
	
	
	5. MdeModulePkg/Universal/Acpi/S3SaveStateDxe allocates reserved memory to hold ACPI_S3_CONTEXT.
	Memory address saves to gEfiAcpiVariableGuid lockbox; Memory content saves to gEfiAcpiS3ContextGuid lockbox.
	ACPI_S3_CONTEXT
	  EFI_PHYSICAL_ADDRESS  AcpiFacsTable;  --&gt; Point to ACPI table FACS
	  EFI_PHYSICAL_ADDRESS  IdtrProfile; --&gt; reserved 0-filled memory as IDT storage
	  EFI_PHYSICAL_ADDRESS  S3NvsPageTableAddress; --&gt; reserved 0-filled memory as page table storage
	  EFI_PHYSICAL_ADDRESS  BootScriptStackBase; --&gt; reserved 0-filled memory as stack storage
	  UINT64                BootScriptStackSize;
	  EFI_PHYSICAL_ADDRESS  S3DebugBufferAddress; --&gt; reserved 1-filled memory as INT3 handler storage. may contains INT3 handler. Q: provided by whom?
	
	6. MdeModulePkg/Universal/Acpi/BootScriptExecutorDxe allocates reserved memory to hold BOOT_SCRIPT_EXECUTOR_VARIABLE.
	Memory address saves to gEfiBootScriptExecutorVariableGuid lockbox; Memory content saves to gEfiBootScriptExecutorContextGuid lockbox.
	BOOT_SCRIPT_EXECUTOR_VARIABLE
	  EFI_PHYSICAL_ADDRESS  BootScriptExecutorEntrypoint; --&gt; BootScriptExecutorDxe::S3BootScriptExecutorEntryFunction()
	
====S3 Boot path
	7. [32]UefiCpuPkg/Universal/Acpi/S3Resume2Pei::S3RestoreConfig2()
		a. Restores ACPI_S3_CONTEXT and BOOT_SCRIPT_EXECUTOR_VARIABLE from lockbox
		b. Create page table in ACPI_S3_CONTEXT::S3NvsPageTableAddress
	8. [64]EnablePaging64/SwitchStack to SMM_S3_RESUME_STATE::SmmS3ResumeEntryPoint = PiSmmCpuDxeSmm::SmmRestoreCpu() (Returning address in SMM_S3_RESUME_STATE::ReturnEntryPoint = S3Resume2Pei::S3ResumeExecuteBootScript())
		a. Pre-initialize CPU features
		b. SMM rebase
		c. Initialize CPU features
	9. [32]DisablePaging64/SwitchStack to S3Resume2Pei::S3ResumeExecuteBootScript()
		a. Send SMI to all CPUs for initialization (??)
		b. Close &amp; Lock SMRAM
		c. Install S3SmmInitDone PPI
		d. Signal S3SmmInitDone to SMM
	10. [64]EnablePaging64/SwitchStack to BOOT_SCRIPT_EXECUTOR_VARIABLE::BootScriptExecutorEntrypoint = BootScriptExecutorDxe::S3BootScriptExecutorEntryFunction() (Returnning address in PEI_S3_RESUME_STATE::ReturnEntryPoint = S3Resume2Pei::S3ResumeBootOs())
		a. Set up IDT through InitializeCpuExceptionHandlers()
		b. Execute Boot Script
	11. [32]DisablePaging64/SwitchStack to S3Resume2Pei::S3ResumeBootOs()
		a. Launch waking vector</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6419</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 00:02:17 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7399</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-07 19:53:38 +0000</bug_when>
    <thetext>Per edk2-stable201908 planning to update the deadline info.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8357</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:52:12 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1795</bug_id>
          
          <creation_ts>2019-05-09 23:29:22 +0000</creation_ts>
          <short_desc>ECC reports 16 errors on version a642e2</short_desc>
          <delta_ts>2020-01-09 23:59:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>dandan.bi</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>haiyanx.a.li</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>nobody</cc>
    
    <cc>shenglei.zhang</cc>
    
    <cc>xuemin.yuan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7485</commentid>
    <comment_count>0</comment_count>
      <attachid>319</attachid>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-05-09 23:29:22 +0000</bug_when>
    <thetext>Created attachment 319
ECC report

ECC reports the following error codes in the file \MdeModulePkg\Application\DumpDynPcd\DumpDynPcd.c:
5001: Return type of a function should exist and in the first line;
5002: Any optional functional modifiers should exist and next to the return type;

More details please refer to the attachment.

SHA-1: a642e2b42ed565645fa34e882ef4de3bfff67ef8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7486</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-05-10 01:03:02 +0000</bug_when>
    <thetext>(In reply to haiyan.li from comment #0)
&gt; Created attachment 319 [details]
&gt; ECC report
&gt; 
&gt; ECC reports the following error codes in the file
&gt; \MdeModulePkg\Application\DumpDynPcd\DumpDynPcd.c:
&gt; 5001: Return type of a function should exist and in the first line;
&gt; 5002: Any optional functional modifiers should exist and next to the return
&gt; type;
&gt; 
&gt; More details please refer to the attachment.
&gt; 
&gt; SHA-1: a642e2b42ed565645fa34e882ef4de3bfff67ef8

These reports will be gone after the resolve of the below BZ:
https://bugzilla.tianocore.org/show_bug.cgi?id=1778</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7590</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:21:48 +0000</bug_when>
    <thetext>Bob, please help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10811</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2020-01-08 20:32:07 +0000</bug_when>
    <thetext>Zhiju will take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10840</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2020-01-09 23:59:12 +0000</bug_when>
    <thetext>fixed it in d6f5a5050b942cc0ec08bdc39900b8231957e18c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>319</attachid>
            <date>2019-05-09 23:29:22 +0000</date>
            <delta_ts>2019-05-09 23:29:22 +0000</delta_ts>
            <desc>ECC report</desc>
            <filename>ecc.csv</filename>
            <type>application/vnd.ms-excel</type>
            <size>2868</size>
            <attacher name="haiyan.li">haiyanx.a.li</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1257</bug_id>
          
          <creation_ts>2018-10-16 10:43:32 +0000</creation_ts>
          <short_desc>Remove the step to freeze python tool as windows exe</short_desc>
          <delta_ts>2018-10-18 20:48:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5284</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-16 10:43:32 +0000</bug_when>
    <thetext>Edk2 BaseTools Python Tools don&apos;t support to be freeze and work. To reduce confuse, BaseTools Makefile should be updated to remove freeze step.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5285</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-16 10:44:10 +0000</bug_when>
    <thetext>BaseTools Owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5323</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-10-18 20:48:13 +0000</bug_when>
    <thetext>Fix at edk2 7b500c606ad101fad52327318af37889048cd45e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1692</bug_id>
          
          <creation_ts>2019-04-09 18:23:03 +0000</creation_ts>
          <short_desc>BaseTools: Hash false success with back to back builds</short_desc>
          <delta_ts>2019-05-21 09:52:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Rodriguez">christian.rodriguez</reporter>
          <assigned_to name="Christian Rodriguez">christian.rodriguez</assigned_to>
          <cc>bob.c.feng</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7053</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-09 18:23:03 +0000</bug_when>
    <thetext>When performing a build with --hash, the developer can get a successful build when the build should have broke. This happens when re-running the build immediately after the initial build that broke without modifying any files. The problem is that the hashed files are not invalidated when a build breaks and will look like there exists a valid hash on re-build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7054</commentid>
    <comment_count>1</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-09 18:23:54 +0000</bug_when>
    <thetext>Assigned to self.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7065</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-10 11:31:29 +0000</bug_when>
    <thetext>Patch v1 Mailing list link:
https://edk2.groups.io/g/devel/topic/patch_basetools_hash_false/31020180?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,31020180</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7146</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-16 15:35:32 +0000</bug_when>
    <thetext>Commit # 0eccea3fbe2f6d4999d972d9310d4f2717f5100c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7147</commentid>
    <comment_count>4</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-16 15:37:45 +0000</bug_when>
    <thetext>I need to change the hash error handling to invalidate the hashes in GlobalData.gBinCacheDest instead of GlobalData.gBinCacheSource. This will allow us to reuse the cache without having to rebuild good cached hashes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7148</commentid>
    <comment_count>5</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-16 15:44:45 +0000</bug_when>
    <thetext>Additonal Patch Mailing list link:
https://edk2.groups.io/g/devel/message/39189</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7224</commentid>
    <comment_count>6</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-04-22 11:45:18 +0000</bug_when>
    <thetext>Commit2 # 56008eb7f68cd8bf8fec213406e4f3ef16898329</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7718</commentid>
    <comment_count>7</comment_count>
    <who name="Christian Rodriguez">christian.rodriguez</who>
    <bug_when>2019-05-21 09:52:32 +0000</bug_when>
    <thetext>See commit above.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1579</bug_id>
          
          <creation_ts>2019-02-28 16:22:32 +0000</creation_ts>
          <short_desc>[Basetools] Spaces in Python path are not handled</short_desc>
          <delta_ts>2020-03-06 17:16:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6589</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2019-02-28 16:22:32 +0000</bug_when>
    <thetext>In Build.bat, if there are spaces in the Python path, it yields a cryptic error when attempting a build of just &apos;C:\Program &apos; is not a valid file. Adding quotes fixes this issue.

@%PYTHON3% %BASE_TOOLS_PATH%\Source\Python\%ToolName%\%ToolName%.py %*

becomes

@&quot;%PYTHON3%&quot; %BASE_TOOLS_PATH%\Source\Python\%ToolName%\%ToolName%.py %*

If Python is installed via Visual Studio, it is often installed in Program Files.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6590</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-28 19:32:44 +0000</bug_when>
    <thetext>Bob, please help to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6656</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-03-08 05:11:25 +0000</bug_when>
    <thetext>Hi Matthew, 

for the current version of Basetool, the build.bat is like:
@setlocal
@set ToolName=%~n0%
@%PYTHON_COMMAND% %BASE_TOOLS_PATH%\Source\Python\%ToolName%\%ToolName%.py %*

if user installed python3, the %PYTHON_COMMAND% will be set to &quot;py -3&quot; by edksetup.bat.

&quot;py -3&quot; itself can handle the white space. 

I tested that if the python3 is installed in a path that have white space, build works fine.

Thanks,
Bob</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10481</commentid>
    <comment_count>3</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2019-11-19 22:17:19 +0000</bug_when>
    <thetext>we have worked around this issue by checking for spaces and quoting the input . 
 The whole bat file redirect to python is not idea but for now this is an acceptable answer.  You can close this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11597</commentid>
    <comment_count>4</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2020-03-06 17:16:32 +0000</bug_when>
    <thetext>work around implemented.  see comment</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1475</bug_id>
          
          <creation_ts>2019-01-18 21:47:29 +0000</creation_ts>
          <short_desc>Deprecate driver PropertiesTableAttributesDxe in MdeModulePkg</short_desc>
          <delta_ts>2019-02-19 20:21:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-02-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6149</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-01-18 21:47:29 +0000</bug_when>
    <thetext>This functionality of this driver has been deprecated and no platform employs this driver. It can be removed completely.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6195</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-24 19:26:06 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6383</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-02-18 02:48:39 +0000</bug_when>
    <thetext>Chang owner to Zhang, Shenglei</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6407</commentid>
    <comment_count>3</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-02-19 20:21:06 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/a083afa3fe9e6b7c93d41f775bf443fd2ac6cea8</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1374</bug_id>
          
          <creation_ts>2018-12-04 00:52:25 +0000</creation_ts>
          <short_desc>Move MinnowMax and Quark platform to edk2-platforms repo</short_desc>
          <delta_ts>2019-05-21 17:29:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>QuarkPlatformPkg</cf_package>
    
    <cf_package>QuarkSocPkg</cf_package>
    
    <cf_package>Vlv2DeviceRefCodePkg</cf_package>
    
    <cf_package>Vlv2TbltDevicePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5733</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-12-04 00:52:25 +0000</bug_when>
    <thetext>MinnowMax and Quark are both real platforms. Real platform codes should go to edk2-platform repo.
Only virtual platform can be in edk2 repo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5769</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:11:44 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7732</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-21 17:29:28 +0000</bug_when>
    <thetext>Fixed in edk2 commit range 96ef5a8e30a8..83f997e58dca, and in edk2-platforms commit range ffac72862388..94b23488bbda.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1182</bug_id>
          
          <creation_ts>2018-09-17 11:12:16 +0000</creation_ts>
          <short_desc>SdMmcPciHcDxe: SdMmcHcCardDetect called for all types of slots during init</short_desc>
          <delta_ts>2018-09-20 22:54:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marcin Wojtas">mw</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4990</commentid>
    <comment_count>0</comment_count>
    <who name="Marcin Wojtas">mw</who>
    <bug_when>2018-09-17 11:12:16 +0000</bug_when>
    <thetext>Some devices can be non removable (such as eMMC) and checking
Present State Register on host controller may falsely return
an information that device is not present. In SdMmcPciHcEnumerateDevice
SdMmcHcCardDetect is called conditionally, depending on the SlotType field Capability value.

Same should be done in the initialization sequence in SdMmcPciHcDriverBindingStart.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5027</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-20 01:27:20 +0000</bug_when>
    <thetext>
Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5042</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-09-20 22:54:04 +0000</bug_when>
    <thetext>Resolved via the below commit contributed by Marcin Wojtas:
https://github.com/tianocore/edk2/commit/4cd9d7fc6f2ece01a46f2156ba009e83a2951907</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1496</bug_id>
          
          <creation_ts>2019-01-28 23:22:35 +0000</creation_ts>
          <short_desc>Move 8259/8254 components from IntelFrameworkPkg/PcAtChipsetPkg to OvmfPkg</short_desc>
          <delta_ts>2019-06-13 11:02:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1604</blocked>
    
    <blocked>1844</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          <deadline>2019-05-15</deadline>
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>OvmfPkg</cf_package>
    
    <cf_package>PcAtChipsetPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6222</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-28 23:22:35 +0000</bug_when>
    <thetext>This can make OvmfPkg stop using 8254/8259 drivers and be independent of framework packages.
But we need to first check whether QEMU emulates HPET HW.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6227</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-29 06:37:38 +0000</bug_when>
    <thetext>Hi Ray,

QEMU has HPET emulation; however, it is optional, and HPET emulation is definitely not enabled in many (most?) domain configurations.

As far as I can see, OVMF currently uses

  PcAtChipsetPkg/8254TimerDxe/8254Timer.inf

because this driver produces &quot;gEfiTimerArchProtocolGuid&quot;. In addition, the driver consumes &quot;gEfiLegacy8259ProtocolGuid&quot;, which is why it depends on the interrupt controller driver

  PcAtChipsetPkg/8259InterruptControllerDxe/8259.inf

If we want to remove these drivers, then we need another (set of) DXE driver(s) that produce(s) &quot;gEfiTimerArchProtocolGuid&quot;, but without a hard dependency on the HPET.

Furthermore, assuming you will move &quot;IntelFrameworkModulePkg/Csm/LegacyBiosDxe&quot; under OvmfPkg, that driver depends on &quot;gEfiLegacy8259ProtocolGuid&quot;, therefore &quot;PcAtChipsetPkg/8259InterruptControllerDxe/8259.inf&quot; should be preserved somewhere.

... The command:

$ git grep -l -e &apos;gEfiTimerArchProtocolGuid&apos; --and -e PRODUCE -- &apos;*inf&apos;

returns the following list of files:

EmulatorPkg/TimerDxe/Timer.inf
Nt32Pkg/TimerDxe/TimerDxe.inf
PcAtChipsetPkg/8254TimerDxe/8254Timer.inf
PcAtChipsetPkg/HpetTimerDxe/HpetTimerDxe.inf

I don&apos;t think we can remove &quot;PcAtChipsetPkg/8254TimerDxe/8254Timer.inf&quot; from OVMF at this point. If you wouldn&apos;t like to maintain 8254TimerDxe under PcAtChipsetPkg any longer, please move the driver under OvmfPkg. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6230</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-01-29 08:42:04 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #1)
&gt; Hi Ray,
&gt; 
&gt; QEMU has HPET emulation; however, it is optional, and HPET emulation is
&gt; definitely not enabled in many (most?) domain configurations.

Sad to know that.
Do you know what prevents the domain configurations from enabling HPET? Or what issue will there be if enabling HPET in QEMU?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6231</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-01-29 12:35:50 +0000</bug_when>
    <thetext>Hi Ray,

I can give you two RHBZs [1] [2] and two virtualization-related commits [3] [4] that recommend disabling HPET. They explain some reasons; what I&apos;ve gathered myself are &quot;unstable behavior&quot;, &quot;lacking irq re-injection when missing ticks&quot;, &quot;not needed&quot;, &quot;performance penalty&quot;.

[1] https://bugzilla.redhat.com/show_bug.cgi?id=947441
[2] https://bugzilla.redhat.com/show_bug.cgi?id=1053847
[3] https://github.com/virt-manager/virt-manager/commit/eede88455462
[4] https://github.com/libguestfs/libguestfs/commit/b6ff6421686e
    (search for &quot;hpet&quot;)

(Note that, while these commits look old, the code they added survives to this day; I tracked them down with &quot;git-blame/git-show&quot;, starting from current code.)


However: the precise reason why QEMU/KVM users have been advised to avoid HPET doesn&apos;t really matter for OVMF. What matters is that QEMU and libvirt users have run their domains without HPET for years; it remains the recommended/default choice when configuring domains. Removing 8254TimerDxe from OVMF would break compatibility with existing practice.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6440</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-20 01:55:04 +0000</bug_when>
    <thetext>Offline Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6684</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-11 03:26:51 +0000</bug_when>
    <thetext>Laszlo, thank you for providing the info.


I will change the tracker title to move Legacy8259.h to PcAtChipsetPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6694</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-12 10:19:48 +0000</bug_when>
    <thetext>Thanks! I&apos;m updating the Package list accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6702</commentid>
    <comment_count>7</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-03-13 03:42:42 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #6)
&gt; Thanks! I&apos;m updating the Package list accordingly.

This is just my own proposal to eliminate the framework deps while still use the 8254 timer. Let&apos;s see community&apos;s feedback when Hao sends out the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6888</commentid>
    <comment_count>8</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-22 04:16:32 +0000</bug_when>
    <thetext>Hello Laszlo,

We found that the Coreboot also supports QEMU and we got feedback from the
maintainers that they need the 8254 timer as well.

Thus, we plan to update the PcAtChipsetPkg\8254TimerDxe driver to:
* Drop its dependency on the Legacy8259 protocol
* Add logic to initialize/program the 8259 PIC for the timer interrupt

By doing so, we can then remove the Legacy8259 protocol and the
PcAtChipsetPkg\8259InterruptControllerDxe driver.

What do you think of the proposed approach? If you think it is reasonable,
I will update this BZ tracker to reflect the latest information.

(In case that you might be interested, a draft patch is available at:
https://github.com/hwu25/edk2/tree/8254Timer_Update)

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6889</commentid>
    <comment_count>9</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-22 05:14:57 +0000</bug_when>
    <thetext>Hi Hao,

do you mean that logic would be migrated / flattened from 8259InterruptControllerDxe into 8254TimerDxe?

Let me see what else consumes gEfiLegacy8259ProtocolGuid... it seems that &quot;IntelFrameworkModulePkg/Csm/LegacyBiosDxe/LegacyBiosDxe.inf&quot; has a DEPEX on it, and &quot;IntelFrameworkModulePkg/Csm/LegacyBiosDxe/LegacyBios.c&quot; actually consumes the protocol.

Therefore I think this discussion ties in with the CSM removal (or relocation). My last info on the CSM &quot;consolidation&quot; was that David Woodhouse would like to keep the CSM, and (IIRC) he&apos;d be willing to maintain the CSM modules if we moved those modules under OvmfPkg.

In turn, if we do move the CSM modules under OvmfPkg, then 8259InterruptControllerDxe could be moved too, and then 8254TimerDxe would need no update.

... At this point it looks like we should just create a new LegacyPkg directory, move some stuff there, and divide up the maintainership between David, OvmfPkg maintainers, and coreboot package maintainers...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6904</commentid>
    <comment_count>10</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-25 01:59:41 +0000</bug_when>
    <thetext>Hello Laszlo,

(In reply to Laszlo Ersek from comment #9)
&gt; Hi Hao,
&gt; 
&gt; do you mean that logic would be migrated / flattened from
&gt; 8259InterruptControllerDxe into 8254TimerDxe?

Yes. The 8259 initialization/program (minimal for 8254 Timer to work properly) logic will be added into 8254TimerDxe.

&gt; 
&gt; Let me see what else consumes gEfiLegacy8259ProtocolGuid... it seems that
&gt; &quot;IntelFrameworkModulePkg/Csm/LegacyBiosDxe/LegacyBiosDxe.inf&quot; has a DEPEX on
&gt; it, and &quot;IntelFrameworkModulePkg/Csm/LegacyBiosDxe/LegacyBios.c&quot; actually
&gt; consumes the protocol.
&gt; 
&gt; Therefore I think this discussion ties in with the CSM removal (or
&gt; relocation). My last info on the CSM &quot;consolidation&quot; was that David
&gt; Woodhouse would like to keep the CSM, and (IIRC) he&apos;d be willing to maintain
&gt; the CSM modules if we moved those modules under OvmfPkg.
&gt; 
&gt; In turn, if we do move the CSM modules under OvmfPkg, then
&gt; 8259InterruptControllerDxe could be moved too, and then 8254TimerDxe would
&gt; need no update.
&gt; 
&gt; ... At this point it looks like we should just create a new LegacyPkg
&gt; directory, move some stuff there, and divide up the maintainership between
&gt; David, OvmfPkg maintainers, and coreboot package maintainers...

Thanks for the above information.

My thought is that we may classify the involved components into 2 genera:

1. CSM specific:
Legacy8259 protocol
8259InterruptControllerDxe driver

2. Not CSM specific, also for UEFI:
8254TimerDxe

Also, it is not expected that more consumers (besides CSM) of 8259 interrupts.

For 1, they will be moved into the Csm folder for the platforms that still
need the CSM support, and ultimately be removed from PcAtChipsetPkg/
IntelFrameworkModulePkg packages. For 2, it will be kept in its origin
place.


Thus, we plan to update the 8254TimerDxe driver to break the link with
Legacy8259 protocol.

If you think this is reasonable, I will go on to confirm with David
Woodhouse to ensure the updated 8254TimerDxe driver works fine when CSM is
enabled on OVMF.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6909</commentid>
    <comment_count>11</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-03-25 06:10:56 +0000</bug_when>
    <thetext>Ah, so you mean that the relevant interrupt controller programming would be duplicated to 8254TimerDxe, to make both drivers independent. I guess that&apos;s fine, as long as the duplication is not large. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6914</commentid>
    <comment_count>12</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-25 20:21:12 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #11)
&gt; Ah, so you mean that the relevant interrupt controller programming would be
&gt; duplicated to 8254TimerDxe, to make both drivers independent. I guess that&apos;s
&gt; fine, as long as the duplication is not large. Thanks.

Yes. Minimal logic to initialize/program of the 8259 PIC will be put into the 8254 timer driver for the IRQ0 setting.

Best Regards,
Hao Wu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6974</commentid>
    <comment_count>13</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-02 04:15:34 +0000</bug_when>
    <thetext>According to the discussion at:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg53139.html

Since the new UefiPayloadPkg (Coreboot packages to be removed) will no longer have dependency on the 8254TimerDxe driver, we have a new direction to move the 8259 and 8254 components into the OvmfPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6986</commentid>
    <comment_count>14</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-03 03:02:17 +0000</bug_when>
    <thetext>RFC V1 series has been proposed at:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg53217.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7056</commentid>
    <comment_count>15</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-09 21:07:32 +0000</bug_when>
    <thetext>V2 series has been proposed at:
https://edk2.groups.io/g/devel/message/38756</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7068</commentid>
    <comment_count>16</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-04-10 21:03:02 +0000</bug_when>
    <thetext>Resolved via commits:

https://github.com/tianocore/edk2/commit/9a86fd33e94142ee2a2989d9285bc92152b5f2f2
https://github.com/tianocore/edk2/commit/10fa47e538290bb22ff5de39bedcce1dd92d488f
https://github.com/tianocore/edk2/commit/460ffed242af83000945f69f75e381426c172ac8
https://github.com/tianocore/edk2/commit/c01852433f377d5b2cb94031a2e9fe2183487766
https://github.com/tianocore/edk2/commit/682888a6d2363f0c8d7dd6be81b2898506e5cef3
https://github.com/tianocore/edk2/commit/1a3ffdff82e66f497ba468ff01a640623bc78bc4
https://github.com/tianocore/edk2/commit/e3c787af8c04d21253a3129d76735865205f1daa
https://github.com/tianocore/edk2/commit/6d70ade90cab28ac7faf51eda02aa429b26f65bc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1924</bug_id>
          
          <creation_ts>2019-06-19 23:44:05 +0000</creation_ts>
          <short_desc>IntelFsp2Pkg: Support non-FSP build to consume FSP PPI.</short_desc>
          <delta_ts>2020-04-29 22:20:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nathaniel.l.desimone</cc>
    
    <cc>qiaonan.liu</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8121</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-06-19 23:44:05 +0000</bug_when>
    <thetext>There is a discussion that some FSP PPI should be consumed by non-FSP build too so maximizing the code sharing:
  /IntelFsp2Pkg/Include/Ppi/FspmArchConfigPpi.h
  gFspmArchConfigPpiGuid                = { 0x824d5a3a, 0xaf92, 0x4c0c, { 0x9f, 0x19, 0x19, 0x52, 0x6d, 0xca, 0x4a, 0xbb } }


  /IntelFsp2Pkg/Include/Ppi/TempRamExitPpi.h
  #
  # PPI to tear down the temporary memory set up by TempRamInit ().
  #
  gFspTempRamExitPpiGuid      = {0xbc1cfbdb, 0x7e50, 0x42be, {0xb4, 0x87, 0x22, 0xe0, 0xa9, 0x0c, 0xb0, 0x52}}


This needs review and discussion on where FSP PPI header files and definition should go.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8125</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-06-20 00:45:05 +0000</bug_when>
    <thetext>Discussion happens in https://edk2.groups.io/g/devel/topic/patch_v2_intelfsp2pkg_add/32090494</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8250</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:28:27 +0000</bug_when>
    <thetext>Chasel, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>11296</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-02-18 22:28:36 +0000</bug_when>
    <thetext>The usage will be below:

FspmArchConfigPpi:
Build modes  | Producer   | Consumer
------------------------------------
EDK2 Native  | Platform   | Silicon
------------------------------------
FSP API      | FSP*       | Silicon
------------------------------------
FSP Dispatch | Bootloader | Silicon
------------------------------------
Note*: FSP in API mode will install this PPI basing on UPD.


TempRamExitPpi:
Build modes  | Producer   | Consumer
--------------------------------------
EDK2 Native  | Silicon    | Platform
--------------------------------------
FSP API      | Silicon    | FSP*
--------------------------------------
FSP Dispatch | Silicon    | Bootloader
--------------------------------------
Note*: FSP in API mode will consume this PPI when TempRamExit API called.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>12357</commentid>
    <comment_count>4</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2020-04-29 22:20:11 +0000</bug_when>
    <thetext>With offline discussion EDKII Native build users are ok to have IntelFsp2Pkg as dependency so we may not need to duplicate those headers.

I think we can close this and if there is concern we can re-open it later.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1396</bug_id>
          
          <creation_ts>2018-12-13 00:17:04 +0000</creation_ts>
          <short_desc>UefiLib GetVariable should return the attributes as well</short_desc>
          <delta_ts>2019-01-31 07:31:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sean Brogan">sean.brogan</reporter>
          <assigned_to name="jiansong.xu">jiansongx.xu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5846</commentid>
    <comment_count>0</comment_count>
    <who name="Sean Brogan">sean.brogan</who>
    <bug_when>2018-12-13 00:17:04 +0000</bug_when>
    <thetext>Function change: https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Include/Library/UefiLib.h#L775

implementation:
https://github.com/Microsoft/mu_basecore/blob/release/201808/MdePkg/Library/UefiLib/UefiLib.c#L1444

Reading variables is one unbounded attack surface on UEFI.  VarCheck is an attempt to help block bad/incorrect variables writes but it is still wise to check the attributes on the read.  To this the helper routine to get variable should support the developer in doing the right thing.  All three existing APIs GetVariable, GetVariable2, and GetEfiGlobalVariable should be deprecated and a new api added that encourages the developer to check the attributes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5877</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-13 19:24:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5965</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-12-28 21:08:56 +0000</bug_when>
    <thetext>Assign it to owner to prepare the patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6253</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-31 07:31:27 +0000</bug_when>
    <thetext>Fix at edk2 37bf678761d4a7dae8875f25d07c290da307b64c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1834</bug_id>
          
          <creation_ts>2019-05-22 05:08:58 +0000</creation_ts>
          <short_desc>Generate Caspule tool to produce UEFI Capsules with multiple payloads and embedded drivers</short_desc>
          <delta_ts>2019-08-29 15:16:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="eric.jin">eric.jin</reporter>
          <assigned_to name="eric.jin">eric.jin</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7747</commentid>
    <comment_count>0</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-05-22 05:08:58 +0000</bug_when>
    <thetext>The UEFI Specification supports UEFI Capsules with multiple payloads and embedded drivers, so the tool need provide this capability. The tool should not require a complex set of command line parameters. Instead, all the options associated with multiple payloads should be provided in a JSON file.

The update is in a backwards compatible manner, so all command line options to support single payloads are still supported.

The usage is listed below.
usage: GenerateCapsule [-h] [-o OUTPUTFILE] (-e | -d | --dump-info)
                       [-j JSONFILE]
                       [--capflag {PersistAcrossReset,InitiateReset}]
                       [--capoemflag CAPSULEOEMFLAG] [--guid GUID]
                       [--hardware-instance HARDWAREINSTANCE]
                       [--monotonic-count MONOTONICCOUNT]
                       [--fw-version FWVERSION] [--lsv LOWESTSUPPORTEDVERSION]
                       [--pfx-file SIGNTOOLPFXFILE]
                       [--signer-private-cert OPENSSLSIGNERPRIVATECERTFILE]
                       [--other-public-cert OPENSSLOTHERPUBLICCERTFILE]
                       [--trusted-public-cert OPENSSLTRUSTEDPUBLICCERTFILE]
                       [--signing-tool-path SIGNINGTOOLPATH]
                       [--update-image-index UPDATEIMAGEINDEX]
                       [--embedded-driver EMBEDDEDDRIVER] [--version] [-v]
                       [-q] [--debug [0-9]]
                       [InputFile]

The new arguments are:
  -j JSONFILE, --json JSONFILE  
                        JSON configuration file for multiple payloads and embedded drivers.
  --update-image-index UPDATEIMAGEINDEX
                        The unique number identifying the firmware image within the driver. The default value is 1.
  --embedded-driver EMBEDDEDDRIVER
                        Path to embedded UEFI driver to add to capsule.  This
option can be repeated to add multiple embedded drivers to a capsule.

The example of input JSON file for an encode operation that provides two embedded drivers and two payloads are listed below.
{
    &quot;EmbeddedDrivers&quot; : [
        {
            &quot;Driver&quot;: &quot;driver1.bin&quot;
        },
        {
            &quot;Driver&quot;: &quot;driver2.bin&quot;
        }
    ],
    &quot;Payloads&quot; : [
        {
            &quot;Guid&quot;: &quot;61AAC5B1-F917-4606-BE36-DA7CB405B9F3&quot;,
            &quot;FwVersion&quot;: &quot;1&quot;,
            &quot;LowestSupportedVersion&quot;: &quot;1&quot;,
            &quot;MonotonicCount&quot;: &quot;3&quot;,
            &quot;HardwareInstance&quot;: &quot;0&quot;,
            &quot;UpdateImageIndex&quot;: &quot;3&quot;,
            &quot;Payload&quot;: &quot;Payload1.bin&quot;,
            &quot;OpenSslSignerPrivateCertFile&quot; : &quot;TestCert.pem&quot;,
            &quot;OpenSslOtherPublicCertFile&quot;   : &quot;TestSub.pub.pem&quot;,
            &quot;OpenSslTrustedPublicCertFile&quot; : &quot;TestRoot.pub.pem&quot;,
            &quot;SigningToolPath&quot; : &quot;C:\OpenSSL&quot;
        },
        {
            &quot;Guid&quot;: &quot;3FF4DCAF-BF70-45CC-BE8E-FCCE4E7BC739&quot;,
            &quot;FwVersion&quot;: &quot;1&quot;,
            &quot;LowestSupportedVersion&quot;: &quot;1&quot;,
            &quot;MonotonicCount&quot;: &quot;2&quot;,
            &quot;HardwareInstance&quot;: &quot;0&quot;,
            &quot;UpdateImageIndex&quot;: &quot;1&quot;,
            &quot;Payload&quot;: &quot;Payload2.bin&quot;,
            &quot;SignToolPfxFile&quot; : &quot;TestCert.pfx&quot;,
            &quot;SigningToolPath&quot; : &quot;C:\SigningTools&quot;
        }
    ]
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7883</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-30 21:02:14 +0000</bug_when>
    <thetext>eric work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9287</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:14:25 +0000</bug_when>
    <thetext>Has this been fixed at commit 104a1aa19bbb (&quot;BaseTools/Capsule: Supports multiple payloads and drivers in capsule&quot;, 2019-06-28)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9337</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 20:35:23 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #2)
&gt; Has this been fixed at commit 104a1aa19bbb (&quot;BaseTools/Capsule: Supports
&gt; multiple payloads and drivers in capsule&quot;, 2019-06-28)?

To clarify, the question is for Eric. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9348</commentid>
    <comment_count>4</comment_count>
    <who name="eric.jin">eric.jin</who>
    <bug_when>2019-08-27 21:05:09 +0000</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; (In reply to Laszlo Ersek from comment #2)
&gt; &gt; Has this been fixed at commit 104a1aa19bbb (&quot;BaseTools/Capsule: Supports
&gt; &gt; multiple payloads and drivers in capsule&quot;, 2019-06-28)?
&gt; 
&gt; To clarify, the question is for Eric. Thanks.

Laszlo,
This has been fixed at 104a1aa19bbb.
Thank you for reminder. I would like to close it. Thanks.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1730</bug_id>
          
          <creation_ts>2019-04-18 05:42:53 +0000</creation_ts>
          <short_desc>ECC report 1 error in IntelFsp2WrapperPkg</short_desc>
          <delta_ts>2019-04-23 21:59:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>VERIFIED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="haiyan.li">haiyanx.a.li</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2WrapperPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7176</commentid>
    <comment_count>0</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-18 05:42:53 +0000</bug_when>
    <thetext>Error Code:9003
Error Message: The first line of text in a comment block should be a brief description of the element being documented and the brief description must end with a period.
File: C:\ECC\Edk2R9\IntelFsp2WrapperPkg\FspsWrapperPeim\FspsWrapperPeim.c
LineNo: 341
Other Message: Comment description should end with period &apos;.&apos; 
SHA-1: 68d47eea422d64eeb9872b927620f579f4ccfc0f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7189</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-18 20:05:46 +0000</bug_when>
    <thetext>package owner to help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7230</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-04-22 22:43:05 +0000</bug_when>
    <thetext>commit 00e3e4801467dd73b90a151994fc26ba9b5734d7 (HEAD -&gt; master, origin/master, origin/HEAD, EccFixFspmw)
Author: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Apr 22 18:05:25 2019 +0800

    IntelFsp2WrapperPkg/FspsWrapperPeim: Fix coding style.

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1730

    Internal code quality check failed after this commit:
    68d47eea422d64eeb9872b927620f579f4ccfc0f, fixed those
    coding style issues.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7231</commentid>
    <comment_count>3</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-04-22 22:43:58 +0000</bug_when>
    <thetext>Fix verified by internal check process and submitted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7243</commentid>
    <comment_count>4</comment_count>
    <who name="haiyan.li">haiyanx.a.li</who>
    <bug_when>2019-04-23 21:59:02 +0000</bug_when>
    <thetext>ECC run pass in in IntelFsp2WrapperPkg</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1111</bug_id>
          
          <creation_ts>2018-08-23 04:43:15 +0000</creation_ts>
          <short_desc>BaseTools:  FDF parser extend &quot;!include&quot;, &quot;!if&quot;, etc to not case-sensitive</short_desc>
          <delta_ts>2018-09-04 21:18:28 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yonghong Zhu">yonghong.zhu</reporter>
          <assigned_to name="Yonghong Zhu">yonghong.zhu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ye.y.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4682</commentid>
    <comment_count>0</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-08-23 04:43:15 +0000</bug_when>
    <thetext>current in the DSC and FDF spec, the &quot;!include&quot;, &quot;!if&quot;, etc, keywords that start with &quot;!&quot; character is case-sensitive, but unfortunately, the BaseTools code to handle it is: in the DSC file those keywords are not case-sensitive, while in the FDF file those keywords are case-sensitive, and we found in some DSC file, some guys already used &quot;!INCLUDE&quot;, &quot;!IF&quot; format.

so I hope to update the DSC and FDF spec to extend the &quot;!include&quot;, &quot;!if&quot; etc to case-insensitive. and also update the FDF parser logic.

This is the code bug to FDF parser, if we plan to do the bug 1110, then we would fix the logic in the FDF parser.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4754</commentid>
    <comment_count>1</comment_count>
    <who name="Chris">ye.y.wu</who>
    <bug_when>2018-08-29 21:05:40 +0000</bug_when>
    <thetext>assign to Yonghong</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4844</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-04 21:08:32 +0000</bug_when>
    <thetext>Patch email: https://lists.01.org/pipermail/edk2-devel/2018-September/029313.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4845</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-04 21:18:28 +0000</bug_when>
    <thetext>commit: https://github.com/tianocore/edk2/commit/865d7f7b0158f3fb4b3fb187aae4b323a705a8ed</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1944</bug_id>
          
          <creation_ts>2019-06-26 22:52:14 +0000</creation_ts>
          <short_desc>Scripts\FormatDosFiles.py  &quot;--exclude&quot; cannot use absolute paths</short_desc>
          <delta_ts>2019-09-26 21:14:54 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>qiaonan.liu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8223</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-06-26 22:52:14 +0000</bug_when>
    <thetext>Its working on all the files, but I can’t seem to get it to exclude the MdeModulePkg directory.&quot;--exclude&quot; cannot use absolute paths

call %PYTHON_HOME%\python C:\AllPkg\edk2\BaseTools\Scripts\FormatDosFiles.py 
 C:\AllPkg\edk2 --debug 9 --exclude C:\AllPkg\edk2\MdeModulePkg</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8237</commentid>
    <comment_count>1</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:07:22 +0000</bug_when>
    <thetext>zhijux, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8265</commentid>
    <comment_count>2</comment_count>
    <who name="Liu Qiaonan">qiaonan.liu</who>
    <bug_when>2019-06-27 20:53:25 +0000</bug_when>
    <thetext>Zhiju, please work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9284</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:09:15 +0000</bug_when>
    <thetext>fixed at 35ec41803c33 (&quot;BaseTools:Add the Judgment Method of &quot;--exclude&quot;&quot;, 2019-08-08)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9719</commentid>
    <comment_count>4</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-19 02:36:15 +0000</bug_when>
    <thetext>FormatDosFiles.py Intel\ServerSiliconPkg --exclude Library\SimRegisters\

Its parameter &quot;Library\SimRegisters\&quot; ends with &apos;\&apos;
So I can&apos;t seem to get it to exclude the &quot;SimRegisters&quot; directory

I need to reopen BZ1944 and create patch to fix it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9838</commentid>
    <comment_count>5</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-09-26 21:14:54 +0000</bug_when>
    <thetext>fix it in 6da405ebf6e946429953c56fcbc8f60abe1407de</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1417</bug_id>
          
          <creation_ts>2018-12-20 04:09:54 +0000</creation_ts>
          <short_desc>use abstraction for speculation barriers instead of X86 specific load fence</short_desc>
          <delta_ts>2018-12-24 20:19:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ard Biesheuvel">ard.biesheuvel</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5926</commentid>
    <comment_count>0</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2018-12-20 04:09:54 +0000</bug_when>
    <thetext>Calls to AsmLfence() have been added all over the generic code to address Spectre v1 vulnerabities, losing sight of the fact that this side effect of a load fence on x86 is highly architecture specific, and misunderstandings of this have led to contributions of AsmLfence() for other architectures that are simply load ordering barriers with no effect whatsoever on speculation behavior.

This means AsmLfence() should be dropped from generic code entirely, and replaced with an abstraction that describes the purpose, e.g., SpeculationBarrier (). The fact that X86 chooses to implement this using a lfence instruction will remain an implementation detail of x86, and other architectures will have the opportunity to implement it in any way they choose.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5931</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:05:12 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5948</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-12-24 20:19:20 +0000</bug_when>
    <thetext>Resolved via edk2 commits:

https://github.com/tianocore/edk2/commit/d9f1cac51bd354507e880e614d11a1dc160d38a3
https://github.com/tianocore/edk2/commit/0e8c5d8b3b8dcc58491b6274b8841ff495da9da7
https://github.com/tianocore/edk2/commit/107775734d75073782ef9cad8ca32e7278f6c013
https://github.com/tianocore/edk2/commit/49395ea0bc69c30f753f93877e6cc82b8ed0212b
https://github.com/tianocore/edk2/commit/b70ec0de46d052d2debf0c8e2159addf9628604f</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1750</bug_id>
          
          <creation_ts>2019-04-26 01:08:31 +0000</creation_ts>
          <short_desc>Remove tool chain RVCT, RVCTLINUX, RVCTCYGWIN and CLANG35</short_desc>
          <delta_ts>2023-05-05 23:17:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>4384</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eugene</cc>
    
    <cc>gaoliming</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7267</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-26 01:08:31 +0000</bug_when>
    <thetext>Those tool chains are for ARM and AARCH64 only. There is no change recently. If they are not used, they can be removed from BaseTools/Conf/tools_def.template.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7268</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-26 01:09:17 +0000</bug_when>
    <thetext>Ard: could you give your input on those tool chains?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7297</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-27 23:01:04 +0000</bug_when>
    <thetext>Request Ard give the input.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7366</commentid>
    <comment_count>3</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-05-02 08:31:56 +0000</bug_when>
    <thetext>(In reply to Liming Gao from comment #2)
&gt; Request Ard give the input.

The RVCT toolchains haven&apos;t been tested by me or anyone else that I am aware of, but Eugene Cohen may be able to provide some input here - he is basically the reason we haven&apos;t already dropped support for them.

CLANG35 was useful since it is a non-LTO version of the CLANG toolchains, but I don&apos;t mind dropping support for it as long as newly added alternatives cover ARM and AARCH64 as well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7591</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:24:07 +0000</bug_when>
    <thetext>Liming will follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7610</commentid>
    <comment_count>5</comment_count>
    <who name="Leif Lindholm">quic_llindhol</who>
    <bug_when>2019-05-17 04:43:30 +0000</bug_when>
    <thetext>I am OK with dropping RVCTLINUX, RVCTCYGWIN and even CLANG35 if no one else objects.

But in order to drop RVCT, we would also need to make sure to fully support VS2017 for ARM (ability to build full platforms, not just drivers/applications).
The reason being that a bunch of .asm files in the tree otherwise suddenly become orphaned. Since RVCT and VS share a common syntax for ARM/AARCH64, this part of the transition should be simple, but we know there are other files in the edk2 core that need changes when building for VS.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7827</commentid>
    <comment_count>6</comment_count>
    <who name="Eugene Cohen">eugene</who>
    <bug_when>2019-05-28 14:39:03 +0000</bug_when>
    <thetext>We are okay dropping RVCT support at this point.  Thanks for remembering.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7956</commentid>
    <comment_count>7</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 02:14:17 +0000</bug_when>
    <thetext>Shenglei will work on the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21493</commentid>
    <comment_count>8</comment_count>
    <who name="">gaoliming</who>
    <bug_when>2023-05-05 23:17:01 +0000</bug_when>
    <thetext>it can be closed

*** This bug has been marked as a duplicate of bug 4384 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1221</bug_id>
          
          <creation_ts>2018-09-29 05:37:03 +0000</creation_ts>
          <short_desc>ShellOpenFileByName declared in ShellLib has wrong parameter name FilePath</short_desc>
          <delta_ts>2019-03-19 03:51:17 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5160</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-29 05:37:03 +0000</bug_when>
    <thetext>ShellOpenFileByDevicePath declared in ShellLib has wrong parameter name FilePath, it should be FileName.

I am trying to write a application for my own use and want to use this interface, but confused by the parameter name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5317</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-18 04:04:01 +0000</bug_when>
    <thetext>Assign to star to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5850</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-12-13 00:22:34 +0000</bug_when>
    <thetext>Change Assignee to Shenglei.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6435</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-02-20 01:11:18 +0000</bug_when>
    <thetext>Correct the title: The problem is for ShellOpenFileByName, but not ShellOpenFileByDevicePath .

There was discussion at https://lists.01.org/pipermail/edk2-devel/2018-September/030334.html before.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6754</commentid>
    <comment_count>4</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2019-03-19 03:51:17 +0000</bug_when>
    <thetext>Fixed at:
43b1be74a8f6654219f636a1f6684b1cbbb05768</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1965</bug_id>
          
          <creation_ts>2019-07-08 17:23:37 +0000</creation_ts>
          <short_desc>InsertNewGuidNameMapping() overflowing ReallocatePool if called a 3rd time.</short_desc>
          <delta_ts>2019-12-05 03:20:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrew Fish">afish</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8385</commentid>
    <comment_count>0</comment_count>
    <who name="Andrew Fish">afish</who>
    <bug_when>2019-07-08 17:23:37 +0000</bug_when>
    <thetext>I added some code to add extra GUID name mappings for some proprietary GUIDs and the Shell crashed with on the FreePool() on the ReallocatePool(). 

(lldb) p  mGuidListCount+1 * sizeof(GUID_INFO_BLOCK)
(unsigned long long) $2 = 25
(lldb) p  (mGuidListCount+1) * sizeof(GUID_INFO_BLOCK)
(unsigned long long) $4 = 48

So this line was allocating too small a buffer:
  mGuidList = ReallocatePool(mGuidListCount * sizeof(GUID_INFO_BLOCK), mGuidListCount+1 * sizeof(GUID_INFO_BLOCK), mGuidList);

1st call mGuidListCount is zero and a buffer of size sizeof(GUID_INFO_BLOCK) is allocated.
2nd call a buffer of mGuidListCount + sizeof(GUID_INFO_BLOCK) and the buffer over flows
3rd call frees buffer that overflows and will ASSERT on a DEBUG build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8416</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:22:58 +0000</bug_when>
    <thetext>Bug Triage: Assign to Zhichao, please work with Andrew on this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10618</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-12-05 03:20:15 +0000</bug_when>
    <thetext>fixed at 94d4efb54ec4ca894287276ce22d29b6261dbc0b.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1039</bug_id>
          
          <creation_ts>2018-07-19 21:42:14 +0000</creation_ts>
          <short_desc>[UefiCpuPkg/CpuDxe] Ambiguous usage of  PAGE_TABLE_LIB_PAGING_CONTEXT in CpuPageTable.c</short_desc>
          <delta_ts>2019-09-25 02:31:38 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4363</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-07-19 21:42:14 +0000</bug_when>
    <thetext>The structure type PAGE_TABLE_LIB_PAGING_CONTEXT is a union type as below.

typedef union {
  PAGE_TABLE_LIB_PAGING_CONTEXT_IA32  Ia32;
  PAGE_TABLE_LIB_PAGING_CONTEXT_X64   X64;
} PAGE_TABLE_LIB_PAGING_CONTEXT_DATA;

typedef struct {
  UINT32  PageTableBase;
  UINT32  Reserved;
  UINT32  Attributes;
} PAGE_TABLE_LIB_PAGING_CONTEXT_IA32;

typedef struct {
  UINT64  PageTableBase;
  UINT32  Attributes;
} PAGE_TABLE_LIB_PAGING_CONTEXT_X64;

But in many functions defined in CpuPageTable.c, the Ia32 and X64 are mixedly used in code without the check if current CPU is in IA32 or X64 mode. This will cause confusion and hard to maintain. In addition, the structure is not packed and would also cause random error.

Thanks to Laszlo Ersek who find the code flaw.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4415</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:10:14 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9320</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 19:49:31 +0000</bug_when>
    <thetext>Ray, Eric, is there any intent to fix this? It&apos;s been a year without any updates. Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9329</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-27 20:28:51 +0000</bug_when>
    <thetext>Hi Laszlo,

For now we are busy with other more important issue. This issue is a refine issue, so it is low priority. Do you have any real impact for this issue? If yes, please add some notes here so we can adjust the priority.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9346</commentid>
    <comment_count>4</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-08-27 20:44:03 +0000</bug_when>
    <thetext>(In reply to Wang, Jian J from comment #0)
&gt; The structure type PAGE_TABLE_LIB_PAGING_CONTEXT is a union type as below.
&gt; 
&gt; typedef union {
&gt;   PAGE_TABLE_LIB_PAGING_CONTEXT_IA32  Ia32;
&gt;   PAGE_TABLE_LIB_PAGING_CONTEXT_X64   X64;
&gt; } PAGE_TABLE_LIB_PAGING_CONTEXT_DATA;
&gt; 
&gt; typedef struct {
&gt;   UINT32  PageTableBase;
&gt;   UINT32  Reserved;
&gt;   UINT32  Attributes;
&gt; } PAGE_TABLE_LIB_PAGING_CONTEXT_IA32;
&gt; 
&gt; typedef struct {
&gt;   UINT64  PageTableBase;
&gt;   UINT32  Attributes;
&gt; } PAGE_TABLE_LIB_PAGING_CONTEXT_X64;
&gt; 
&gt; But in many functions defined in CpuPageTable.c, the Ia32 and X64 are
&gt; mixedly used in code without the check if current CPU is in IA32 or X64
&gt; mode. This will cause confusion and hard to maintain. In addition, the
&gt; structure is not packed and would also cause random error.
&gt; 
&gt; Thanks to Laszlo Ersek who find the code flaw.

Jian,
can you point to the code that wrongly uses the union structure?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9394</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-29 07:31:56 +0000</bug_when>
    <thetext>Eric,

I just don&apos;t believe in carrying low-priority bugs in open state
forever. A large backlog that is likely never going to be addressed is
useless; it just messes up bugzilla searches for open tickets. If we
decide that something is unimportant, or that there will be no resources
to fix it, the justification should be described, and the bug should be
closed as WONTFIX.

Ray,

the IsInSmm() function in &quot;UefiCpuPkg/CpuDxe/CpuPageTable.c&quot; refers to
&quot;mPagingContext.ContextData.X64.PageTableBase&quot; even when running on
IA32. Please see the discussion in this thread:

  https://lists.01.org/pipermail/edk2-devel/2018-July/027299.html

I wrote,

&gt; The argument [...] about GetCurrentPagingContext() is not valid, in my
&gt; opinion. It boils down to, &quot;yeah, we&apos;re possibly accessing a random
&gt; gap in the IA32 structure, but hey that&apos;s no problem, we zero it out
&gt; anyway&quot;. This is very bad programming practice, not to mention the
&gt; extremely confusing source code reference to &quot;X64&quot; when we may be
&gt; running on IA32 in fact. I see some references in the code to
&gt; &quot;Ia32.PageTableBase&quot; as well, so there must be some way to tell apart
&gt; the cases. At the minimum, the PAGE_TABLE_LIB_PAGING_CONTEXT_*
&gt; structures should be packed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9581</commentid>
    <comment_count>6</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-10 21:46:44 +0000</bug_when>
    <thetext>i just send out the patch to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9620</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-09-11 13:38:22 +0000</bug_when>
    <thetext>Eric,

(In reply to ydong10 from comment #6)
&gt; i just send out the patch to fix this issue.

next time, please add a mailing list reference.

http://mid.mail-archive.com/20190911014511.9356-1-eric.dong@intel.com
https://edk2.groups.io/g/devel/message/47093</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9629</commentid>
    <comment_count>8</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-11 20:12:12 +0000</bug_when>
    <thetext>got it, will do it next time. Thanks for your advice.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9795</commentid>
    <comment_count>9</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-25 02:31:38 +0000</bug_when>
    <thetext>SHA-1: c70fef962e804eba483512b64ec24169871060be

* UefiCpuPkg/CpuDxe: clean up PAGE_TABLE_LIB_PAGING_CONTEXT usage.

REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1039

Current implementation not checks system mode before using
PAGE_TABLE_LIB_PAGING_CONTEXT.ContextData.X64 or
PAGE_TABLE_LIB_PAGING_CONTEXT.ContextData.Ia32. This patch check the
mode before using the correct one.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1551</bug_id>
          
          <creation_ts>2019-02-20 20:04:58 +0000</creation_ts>
          <short_desc>Add new driver to export log info for ACPI code</short_desc>
          <delta_ts>2019-09-10 23:31:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ydong10">eric.dong</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6467</commentid>
    <comment_count>0</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-02-20 20:04:58 +0000</bug_when>
    <thetext>For now, it&apos;s hard for developer to debug the ACPI related code. Propose to add a new driver to enable export debug message for Acpi code. 

Because no clear directory to save this new driver and MdeModulePkg is too large now, propose to create new package such as AcpiPkg in Edk2 to save all Acpi related code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6483</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:07:50 +0000</bug_when>
    <thetext>Assign to Liming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9589</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-10 23:04:47 +0000</bug_when>
    <thetext>Eric may have more info on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9595</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-09-10 23:31:19 +0000</bug_when>
    <thetext>Code already check in to Edk2Platform code base.

SHA-1: 77f913a22943617102f85f942a67cc50a521c2fe

* AdvancedFeaturePkg/AcpiDebug: Add new AcpiDebug modules.

Add new AcpiDebug modules which provide ACPI Debug feature.
Detail about this feature see the readme.txt in the patch.

Cc: Hao Wu &lt;hao.a.wu@intel.com&gt;
Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
Contributed-under: TianoCore Contribution Agreement 1.1
Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;


SHA-1: 4e7b77406376e11feaf5685c81572fe30dd57304

* Platform/Intel/DebugFeaturePkg/AcpiDebug: Change AcpiDebug module location.

Move AcpiDebug module from AdvancedFeaturePkg to DebugFeaturePkg.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Liming Gao &lt;liming.gao@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1984</bug_id>
          
          <creation_ts>2019-07-17 22:34:26 +0000</creation_ts>
          <short_desc>UefiCpuPkg RegisterCpuFeaturesLib: cautious to debug print on AP</short_desc>
          <delta_ts>2019-08-08 14:53:32 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="ydong10">eric.dong</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eric.dong</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
    
    <cc>star.zeng</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8475</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-07-17 22:34:26 +0000</bug_when>
    <thetext>Current ProgramProcessorRegister() implementation in CpuFeaturesInitialize.c has below code piece to debug print on all processors.

    DEBUG_CODE_BEGIN ();
      //
      // Wait for the AP to release the MSR spin lock.
      //
      while (!AcquireSpinLockOrFail (&amp;CpuFlags-&gt;ConsoleLogLock)) {
        CpuPause ();
      }
      ThreadIndex = ApLocation-&gt;Package * CpuStatus-&gt;MaxCoreCount * CpuStatus-&gt;MaxThreadCount +
              ApLocation-&gt;Core * CpuStatus-&gt;MaxThreadCount +
              ApLocation-&gt;Thread;
      DEBUG ((
        DEBUG_INFO,
        &quot;Processor = %08lu, Index %08lu, Type = %s!\n&quot;,
        (UINT64)ThreadIndex,
        (UINT64)Index,
        mRegisterTypeStr[MIN ((REGISTER_TYPE)RegisterTableEntry-&gt;RegisterType, InvalidReg)]
        ));
      ReleaseSpinLock (&amp;CpuFlags-&gt;ConsoleLogLock);
    DEBUG_CODE_END ();

It will bring much restriction or potential issue for platform to use it.

For PEI and DXE phase, platform mush link base DebugLib (without using to any pei/dxe services, even for its dependent libraries).
For DXE phase, even the code has spinlock, but DXE phase has timer, if there is debug print in some timer handler on BSP, there may be potential issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8585</commentid>
    <comment_count>1</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-25 20:31:46 +0000</bug_when>
    <thetext>Bug Triage: Star, please work with Ray and Eric on this one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8593</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2019-07-25 21:19:11 +0000</bug_when>
    <thetext>Eric, could you help on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8600</commentid>
    <comment_count>3</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-07-25 22:10:21 +0000</bug_when>
    <thetext>yes, i will follow up this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8792</commentid>
    <comment_count>4</comment_count>
    <who name="ydong10">eric.dong</who>
    <bug_when>2019-08-05 23:32:55 +0000</bug_when>
    <thetext>SHA-1: 02031cfc920e31f748053cbc0c844676927db0bc

* UefiCpuPkg/PiSmmCpuDxeSmm: Remove debug message.

This debug message may be called by BSP and APs. It may
caused ASSERT when APs call this debug code.

In order to avoid system boot assert, Remove this debug
message.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;


SHA-1: 1821dbed1da616637f5c04fe1f5029016f81bd52

* UefiCpuPkg/RegisterCpuFeaturesLib: Remove debug message.

This debug message may be called by BSP and APs. It may
caused ASSERT when APs call this debug code.

In order to avoid system boot assert, Remove this debug
message.

Signed-off-by: Eric Dong &lt;eric.dong@intel.com&gt;
Reviewed-by: Ray Ni &lt;ray.ni@intel.com&gt;
Cc: Laszlo Ersek &lt;lersek@redhat.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1056</bug_id>
          
          <creation_ts>2018-07-25 05:10:53 +0000</creation_ts>
          <short_desc>Redundant info is defined in SmmCommunicationBufferDxe module INF</short_desc>
          <delta_ts>2018-09-13 02:19:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4399</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-07-25 05:10:53 +0000</bug_when>
    <thetext>Edk2 INF clean tool, which is based on Uefi-aware compiler, find there is a redundant library class, which is PcdLib, defined in SmmCommunicationBufferDxe module INF file. Need to remove them.


Below is the fix reference:
--- a/MdeModulePkg/Universal/SmmCommunicationBufferDxe/SmmCommunicationBufferDxe.inf
+++ b/MdeModulePkg/Universal/SmmCommunicationBufferDxe/SmmCommunicationBufferDxe.inf
@@ -50,7 +50,6 @@
   MemoryAllocationLib
   HobLib
   DebugLib
-  PcdLib

 [Guids]
   gEdkiiPiSmmCommunicationRegionTableGuid     ## PRODUCES   ## SystemTable</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4427</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-07-26 20:53:39 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4941</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-13 02:19:06 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/131818ba5a83d1e8f3f1b4c041200755fff64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1457</bug_id>
          
          <creation_ts>2019-01-14 22:26:55 +0000</creation_ts>
          <short_desc>MinPlatformPkg: Support TCO base locked by FSP</short_desc>
          <delta_ts>2019-01-27 20:51:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chasel">chasel.chiu</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6084</commentid>
    <comment_count>0</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-01-14 22:26:55 +0000</bug_when>
    <thetext>Per security recommendation TCO Base should be initialized and locked by FSP and MinPlatform should support both TCO Base locked and not locked scenarios.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6145</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:40:55 +0000</bug_when>
    <thetext>bug scrub: assign to chasel to fix it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6212</commentid>
    <comment_count>2</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-01-27 20:51:48 +0000</bug_when>
    <thetext>commit cc96add5d57e5243389e43e001c4df2746f02dac (HEAD -&gt; devel-MinPlatform, origin/devel-MinPlatform)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Tue Jan 15 11:11:41 2019 +0800

    MinPlatformPkg: Support TCO base locked by FSP

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1457

    Per security recommendation TCO Base should be
    initialized and locked by FSP and MinPlatform should
    support both TCO Base locked and not locked scenarios.

    Cc: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;
    Cc: Jiewen Yao &lt;jiewen.yao@intel.com&gt;
    Contributed-under: TianoCore Contribution Agreement 1.1
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Michael Kubacki &lt;michael.a.kubacki@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1889</bug_id>
          
          <creation_ts>2019-06-10 02:15:15 +0000</creation_ts>
          <short_desc>Remove unused Edk2\BuildNotes2.txt</short_desc>
          <delta_ts>2019-08-11 22:30:59 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="nobody">nobody</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7957</commentid>
    <comment_count>0</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 02:15:15 +0000</bug_when>
    <thetext>Edk2\BuildNotes2.txt is not maintained any more. User can find the related info in wiki. So, this file can be removed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7958</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-06-10 02:15:40 +0000</bug_when>
    <thetext>Zhiju will look it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8729</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-08-01 23:10:37 +0000</bug_when>
    <thetext>Has been done? If it is done, please close it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8935</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-08-11 22:30:59 +0000</bug_when>
    <thetext>fixed it in 48fdf9a6df2c401fb8850659a67d1fbbc353d771</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1796</bug_id>
          
          <creation_ts>2019-05-10 10:11:34 +0000</creation_ts>
          <short_desc>PciBusDxe: duplicate node insertion for every PPB device in the system</short_desc>
          <delta_ts>2019-07-02 06:08:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ashraf Javeed">ashraf.javeed</reporter>
          <assigned_to name="Ashraf Javeed">ashraf.javeed</assigned_to>
          <cc>ashraf.javeed</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>ray.ni</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7490</commentid>
    <comment_count>0</comment_count>
      <attachid>320</attachid>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-05-10 10:11:34 +0000</bug_when>
    <thetext>Created attachment 320
Serial Port dump from Whitley 2S WilsonCity platform

During the PCI bus scan for every Root Bridge IO protocol published; the routine &quot;PciScanBus&quot; ends by invoking the subroutine &quot;PciSearchDevice&quot; twice for the same PPB device, that results in duplicate PCI_IO_DEVICE instance creation.

During the PCI Bus scan, the subroutine &quot;PciSearchDevice&quot; is invoked first after its existence is confirmed (through subroutine &quot;PciDevicePresent&quot;) which records all the PCI &amp; PPB devices by creating its PCI_IO_DEVICE instances.
It makes a redundant call next time after it confirms the PCI device is PPB device when the PCD for Hot-Plug is set to not supported. This PCD &quot;PcdPciBusHotplugDeviceSupport&quot; if initialized as FALSE in platform BIOS results in duplicate creation of PCI_IO_DEVICE node.

The code snapshot of second redundant call of the subroutine below...
      if (IS_PCI_BRIDGE (&amp;Pci) || IS_CARDBUS_BRIDGE (&amp;Pci)) {
        //
        // For PPB
        //
        if (!FeaturePcdGet (PcdPciBusHotplugDeviceSupport)) {
          //
          // If Hot Plug is not supported,
          // get the bridge information
          //
          Status = PciSearchDevice (
                    Bridge,
                    &amp;Pci,
                    StartBusNumber,
                    Device,
                    Func,
                    &amp;PciDevice
                    );
---------------------------------------------

This does not cause any adverse affect beside the duplicate node creation and its insertion into the list.

Attaching the PciBusDxe dump, where the PPB duplicate creation can be figured by duplicate prints, as captured below...
...
PciBus: Discovered PPB @ [00|1C|00]

PciBus: Discovered PPB @ [00|1C|00]
...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7765</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-23 10:28:10 +0000</bug_when>
    <thetext>change to confirmed status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7768</commentid>
    <comment_count>2</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-05-23 13:17:09 +0000</bug_when>
    <thetext>Thanks!
assigned to self.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7779</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-24 03:10:16 +0000</bug_when>
    <thetext>Ashraf,
Thank you very much for finding this issue.
Can you please
1. Modify 2nd PciSearchDevice() to create PciDevice2. Compare the PciDevice created in the 1st call against the PciDevice2 to make sure they point to the same device. (By reviewing the code I fully agree with your findings. Just want to double confirm that.)
2. Work out the patch to remove the 2nd call. I think the if-else can be changed to if (FeaturePcdGet (PcdPciBusHotplugDeviceSupport)).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7781</commentid>
    <comment_count>4</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-05-24 06:13:33 +0000</bug_when>
    <thetext>Ray,
Regarding your comment #1; it is confirmed that it is same PPB instance getting created twice using the Serial port dump, and also attached the logs.
Regarding your comment #2; I had planned for the same fix, so agree with your proposal for the fix.
Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7782</commentid>
    <comment_count>5</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2019-05-24 07:11:43 +0000</bug_when>
    <thetext>Ashraf,
can you please generate the patch and send to devel@edk2.groups.io for public review?

I can help to push the patch for you after passing the review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8322</commentid>
    <comment_count>6</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-02 06:05:41 +0000</bug_when>
    <thetext>Pushed via commit 2603fce126</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8323</commentid>
    <comment_count>7</comment_count>
    <who name="Ashraf Javeed">ashraf.javeed</who>
    <bug_when>2019-07-02 06:08:21 +0000</bug_when>
    <thetext>(In reply to Ashraf Javeed from comment #6)
&gt; Pushed via commit 2603fce126

This was done by Hao Wu.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>320</attachid>
            <date>2019-05-10 10:11:34 +0000</date>
            <delta_ts>2019-05-10 10:11:34 +0000</delta_ts>
            <desc>Serial Port dump from Whitley 2S WilsonCity platform</desc>
            <filename>Whitley_Wilsoncity_2S_simics_PciBusDxe.txt</filename>
            <type>text/plain</type>
            <size>39430</size>
            <attacher name="Ashraf Javeed">ashraf.javeed</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1165</bug_id>
          
          <creation_ts>2018-09-09 23:07:36 +0000</creation_ts>
          <short_desc>No assert if HOB gEfiAcpiVariableGuid is missing with PcdAcpiS3Enable set to TRUE</short_desc>
          <delta_ts>2018-09-18 01:57:41 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>UefiCpuPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4897</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-09 23:07:36 +0000</bug_when>
    <thetext>HOB gEfiAcpiVariableGuid must be created for S3 resume if PcdAcpiS3Enable is set to TRUE. Current code doesn&apos;t assert this situation and confuse platform developer if this HOB is not provided.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4898</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-09 23:08:18 +0000</bug_when>
    <thetext>Take the ownership.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4960</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-13 20:06:33 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4998</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-18 01:57:41 +0000</bug_when>
    <thetext>Pushed at 16d8465756ad29a17a082108dae55d254b91bf2c
Review: https://lists.01.org/pipermail/edk2-devel/2018-September/029678.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1582</bug_id>
          
          <creation_ts>2019-03-01 10:22:34 +0000</creation_ts>
          <short_desc>EdkSetup enhancement</short_desc>
          <delta_ts>2019-08-27 18:47:19 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaben Carsey">jaben.carsey</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>glin</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zhijux.fan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6604</commentid>
    <comment_count>0</comment_count>
    <who name="Jaben Carsey">jaben.carsey</who>
    <bug_when>2019-03-01 10:22:34 +0000</bug_when>
    <thetext>testing for presence of python modules and similar one-off actions should be done in edksetup to reduce impact on subsequent build times.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6834</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-21 08:58:22 +0000</bug_when>
    <thetext>Bob will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7414</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-07 22:16:30 +0000</bug_when>
    <thetext>fixed at df7c81b5b219c9aee776baa466dd64c9d318dd80</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7455</commentid>
    <comment_count>3</comment_count>
    <who name="Gary Lin">glin</who>
    <bug_when>2019-05-08 23:28:22 +0000</bug_when>
    <thetext>I have to reopen this issue since df7c81b5b219c9 actually breaks the build.
TestUtilModule() should return 0 on success, not 1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7465</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-09 01:51:13 +0000</bug_when>
    <thetext>Bob/Zhiju, please re-fix this issue.
change to confirmed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9301</commentid>
    <comment_count>5</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:47:19 +0000</bug_when>
    <thetext>The commit referenced in comment 2 got later reverted in 49693202ec9c (&quot;Revert &quot;BaseTools:code of test python module is moved to edksetup&quot;&quot;, 2019-05-09).

Furthermore, Jaben has withdrawn from edk2 maintenance:

http://mid.mail-archive.com/07a135a72ff84469eb2a3a91bda006274528b543.1566419863.git.jaben.carsey@intel.com
https://edk2.groups.io/g/devel/message/46175

So I&apos;m closing this now as WONTFIX -- nobody has cared for three months now, since comment 4.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1476</bug_id>
          
          <creation_ts>2019-01-20 20:23:43 +0000</creation_ts>
          <short_desc>VS EBC and XCODE build failure in MdeModulePkg FaultTolerantWriteDxe related modules</short_desc>
          <delta_ts>2019-01-28 20:10:27 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="dandanbi">dandan.bi</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6150</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-20 20:23:43 +0000</bug_when>
    <thetext>1. VS EBC log:
copy /y s:\bld\Build\MdeModule\DEBUG_VS2015x86\EBC\MdeModulePkg\Universal\SerialDxe\SerialDxe\DEBUG\*.map s:\bld\Build\MdeModule\DEBUG_VS2015x86\EBC\MdeModulePkg\Universal\SerialDxe\SerialDxe\OUTPUT
LINK : warning LNK4001: no object files specified; libraries used
s:\bld\Build\MdeModule\DEBUG_VS2015x86\EBC\MdeModulePkg\Universal\SerialDxe\SerialDxe\DEBUG\SerialDxe.map
EbcLib.lib(EbcLib.obj) : error LNK2019: unresolved external symbol EfiMain referenced in function EfiStart
s:\bld\Build\MdeModule\DEBUG_VS2015x86\EBC\MdeModulePkg\Universal\FaultTolerantWriteDxe\FaultTolerantWriteStandaloneMm\DEBUG\FaultTolerantWriteStandaloneMm.dll : fatal error LNK1120: 1 unresolved externals
NMAKE : fatal error U1077: &apos;&quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\link.exe&quot;&apos; : return code &apos;0x460&apos;
Stop.


build.py...
 : error 7000: Failed to execute command
	C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\nmake.exe /nologo tbuild [s:\bld\Build\MdeModule\DEBUG_VS2015x86\EBC\MdeModulePkg\Universal\FaultTolerantWriteDxe\FaultTolerantWriteStandaloneMm]


build.py...
 : error 7000: Failed to execute command
	C:\Program Files (x86)\Microsoft Visual Studio 14.0\Vc\bin\nmake.exe /nologo tbuild [s:\bld\Build\MdeModule\DEBUG_VS2015x86\EBC\MdeModulePkg\Universal\Variable\RuntimeDxe\VariableStandaloneMm]


build.py...
 : error F002: Failed to build module
	s:\bld\MdeModulePkg\Universal\FaultTolerantWriteDxe\FaultTolerantWriteStandaloneMm.inf [EBC, VS2015x86, DEBUG]

- Failed -
Build end time: 08:36:15, Jan.20 2019
Build total time: 00:01:09

Result: Failed (1)


2. XCODE log:
warning: /usr/local/bin/mtoc: unknown argument: MM_STANDALONE specified for -subsystem argument can be:
application
app
UEFI_APPLICATION
APPLICATION
boot
bsdrv
DXE_DRIVER
SEC
peim
BASE
PEI_CORE
PEIM
DXE_SMM_DRIVER
TOOL
USER_DEFINED
UEFI_DRIVER
DXE_CORE
SECURITY_CORE
COMBINED_PEIM_DRIVER
PIC_PEIM
RELOCATABLE_PEIM
BS_DRIVER
SMM_CORE
runtime
rtdrv
DXE_RUNTIME_DRIVER
Usage: /usr/local/bin/mtoc [-subsystem type] [-section_alignment hexvalue] [-align hexvalue] [-d debug_filename] [-u debug_guid] input_Mach-O output_pecoff
make: *** [.../jfspsi-osx1-Edk2/bld/Build/MdeModule/DEBUG_XCODE5/X64/MdeModulePkg/Universal/Variable/RuntimeDxe/VariableStandaloneMm/DEBUG/VariableStandaloneMm.efi] Error 1


build.py...
 : error 7000: Failed to execute command
	make tbuild [.../jfspsi-osx1-Edk2/bld/Build/MdeModule/DEBUG_XCODE5/X64/MdeModulePkg/Universal/Variable/RuntimeDxe/VariableStandaloneMm]


build.py...
 : error 7000: Failed to execute command
	make tbuild [.../jfspsi-osx1-Edk2/bld/Build/MdeModule/DEBUG_XCODE5/X64/MdeModulePkg/Universal/FaultTolerantWriteDxe/FaultTolerantWriteStandaloneMm]


build.py...
 : error F002: Failed to build module
	/.../jfspsi-osx1-Edk2/bld/MdeModulePkg/Universal/Variable/RuntimeDxe/VariableStandaloneMm.inf [X64, XCODE5, DEBUG]

- Failed -
Build end time: 06:56:36, Jan.20 2019
Build total time: 00:01:30

Result: Failed (1)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6199</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-25 00:43:26 +0000</bug_when>
    <thetext>assign to dandan first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6220</commentid>
    <comment_count>2</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-28 20:10:27 +0000</bug_when>
    <thetext>Fix it at:
https://github.com/tianocore/edk2/commit/945c1d55c9333437896613540fcd458c32997b1c</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1379</bug_id>
          
          <creation_ts>2018-12-06 13:51:57 +0000</creation_ts>
          <short_desc>Double carriage return inserted from Trim.py on Python3 Branch</short_desc>
          <delta_ts>2019-02-01 09:48:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Antone">aaron.antone</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>aaron.antone</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5758</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Antone">aaron.antone</who>
    <bug_when>2018-12-06 13:51:57 +0000</bug_when>
    <thetext>INFO: This bug pertains to Trim.py before reverting the Python3 change and will not be reflected in the current version of the code


Line 208 of BaseTools/Source/Python/Trim/Trim.py uses &apos;NewLines.append(os.linesep)&apos; to insert a new line into the list that will be written to the output file. os.linesep will insert the line termination characters based on the system you are running. On POSIX based systems this will be &apos;\n&apos;, but on Windows based systems os.linesep translates to &apos;\r\n&apos;. Since we are no longer opening the file in binary write mode (&apos;wb&apos;) on line 248 but instead using the default write mode (&apos;w&apos;) any new lines will be converted to the running OS line separator upon writing. This causes the &apos;\r\n&apos; inserted with os.linesep to be written as &apos;\r\r\n&apos;, causing some assemblers to error.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5759</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Antone">aaron.antone</who>
    <bug_when>2018-12-06 13:53:33 +0000</bug_when>
    <thetext>Easiest solution is to change Line 208 from &apos;NewLines.append(os.linesep)&apos; to &apos;NewLines.append(&quot;\n&quot;)&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5761</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-06 19:04:41 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6271</commentid>
    <comment_count>3</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-02-01 09:48:11 +0000</bug_when>
    <thetext>Fixed on edk2 master SHA-1: 62cb98c254c8c24f610a427c948ca68ba43d7882</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1416</bug_id>
          
          <creation_ts>2018-12-19 18:27:45 +0000</creation_ts>
          <short_desc>UefiDebugLibDebugPortProtocol is not runtime safe</short_desc>
          <delta_ts>2019-04-24 03:56:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Aaron Antone">aaron.antone</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5921</commentid>
    <comment_count>0</comment_count>
    <who name="Aaron Antone">aaron.antone</who>
    <bug_when>2018-12-19 18:27:45 +0000</bug_when>
    <thetext>MdePkg\Library\UefiDebugLibDebugPortProtocol is not runtime safe. Boot services and DebugPort protocol calls after ExitBootServices can cause an exception.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5922</commentid>
    <comment_count>1</comment_count>
    <who name="Aaron Antone">aaron.antone</who>
    <bug_when>2018-12-19 19:23:19 +0000</bug_when>
    <thetext>Proposed fix - Create boolean to track if ExitBootServices has been called and disable debug prints after ExitBootServices

Project MU fix here: https://github.com/Microsoft/mu_basecore/commit/9dc1fc8d4903954078d84186978a410d814dc26a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5932</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:06:42 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5974</commentid>
    <comment_count>3</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-03 02:12:36 +0000</bug_when>
    <thetext>There are the same issue in UefiDebugLibConOut and UefiDebugLibStdErr library instances. Besides RUNTIME driver issue, SMM driver also has issue in runtime. I propose to remove DXE_RUNTIME_DRIVER and DXE_SMM_DRIVER type from the supported module type list in the library INF file. Then, these library instances don&apos;t support DXE_RUNTIME_DRIVER and DXE_SMM_DRIVER type any more. 
If there is the request to use DebugPort or ConOut or StdErr in the normal boot phase of runtime driver to print debut the debug message, we can consider add such support.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5975</commentid>
    <comment_count>4</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-01-03 02:16:03 +0000</bug_when>
    <thetext>Assign it to the owner to prepare the patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6989</commentid>
    <comment_count>5</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-03 09:23:47 +0000</bug_when>
    <thetext>Still need RT support in UefiDebugLibDebugPortProtocol library instance. But, SMM support can be removed. 

Take the same solution in UefiDebugLibConOut and UefiDebugLibStdErr.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6990</commentid>
    <comment_count>6</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-04-03 09:24:41 +0000</bug_when>
    <thetext>Zhichao will prepare the patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7252</commentid>
    <comment_count>7</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-24 03:56:10 +0000</bug_when>
    <thetext>finished at
https://github.com/tianocore/edk2/commit/1dc1da58306fae0e00fb21c7b97eb39ba0a75e5e
https://github.com/tianocore/edk2/commit/c0b2816d69a27db903ce2eaf1f48fb4719b26bd9
https://github.com/tianocore/edk2/commit/2b5778c68b631789ffcf96535001ad36643b0d66
https://github.com/tianocore/edk2/commit/452702d0bc51b608491a96b3634ded7a57727455
https://github.com/tianocore/edk2/commit/e72920ec617ba1fceb114b3bb2a587a8e836734b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1534</bug_id>
          
          <creation_ts>2019-02-19 04:59:01 +0000</creation_ts>
          <short_desc>AppPkg build error (StdLib\Include\sys/EfiCdefs.h(342): error C2220: warning treated as error)</short_desc>
          <delta_ts>2021-08-18 20:42:34 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>829</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Prasad Hegde">prasad.hegde.sirsi</reporter>
          <assigned_to name="Jaben Carsey">jaben.carsey</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>prasad.hegde.sirsi</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>UDK 2018</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>AppPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6395</commentid>
    <comment_count>0</comment_count>
      <attachid>255</attachid>
    <who name="Prasad Hegde">prasad.hegde.sirsi</who>
    <bug_when>2019-02-19 04:59:01 +0000</bug_when>
    <thetext>Created attachment 255
Console output

Hello,

I am trying to build the AppPkg in the &quot;edk2-edk2-stable201811&quot; UDK.

I am facing the build error. 

Please see the attachment for more details of the build error.

I am using VS2015 for build. If you require more information please let me know.

Thanks
Prasad</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6396</commentid>
    <comment_count>1</comment_count>
      <attachid>256</attachid>
    <who name="Prasad Hegde">prasad.hegde.sirsi</who>
    <bug_when>2019-02-19 05:03:18 +0000</bug_when>
    <thetext>Created attachment 256
My configuration directory(Which I changed paths)

My configuration directory(Which I changed paths)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6490</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 19:16:41 +0000</bug_when>
    <thetext>Assign to Jaben to help investigate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16979</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2021-08-18 20:42:34 +0000</bug_when>
    <thetext>Duplicate of 829 that is already fixed

*** This bug has been marked as a duplicate of bug 829 ***</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>255</attachid>
            <date>2019-02-19 04:59:01 +0000</date>
            <delta_ts>2019-02-19 04:59:01 +0000</delta_ts>
            <desc>Console output</desc>
            <filename>EDK2_AppPkgError.txt</filename>
            <type>text/plain</type>
            <size>223183</size>
            <attacher name="Prasad Hegde">prasad.hegde.sirsi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>256</attachid>
            <date>2019-02-19 05:03:18 +0000</date>
            <delta_ts>2019-02-19 05:03:18 +0000</delta_ts>
            <desc>My configuration directory(Which I changed paths)</desc>
            <filename>Conf.zip</filename>
            <type>application/x-zip-compressed</type>
            <size>756719</size>
            <attacher name="Prasad Hegde">prasad.hegde.sirsi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1471</bug_id>
          
          <creation_ts>2019-01-16 22:42:00 +0000</creation_ts>
          <short_desc>EmulatorPkg build issue with macOS mojave and Xcode 10</short_desc>
          <delta_ts>2019-09-28 21:01:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Mac OS</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>2046</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="ChasonTang">chasontang</reporter>
          <assigned_to name="nobody">nobody</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6118</commentid>
    <comment_count>0</comment_count>
    <who name="ChasonTang">chasontang</who>
    <bug_when>2019-01-16 22:42:00 +0000</bug_when>
    <thetext>OS Environment: macOS mojave with Xcode 10 command line tool and installed macOS_SDK_headers_for_macOS_10.14.pkg
Download edk2-UDK2018.zip
Initializing workspace
&gt; source ./edk2setup.sh

WORKSPACE: /Users/QianYun/Downloads/edk2-vUDK2018
EDK_TOOLS_PATH: /Users/QianYun/Downloads/edk2-vUDK2018/BaseTools
CONF_PATH: /Users/QianYun/Downloads/edk2-vUDK2018/Conf
Copying $EDK_TOOLS_PATH/Conf/build_rule.template
     to /Users/QianYun/Downloads/edk2-vUDK2018/Conf/build_rule.txt
Copying $EDK_TOOLS_PATH/Conf/tools_def.template
     to /Users/QianYun/Downloads/edk2-vUDK2018/Conf/tools_def.txt
Copying $EDK_TOOLS_PATH/Conf/target.template
     to /Users/QianYun/Downloads/edk2-vUDK2018/Conf/target.txt

&gt; cd EmulatorPkg &amp;&amp; ./build.sh

The BaseTools will build successfully, and EmulatorPkg will fail to build.

&apos;import sitecustomize&apos; failed; use -v for traceback
Build environment: Darwin-18.2.0-x86_64-i386-64bit
Build start time: 15:10:45, Jan.14 2019

WORKSPACE        = /Users/QianYun/Downloads/edk2-vUDK2018
ECP_SOURCE       = /Users/QianYun/Downloads/edk2-vUDK2018/EdkCompatibilityPkg
EDK_SOURCE       = /Users/QianYun/Downloads/edk2-vUDK2018/EdkCompatibilityPkg
EFI_SOURCE       = /Users/QianYun/Downloads/edk2-vUDK2018/EdkCompatibilityPkg
EDK_TOOLS_PATH   = /Users/QianYun/Downloads/edk2-vUDK2018/BaseTools
CONF_PATH        = /Users/QianYun/Downloads/edk2-vUDK2018/Conf
build: : warning: Tool chain [XCODE32] is not defined


build.py...
 : error 4000: Not available
[XCODE32] not defined. No toolchain available for build!


- Failed -
Build end time: 15:10:46, Jan.14 2019
Build total time: 00:00:00

Edit EmulatorPkg/build.sh and ./build.sh again

diff --git a/build.sh.new b/build.sh
index 4f653d2..339c6b3 100755
--- a/build.sh.new
+++ b/build.sh
@@ -63,8 +63,17 @@ case `uname` in
         echo UnixPkg requires Snow Leopard or later OS
         exit 1
       else
-        HOST_TOOLS=XCODE5
-        TARGET_TOOLS=XCODE5
+        CLANG_VER=$(clang -ccc-host-triple x86_64-pc-win32-macho 2&gt;&amp;1 &gt;/dev/null) || true
+        if [[ &quot;$CLANG_VER&quot; == *-ccc-host-triple* ]]
+        then
+        # only older versions of Xcode support -ccc-host-tripe, for newer versions
+        # it is -target
+          HOST_TOOLS=XCODE32
+          TARGET_TOOLS=XCODE5
+        else
+          HOST_TOOLS=XCODE32
+          TARGET_TOOLS=XCLANG
+        fi
       fi
       BUILD_NEW_SHELL=&quot;-D BUILD_NEW_SHELL&quot;
       BUILD_FAT=&quot;-D BUILD_FAT&quot;

However, this attempt still failed.

Building ... /Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/Host.inf [X64]
&quot;clang&quot; -target x86_64-pc-win32-macho -c -g -Os -Wall -Werror -Wextra -include AutoGen.h -funsigned-char -fno-ms-extensions -fno-stack-protector -fno-builtin -fshort-wchar -mno-implicit-float -mms-bitfields -Wno-unused-parameter -Wno-missing-braces -Wno-missing-field-initializers -Wno-tautological-compare -Wno-sign-compare -Wno-varargs -ftrap-function=undefined_behavior_has_been_optimized_away_by_clang -D NO_MSABI_VA_FUNCS  -I/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/X11IncludeHack -o /Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Unix/Host/Host/OUTPUT/./Host.obj -I/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/X64 -I/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host -I/Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Unix/Host/Host/DEBUG -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg/Include -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg/Include/X64 -I/Users/QianYun/Downloads/edk2-vUDK2018/MdeModulePkg -I/Users/QianYun/Downloads/edk2-vUDK2018/MdeModulePkg/Include -I/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg -I/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Include /Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/Host.c
&quot;clang&quot; -target x86_64-pc-win32-macho -c -g -Os -Wall -Werror -Wextra -include AutoGen.h -funsigned-char -fno-ms-extensions -fno-stack-protector -fno-builtin -fshort-wchar -mno-implicit-float -mms-bitfields -Wno-unused-parameter -Wno-missing-braces -Wno-missing-field-initializers -Wno-tautological-compare -Wno-sign-compare -Wno-varargs -ftrap-function=undefined_behavior_has_been_optimized_away_by_clang -D NO_MSABI_VA_FUNCS  -o /Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/ShellPkg/Library/UefiShellNetwork1CommandsLib/UefiShellNetwork1CommandsLib/OUTPUT/./AutoGen.obj -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Library/UefiShellNetwork1CommandsLib -I/Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/ShellPkg/Library/UefiShellNetwork1CommandsLib/UefiShellNetwork1CommandsLib/DEBUG -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg/Include -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg/Include/X64 -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Include -I/Users/QianYun/Downloads/edk2-vUDK2018/MdeModulePkg -I/Users/QianYun/Downloads/edk2-vUDK2018/MdeModulePkg/Include /Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/ShellPkg/Library/UefiShellNetwork1CommandsLib/UefiShellNetwork1CommandsLib/DEBUG/AutoGen.c
In file included from /Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/Host.c:15:
/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/Host.h:28:10: fatal error: &apos;stdio.h&apos; file not found
#include &lt;stdio.h&gt;
         ^~~~~~~~~
&quot;clang&quot; -target x86_64-pc-win32-macho -c -g -Os -Wall -Werror -Wextra -include AutoGen.h -funsigned-char -fno-ms-extensions -fno-stack-protector -fno-builtin -fshort-wchar -mno-implicit-float -mms-bitfields -Wno-unused-parameter -Wno-missing-braces -Wno-missing-field-initializers -Wno-tautological-compare -Wno-sign-compare -Wno-varargs -ftrap-function=undefined_behavior_has_been_optimized_away_by_clang -D NO_MSABI_VA_FUNCS  -o /Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/ShellPkg/Library/UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib/OUTPUT/./SerMode.obj -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Library/UefiShellDebug1CommandsLib/HexEdit -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Library/UefiShellDebug1CommandsLib/Edit -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Library/UefiShellDebug1CommandsLib/SmbiosView -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Library/UefiShellDebug1CommandsLib -I/Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/ShellPkg/Library/UefiShellDebug1CommandsLib/UefiShellDebug1CommandsLib/DEBUG -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg/Include -I/Users/QianYun/Downloads/edk2-vUDK2018/MdePkg/Include/X64 -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg -I/Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Include -I/Users/QianYun/Downloads/edk2-vUDK2018/MdeModulePkg -I/Users/QianYun/Downloads/edk2-vUDK2018/MdeModulePkg/Include /Users/QianYun/Downloads/edk2-vUDK2018/ShellPkg/Library/UefiShellDebug1CommandsLib/SerMode.c
1 error generated.
make: *** [/Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Unix/Host/Host/OUTPUT/Host.obj] Error 1


build.py...
 : error 7000: Failed to execute command
make tbuild [/Users/QianYun/Downloads/edk2-vUDK2018/Build/Emulator/DEBUG_XCODE5/X64/EmulatorPkg/Unix/Host/Host]


build.py...
 : error F002: Failed to build module
/Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg/Unix/Host/Host.inf [X64, XCODE5, DEBUG]

- Failed -
Build end time: 15:16:01, Jan.14 2019
Build total time: 00:00:39

After careful analysis, i find out that the include search path is wrong. clang will search some path below by default.

&gt; clang++ -E -x c++ - -v &lt; /dev/null

Apple LLVM version 10.0.0 (clang-1000.11.45.5)
Target: x86_64-apple-darwin18.2.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
 &quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang&quot; -cc1 -triple x86_64-apple-macosx10.14.0 -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -E -disable-free -disable-llvm-verifier -discard-value-names -main-file-name - -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fno-strict-return -masm-verbose -munwind-tables -target-cpu penryn -dwarf-column-info -debugger-tuning=lldb -target-linker-version 409.12 -v -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.0 -stdlib=libc++ -fdeprecated-macro -fdebug-compilation-dir /Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg -ferror-limit 19 -fmessage-length 181 -stack-protector 1 -fblocks -fencode-extended-block-signature -fobjc-runtime=macosx-10.14.0 -fcxx-exceptions -fexceptions -fmax-type-align=16 -fdiagnostics-show-option -fcolor-diagnostics -o - -x c++ -
clang -cc1 version 10.0.0 (clang-1000.11.45.5) default target x86_64-apple-darwin18.2.0
ignoring nonexistent directory &quot;/usr/include/c++/v1&quot;
#include &quot;...&quot; search starts here:
#include &lt;...&gt; search starts here:
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1
 /usr/local/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.0/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
# 1 &quot;&lt;stdin&gt;&quot;
# 1 &quot;&lt;built-in&gt;&quot; 1
# 1 &quot;&lt;built-in&gt;&quot; 3
# 373 &quot;&lt;built-in&gt;&quot; 3
# 1 &quot;&lt;command line&gt;&quot; 1
# 1 &quot;&lt;built-in&gt;&quot; 2
# 1 &quot;&lt;stdin&gt;&quot; 2

But -target x86_64-pc-win32-macho will working in cross-compilation mode. it will search this path and stdio.h will not found

&gt; clang++ -target x86_64-pc-win32-macho -E -x c++ - -v &lt; /dev/null

Apple LLVM version 10.0.0 (clang-1000.11.45.5)
Target: x86_64-pc-windows-macho
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
 &quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang&quot; -cc1 -triple x86_64-pc-windows-macho -E -disable-free -disable-llvm-verifier -discard-value-names -main-file-name - -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -target-cpu x86-64 -dwarf-column-info -debugger-tuning=gdb -target-linker-version 409.12 -v -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.0 -internal-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.0/include -fdeprecated-macro -fdebug-compilation-dir /Users/QianYun/Downloads/edk2-vUDK2018/EmulatorPkg -ferror-limit 19 -fmessage-length 181 -fno-use-cxa-atexit -fms-extensions -fms-compatibility -fms-compatibility-version=19.11 -std=c++14 -fdelayed-template-parsing -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fseh-exceptions -fdiagnostics-show-option -fcolor-diagnostics -o - -x c++ -
clang -cc1 version 10.0.0 (clang-1000.11.45.5) default target x86_64-apple-darwin18.2.0
#include &quot;...&quot; search starts here:
#include &lt;...&gt; search starts here:
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.0/include
End of search list.
# 1 &quot;&lt;stdin&gt;&quot;
# 1 &quot;&lt;built-in&gt;&quot; 1
# 1 &quot;&lt;built-in&gt;&quot; 3
# 366 &quot;&lt;built-in&gt;&quot; 3
# 1 &quot;&lt;command line&gt;&quot; 1
# 1 &quot;&lt;built-in&gt;&quot; 2
# 1 &quot;&lt;stdin&gt;&quot; 2

We can obviously see that the XcodeDefault.xctoolchain/usr/lib/clang/10.0.0/include is not include the stdio.h, so that, preview build error is stdio.h not found.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6131</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-01-17 19:04:41 +0000</bug_when>
    <thetext>bug scrub: assign to Liming first.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9855</commentid>
    <comment_count>2</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2019-09-28 21:01:47 +0000</bug_when>
    <thetext>Duplicated with https://bugzilla.tianocore.org/show_bug.cgi?id=2046

*** This bug has been marked as a duplicate of bug 2046 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1413</bug_id>
          
          <creation_ts>2018-12-19 02:55:13 +0000</creation_ts>
          <short_desc>Redundant definitions in NetworkPkg</short_desc>
          <delta_ts>2019-01-14 22:41:43 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Aaron Li">aaron.li</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>NetworkPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5918</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2018-12-19 02:55:13 +0000</bug_when>
    <thetext>Uefi-aware compiler some redundant definitions in the NetworkPkg as below. We need to clean them.
(Please be aware that there might be false positives in the log. The Uefi-aware compiler currently only analyze the C code and has not supported the assemble code yet. So, if a function is only invoked by assemble code, the Uefi-aware compiler might miss it and wrongly report it as dead code. Please verify them carefully if the module have assemble code)


Unused global variable in file: NetworkPkg/Dhcp6Dxe/Dhcp6Impl.c
malldhcpserversaddress, line 25

Unused global variable in file: NetworkPkg/Application/IpsecConfig/IpSecConfig.c
mstringipsechelptokenid, line 31

Unused global variable in file: NetworkPkg/Application/VConfig/VConfig.c
mstringvconfighelptokenid, line 32

Unused global variable in file: NetworkPkg/IScsiDxe/IScsiConfig.c
mnumberofiscsidevices, line 19
miscsidevicelistupdated, line 18</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5938</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-12-20 19:40:22 +0000</bug_when>
    <thetext>Bug scrub: Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6085</commentid>
    <comment_count>2</comment_count>
    <who name="Aaron Li">aaron.li</who>
    <bug_when>2019-01-14 22:41:43 +0000</bug_when>
    <thetext>If remove these two global variables:

Unused global variable in file: NetworkPkg/Application/IpsecConfig/IpSecConfig.c
mstringipsechelptokenid, line 31

Unused global variable in file: NetworkPkg/Application/VConfig/VConfig.c
mstringvconfighelptokenid, line 32

The STR_IPSEC_CONFIG_HELP and STR_VCONFIG_HELP will not be referenced in the code. It will cause shell command &quot;ipsecconfig -?&quot; and &quot;vconfig -?&quot; not working.

The other two file has been fixed at:
https://github.com/tianocore/edk2/commit/44e5fa81e3c1d6d040f2a405211565b2cd81534f
https://github.com/tianocore/edk2/commit/44fc27b2bf02c32acfb99e16a32c3bd2c37010f6</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1530</bug_id>
          
          <creation_ts>2019-02-15 05:56:55 +0000</creation_ts>
          <short_desc>Adding the test progress indicator, estimate time and sort of watchdog mechanism for dealing test hang during UEFI SCT</short_desc>
          <delta_ts>2021-10-07 11:12:03 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Test</product>
          <component>UEFI-SCT</component>
          <version>Current</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Paul Yang">paul.yang</reporter>
          <assigned_to>supreeth.venkatesh</assigned_to>
          <cc>arvin.chen</cc>
    
    <cc>edhaya.chandran</cc>
    
    <cc>eric.jin</cc>
    
    <cc>gaojie</cc>
    
    <cc>paul.yang</cc>
    
    <cc>samer.el-haj-mahmoud</cc>
    
    <cc>supreeth.venkatesh</cc>
    
    <cc>xypron.glpk</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6373</commentid>
    <comment_count>0</comment_count>
    <who name="Paul Yang">paul.yang</who>
    <bug_when>2019-02-15 05:56:55 +0000</bug_when>
    <thetext>Could we ease of test execution and debugging for the system hangs that may be caused by HW/FW defects and triggered on the SCT test cases of repeated memory allocation and boot cycle by adding the test progress indicator or estimate time and sort of watchdog mechanism so those freezes won&apos;t block overnight test while running a full SCT spends at least more than 6 hours in a fully populated config and testers do not need to confuse too much whether the test is still alive or not in the future release?

Users target at IBVs, OEMs, ODMs, who have mentioned many people are extremely confusing about whether some tests such as MemoryAllocationServicesBBTest and ExitBootService functional tests that requires relatively long run-time and several power-cycles, are still in progress or are actually hanged or crashed as user just can see the frozen test prompt without any progress or ETA plus SCT takes massive test time (12 hours) so no people has time to stay with SUT to look after all the time. That literally has caused many test errors and disordered QA procedures. 

Thanks 

Paul</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6497</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-02-21 20:15:00 +0000</bug_when>
    <thetext>Assign to Stephano to drive discussion of this bug in the design meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6559</commentid>
    <comment_count>2</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:14:56 +0000</bug_when>
    <thetext>Present in edk2-test-stable201904.
This is a feature request which will be targeted for future releases on edk2-test.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6560</commentid>
    <comment_count>3</comment_count>
    <who name="">supreeth.venkatesh</who>
    <bug_when>2019-02-27 15:16:17 +0000</bug_when>
    <thetext>This is a Feature Request.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>15874</commentid>
    <comment_count>4</comment_count>
    <who name="Heinrich Schuchardt">xypron.glpk</who>
    <bug_when>2021-05-01 04:57:08 +0000</bug_when>
    <thetext>@Paul: Do you plan to provide patches or should this bug report be closed?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17136</commentid>
    <comment_count>5</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-02 10:20:18 +0000</bug_when>
    <thetext>Edhay to check with Paul Yang and update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17182</commentid>
    <comment_count>6</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-09-07 05:10:58 +0000</bug_when>
    <thetext>Discussed with Paul Yang. 
Updated information: This requirement was originally raised by AMI (Taiwan). The requirement was to add a progress indicator for every SCT test, especially the tests which block for few minutes.
Present the interest of AMI in the above requirement may be less. This may be difficult to implement. To be further discussed in edk2-test triage meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>17460</commentid>
    <comment_count>7</comment_count>
    <who name="Edhay">edhaya.chandran</who>
    <bug_when>2021-10-07 11:12:03 +0000</bug_when>
    <thetext>Closing the issue with agreement with the defect raiser.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1904</bug_id>
          
          <creation_ts>2019-06-11 21:22:08 +0000</creation_ts>
          <short_desc>Add FreeBSD as a supported platform</short_desc>
          <delta_ts>2019-11-14 09:50:56 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Process</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rebecca Cran">rebecca</reporter>
          <assigned_to name="Rebecca Cran">rebecca</assigned_to>
          <cc>afish</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
    
    <cc>quic_llindhol</cc>
    
    <cc>stephano</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7999</commentid>
    <comment_count>0</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-06-11 21:22:08 +0000</bug_when>
    <thetext>FreeBSD isn&apos;t currently a supported platform, though it works most of the time. A recent change to OpenSSL broke it, so I would like to have it added as an officially supported platform.

I can set up a Jenkins instance on bluestop.org to run continuous integration for FreeBSD, to get timely notifications of any breakages. As a FreeBSD committer I volunteer to be the main platform maintainer.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8008</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-06-12 04:45:38 +0000</bug_when>
    <thetext>I assume you have some downstream patches for building edk2 on FreeBSD. Can you provide a cumulative diffstat of those patches, below? I&apos;m asking mainly to see whether the changes are restricted to BaseTools (so that we can set the Package field on this BZ). Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8010</commentid>
    <comment_count>2</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-06-12 10:25:16 +0000</bug_when>
    <thetext>Until the recent OpenSSL changes, I&apos;d already pushed any changes upstream: to build on FreeBSD only required a set of symlinks in BaseTools/Bin/FreeBSD-amd64 .

I hope to work on fixing the OpenSSL breakage today, which will likely require changes to CryptoPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8050</commentid>
    <comment_count>3</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-06-13 20:29:42 +0000</bug_when>
    <thetext>I&apos;ll work on this. I&apos;m waiting for OpenSSL to tag the next 1.1.1 release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10430</commentid>
    <comment_count>4</comment_count>
    <who name="Rebecca Cran">rebecca</who>
    <bug_when>2019-11-14 09:50:56 +0000</bug_when>
    <thetext>EDK2 now builds on FreeBSD, and while I&apos;ll continue to occasionally test it to check it continues to build, I won&apos;t be maintaining a CI agent to provide the quick feedback if something causes it to stop working, so I&apos;ll close this as WONTFIX.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1814</bug_id>
          
          <creation_ts>2019-05-15 08:38:51 +0000</creation_ts>
          <short_desc>&quot;unusual&quot; QEMU guest RAM sizes cause ASSERT()s to fail in OvmfPkg/PlatformPei</short_desc>
          <delta_ts>2019-05-29 10:47:09 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1666941</see_also>
    
    <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1701710</see_also>
    
    <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1859</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>OvmfPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7561</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-15 08:38:51 +0000</bug_when>
    <thetext>(1) The following q35-specific assertion:

  ASSERT (TopOfLowRam &lt;= PciExBarBase);

from commit 7b8fe63561b4 (&quot;OvmfPkg: PlatformPei: enable PCIEXBAR (aka MMCONFIG / ECAM) on Q35&quot;, 2016-03-10) may fail if the guest RAM size falls in the (2048MB, 2816MB) interval (both boundaries exclusive).

(Currently, with master@a11d371ef660, the ASSERT is located at OvmfPkg/PlatformPei/Platform.c:190.)

This happens because, when working out the interface contract between QEMU and OVMF for PCIEXBAR placement [*], we missed that QEMU would place RAM above 2GB in guest-phys address space, if the RAM size fell into the above range.

[*] Re: [edk2] [PATCH 2/5] OvmfPkg: PlatformPei: enable PCIEXBAR
                           (aka MMCONFIG / ECAM) on Q35
    http://mid.mail-archive.com/1457340448.25423.43.camel@redhat.com

This issue can be fixed by programming the PCIEXBAR at 0xE000_0000 instead, in OvmfPkg/PlatformPei.


(2) The following assertion may fail on both i440fx and q35:

    //
    // Set memory range from the &quot;top of lower RAM&quot; (RAM below 4GB) to 4GB as
    // uncacheable
    //
    Status = MtrrSetMemoryAttribute (LowerMemorySize,
               SIZE_4GB - LowerMemorySize, CacheUncacheable);
    ASSERT_EFI_ERROR (Status);

from commit 79d274b8b6b1 (&quot;OvmfPkg: PlatformPei: invert MTRR setup in QemuInitializeRam()&quot;, 2015-06-26).

(Currently, with master@a11d371ef660, this ASSERT is located at OvmfPkg/PlatformPei/MemDetect.c:696.)

The failure is triggered when the integer expressing the uncacheable area size, namely

  (SIZE_4GB - LowerMemorySize)

has many bits set to 1. Any given MTRR may only cover an interval that is a whole power of two in size, so an area size with N bits set to 1 will require N MTRRs. But, dependent on (V)CPU type, the count of all MTRRs may be as low as 8.

This issue can be fixed by truncating the uncacheable area size to a whole power of two (masking out all bits except the most significant one in the area size), while keeping the end of the area glued to 4GB. This ensures that only 1 MTRR is needed for coverage.

As a harmless side-effect, because the base of the uncacheable area may be rounded up due to truncating its size, an (unused!) MMIO gap that is by-default marked as WB cacheable may be left between the 32-bit RAM and the 32-bit PCI MMIO aperture. This is harmless because said MMIO gap is not used for anything, and guest code has no reason to access it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7562</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-15 08:39:59 +0000</bug_when>
    <thetext>Patch series on the list:

[edk2-devel] [PATCH 0/4]
OvmfPkg/PlatformPei: fix two assertion failures with weird RAM sizes

http://mid.mail-archive.com/20190504000716.7525-1-lersek@redhat.com
https://edk2.groups.io/g/devel/message/39965</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7585</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-05-16 15:33:53 +0000</bug_when>
    <thetext>Fixed in commit range 3b7a897cd8e3..39b9a5ffe661.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1137</bug_id>
          <alias>CVE-2018-12183</alias>
          <creation_ts>2018-08-30 21:14:58 +0000</creation_ts>
          <short_desc>Unlimited FV Recursion</short_desc>
          <delta_ts>2019-08-01 15:44:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Security Issues</product>
          <component>Security Issue</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1126</dup_id>
          <see_also>https://bugzilla.tianocore.org/show_bug.cgi?id=1743</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ryan Ware">ryan.ware</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>eugene.rodionov</cc>
    
    <cc>jian.j.wang</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>UDK 2015</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2017</cf_releases_to_fix>
    
    <cf_releases_to_fix>UDK 2018</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4776</commentid>
    <comment_count>0</comment_count>
    <who name="Ryan Ware">ryan.ware</who>
    <bug_when>2018-08-30 21:14:58 +0000</bug_when>
    <thetext>A physical/local attacker can trigger an unlimited recursion of a certain C function implemented in UEFI FV parsing functionality what can lead to stack and heap corruption.
Exploitation of this vulnerability may used to get code execution at PEI phase and bypass chain-of-trust.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4806</commentid>
    <comment_count>1</comment_count>
    <who name="hhtian">hot.tian</who>
    <bug_when>2018-09-02 21:50:37 +0000</bug_when>
    <thetext>Assign to module owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4890</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-09 22:18:33 +0000</bug_when>
    <thetext>PEI stack guard feature is added at 0a0d5296e448fc350de1594c49b9c0deff7fad60</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4893</commentid>
    <comment_count>3</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-09 22:48:09 +0000</bug_when>
    <thetext>*** Bug 1126 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4895</commentid>
    <comment_count>4</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2018-09-09 22:51:10 +0000</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 1126 ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5510</commentid>
    <comment_count>5</comment_count>
    <who name="Eugene Rodionov">eugene.rodionov</who>
    <bug_when>2018-11-06 20:58:04 +0000</bug_when>
    <thetext>A physical/local attacker can trigger an unlimited recursion of a certain C function implemented in UEFI FV parsing functionality what can lead to stack and heap corruption.

Exploitation of this vulnerability may used to get code execution at PEI phase and bypass chain-of-trust.

The problematic code is located in MdeModulePkg\Core\Pei\FwVol\FwVol.c source file in routine ProcessSection. This routine is used to perform search of a target section in a firmware file system. In order to handle encapsulated sections (EFI_SECTION_COMPRESSION and EFI_SECTION_GUID_DEFINED) the routine recursively calls itself (see code Listing below). There are no constraints on the depth of the recursion. As a result an attacker by providing a specially crafted section has full control over depth of the recursion.


EFI_STATUS
ProcessSection (
  ...
  )
{
  ...
  while (ParsedLength &lt; SectionSize) {
    ...
    if (Section-&gt;Type == SectionType) {
    ...
    } else if ((Section-&gt;Type == EFI_SECTION_GUID_DEFINED) || (Section-&gt;Type == EFI_SECTION_COMPRESSION)) {
      SectionCached = FALSE;
      for (Index = 0; Index &lt; PrivateData-&gt;CacheSection.AllSectionCount; Index ++) {
        if (Section == PrivateData-&gt;CacheSection.Section[Index]) {
          ...
          TempAuthenticationStatus = 0;
          Status = ProcessSection (
                     PeiServices,
                     SectionType,
                     SectionInstance,
                     PpiOutput,
                     PpiOutputSize,
                     &amp;TempOutputBuffer,
                     &amp;TempAuthenticationStatus,
                     IsFfs3Fv
                   );
          if (!EFI_ERROR (Status)) {
            *OutputBuffer = TempOutputBuffer;
            *AuthenticationStatus = TempAuthenticationStatus | Authentication;
            return EFI_SUCCESS;
          }
        }
      }
 
      if (!SectionCached) {
        ...
        if (!EFI_ERROR (Status)) {
          ...
          TempAuthenticationStatus = 0;
          Status = ProcessSection (
                     PeiServices,
                     SectionType,
                     SectionInstance,
                     PpiOutput,
                     PpiOutputSize,
                     &amp;TempOutputBuffer,
                     &amp;TempAuthenticationStatus,
                     IsFfs3Fv
                   );
          if (!EFI_ERROR (Status)) {
            *OutputBuffer = TempOutputBuffer;
            *AuthenticationStatus = TempAuthenticationStatus | Authentication;
            return EFI_SUCCESS;
          }
        }
      }
    }
    ...
  return EFI_NOT_FOUND;
}

At PEI phase this vulnerability may be exploited to bypass chain-of-trust. By providing a specially crafted FV that isn&apos;t covered by Intel Bootguard protection an attacker is able to cause stack overflow and corrupt data structures located in the heap.


One of the interesting targets for an attacker can be an array of PPIs located at the bottom of the stack or PPIs data stored in the heap. By overwriting a pointer to a table with PPI&apos;s handlers an attacker can get code execution at PEI phase.

A PoC of an exploit doesn&apos;t achieve full code execution: in addition to overwriting a PPI&apos;s handler pointer the recursion also corrupts system data structures what leads to a crash (catastrophic error: attempts to dereference a NULL pointer). However, given sufficient amount of time we believe it would be possible to create an exploit featuring code execution at PEI phase.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7042</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-09 12:39:53 +0000</bug_when>
    <thetext>(1) The threat model seems to assume that the attacker has the ability to inject FVs into the PEI phase.

On platforms where the flash content is fixed and cannot be updated (because capsule updates, and other firmware updates from within the platform, are not supported), the unbounded recursion in ProcessSection() doesn&apos;t appear possible to exploit. Can you please confirm that?

In particular, in the OvmfPkg and ArmVirtPkg platforms, the FVs exposed to the PEI core are constructed through the platform FDF files -- and through no other means. Therefore I think that said platforms are not vulnerable, in practice, to this issue.


(2) I don&apos;t understand why this issue was &quot;fixed&quot; by the PEI Stack Guard feature (bug 1126). Stack &amp; heap guards are for unexpected situations / unexpected data. But recursion depth is something we can easily control programmatically:

The ProcessSection() function could have received an explicit parameter

  IN UINT16 Nesting

incremented at every recursive call, and checked against a new PCD at each entry. The PCD would most likely be fixed-at-build, or patchable-in-module. If the PCD is exceeded, the recursion is terminated with an error status. ProcessSection() can already return EFI_NOT_FOUND, and all call sites correctly check the return value.

The behavior is a lot less controllable when the PEI Stack Guard fires (no clean unwinding of the stack, and no clean returning to the outermost caller). Plus, in comparison to the above, the PEI Stack Guard is heavy-weight.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8698</commentid>
    <comment_count>7</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-01 15:44:20 +0000</bug_when>
    <thetext>The edk2 advisory at &lt;https://edk2-docs.gitbooks.io/security-advisory/content/unlimited-fv-recursion.html&gt; associates CVE-2018-12183 with bug 1126 and bug 1137, therefore I&apos;m aliasing this BZ to &quot;CVE-2018-12183&quot;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1762</bug_id>
          
          <creation_ts>2019-04-28 06:23:28 +0000</creation_ts>
          <short_desc>Error message is inappropriate  for conf case</short_desc>
          <delta_ts>2019-05-07 22:17:57 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhiju Fan">zhijux.fan</reporter>
          <assigned_to name="Zhiju Fan">zhijux.fan</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7323</commentid>
    <comment_count>0</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-04-28 06:23:28 +0000</bug_when>
    <thetext>Error message is inappropriate for conf case, eg. lack of ], in DEC file, :
[PcdsFixedAtBuild, PcdsPatchableInModule, PcdsDynamic, PcdsDynamicEx]
gEfiStructuredPcdPkgTokenSpaceGuid.Test3|{0x03,0x04,0x05}|TEST3[1|0x3{
     &lt;HeaderFiles&gt;
      Pcd/Test1.h
    &lt;Packages&gt;
      MdePkg/MdePkg.dec
      OvmfPkg/OvmfPkg.dec
  }

build failed, but error message is :
error 3000: Pcd datumtype used in DSC file is not the same as its declaration in DEC file.
 gEfiStructuredPcdPkgTokenSpaceGuid.Test3|{0x01,0x02,0x03}|TEST3|200</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7336</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-04-29 03:13:49 +0000</bug_when>
    <thetext>Zhiju will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7390</commentid>
    <comment_count>2</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-07 03:12:41 +0000</bug_when>
    <thetext>New content has been added to the error message.
Added error messages include the Dec entry for the failed Pcd 
and the contents of the DatumType</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7415</commentid>
    <comment_count>3</comment_count>
    <who name="Zhiju Fan">zhijux.fan</who>
    <bug_when>2019-05-07 22:17:57 +0000</bug_when>
    <thetext>fixed at 8b4b2fb9a1839f719a8a4045fefafa66ddc52e63</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1310</bug_id>
          
          <creation_ts>2018-11-07 21:13:40 +0000</creation_ts>
          <short_desc>[Shell] 1 possible null ptr deference issue in UefiShellLib</short_desc>
          <delta_ts>2018-11-07 21:25:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5534</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-07 21:13:40 +0000</bug_when>
    <thetext>StrStr(FullyQualifiedPath, L&quot;:&quot; ) at line 134 in UefiShellLib.c may return NULL when FullQualifiedPath doesn&apos;t contain &apos;:&apos;.
Directly deferencing the return pointer without NULL check is not proper.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5535</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-07 21:25:01 +0000</bug_when>
    <thetext>fixed in b46de5091</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1744</bug_id>
          
          <creation_ts>2019-04-23 18:47:46 +0000</creation_ts>
          <short_desc>Add SKL support to KabylakeOpenBoardPkg</short_desc>
          <delta_ts>2019-05-17 17:11:08 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2 Platforms</product>
          <component>KabylakeOpenBoardPkg</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kubacki">michael.a.kubacki</reporter>
          <assigned_to name="Prince">prince.agyeman</assigned_to>
          <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>Windows</cf_target_os>
          <cf_package>N/A</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7241</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kubacki">michael.a.kubacki</who>
    <bug_when>2019-04-23 18:47:46 +0000</bug_when>
    <thetext>This is an enhancement request to update KabylakeOpenBoardPkg to add support for Skylake. The support should be added on the same RVP3 board currently supported in KabylakeOpenBoardPkg.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7454</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-08 23:05:26 +0000</bug_when>
    <thetext>change to Confirmed status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7694</commentid>
    <comment_count>2</comment_count>
    <who name="Prince">prince.agyeman</who>
    <bug_when>2019-05-17 17:11:08 +0000</bug_when>
    <thetext>Verified that KabylakeRvp3 BIOS boots to Windows on the Skylake rvp3 board</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1353</bug_id>
          
          <creation_ts>2018-11-22 03:53:17 +0000</creation_ts>
          <short_desc>Update maintainers for Vlv2DeviceRefCodePkg and Vlv2TbltDevicePkg</short_desc>
          <delta_ts>2020-10-28 18:58:35 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zailiang Sun">zailiang.sun</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>david.wei</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>mang.guo</cc>
    
    <cc>mike.wu</cc>
    
    <cc>nobody</cc>
    
    <cc>yonghong.zhu</cc>
    
    <cc>zailiang.sun</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>Vlv2DeviceRefCodePkg</cf_package>
          
          <cf_documents>Other Document</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5683</commentid>
    <comment_count>0</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2018-11-22 03:53:17 +0000</bug_when>
    <thetext>The old maintainers (Wei, David and Guo, Mang) for the two edk2 pkgs are about to transfer to other projects in middle December and will no longer continue with the pkgs. Sun, Zailiang and Qian, Yi will be the new maintainers.

Zailiang had made a patch for the Maintainers.txt and send the patch to the edk2-devel mailling list.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5688</commentid>
    <comment_count>1</comment_count>
    <who name="Zailiang Sun">zailiang.sun</who>
    <bug_when>2018-11-22 04:12:29 +0000</bug_when>
    <thetext>BTW, Zailiang and Yi will take the ownership for the following edk2-platfroms as well. 

However, Zailiang and Yi do not have write access to the edk2 and edk2-platform repository. That is why we post comments here apply for write access to the repoes. 

https://github.com/tianocore/edk2-platforms/tree/devel-IntelAtomProcessorE3900
https://github.com/tianocore/edk2-platforms/tree/devel-MinnowBoardMax-UDK2017</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5720</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-29 01:42:38 +0000</bug_when>
    <thetext>the Maintainers.txt already be updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5721</commentid>
    <comment_count>3</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-29 01:45:56 +0000</bug_when>
    <thetext>assign to Mike to give Zailiang and Qian Yi access rights.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>14143</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2020-10-28 18:58:35 +0000</bug_when>
    <thetext>Access rights were granted.

Old issue that should have been closed before.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1219</bug_id>
          
          <creation_ts>2018-09-28 22:08:18 +0000</creation_ts>
          <short_desc>Tool build fail with vs2015 win7 64bit</short_desc>
          <delta_ts>2024-05-15 02:56:55 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>WONTFIX</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter>chengyongxi</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>stephano</cc>
    
    <cc>Wilson_Chen</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5155</commentid>
    <comment_count>0</comment_count>
      <attachid>222</attachid>
    <who name="">chengyongxi</who>
    <bug_when>2018-09-28 22:08:18 +0000</bug_when>
    <thetext>Created attachment 222
build devicepath fail

1.Download latest edk2 trunk code.
2.use vs2015 build the BaseTools.
3.toolsetup.bat rebuild
4.build will hang at devicepath build. see attached file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5388</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-10-25 09:18:33 +0000</bug_when>
    <thetext>Hi chengyongxi,

I couldn&apos;t reproduce this issue on my local. could you help to use latest edk2 master to have a try ? thanks.

or could you share me the detail step by step that you did , thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5517</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-07 02:39:47 +0000</bug_when>
    <thetext>I can&apos;t reproduce it on my local, need some more detail steps from submitter if he can reproduce it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6707</commentid>
    <comment_count>3</comment_count>
    <who name="">chengyongxi</who>
    <bug_when>2019-03-13 06:53:39 +0000</bug_when>
    <thetext>I download the latest code at 3/11. Use vs2015 still can not build the BaseTools.
Hang at build DevicePath.

I have an old code at 20180906. This code can build BaseTools successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6762</commentid>
    <comment_count>4</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-03-19 22:42:13 +0000</bug_when>
    <thetext>change to Bob to help on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8430</commentid>
    <comment_count>5</comment_count>
    <who name="Stephano Cetola">stephano</who>
    <bug_when>2019-07-11 20:55:46 +0000</bug_when>
    <thetext>Bug Triage: We only support building tools with the 32 bit compiler on Windows.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>222</attachid>
            <date>2018-09-28 22:08:18 +0000</date>
            <delta_ts>2018-09-28 22:08:18 +0000</delta_ts>
            <desc>build devicepath fail</desc>
            <filename>devicepath_fail.png</filename>
            <type>image/png</type>
            <size>114531</size>
            <attacher>chengyongxi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1206</bug_id>
          
          <creation_ts>2018-09-25 13:38:36 +0000</creation_ts>
          <short_desc>MdeModulePkg: XhciDxe: Exceptions occurring after executing XhcSetHsee function</short_desc>
          <delta_ts>2018-09-26 01:11:37 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Marcin Wojtas">mw</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5091</commentid>
    <comment_count>0</comment_count>
    <who name="Marcin Wojtas">mw</who>
    <bug_when>2018-09-25 13:38:36 +0000</bug_when>
    <thetext>After commit:
73dbd6a - &quot;MdeModulePkg XhciDxe: Set HSEE Bit if SERR# Enable Bit is set&quot;

Exceptions were observed after executing newly added XhcSetHsee routine, both on real Xhci PCIE cards and controllers supported as NonDiscoverableDevices, e.g.:
&quot;Synchronous Exception at 0x000000003F910AFC
PC 0x00003F910AFC (0x00003F908000+0x00008AFC) [ 0] DxeCore.dll
PC 0x00003F910AE0 (0x00003F908000+0x00008AE0) [ 0] DxeCore.dll
PC 0x00003F91BDF4 (0x00003F908000+0x00013DF4) [ 0] DxeCore.dll
PC 0x0000BF5BD000 (0x0000BF5AF000+0x0000E000) [ 1] XhciDxe.dll
PC 0xAFAFAFAFAFAFAFAF

Commenting out below section hides the issue:
//  Status = PciIo-&gt;Pci.Read (
//                        PciIo,
//                       EfiPciIoWidthUint16,
//                        PCI_COMMAND_OFFSET,
//                       sizeof (XhciCmd),
//                        &amp;XhciCmd
//                        );</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5096</commentid>
    <comment_count>1</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-25 20:38:52 +0000</bug_when>
    <thetext>Patch review is at https://lists.01.org/pipermail/edk2-devel/2018-September/030164.html. And patch has been pushed at e5cd809087e5710e019d2766fab13c59a2e2ac28.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5104</commentid>
    <comment_count>2</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-09-26 01:11:37 +0000</bug_when>
    <thetext>fixed by Marcin Wojtas &lt;mw@semihalf.com&gt; @ e5cd809087e5710e019d2766fab13c59a2e2ac28</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1803</bug_id>
          
          <creation_ts>2019-05-13 19:04:24 +0000</creation_ts>
          <short_desc>Binary EFI in INF&apos;s do not respect TARGET distinction</short_desc>
          <delta_ts>2019-05-16 20:34:06 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>649</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Matthew Carlson">macarl</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7514</commentid>
    <comment_count>0</comment_count>
    <who name="Matthew Carlson">macarl</who>
    <bug_when>2019-05-13 19:04:24 +0000</bug_when>
    <thetext>When attempting to include an EFI in an INF for inclusion into a platform, the |DEBUG and |RELEASE is not respected and both versions are included in the PE32 section of the FV. See the INF included below.

[Binaries.IA32]
  PE32|xx/DEBUG/IA32/yy.efi|DEBUG
  PE32|xx/RELEASE/IA32/zz.efi|RELEASE

In this case, it will just grab both. Changing the INF_VERSION seemed to have no effect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7532</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-14 12:24:03 +0000</bug_when>
    <thetext>seems it is duplicate with bug 649.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7598</commentid>
    <comment_count>2</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:34:06 +0000</bug_when>
    <thetext>duplicate with 649

*** This bug has been marked as a duplicate of bug 649 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1451</bug_id>
          
          <creation_ts>2019-01-11 16:59:36 +0000</creation_ts>
          <short_desc>ARM Page Table Generation Math is Buggy</short_desc>
          <delta_ts>2019-05-17 02:08:52 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Eugene Cohen">eugene</reporter>
          <assigned_to name="Ard Biesheuvel">ard.biesheuvel</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>ArmPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6059</commentid>
    <comment_count>0</comment_count>
    <who name="Eugene Cohen">eugene</who>
    <bug_when>2019-01-11 16:59:36 +0000</bug_when>
    <thetext>In December 2017 there was a patch to improve the ARM page table generation.

Logic was added to fix an issue, specifically:

    The second problem is that the loop in FillTranslationTable doesn&apos;t
    care about the PhysicalBase or the RemainLength and always substracts
    one section size from RemainLength.

Which was done by adding this construct:

    PageMapLength = MIN (RemainLength, TT_DESCRIPTOR_SECTION_SIZE) -
                          (PhysicalBase % TT_DESCRIPTOR_SECTION_SIZE);
    
          // Case: Physical address aligned on the Section Size (1MB) &amp;&amp; the length
          //       does not fill a section
          // Case: Physical address NOT aligned on the Section Size (1MB)
          PopulateLevel2PageTable (SectionEntry++, PhysicalBase, PageMapLength,
            MemoryRegion-&gt;Attributes);

This calculation is trying to figure out what length is left within the section so it doesn&apos;t exceed the section boundary.  But I think the logic is flawed.

Consider an example:
PhysicalBase = 0x38390000
RemainLength = 0x10000

and you get 0x10000 - 0x90000 which underflows.

See the original patch: https://lists.01.org/pipermail/edk2-devel/2017-December/019261.html
Reworked patch: https://lists.01.org/pipermail/edk2-devel/2017-December/019301.html
Integration: https://lists.01.org/pipermail/edk2-devel/2017-December/019302.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7605</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2019-05-16 20:41:19 +0000</bug_when>
    <thetext>Ard, please help on it. thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7609</commentid>
    <comment_count>2</comment_count>
    <who name="Ard Biesheuvel">ard.biesheuvel</who>
    <bug_when>2019-05-17 02:08:52 +0000</bug_when>
    <thetext>Fixed in 28ce4cb3590bc (&quot;ArmPkg/ArmMmuLib ARM: fix thinko in second level page table handling&quot;) (4 Jan 2019)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1296</bug_id>
          
          <creation_ts>2018-11-03 22:26:40 +0000</creation_ts>
          <short_desc>Unable to launch EmulatorPkg under X64 windows environment</short_desc>
          <delta_ts>2018-11-05 04:00:29 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="PREM">perry.prem</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>perry.prem</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5458</commentid>
    <comment_count>0</comment_count>
      <attachid>231</attachid>
    <who name="PREM">perry.prem</who>
    <bug_when>2018-11-03 22:26:40 +0000</bug_when>
    <thetext>Created attachment 231
Issue in launching EmulatorPkg for both x32 and x64

Able to build successfuly EmulatorPkg in windows environment. But not able to launch for both IA32 and X64.

Below is the configuration used,
 - EDK2 latest commit-93f9898 till 04-Nov-2018
 - VisualStudio 2015 compiler
 - EmulatorPkg in Ia32 and x64
 - Windows environment

Command used to build and launch,

IA32:
build -p EmulatorPkg\EmulatorPkg.dsc -t VS2017/VS2015x86 -D WIN_SEC_BUILD -a IA32    
cd Build\EmulatorIA32\DEBUG_VS2015x86\IA32\ &amp;&amp; WinHost.exe   

X64:
build -p EmulatorPkg\EmulatorPkg.dsc -t VS2017/VS2015x86 -D WIN_SEC_BUILD -a X64  
cd Build\EmulatorX64\DEBUG_VS2015x86\X64\ &amp;&amp; WinHost.exe  


Refer attachment:
Actual Result:

EDK II WIN Host Emulation Environment from http://www.tianocore.org/edk2/
  BootMode 0x00
  OS Emulator passing in 128 KB of temp RAM at 0x33f10000 to SEC
ERROR : Can not open Firmware Device File ../FV/FV_RECOVERY.fd (0xE).  Exiting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5499</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-11-05 03:38:00 +0000</bug_when>
    <thetext>assign to Ray to follow up.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5500</commentid>
    <comment_count>2</comment_count>
    <who name="PREM">perry.prem</who>
    <bug_when>2018-11-05 03:56:53 +0000</bug_when>
    <thetext>Now I&apos;m able to launch Emulator WinHost.exe

[Root Cause]
1. Earlier I was using UDK2018 and not the master project.
2. I was using below command to build. But this will only build WinHost.inf component not entire EmulatorPkg
build -p EmulatorPkg\EmulatorPkg.dsc -t VS2015x86 -D WIN_SEC_BUILD -a
&gt; X64 -m EmulatorPkg/Win/Host/WinHost.inf

[Solution]
1. Rebuild entire EmulatorPkg using below command instead of only one component
build -p EmulatorPkg\EmulatorPkg.dsc -t VS2015x86 -D WIN_SEC_BUILD -a
&gt; X64
2. Used below command to launch Emulator
cd Build\EmulatorX64\DEBUG_VS2015x86\X64\ &amp;&amp; WinHost.exe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5501</commentid>
    <comment_count>3</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-05 04:00:29 +0000</bug_when>
    <thetext>Perry, thanks for the promptly response!</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>231</attachid>
            <date>2018-11-03 22:26:40 +0000</date>
            <delta_ts>2018-11-03 22:26:40 +0000</delta_ts>
            <desc>Issue in launching EmulatorPkg for both x32 and x64</desc>
            <filename>Emulator_Issue.png</filename>
            <type>image/png</type>
            <size>83188</size>
            <attacher name="PREM">perry.prem</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1184</bug_id>
          
          <creation_ts>2018-09-17 23:00:41 +0000</creation_ts>
          <short_desc>An unused header file is linked in PciSegmentLib.h</short_desc>
          <delta_ts>2018-09-24 21:55:05 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>shenglei.zhang</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4996</commentid>
    <comment_count>0</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-17 23:00:41 +0000</bug_when>
    <thetext>Below is the reference:
  MdePkg\Library\UefiPciSegmentLibPciRootBridgeIo\PciSegmentLib.h

  #ifndef __DXE_PCI_SEGMENT_LIB__
  #define __DXE_PCI_SEGMENT_LIB__

- #include &lt;PiDxe.h&gt;     line 19

  #include &lt;Protocol/PciRootBridgeIo.h&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4997</commentid>
    <comment_count>1</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-17 23:02:58 +0000</bug_when>
    <thetext>Assigned to Shenglei&lt;shenglei.zhang@intel.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5079</commentid>
    <comment_count>2</comment_count>
    <who name="">shenglei.zhang</who>
    <bug_when>2018-09-24 21:55:05 +0000</bug_when>
    <thetext>Fixed at:
https://github.com/tianocore/edk2/commit/ca3e4f8ab82485edff2cfa7eeb87f71b4be38966</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1497</bug_id>
          
          <creation_ts>2019-01-28 23:51:44 +0000</creation_ts>
          <short_desc>Add specific sanity check for device path of type MEDIA_FILEPATH_DP</short_desc>
          <delta_ts>2019-02-21 21:28:44 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Wang, Jian J">jian.j.wang</reporter>
          <assigned_to name="Wang, Jian J">jian.j.wang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6223</commentid>
    <comment_count>0</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-01-28 23:51:44 +0000</bug_when>
    <thetext>The all implementations of IsDevicePathValid() of DevicePathLib in MdePkg don&apos;t check the string in the device path of type MEDIA_FILEPATH_DP against NULL terminator, which is required by UEFI spec.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6224</commentid>
    <comment_count>1</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-01-28 23:52:06 +0000</bug_when>
    <thetext>Take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6503</commentid>
    <comment_count>2</comment_count>
    <who name="Wang, Jian J">jian.j.wang</who>
    <bug_when>2019-02-21 21:28:44 +0000</bug_when>
    <thetext>Pushed @ 2f7a96d6ec13b292d6f31295f3195913921173e1
Reviewed @ https://lists.01.org/pipermail/edk2-devel/2019-February/036876.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1008</bug_id>
          
          <creation_ts>2018-07-11 17:02:26 +0000</creation_ts>
          <short_desc>centralize OpenFileByDevicePath() and fix its bugs</short_desc>
          <delta_ts>2018-08-16 14:13:01 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1003</dependson>
          <blocked>1074</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>roman.bacik</cc>
    
    <cc>vladimir.olovyannikov</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>MdeModulePkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
    
    <cf_package>NetworkPkg</cf_package>
    
    <cf_package>SecurityPkg</cf_package>
    
    <cf_package>ShellPkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4265</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-11 17:02:26 +0000</bug_when>
    <thetext>The OpenFileByDevicePath() function is currently (at commit c6a14de3ef30)
duplicated over the following modules:

- MdeModulePkg/Universal/Disk/RamDiskDxe [RamDiskFileExplorer.c]

- NetworkPkg/TlsAuthConfigDxe [TlsAuthConfigImpl.c]

- SecurityPkg/VariableAuthenticated/SecureBootConfigDxe
  [SecureBootConfigFileExplorer.c]

- ShellPkg/Library/UefiShellLib [UefiShellLib.c, as
  ShellOpenFileByDevicePath()]


Beyond the duplication, the function has the following bugs:

- Stale comment about &quot;SHELL_FILE_HANDLE&quot; near the end. This code comment is
  only meaningful in the ShellPkg definition of the function.

- A potentially mis-aligned device path node member
  (EFI_FILE_PROTOCOL.FilePath) is passed to the EFI_FILE_PROTOCOL.Open()
  function, which is forbidden by the UEFI spec.

  This issue has been reported separately for SecurityPkg as bug 1003.

  The issue was fixed in commit 0b6cb335fa82 (&quot;Fixed some alignment faults
  in IPF platform&quot;, 2013-01-25) in the ShellPkg definition of the function
  only.

- Resource leak (&quot;Handle1&quot;) if the devpath node type check fails at the top
  of the &quot;while&quot; loop. (Also if the re-alignment allocation fails in the
  ShellPkg definition of the function.)

- Bogus FilePath=NULL assignments. Those should be *FilePath=NULL.


Suggested corrections:

- Assign NULL to *FilePath by default, in preparation for failure.

- Invert the meanings of Handle1 and Handle2 in the &quot;while&quot; loop, and
  add an error handling label &quot;CloseHandle1&quot; at the end of the function.
  Jump to this label whenever Handle1 is valid and an error occurs.

- Fix the alignment issue by copying the pathname to a dynamic array,
  temporarily.

- Centralize the function as EfiOpenFileByDevicePath() in UefiLib (class
  header, and MdePkg instance).

- Rebase all four modules to the new UefiLib API. In the ShellPkg case,
  preserve the ShellOpenFileByDevicePath() function, only replace the part
  that extends from the &quot;use old shell method&quot; comment to the &quot;weak spot&quot;
  comment.


We will likely fix a subset of these problems in the SecurityPkg definition
of the function first (for bug 1003), and then continue working from there.
Setting a BZ dependency accordingly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4317</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-07-18 16:52:22 +0000</bug_when>
    <thetext>Posted
[edk2] [PATCH 0/6] UefiLib: centralize OpenFileByDevicePath() and fix its bugs
http://mid.mail-archive.com/20180718205043.17574-1-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2018-July/027253.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4505</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-03 08:17:34 +0000</bug_when>
    <thetext>Posted
[edk2] [PATCH v2 0/7] UefiLib: centralize OpenFileByDevicePath() and fix its bugs
http://mid.mail-archive.com/20180803121537.32123-1-lersek@redhat.com
https://lists.01.org/pipermail/edk2-devel/2018-August/027965.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4605</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-16 14:13:01 +0000</bug_when>
    <thetext>Fixed in 52047be02430..9becf2f0759e.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1112</bug_id>
          
          <creation_ts>2018-08-23 05:50:56 +0000</creation_ts>
          <short_desc>EmulatorPkg needs to support running in Windows to provide Nt32 similar environment</short_desc>
          <delta_ts>2018-08-27 03:21:24 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to name="Ray Ni">ray.ni</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>EmulatorPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4683</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-23 05:50:56 +0000</bug_when>
    <thetext>EmulatorPkg is created by Andrew Fish around year 2011. The purpose of this package is to abstract the OS-dependent layer and maximum share the OS-independent code between UnixPkg and Nt32Pkg. The UnixPkg was retired after EmulatorPkg/Unix was enabled. But we never enabled EmulatorPkg/Win.
This is a request to enable EmulatorPkg/Win.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4718</commentid>
    <comment_count>1</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-08-27 03:21:24 +0000</bug_when>
    <thetext>pushed @ 47c04c382eb5c024173f8b8d37536ca25f9f93c4..033949a810cd9cb4a604cf09af503459ea1d66dc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1314</bug_id>
          
          <creation_ts>2018-11-08 10:29:21 +0000</creation_ts>
          <short_desc>Remove IntelFrameworkModulePkg/Bds</short_desc>
          <delta_ts>2019-07-03 01:46:02 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ray Ni">ray.ni</reporter>
          <assigned_to>shenglei.zhang</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>hao.a.wu</cc>
    
    <cc>nobody</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5547</commentid>
    <comment_count>0</comment_count>
    <who name="Ray Ni">ray.ni</who>
    <bug_when>2018-11-08 10:29:21 +0000</bug_when>
    <thetext>It seems to me almost all platforms in edk2 repo are using MdeModulePkg/Bds. It&apos;s time to remove the following BDS components in IntelFrameworkModulePkg:
1. /Universal/BdsDxe
2. /Library/GenericBdsLib
3. /Library/PlatformBdsLibNull
4. /Include/Library/*.h

PCD:
  gEfiIntelFrameworkModulePkgTokenSpaceGuid.PcdBootlogoOnlyEnable
  gEfiIntelFrameworkModulePkgTokenSpaceGuid.PcdBootState
  gEfiIntelFrameworkModulePkgTokenSpaceGuid.PcdShellFile

GUID:
  gLastEnumLangGuid
  gHdBootDevicePathVariablGuid
  gBdsLibStringPackageGuid</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5585</commentid>
    <comment_count>1</comment_count>
    <who name="nobody">nobody</who>
    <bug_when>2018-11-14 01:28:41 +0000</bug_when>
    <thetext>Shenglei will work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8346</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-07-03 01:46:02 +0000</bug_when>
    <thetext>Resolved via commit:

https://github.com/tianocore/edk2/commit/aa7fc1c11c3d57d82842dbede50d064639671a98</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1656</bug_id>
          
          <creation_ts>2019-03-22 20:37:55 +0000</creation_ts>
          <short_desc>Update all Wiki pages for the BSD+Patent license change with SPDX identifiers</short_desc>
          <delta_ts>2019-04-19 00:18:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Documentation</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1373</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Kinney">michael.d.kinney</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>jordan.l.justen</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>michael.d.kinney</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>N/A</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          <cf_documents>Wiki Pages</cf_documents>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6896</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-03-22 20:37:55 +0000</bug_when>
    <thetext>Update Wiki pages to state that BSD+Patent is the preferred license for the EDK II project.  Update all example commit messages to remove the Contributed-under tag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7006</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-04-04 12:08:08 +0000</bug_when>
    <thetext>*** Bug 1681 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7121</commentid>
    <comment_count>2</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-12 18:55:13 +0000</bug_when>
    <thetext>Assign to owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7122</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-12 18:55:59 +0000</bug_when>
    <thetext>Patch emails sent for review

https://edk2.groups.io/g/devel/topic/wiki_patch_0_2_change/31070014
https://edk2.groups.io/g/devel/topic/wiki_patch_1_2_remove/31070015
https://edk2.groups.io/g/devel/topic/wiki_patch_2_2_change/31070016</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7132</commentid>
    <comment_count>4</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-15 16:58:18 +0000</bug_when>
    <thetext>Expand the number of places to fix to include the TianoCore web site
and the EDK II C Coding Standards Specification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7133</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-15 16:59:26 +0000</bug_when>
    <thetext>Website patch email for review

https://edk2.groups.io/g/devel/topic/website_patch_change/31192884

EDK II C Coding Standards Specification patch email for review

https://edk2.groups.io/g/devel/topic/edk2_ccodingstandardsspecification/31193035</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7208</commentid>
    <comment_count>6</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-19 00:11:53 +0000</bug_when>
    <thetext>EDK II C Coding Standards Specification patch V2 email for review

https://edk2.groups.io/g/devel/message/39258</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7210</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Kinney">michael.d.kinney</who>
    <bug_when>2019-04-19 00:18:00 +0000</bug_when>
    <thetext>Web Site commits:

https://github.com/tianocore/tianocore.github.io/commit/365ebb1b0cc43d9b89df89f24b2344acc40225b4


EDK II C Coding Standards Specification commits:

https://github.com/tianocore-docs/edk2-CCodingStandardsSpecification/commit/d096859f15b9cde19c230ac391ae21ee409af48c

Wiki Commits:

23198b5 Fix typo in link to BSD Plus Patent License page
5439443 Fix typo in link to BSD Plus Patent License page
6a26be5 Change preferred license of EDK II to BSD+Patent
ee27b0b Remove Contributed-under tags</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1131</bug_id>
          
          <creation_ts>2018-08-29 05:27:26 +0000</creation_ts>
          <short_desc>[Core] Handle multiple FV images in one FV file</short_desc>
          <delta_ts>2018-09-05 01:19:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="StarZeng">star.zeng</reporter>
          <assigned_to name="StarZeng">star.zeng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>star.zeng</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4738</commentid>
    <comment_count>0</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-08-29 05:27:26 +0000</bug_when>
    <thetext>PI spec and BaseTools supports to generate multiple FV images
in one FV file.
Core should be updated to handle multiple FV images in one FV file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4739</commentid>
    <comment_count>1</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-08-29 05:28:52 +0000</bug_when>
    <thetext>Take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4812</commentid>
    <comment_count>2</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-03 05:29:47 +0000</bug_when>
    <thetext>Fixed at https://github.com/tianocore/edk2/commit/0e042d0ad76157ac9bad17bb4e1ff2919ca0d8f4and https://github.com/tianocore/edk2/commit/e3b9ab433aaccffdcc71c4af286ac352d4ce7c20.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4852</commentid>
    <comment_count>3</comment_count>
    <who name="StarZeng">star.zeng</who>
    <bug_when>2018-09-05 01:19:15 +0000</bug_when>
    <thetext>https://github.com/tianocore/edk2/commit/8a204b2aca5a137651ba0665d4ea012d6241fb15 is for VS2012 build failure.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1677</bug_id>
          
          <creation_ts>2019-04-02 01:08:59 +0000</creation_ts>
          <short_desc>Update the debug code to support UINT64 print in CapsulePei</short_desc>
          <delta_ts>2019-04-16 21:03:21 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
    
    <cc>zhichao.gao</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6968</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-02 01:08:59 +0000</bug_when>
    <thetext>Some debug codes in CapsulePei use %x to print UINT64 data. That may make the output data lack of the upper 32 bit data. So change the %x to %lx for the 64 bit data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6969</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-02 01:09:40 +0000</bug_when>
    <thetext>Assign to the owner</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7149</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-04-16 21:03:21 +0000</bug_when>
    <thetext>Finished at:
https://github.com/tianocore/edk2/commit/85b01932765da8e913654c7fae826f51f41a6dd9
https://github.com/tianocore/edk2/commit/42d8be0eaac5e7e109f487d4e241847e815b077a</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1150</bug_id>
          
          <creation_ts>2018-09-05 01:27:24 +0000</creation_ts>
          <short_desc>No disable method for ACPI Table consistency checking and verbose data displaying</short_desc>
          <delta_ts>2018-09-06 03:42:48 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>1147</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="Wenyi.Jiang">wenyi.jiang</reporter>
          <assigned_to name="Michael Kinney">michael.d.kinney</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>yonghong.zhu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4857</commentid>
    <comment_count>0</comment_count>
    <who name="Wenyi.Jiang">wenyi.jiang</who>
    <bug_when>2018-09-05 01:27:24 +0000</bug_when>
    <thetext>+++++ lihaiyax 8/16/2018 11:14:13 PM

1.Boot to shell and execute command such as
acpiview; 
Acpiview –s APIC;  
Acpiview –c;
Acpiview –v;
Acpiview –h TRUE/ON/false/off;
2.Check ACPI Table information.
3.Log:
MADT                                 :
  Signature                          : APIC
  Length                             : 2812
  Revision                           : 3
  Checksum                           : 0xEA
  Oem ID                             : INTEL 
  Oem Table ID                       : TIANO   
  Oem Revision                       : 0x0
  Creator ID                         : MSFT
  Creator Revision                   : 0x1000013
  Local Interrupt Controller Address : 0xFEE00000
  Flags                              : 0x1
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8
ERROR: Unknown Interrupt Controller Structure, Type = 0, Length = 8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4868</commentid>
    <comment_count>1</comment_count>
    <who name="Yonghong Zhu">yonghong.zhu</who>
    <bug_when>2018-09-06 03:42:48 +0000</bug_when>
    <thetext>close it as duplicate with 1147.

*** This bug has been marked as a duplicate of bug 1147 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1986</bug_id>
          
          <creation_ts>2019-07-18 21:06:04 +0000</creation_ts>
          <short_desc>Basetools: Create &quot;.cache&quot; folder as early as possible</short_desc>
          <delta_ts>2019-07-24 21:05:10 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bob Feng">bob.c.feng</reporter>
          <assigned_to name="Bob Feng">bob.c.feng</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8482</commentid>
    <comment_count>0</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-07-18 21:06:04 +0000</bug_when>
    <thetext>Create &quot;Conf/.cache&quot; folder as early as possible so that the later code do need to check if it exits and then create it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8563</commentid>
    <comment_count>1</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-07-24 21:04:35 +0000</bug_when>
    <thetext>take the ownership</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8564</commentid>
    <comment_count>2</comment_count>
    <who name="Bob Feng">bob.c.feng</who>
    <bug_when>2019-07-24 21:05:10 +0000</bug_when>
    <thetext>fixed at SHA-1: 5f89bcc4604ea9e439039d873e34a8c06b47c707</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1797</bug_id>
          
          <creation_ts>2019-05-12 11:09:07 +0000</creation_ts>
          <short_desc>Extend the binary cache to support library cache</short_desc>
          <delta_ts>2019-08-27 18:33:46 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Tools</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Shi Steven">steven.shi</reporter>
          <assigned_to name="Shi Steven">steven.shi</assigned_to>
          <cc>christian.rodriguez</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>BaseTools</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7491</commentid>
    <comment_count>0</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-12 11:09:07 +0000</bug_when>
    <thetext>The library cache missing issue is the major gap for current binary cache, and have 25% extra time cost when rebuild the all module dependency libraries if cache miss happen. See 20190418 working note in https://github.com/shijunjing/edk2/wiki/Module-level-build-cache-enabling-in-edk2. The library cache is also the major difference between current Binary cache and Make Cache. So we can merge library cache support from Make cache into the binary cache, then don&apos;t need a separated Make cache.

After add the library cache support, we&apos;d better change the &quot;binary cache&quot; name to &quot;build cache&quot; directly. Because it will not only cache binary, but also library and FV in the future.


Add below patch can simply to extend the binary cache to save library .lib file as cache.

  diff --git a/BaseTools/Source/Python/AutoGen/AutoGen.py b/BaseTools/Source/Python/AutoGen/AutoGen.py
  index 31721a6f9f..e006a1c5ac 100644
  @@ -3906,6 +3908,12 @@ class ModuleAutoGen(AutoGen):
               ModuleFile = path.join(self.OutputDir, self.Name + &apos;.inf&apos;)
               if os.path.exists(ModuleFile):
                   shutil.copy2(ModuleFile, FileDir)
  +        else:
  +            OutputDir = self.OutputDir.replace(&apos;\\&apos;, &apos;/&apos;).strip(&apos;/&apos;)
  +            DebugDir = self.DebugDir.replace(&apos;\\&apos;, &apos;/&apos;).strip(&apos;/&apos;)
  +            for Item in self.CodaTargetList:
  +                File = Item.Target.Path.replace(&apos;\\&apos;, &apos;/&apos;).strip(&apos;/&apos;).replace(DebugDir, &apos;&apos;).replace(OutputDir, &apos;&apos;).strip(&apos;/&apos;)
  +                self.OutputFile.add(File)
           if not self.OutputFile:
               Ma = self.BuildDatabase[self.MetaFile, self.Arch, self.BuildTarget, self.ToolChain]
               self.OutputFile = Ma.Binaries</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7492</commentid>
    <comment_count>1</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-12 11:10:25 +0000</bug_when>
    <thetext>confirm and take it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7509</commentid>
    <comment_count>2</comment_count>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-13 08:09:48 +0000</bug_when>
    <thetext>Current problem is the cached .lib file is recovered before the library module AutoGen.h/AutoGen.c and makefile creation. So, even though fix the BZ 1742 issue (https://bugzilla.tianocore.org/show_bug.cgi?id=1742), the makefile time stamp is still always newer than the .lib file, which cause make will rebuild all the library files. In below code, the .lib is recovered in Ma.CanSkipbyHash(), but later on the library module makefile is created in Ma.CreateMakeFile(True), which cause the makefile timestamp is always newer than .lib file.

    def _BuildModule(self):
      ... ...
      for Module in Pa.Platform.Modules:
        ...
        Ma = ModuleAutoGen(Wa, Module, BuildTarget, ToolChain, Arch, self.PlatformFile)
        ...
        if Ma.CanSkipbyHash(): # recover the .lib file
            self.HashSkipModules.append(Ma)
            continue
                ...
                Ma.CreateCodeFile(True) # create the AutoGen.h/AutoGen.c
                    ...
                    Ma.CreateMakeFile(True) # create the makefile</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7576</commentid>
    <comment_count>3</comment_count>
      <attachid>323</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-16 01:19:37 +0000</bug_when>
    <thetext>Created attachment 323
Enable Library Cache</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7577</commentid>
    <comment_count>4</comment_count>
      <attachid>324</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-16 01:21:10 +0000</bug_when>
    <thetext>Created attachment 324
updated build.py file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7578</commentid>
    <comment_count>5</comment_count>
      <attachid>325</attachid>
    <who name="Shi Steven">steven.shi</who>
    <bug_when>2019-05-16 01:22:14 +0000</bug_when>
    <thetext>Created attachment 325
updated AutoGen.py file</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9297</commentid>
    <comment_count>6</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2019-08-27 18:33:46 +0000</bug_when>
    <thetext>Steven, why don&apos;t you close the BZ tickets that you solve? Why do others have to clean up after you?

This ticket been fixed in commit 3a0b998bf3b5 (&quot;BaseTools:Extend the binary cache to support library cache&quot;, 2019-05-31). Apparently.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>323</attachid>
            <date>2019-05-16 01:19:37 +0000</date>
            <delta_ts>2019-05-16 01:19:37 +0000</delta_ts>
            <desc>Enable Library Cache</desc>
            <filename>LibCache.patch</filename>
            <type>text/plain</type>
            <size>6160</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>324</attachid>
            <date>2019-05-16 01:21:10 +0000</date>
            <delta_ts>2019-05-16 01:21:10 +0000</delta_ts>
            <desc>updated build.py file</desc>
            <filename>build.py</filename>
            <type>text/plain</type>
            <size>122777</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>325</attachid>
            <date>2019-05-16 01:22:14 +0000</date>
            <delta_ts>2019-05-16 01:22:14 +0000</delta_ts>
            <desc>updated AutoGen.py file</desc>
            <filename>AutoGen.py</filename>
            <type>text/plain</type>
            <size>200725</size>
            <attacher name="Shi Steven">steven.shi</attacher>
            

          </attachment>
      

    </bug>
    <bug>
          <bug_id>1260</bug_id>
          
          <creation_ts>2018-10-18 02:35:16 +0000</creation_ts>
          <short_desc>[NvmExpressDxe] There is an assumption for NvmExpressPassThru() on Create I/O Completion/Submission Queue commands</short_desc>
          <delta_ts>2018-10-25 00:46:12 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5313</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-18 02:35:16 +0000</bug_when>
    <thetext>For the current implementation of NvmExpressPassThru() function, it has an
assumption that for Create I/O Completion Queue and Create I/O Submission
Queue commands, it depend on the caller to ensure that the data buffer needs to
support simultaneous access by both the processor and a PCI Bus Master. This
assumption is not documented in the UEFI spec nor the NVME spec.

Another fact is that, the current implementation only use the IO Completion/
Submission queues created internally by the NvmExpressDxe driver during the
controller initialization process. Any other IO queues created will not be
consumed by the driver. So the value is little to accept external IO queue
creation requests.

Hence, the above-mentioned assumption in NvmExpressPassThru() function can be
eliminated by not supporting external IO Completion/Submission queues creation
requests.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5314</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-18 02:35:37 +0000</bug_when>
    <thetext>Take this and will provide a patch for it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5384</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2018-10-25 00:46:12 +0000</bug_when>
    <thetext>Resolved via commit:
https://github.com/tianocore/edk2/commit/8411c9d5c4400f9d1d12a6593f5e6b99eb681357</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1583</bug_id>
          
          <creation_ts>2019-03-03 21:38:22 +0000</creation_ts>
          <short_desc>[SdMmcPciHcDxe] Add V3 mode 64-bit System Address Support for SDHC with version 3.00</short_desc>
          <delta_ts>2019-03-10 21:23:36 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>Tianocore Feature Requests</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hao Wu">hao.a.wu</reporter>
          <assigned_to name="Hao Wu">hao.a.wu</assigned_to>
          <cc>ard.biesheuvel</cc>
    
    <cc>ashishsingha</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>eugene</cc>
    
    <cc>hao.a.wu</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>MdeModulePkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6606</commentid>
    <comment_count>0</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-03 21:38:22 +0000</bug_when>
    <thetext>The current behavior of the SdMmcPciHcDxe driver when setting the PCI attribute EFI_PCI_IO_ATTRIBUTE_DUAL_ADDRESS_CYCLE is not proper:

&gt;    if (Private-&gt;Capability[Slot].SysBus64V3 == 0 &amp;&amp;
&gt;        Private-&gt;Capability[Slot].SysBus64V4 == 0) {
&gt;      Support64BitDma = FALSE;
&gt;    }

Since the current implementation of the driver only support the 64-bit System Address for V4 (but not V3), the above check should remove the &apos;SysBus64V3&apos; dependency.


Please note that, even before the commit:

&gt; SHA-1: b5547b9ce97e80c3127682a2a5d4b9bd14af353e
&gt; MdeModulePkg/SdMmcPciHcDxe: Add SDMMC HC v4 and above Support.

which brought the 64-bit System Address Support for V4, the behavior of the driver still had an issue. Since back then the driver was written in the way that only the 32b ADMA descriptor was supported, it should not set the DUAL_ADDRESS_CYCLE attribute at all.


A more detailed discussion for this issue can be referred at:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg52041.html
https://www.mail-archive.com/edk2-devel@lists.01.org/msg52030.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6625</commentid>
    <comment_count>1</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-05 21:27:25 +0000</bug_when>
    <thetext>Change this BZ tracker from a EDK2 bug fix to a feature request.

As stated in the previous description, it is improper for the driver to
check the V3 64-bit capability bit when only the V4 mode 64-bit System
Address is implemented. This will lead to buffers allocated that cannot be
DMAed for version 3.00 SDHC with V3 mode 64-bit System Address Support.

Thus, this BZ is updated to add the missing feature of the V3 mode 64-bit
System Address Support for version 3.00 SDHC to address the above issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6626</commentid>
    <comment_count>2</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-05 21:28:29 +0000</bug_when>
    <thetext>V1 patch is proposed by Ashish at:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg52048.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6673</commentid>
    <comment_count>3</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-10 21:22:24 +0000</bug_when>
    <thetext>V2 patch is proposed by Ashish at:
https://www.mail-archive.com/edk2-devel@lists.01.org/msg52192.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6674</commentid>
    <comment_count>4</comment_count>
    <who name="Hao Wu">hao.a.wu</who>
    <bug_when>2019-03-10 21:23:36 +0000</bug_when>
    <thetext>Request was addressed by Ashish Singhal via edk2 commit:

https://github.com/tianocore/edk2/commit/690d60c0ada5ff137c84982220b3fdd112697aa3</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1074</bug_id>
          
          <creation_ts>2018-08-03 06:53:52 +0000</creation_ts>
          <short_desc>don&apos;t distinguish EFI_FILE_MODE_CREATE in EfiOpenFileByDevicePath() / OpenMode</short_desc>
          <delta_ts>2018-08-22 04:44:00 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1008</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Laszlo Ersek">laszlo.ersek</reporter>
          <assigned_to name="Laszlo Ersek">laszlo.ersek</assigned_to>
          <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>laszlo.ersek</cc>
    
    <cc>ray.ni</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          <cf_release_observed>EDK II Master</cf_release_observed>
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFrameworkPkg</cf_package>
    
    <cf_package>MdePkg</cf_package>
          <cf_releases_to_fix>EDK II Master</cf_releases_to_fix>
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4504</commentid>
    <comment_count>0</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-03 06:53:52 +0000</bug_when>
    <thetext>While reviewing the v1 series linked in bug 1008 comment 1, Ray pointed out that EFI_FILE_MODE_CREATE in the &quot;OpenMode&quot; input parameter didn&apos;t need to be special-cased.

Because that change would not be a bugfix, but a performance / code-clarity improvement, we agreed to split it off to a separate BZ.

Mailing list references:
- https://lists.01.org/pipermail/edk2-devel/2018-July/027672.html
- https://lists.01.org/pipermail/edk2-devel/2018-July/027673.html
- https://lists.01.org/pipermail/edk2-devel/2018-July/027716.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4630</commentid>
    <comment_count>1</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-17 10:37:29 +0000</bug_when>
    <thetext>Addressed by patches #1 and #2 in

  [edk2] [PATCH 0/4]
  {Mde,IntelFramework,Network,UefiCpu}Pkg: roundup for BZs 1074, 1090, 1092

  https://lists.01.org/pipermail/edk2-devel/2018-August/028730.html
  http://mid.mail-archive.com/20180817143534.28393-1-lersek@redhat.com</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4663</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">laszlo.ersek</who>
    <bug_when>2018-08-22 04:44:00 +0000</bug_when>
    <thetext>Fixed by commits

&gt; 1 5dbc768f1cd9 MdePkg/UefiLib: don&apos;t special-case EFI_FILE_MODE_CREATE in OpenMode
&gt; 2 d00759b212e7 IntelFrameworkPkg/FrameworkUefiLib: don&apos;t special-case EFI_FILE_MODE_CREATE</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1477</bug_id>
          
          <creation_ts>2019-01-20 23:50:30 +0000</creation_ts>
          <short_desc>ECC tool report a coding style issue in IntelFsp2Pkg\Include\Ppi\FspmArchConfigPpi.h</short_desc>
          <delta_ts>2019-01-21 03:10:47 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>0</everconfirmed>
          <reporter name="dandanbi">dandan.bi</reporter>
          <assigned_to name="Chasel">chasel.chiu</assigned_to>
          <cc>chasel.chiu</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>IntelFsp2Pkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6152</commentid>
    <comment_count>0</comment_count>
    <who name="dandanbi">dandan.bi</who>
    <bug_when>2019-01-20 23:50:30 +0000</bug_when>
    <thetext>File:
IntelFsp2Pkg\Include\Ppi\FspmArchConfigPpi.h

Error:
Unknown doxygen command @copyright 
Only Doxygen commands &apos;@bug&apos;, &apos;@todo&apos;, &apos;@example&apos;, &apos;@file&apos;, &apos;@attention&apos;, &apos;@param&apos;, &apos;@post&apos;, &apos;@pre&apos;, &apos;@retval&apos;, &apos;@return&apos;, &apos;@sa&apos;, &apos;@since&apos;, &apos;@test&apos;, &apos;@note&apos;, &apos;@par&apos;, &apos;@endcode&apos;, &apos;@code&apos;, &apos;@{&apos;, &apos;@}&apos; are allowed to mark the code</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6157</commentid>
    <comment_count>1</comment_count>
    <who name="Chasel">chasel.chiu</who>
    <bug_when>2019-01-21 03:10:47 +0000</bug_when>
    <thetext>commit e3b8fd1185ea566e6a0caf1b940c4347f4a0adc5 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Chasel, Chiu &lt;chasel.chiu@intel.com&gt;
Date:   Mon Jan 21 13:43:58 2019 +0800

    IntelFsp2Pkg: Remove unused keyword in new PPI header

    REF: https://bugzilla.tianocore.org/show_bug.cgi?id=1477

    There was unused keyword added in FspmArchConfigPpi.h
    header block and should be removed.

    Cc: Nate DeSimone &lt;nathaniel.l.desimone@intel.com&gt;
    Cc: Star Zeng &lt;star.zeng@intel.com&gt;
    Contributed-under: TianoCore Contribution Agreement 1.1
    Signed-off-by: Chasel Chiu &lt;chasel.chiu@intel.com&gt;
    Reviewed-by: Star Zeng &lt;star.zeng@intel.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>1906</bug_id>
          
          <creation_ts>2019-06-12 02:00:47 +0000</creation_ts>
          <short_desc>Return a null in ShellPromptForResponse</short_desc>
          <delta_ts>2019-07-02 01:50:20 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>EDK2</product>
          <component>Code</component>
          <version>Current</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Lowest</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zhichao Gao">zhichao.gao</reporter>
          <assigned_to name="Zhichao Gao">zhichao.gao</assigned_to>
          <cc>bret.barkelew</cc>
    
    <cc>edk2+bugs+int+994+563148131503455288</cc>
    
    <cc>Michael.Turner</cc>
    
    <cc>nobody</cc>
    
    <cc>sean.brogan</cc>
          
          <cf_industrystandardspecifications>---</cf_industrystandardspecifications>
          <cf_branch></cf_branch>
          
          <cf_target_os>---</cf_target_os>
          <cf_package>ShellPkg</cf_package>
          
          

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8002</commentid>
    <comment_count>0</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-12 02:00:47 +0000</bug_when>
    <thetext>Substantial change for ShellPromptForResponse: set the output parameter &apos;Response&apos;(VOID **) to null to indicate the failure of the function not only depend on the returned status.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8003</commentid>
    <comment_count>1</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-06-12 02:01:18 +0000</bug_when>
    <thetext>take it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8317</commentid>
    <comment_count>2</comment_count>
    <who name="Zhichao Gao">zhichao.gao</who>
    <bug_when>2019-07-02 01:50:20 +0000</bug_when>
    <thetext>fixed at 21902410ad87aadd3a68ec7ecb4ee11594d9fcb0.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>