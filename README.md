ABOUT
=====
This is a tool to convert Bugzilla bug reports to GitHub Issue Tracker.

Converts Bugzilla emails to Github accounts, statuses to states,
Bugzilla components, priorities, severities, resolutions to GitHub labels.

Last updated: 2018-06-15 -- added support for deleted bugs (see below)


MANAGING CONFLICTS
------------------
The script deals with existing GitHub issues by renumbering Bugzilla
bug IDs.

Say, if there are already reported issues #1-10 on GitHub and there
are bugs #1-100 in Bugzilla. The script will leave untouched GitHub
issues #1-10, converts Bugzilla bugs #11-100 to GitHub issues #11-100
and then converts Bugzilla bugs #1-10 to GitHub issues #101-110.

At the end, for GitHub issues #1-10 script will add a comment, that
Bugzilla bugs #1-10 were renumbered to #101-110.


DELETED BUGS
------------
Github Issues Tracker allows to assign consecutive IDs only.
So bugzilla2github creates dummy issues in place of a deleted original
Bugzilla bugs.

Say, if there are bugs #1-10 in Bugzilla, then #20-30. The script will
import bugs #1-10 from Bugzilla, then will create dummy bug reports
to fill the IDs #11-19, and at the end will add the rest of Bugzilla
bugs #20-30.



QUICK START
===========
 1. Export Bugzilla issues into an XML file:
    - in Bugzilla select "Search"
    - select all statuses
    - at the very end click an XML icon
    - save the XML into a file

 2. Generate a GitHub access token:
    - on GitHub in top-right corner click on your avatar and then select "Settings"
    - in settings select "Developer settings"
    - select "Personal access tokens"
    - click "Generate new token"
    - type a token description, i.e. "bugzilla2github"
    - select "public_repo" to access just public repositories
    - save the generated token

 3. Dry-run the migration script and check all the warnings.
    **NOTE: Script dry-runs by default. No changes are posted to GitHub.**

    $ bugzilla2github -x export.xml -o github_owner -r github_repo -t token

<pre>
    Where:
      -x  source XML file (exported from Bugzilla)
      -o  destination GitHub owner
      -r  destination GitHub repo
      -t  generated GitHub access token
</pre>

 4. Run the migration script again and force the updates adding `-f`:

    $ bugzilla2github -x export.xml -o github_owner -r github_repo -t token -f

<pre>
    Where:
      -x  source XML file (exported from Bugzilla)
      -o  destination GitHub owner
      -r  destination GitHub repo
      -t  generated GitHub access token
      -f  force updates (i.e. post changes to GitHub)
</pre>


github2github
=============
github2github is a tool to copy GitHub Issues between repos/owners. Might be useful in some scenarios, when you first convert Bugzilla issues to a test repo and then copy them to a production repo.


DERIVATIVE TOOLS
================
The goal of this script is to provide easy to understand and debug
yet fully functional Bugzilla to Github Issues Tracker converter.

There are few tools based on this script. Each provides its
unique functionality.

Here is the list of tools based on this script you might find useful:

 * https://github.com/LibrePlan/bugzilla2github
 * https://github.com/erikmd/github-issues-import-api-tools
 * https://gist.github.com/Zimmi48/d923e52f64fe17c72852d9c148bfcdc6#file-bugzilla2github


EXAMPLE
=======
Dry-run:

    $ bugzilla2github -x export.xml -o berestovskyy -r bugzilla2github-demo -t TOKEN
    ===> Converting Bugzilla reports to GitHub Issues...
        Source XML file:    export.xml
        Dest. GitHub owner: berestovskyy
        Dest. GitHub repo:  bugzilla2github-demo
    WARNING: unable to convert email to GitHub login: email@example.org
    WARNING: unable to convert email to GitHub login: email@gmail.com
    WARNING: unable to convert component to GitHub labels: Other
    WARNING: unable to convert email to GitHub login: email2@example.org
    WARNING: unable to convert component to GitHub labels: ExampleComponent
    WARNING: unable to convert component to GitHub labels: features
    ===> Checking all the labels exist on GitHub...
        label 'enhancement' exists on GitHub
        label 'invalid' exists on GitHub
        label 'bug' exists on GitHub
    ===> Checking all the assignees exist on GitHub...
    ===> Adding Bugzilla reports on GitHub preserving IDs...
    Issue #1 already exists, postponing...
    Creating issue #2...
        appending a new issue on GitHub...
    Skipping POST... (use -f to force updates)
    Creating DUMMY issue #3 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating DUMMY issue #4 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating DUMMY issue #5 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating DUMMY issue #6 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating DUMMY issue #7 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating DUMMY issue #8 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating DUMMY issue #9 (in place of a deleted bug)...
        appending a new issue on GitHub...
    Creating issue #10...
        appending a new issue on GitHub...
    Done adding with 1 issues postponed.
    ===> Appending postponed Bugzilla reports on GitHub with new IDs...
    Checking issue #11 on GitHub...
        issue #11 does not exist, breaking...
    Appending postponed issue #1 on GitHub...
        appending a new issue on GitHub...
    ===> All done.


Post changes to GitHub:

    $ bugzilla2github -x export.xml -o berestovskyy -r bugzilla2github-demo -t TOKEN -f
    WARNING: the repo will be UPDATED! No backups, no undos!
    Press Ctrl+C within next 5 seconds to cancel the update:
    ===> Converting Bugzilla reports to GitHub Issues...
        Source XML file:    export.xml
        Dest. GitHub owner: berestovskyy
        Dest. GitHub repo:  bugzilla2github-demo
    WARNING: unable to convert email to GitHub login: email@example.org
    WARNING: unable to convert email to GitHub login: email@gmail.com
    WARNING: unable to convert component to GitHub labels: Other
    WARNING: unable to convert email to GitHub login: email2@example.org
    WARNING: unable to convert component to GitHub labels: ExampleComponent
    WARNING: unable to convert component to GitHub labels: features
    ===> Checking all the labels exist on GitHub...
        label 'enhancement' exists on GitHub
        label 'invalid' exists on GitHub
        label 'bug' exists on GitHub
    ===> Checking all the assignees exist on GitHub...
    ===> Adding Bugzilla reports on GitHub preserving IDs...
    Issue #1 already exists, postponing...
    Creating issue #2...
        appending a new issue on GitHub...
        updating issue #2 on GitHub...
    Creating DUMMY issue #3 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #3 on GitHub...
    Creating DUMMY issue #4 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #4 on GitHub...
    Creating DUMMY issue #5 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #5 on GitHub...
    Creating DUMMY issue #6 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #6 on GitHub...
    Creating DUMMY issue #7 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #7 on GitHub...
    Creating DUMMY issue #8 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #8 on GitHub...
    Creating DUMMY issue #9 (in place of a deleted bug)...
        appending a new issue on GitHub...
        updating issue #9 on GitHub...
    Creating issue #10...
        appending a new issue on GitHub...
    Done adding with 1 issues postponed.
    ===> Appending postponed Bugzilla reports on GitHub with new IDs...
    Checking issue #11 on GitHub...
        issue #11 does not exist, breaking...
    Appending postponed issue #1 on GitHub...
        appending a new issue on GitHub...
        renumbering issue #1 to #11...
        updating issue #11 on GitHub...
        adding a comment to original issue #1 on GitHub...
    ===> All done.


Final results
-------------
The results of the example run is available here:
https://github.com/berestovskyy/bugzilla2github-demo/issues
